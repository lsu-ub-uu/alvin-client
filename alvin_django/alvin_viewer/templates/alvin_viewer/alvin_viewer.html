{% extends 'base.html' %}

<!-- LOCALIZATION -->
{% load i18n %}

<!-- STATIC -->
{% load static %}

{% block head %}
<title>Alvin - {{ metadata.authority_names.0 }}</title>
{% endblock %}

{% block jshead %}
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
    crossorigin="">
  </script>
{% endblock %}

{% block content %}
<main class="flex flex-col flex-wrap min-h-svh w-full bg-alvinGrey pt-20 px-10 border-4 border-black"  x-data="{ activeTab: 0 }">
  
  {% load metadata_wrangler %}

  {% if record_type == 'alvin-place' %}
  <h1 class="text-5xl font-universalis font-bold mt-4 mb-4">
    {{ metadata.authority_names }}
  </h1>
  <div class="flex items-center mb-4">
      <img src="/static/img/authorityTypes/place.svg" alt="{%translate 'Kartnål' %}" class="w-6 h-6 mr-2">
      <span class="font-semibold">{% translate 'Plats' %}</span>
  </div>
  {% elif record_type == 'alvin-person' %}
  <h1 class="text-5xl font-universalis font-bold mt-4 mb-4">
    {{ metadata|alvin_person_title }}
  </h1>
  <div class="flex items-center mb-4">
      <img src="/static/img/authorityTypes/person.svg" alt="{%translate 'Person' %}" class="w-6 h-6 mr-2">
      <span class="font-semibold">{% translate 'Person' %}</span>
  </div>
  {% elif record_type == 'alvin-organisation' %}
  <div class="flex items-center mb-4">
      <img src="/static/img/authorityTypes/organisation.svg" alt="{%translate 'Grupp av personer' %}"
          class="w-6 h-6 mr-2">
      <span class="font-semibold">{% translate 'Organisation' %}</span>
  </div>
  {% elif record_type == 'alvin-work' %}
  <div class="flex items-center mb-4">
      <img src="/static/img/authorityTypes/work.svg" alt="{%translate 'Verksymbol' %}" class="w-6 h-6 mr-2">
      <span class="font-semibold">{% translate 'Verk' %}</span>
  </div>
  {% endif %}

  <nav class="flex flex-none flex-wrap justify-start w-full text-xl">
    <button @click="activeTab = 0" class="h-full w-44 max-sm:w-full p-4 text-center hover:bg-alvinGreen" :class="{ 'bg-alvinGreen': activeTab === 0, 'bg-gray-300': activeTab != 0 }">{% translate 'Översikt' %}</button>
    <button @click="activeTab = 1" class="h-full w-44 max-sm:w-full p-4 text-center hover:bg-alvinGreen" :class="{ 'bg-alvinGreen': activeTab === 1, 'bg-gray-300': activeTab != 1 }">{% translate 'All metadata' %}</button>
    {% if record_type != 'alvin-place' %}
    <button @click="activeTab = 2" class="h-full w-44 max-sm:w-full p-4 text-center hover:bg-alvinGreen" :class="{ 'bg-alvinGreen': activeTab === 2, 'bg-gray-300': activeTab != 2 }">{% translate 'Relaterat' %}</button>
    {% endif %}
  </nav>
  
  {% if record_type == 'alvin-place' %}
    {% include './_partials/_alvin_place.html' %}
  {% elif record_type == 'alvin-person' %}
    {% include './_partials/_alvin_person.html' %}
  {% endif %}

{% endblock %}

{% block jsbody %}
  <script defer src="{% static 'js/map.js' %}" 
    data-latitude="{{ metadata.latitude.0 }}"
    data-longitude="{{ metadata.longitude.0 }}">
  </script>
{% endblock %}