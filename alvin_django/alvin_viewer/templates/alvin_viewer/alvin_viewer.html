{% extends 'master.html' %}

{% load i18n static %}

{% block title %}Alvin - {{ metadata.main_title.display }}{{ metadata.authority_names.title }}{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
{% endblock %}

{% block jshead %}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="">
  </script>
{% endblock %}

{% block content %}

  <main
    class="min-h-screen w-full flex flex-col lg:flex-1 pt-4 pb-8 px-8"
    data-xdata="{ activeTab: 'overview' }">
    {% if value != None %}
    <a class="flex w-fit pb-2" href="{{ value }}">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="size-6">
        <title>{% translate 'Tillbaka till sökresultatet' %}</title>
        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
      </svg>
      <span class="pl-2 uppercase">{% translate 'Tillbaka till sökresultatet' %}</span>
    </a>
    {% endif %}
    {% if metadata.files %}
    <aside class="w-full h-[60vh] min-lg:h-[80vh]">
      <div class="w-full h-full" id="tify-viewer" data-manifest-url="{% url 'iiif_manifest' metadata.id %}"></div>
    </aside>
    <script type="module" src="{% static 'js/tify.js' %}"></script>
    {% endif %}
    <h1 class="text-2xl md:text-4xl font-bold pb-2">{{ metadata.main_title.display }}{{ metadata.authority_names.title }}</h1>
    {% include './_partials/_render_record_icon.html' %}

    <nav class="flex flex-wrap gap-x-1 justify-start text-xl text-black dark:text-white">
      <button data-xon.click="activeTab = 'overview'"
        class="dark:text-gray-200 cursor-pointer flex h-full p-2 text-center hover:bg-gray-700 hover:text-white"
        data-xbind.class="{ 'border-b-4 border-alvin-green': activeTab === 'overview' }">
        {% include './_icons/overview.svg' with class="h-7 w-7" %}
        <span class="max-sm:hidden">{% translate 'Översikt' %}</span>
      </button>
      <button data-xon.click="activeTab = 'all_metadata'"
        class="dark:text-gray-200 cursor-pointer flex h-full p-2 text-center hover:bg-gray-700 hover:text-white"
        data-xbind.class="{ 'border-b-4 border-alvin-green': activeTab === 'all_metadata' }">
        {% include './_icons/allmetadata.svg' with class="h-7 w-7" %}
        <span class="max-sm:hidden">{% translate 'All metadata' %}</span>
      </button>
      {% if metadata.components %}
      <button data-xon.click="activeTab = 'inventory'"
        class="dark:text-gray-200 cursor-pointer flex h-full p-2 text-center hover:bg-gray-700 hover:text-white"
        data-xbind.class="{ 'border-b-4 border-alvin-green': activeTab === 'inventory' }">
        {% include './_icons/inventory.svg' %}
        <span class="p:l max-sm:hidden">
          {% if metadata.type_of_resource.code == 'col' %}
            {% translate 'Arkivförteckning' %}
          {% else %}
            {% translate 'Innehållsbeskrivning' %}
          {% endif %}
        </span>
      </button>
      {% endif %}

      {% if has_related %}
      <button data-xon.click="activeTab = 'related'"
        class="dark:text-gray-200 cursor-pointer flex h-full p-2 text-center hover:bg-gray-700 hover:text-white"
        data-xbind.class="{ 'border-b-4 border-alvin-green': activeTab === 'related' }">
        {% include './_icons/related.svg' with class="h-7 w-7" %}
        <span class="max-sm:hidden">{% translate 'Relaterat' %}</span>
      </button>
      {% endif %}
    </nav>

    <!-- Metadata -->
    <dl class="block w-full border-y">
      {% if metadata.record_type == 'alvin-place' %}
      {% include './_partials/_alvin_place.html' %}
      {% elif metadata.record_type == 'alvin-person' %}
      {% include './_partials/_alvin_person.html' %}
      {% elif metadata.record_type == 'alvin-organisation' %}
      {% include './_partials/_alvin_organisation.html' %}
      {% elif metadata.record_type == 'alvin-location' %}
      {% include './_partials/_alvin_location.html' %}
      {% elif metadata.record_type == 'alvin-work' %}
      {% include './_partials/_alvin_work.html' %}
      {% elif metadata.record_type == 'alvin-record' %}
      {% include './_partials/_alvin_record.html' %}
      {% endif %}
    </dl>

    {% block jsbody %}
    {% endblock %}
  </main>

{% include './_partials/_search_related.html' %}

<script src="/static/js/clipboard.js-master/dist/clipboard.min.js"></script>
<script>
  var clipboard = new ClipboardJS('.btn');

  clipboard.on('success', function (e) {
    console.info('Action:', e.action);
    console.info('Text:', e.text);
    console.info('Trigger:', e.trigger);
  });

  clipboard.on('error', function (e) {
    console.info('Action:', e.action);
    console.info('Text:', e.text);
    console.info('Trigger:', e.trigger);
  });
</script>
{% endblock %}