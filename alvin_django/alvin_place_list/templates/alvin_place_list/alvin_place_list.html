{% extends 'base.html' %}

<!-- LOCALIZATION -->
{% load i18n %}

<!-- STATIC -->
{% load static %}

{% block head %}
    <title>{% translate 'Alvin - Platser' %}</title>
{% endblock %}

{% block content %}
<main class="flex bg-alvinGrey pt-20 px-10 border-4 border-black">
    
    <!-- Resultatlista  -->
    <section class="w-full" x-data="{showFilter: false}">
        
        <!-- Resultaträkning och filtreringsknapp -->
        <aside class="flex pb-4 justify-between">
            <p><strong>{% translate 'Träff' %} {{ metadata.fromNo.0 }}-{{ metadata.toNo.0 }} {% translate 'av' %} {{ metadata.totalNo.0 }}</strong></p>
            
            <button @click="showFilter = !showFilter" class="flex gap-1">
                <p class="font-universalis" x-show="!showFilter" x-cloak>Filter</p>
                <img src="/static/img/nav/filter-solid.svg" x-show="!showFilter" x-cloak>
                <img src="/static/img/nav/xmark.svg" x-show="showFilter" x-cloak>
            </button>
        </aside>

        <!-- Innehåll resultatlista -->
        <section class="flex gap-5">
            <!-- Lista över platser i träfflistan -->
            <ul class="w-full border-y-4 border-black space-y-1">
                {% for place in page_obj %}
                <a href='{{ place.id }}'>
                    <li class="flex justify-start my-1 p-4 bg-[#fcfcfc] hover:border-[#F2F4F8] hover:shadow-xl shadow-inner transition-shadow ease-in-out duration-150">
                        
                        <img class="w-7 h-full mr-2" src="/static/img/authorityTypes/place.svg" alt="Map marker">       
                        
                        <div class="flex gap-x-2 items-baseline">
                            <!-- Auktoriserat namn -->
                            {% for authority_name in place.authority_names %}
                            <p class="block max-sm:w-full text-alvinOrange text-xl font-semibold break-all">{{ authority_name.0 }}</p>
                            {% endfor %}
                            
                            <!-- Alternativa namn -->
                            {% if place.variant_names %}
                            <p class="block max-sm:w-full text-gray-600  break-all">
                                {% for variant_name, lang in place.variant_names %}
                                    {{variant_name }}
                                {% endfor %}
                            </p>    
                            {% endif %}
                        </div>
                    </li>
                </a>
                {% endfor %}
            </ul>
            
            <!-- Filtrering -->
            {% include './_partials/_filters.html' %}

        <!-- Paginering -->
        <nav class="pagination my-8">
            <ul class="flex items-center justify-center space-x-2">
                {% if page_obj.has_previous %}
                    <!-- First Page Button -->
                    <li>
                        <a href="?page=1{% if selected_country %}&country={{ selected_country }}{% endif %}"
                        class="font-universalis text-xl inline-flex items-center px-3 py-1 border-4 border-black bg-white hover:bg-gray-100 hover:text-gray-700"
                        aria-label="First page">
                        &laquo;
                        </a>
                    </li>
                    <!-- Previous Page Button -->
                    <li>
                        <a href="?page={{ page_obj.previous_page_number }}{% if selected_country %}&country={{ selected_country }}{% endif %}"
                        class="font-universalis text-xl inline-flex items-center px-3 py-1 border-4 border-black bg-white hover:bg-gray-100 hover:text-gray-700"
                        aria-label="Previous page">
                        &lsaquo;
                        </a>
                    </li>
                {% endif %}

                <!-- Page Numbers -->
                {% for num in page_obj.paginator.page_range %}
                    {% if page_obj.number == num %}
                        <!-- Current Page -->
                        <li>
                            <span class="font-universalis text-xl inline-flex items-center px-3 py-1 border-4 border-black text-white bg-alvinGreen">
                                {{ num }}
                            </span>
                        </li>
                    {% else %}
                        <!-- Other Pages -->
                        <li>
                            <a href="?page={{ num }}{% if selected_country %}&country={{ selected_country }}{% endif %}"
                            class="font-universalis text-xl inline-flex items-center px-3 py-1 border-4 border-black bg-white hover:bg-gray-100 hover:text-gray-700"
                            aria-label="Page {{ num }}">
                            {{ num }}
                            </a>
                        </li>
                    {% endif %}
                {% endfor %}

                {% if page_obj.has_next %}
                    <!-- Next Page Button -->
                    <li>
                        <a href="?page={{ page_obj.next_page_number }}{% if selected_country %}&country={{ selected_country }}{% endif %}"
                        class="font-universalis text-xl inline-flex items-center px-3 py-1 border-4 border-black bg-white hover:bg-gray-100 hover:text-gray-700"
                        aria-label="Next page">
                        &rsaquo;
                        </a>
                    </li>
                    <!-- Last Page Button -->
                    <li>
                        <a href="?page={{ page_obj.paginator.num_pages }}{% if selected_country %}&country={{ selected_country }}{% endif %}"
                        class="font-universalis text-xl inline-flex items-center px-3 py-1 border-4 border-black bg-white hover:bg-gray-100 hover:text-gray-700"
                        aria-label="Last page">
                        &raquo;
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>

        <!-- Höger sidomeny för filtrering -->
        
        </section>
    </div>
</main>
{% endblock %}