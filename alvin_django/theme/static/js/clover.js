(()=>{var FH=Object.create;var cm=Object.defineProperty;var BH=Object.getOwnPropertyDescriptor;var UH=Object.getOwnPropertyNames;var HH=Object.getPrototypeOf,zH=Object.prototype.hasOwnProperty;var Li=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Kb=(e,t)=>{for(var r in t)cm(e,r,{get:t[r],enumerable:!0})},lm=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of UH(t))!zH.call(e,i)&&i!==r&&cm(e,i,{get:()=>t[i],enumerable:!(n=BH(t,i))||n.enumerable});return e},ei=(e,t,r)=>(lm(e,t,"default"),r&&lm(r,t,"default")),so=(e,t,r)=>(r=e!=null?FH(HH(e)):{},lm(t||!e||!e.__esModule?cm(r,"default",{value:e,enumerable:!0}):r,e));var ow=Li(nt=>{"use strict";var Zl=Symbol.for("react.element"),$H=Symbol.for("react.portal"),GH=Symbol.for("react.fragment"),jH=Symbol.for("react.strict_mode"),VH=Symbol.for("react.profiler"),WH=Symbol.for("react.provider"),qH=Symbol.for("react.context"),KH=Symbol.for("react.forward_ref"),YH=Symbol.for("react.suspense"),XH=Symbol.for("react.memo"),QH=Symbol.for("react.lazy"),Yb=Symbol.iterator;function ZH(e){return e===null||typeof e!="object"?null:(e=Yb&&e[Yb]||e["@@iterator"],typeof e=="function"?e:null)}var Zb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jb=Object.assign,ew={};function ha(e,t,r){this.props=e,this.context=t,this.refs=ew,this.updater=r||Zb}ha.prototype.isReactComponent={};ha.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ha.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function tw(){}tw.prototype=ha.prototype;function dm(e,t,r){this.props=e,this.context=t,this.refs=ew,this.updater=r||Zb}var hm=dm.prototype=new tw;hm.constructor=dm;Jb(hm,ha.prototype);hm.isPureReactComponent=!0;var Xb=Array.isArray,rw=Object.prototype.hasOwnProperty,fm={current:null},nw={key:!0,ref:!0,__self:!0,__source:!0};function iw(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)rw.call(t,n)&&!nw.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Zl,type:e,key:s,ref:o,props:i,_owner:fm.current}}function JH(e,t){return{$$typeof:Zl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zl}function e3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Qb=/\/+/g;function um(e,t){return typeof e=="object"&&e!==null&&e.key!=null?e3(""+e.key):t.toString(36)}function xd(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Zl:case $H:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+um(o,0):n,Xb(i)?(r="",e!=null&&(r=e.replace(Qb,"$&/")+"/"),xd(i,t,r,"",function(c){return c})):i!=null&&(pm(i)&&(i=JH(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Qb,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",Xb(e))for(var a=0;a<e.length;a++){s=e[a];var l=n+um(s,a);o+=xd(s,t,r,l,i)}else if(l=ZH(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=n+um(s,a++),o+=xd(s,t,r,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Cd(e,t,r){if(e==null)return e;var n=[],i=0;return xd(e,n,"","",function(s){return t.call(r,s,i++)}),n}function t3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ir={current:null},Rd={transition:null},r3={ReactCurrentDispatcher:Ir,ReactCurrentBatchConfig:Rd,ReactCurrentOwner:fm};function sw(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:Cd,forEach:function(e,t,r){Cd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Cd(e,function(){t++}),t},toArray:function(e){return Cd(e,function(t){return t})||[]},only:function(e){if(!pm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=ha;nt.Fragment=GH;nt.Profiler=VH;nt.PureComponent=dm;nt.StrictMode=jH;nt.Suspense=YH;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r3;nt.act=sw;nt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Jb({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=fm.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)rw.call(t,l)&&!nw.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Zl,type:e.type,key:i,ref:s,props:n,_owner:o}};nt.createContext=function(e){return e={$$typeof:qH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:WH,_context:e},e.Consumer=e};nt.createElement=iw;nt.createFactory=function(e){var t=iw.bind(null,e);return t.type=e,t};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:KH,render:e}};nt.isValidElement=pm;nt.lazy=function(e){return{$$typeof:QH,_payload:{_status:-1,_result:e},_init:t3}};nt.memo=function(e,t){return{$$typeof:XH,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Rd.transition;Rd.transition={};try{e()}finally{Rd.transition=t}};nt.unstable_act=sw;nt.useCallback=function(e,t){return Ir.current.useCallback(e,t)};nt.useContext=function(e){return Ir.current.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e){return Ir.current.useDeferredValue(e)};nt.useEffect=function(e,t){return Ir.current.useEffect(e,t)};nt.useId=function(){return Ir.current.useId()};nt.useImperativeHandle=function(e,t,r){return Ir.current.useImperativeHandle(e,t,r)};nt.useInsertionEffect=function(e,t){return Ir.current.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Ir.current.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Ir.current.useMemo(e,t)};nt.useReducer=function(e,t,r){return Ir.current.useReducer(e,t,r)};nt.useRef=function(e){return Ir.current.useRef(e)};nt.useState=function(e){return Ir.current.useState(e)};nt.useSyncExternalStore=function(e,t,r){return Ir.current.useSyncExternalStore(e,t,r)};nt.useTransition=function(){return Ir.current.useTransition()};nt.version="18.3.1"});var fa=Li((Yme,aw)=>{"use strict";aw.exports=ow()});var vw=Li(Et=>{"use strict";function ym(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(0<Id(i,t))e[n]=t,e[r]=i,r=n;else break e}}function On(e){return e.length===0?null:e[0]}function Ld(e){if(e.length===0)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,s=i>>>1;n<s;){var o=2*(n+1)-1,a=e[o],l=o+1,c=e[l];if(0>Id(a,r))l<i&&0>Id(c,a)?(e[n]=c,e[l]=r,n=l):(e[n]=a,e[o]=r,n=o);else if(l<i&&0>Id(c,r))e[n]=c,e[l]=r,n=l;else break e}}return t}function Id(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}typeof performance=="object"&&typeof performance.now=="function"?(lw=performance,Et.unstable_now=function(){return lw.now()}):(gm=Date,cw=gm.now(),Et.unstable_now=function(){return gm.now()-cw});var lw,gm,cw,ti=[],us=[],n3=1,Sn=null,Er=3,Pd=!1,oo=!1,ec=!1,hw=typeof setTimeout=="function"?setTimeout:null,fw=typeof clearTimeout=="function"?clearTimeout:null,uw=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Em(e){for(var t=On(us);t!==null;){if(t.callback===null)Ld(us);else if(t.startTime<=e)Ld(us),t.sortIndex=t.expirationTime,ym(ti,t);else break;t=On(us)}}function Tm(e){if(ec=!1,Em(e),!oo)if(On(ti)!==null)oo=!0,bm(Sm);else{var t=On(us);t!==null&&wm(Tm,t.startTime-e)}}function Sm(e,t){oo=!1,ec&&(ec=!1,fw(tc),tc=-1),Pd=!0;var r=Er;try{for(Em(t),Sn=On(ti);Sn!==null&&(!(Sn.expirationTime>t)||e&&!mw());){var n=Sn.callback;if(typeof n=="function"){Sn.callback=null,Er=Sn.priorityLevel;var i=n(Sn.expirationTime<=t);t=Et.unstable_now(),typeof i=="function"?Sn.callback=i:Sn===On(ti)&&Ld(ti),Em(t)}else Ld(ti);Sn=On(ti)}if(Sn!==null)var s=!0;else{var o=On(us);o!==null&&wm(Tm,o.startTime-t),s=!1}return s}finally{Sn=null,Er=r,Pd=!1}}var Dd=!1,_d=null,tc=-1,pw=5,gw=-1;function mw(){return!(Et.unstable_now()-gw<pw)}function mm(){if(_d!==null){var e=Et.unstable_now();gw=e;var t=!0;try{t=_d(!0,e)}finally{t?Jl():(Dd=!1,_d=null)}}else Dd=!1}var Jl;typeof uw=="function"?Jl=function(){uw(mm)}:typeof MessageChannel<"u"?(vm=new MessageChannel,dw=vm.port2,vm.port1.onmessage=mm,Jl=function(){dw.postMessage(null)}):Jl=function(){hw(mm,0)};var vm,dw;function bm(e){_d=e,Dd||(Dd=!0,Jl())}function wm(e,t){tc=hw(function(){e(Et.unstable_now())},t)}Et.unstable_IdlePriority=5;Et.unstable_ImmediatePriority=1;Et.unstable_LowPriority=4;Et.unstable_NormalPriority=3;Et.unstable_Profiling=null;Et.unstable_UserBlockingPriority=2;Et.unstable_cancelCallback=function(e){e.callback=null};Et.unstable_continueExecution=function(){oo||Pd||(oo=!0,bm(Sm))};Et.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pw=0<e?Math.floor(1e3/e):5};Et.unstable_getCurrentPriorityLevel=function(){return Er};Et.unstable_getFirstCallbackNode=function(){return On(ti)};Et.unstable_next=function(e){switch(Er){case 1:case 2:case 3:var t=3;break;default:t=Er}var r=Er;Er=t;try{return e()}finally{Er=r}};Et.unstable_pauseExecution=function(){};Et.unstable_requestPaint=function(){};Et.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=Er;Er=e;try{return t()}finally{Er=r}};Et.unstable_scheduleCallback=function(e,t,r){var n=Et.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,e={id:n3++,callback:t,priorityLevel:e,startTime:r,expirationTime:i,sortIndex:-1},r>n?(e.sortIndex=r,ym(us,e),On(ti)===null&&e===On(us)&&(ec?(fw(tc),tc=-1):ec=!0,wm(Tm,r-n))):(e.sortIndex=i,ym(ti,e),oo||Pd||(oo=!0,bm(Sm))),e};Et.unstable_shouldYield=mw;Et.unstable_wrapCallback=function(e){var t=Er;return function(){var r=Er;Er=t;try{return e.apply(this,arguments)}finally{Er=r}}}});var Ew=Li((Qme,yw)=>{"use strict";yw.exports=vw()});var wC=Li(ln=>{"use strict";var i3=fa(),on=Ew();function pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CA=new Set,wc={};function To(e,t){Oa(e,t),Oa(e+"Capture",t)}function Oa(e,t){for(wc[e]=t,e=0;e<t.length;e++)CA.add(t[e])}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wm=Object.prototype.hasOwnProperty,s3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tw={},Sw={};function o3(e){return Wm.call(Sw,e)?!0:Wm.call(Tw,e)?!1:s3.test(e)?Sw[e]=!0:(Tw[e]=!0,!1)}function a3(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function l3(e,t,r,n){if(t===null||typeof t>"u"||a3(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pr(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pr[e]=new Pr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pr[t]=new Pr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pr[e]=new Pr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pr[e]=new Pr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pr[e]=new Pr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pr[e]=new Pr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pr[e]=new Pr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pr[e]=new Pr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pr[e]=new Pr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bv=/[\-:]([a-z])/g;function Uv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bv,Uv);pr[t]=new Pr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bv,Uv);pr[t]=new Pr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bv,Uv);pr[t]=new Pr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pr[e]=new Pr(e,1,!1,e.toLowerCase(),null,!1,!1)});pr.xlinkHref=new Pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pr[e]=new Pr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hv(e,t,r,n){var i=pr.hasOwnProperty(t)?pr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(l3(t,r,i,n)&&(r=null),n||i===null?o3(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var zi=i3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Od=Symbol.for("react.element"),ma=Symbol.for("react.portal"),va=Symbol.for("react.fragment"),zv=Symbol.for("react.strict_mode"),qm=Symbol.for("react.profiler"),xA=Symbol.for("react.provider"),RA=Symbol.for("react.context"),$v=Symbol.for("react.forward_ref"),Km=Symbol.for("react.suspense"),Ym=Symbol.for("react.suspense_list"),Gv=Symbol.for("react.memo"),hs=Symbol.for("react.lazy"),IA=Symbol.for("react.offscreen"),bw=Symbol.iterator;function rc(e){return e===null||typeof e!="object"?null:(e=bw&&e[bw]||e["@@iterator"],typeof e=="function"?e:null)}var Ft=Object.assign,Am;function uc(e){if(Am===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Am=t&&t[1]||""}return`
`+Am+e}var km=!1;function Cm(e,t){if(!e||km)return"";km=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{km=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?uc(e):""}function c3(e){switch(e.tag){case 5:return uc(e.type);case 16:return uc("Lazy");case 13:return uc("Suspense");case 19:return uc("SuspenseList");case 0:case 2:case 15:return e=Cm(e.type,!1),e;case 11:return e=Cm(e.type.render,!1),e;case 1:return e=Cm(e.type,!0),e;default:return""}}function Xm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case va:return"Fragment";case ma:return"Portal";case qm:return"Profiler";case zv:return"StrictMode";case Km:return"Suspense";case Ym:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case RA:return(e.displayName||"Context")+".Consumer";case xA:return(e._context.displayName||"Context")+".Provider";case $v:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gv:return t=e.displayName||null,t!==null?t:Xm(e.type)||"Memo";case hs:t=e._payload,e=e._init;try{return Xm(e(t))}catch{}}return null}function u3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xm(t);case 8:return t===zv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _A(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function d3(e){var t=_A(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nd(e){e._valueTracker||(e._valueTracker=d3(e))}function LA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=_A(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ch(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qm(e,t){var r=t.checked;return Ft({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ww(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Cs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function PA(e,t){t=t.checked,t!=null&&Hv(e,"checked",t,!1)}function Zm(e,t){PA(e,t);var r=Cs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Jm(e,t.type,r):t.hasOwnProperty("defaultValue")&&Jm(e,t.type,Cs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Aw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Jm(e,t,r){(t!=="number"||ch(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var dc=Array.isArray;function Ra(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Cs(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ev(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pe(91));return Ft({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(pe(92));if(dc(r)){if(1<r.length)throw Error(pe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Cs(r)}}function DA(e,t){var r=Cs(t.value),n=Cs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Cw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function OA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?OA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Md,NA=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Md=Md||document.createElement("div"),Md.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Md.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ac(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var pc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h3=["Webkit","ms","Moz","O"];Object.keys(pc).forEach(function(e){h3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pc[t]=pc[e]})});function MA(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||pc.hasOwnProperty(e)&&pc[e]?(""+t).trim():t+"px"}function FA(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=MA(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var f3=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rv(e,t){if(t){if(f3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pe(62))}}function nv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iv=null;function jv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sv=null,Ia=null,_a=null;function xw(e){if(e=$c(e)){if(typeof sv!="function")throw Error(pe(280));var t=e.stateNode;t&&(t=Fh(t),sv(e.stateNode,e.type,t))}}function BA(e){Ia?_a?_a.push(e):_a=[e]:Ia=e}function UA(){if(Ia){var e=Ia,t=_a;if(_a=Ia=null,xw(e),t)for(e=0;e<t.length;e++)xw(t[e])}}function HA(e,t){return e(t)}function zA(){}var xm=!1;function $A(e,t,r){if(xm)return e(t,r);xm=!0;try{return HA(e,t,r)}finally{xm=!1,(Ia!==null||_a!==null)&&(zA(),UA())}}function kc(e,t){var r=e.stateNode;if(r===null)return null;var n=Fh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(pe(231,t,typeof r));return r}var ov=!1;if(Fi)try{pa={},Object.defineProperty(pa,"passive",{get:function(){ov=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{ov=!1}var pa;function p3(e,t,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var gc=!1,uh=null,dh=!1,av=null,g3={onError:function(e){gc=!0,uh=e}};function m3(e,t,r,n,i,s,o,a,l){gc=!1,uh=null,p3.apply(g3,arguments)}function v3(e,t,r,n,i,s,o,a,l){if(m3.apply(this,arguments),gc){if(gc){var c=uh;gc=!1,uh=null}else throw Error(pe(198));dh||(dh=!0,av=c)}}function So(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function GA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rw(e){if(So(e)!==e)throw Error(pe(188))}function y3(e){var t=e.alternate;if(!t){if(t=So(e),t===null)throw Error(pe(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Rw(i),e;if(s===n)return Rw(i),t;s=s.sibling}throw Error(pe(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?e:t}function jA(e){return e=y3(e),e!==null?VA(e):null}function VA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=VA(e);if(t!==null)return t;e=e.sibling}return null}var WA=on.unstable_scheduleCallback,Iw=on.unstable_cancelCallback,E3=on.unstable_shouldYield,T3=on.unstable_requestPaint,jt=on.unstable_now,S3=on.unstable_getCurrentPriorityLevel,Vv=on.unstable_ImmediatePriority,qA=on.unstable_UserBlockingPriority,hh=on.unstable_NormalPriority,b3=on.unstable_LowPriority,KA=on.unstable_IdlePriority,Dh=null,si=null;function w3(e){if(si&&typeof si.onCommitFiberRoot=="function")try{si.onCommitFiberRoot(Dh,e,void 0,(e.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:C3,A3=Math.log,k3=Math.LN2;function C3(e){return e>>>=0,e===0?32:31-(A3(e)/k3|0)|0}var Fd=64,Bd=4194304;function hc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fh(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=hc(a):(s&=o,s!==0&&(n=hc(s)))}else o=r&~i,o!==0?n=hc(o):s!==0&&(n=hc(s));if(n===0)return 0;if(t!==0&&t!==n&&(t&i)===0&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Un(t),i=1<<r,n|=e[r],t&=~i;return n}function x3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R3(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Un(s),a=1<<o,l=i[o];l===-1?((a&r)===0||(a&n)!==0)&&(i[o]=x3(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function lv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function YA(){var e=Fd;return Fd<<=1,(Fd&4194240)===0&&(Fd=64),e}function Rm(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Hc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Un(t),e[t]=r}function I3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Un(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function Wv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Un(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var lt=0;function XA(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var QA,qv,ZA,JA,ek,cv=!1,Ud=[],ys=null,Es=null,Ts=null,Cc=new Map,xc=new Map,ps=[],_3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _w(e,t){switch(e){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Cc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xc.delete(t.pointerId)}}function nc(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=$c(t),t!==null&&qv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function L3(e,t,r,n,i){switch(t){case"focusin":return ys=nc(ys,e,t,r,n,i),!0;case"dragenter":return Es=nc(Es,e,t,r,n,i),!0;case"mouseover":return Ts=nc(Ts,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Cc.set(s,nc(Cc.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,xc.set(s,nc(xc.get(s)||null,e,t,r,n,i)),!0}return!1}function tk(e){var t=co(e.target);if(t!==null){var r=So(t);if(r!==null){if(t=r.tag,t===13){if(t=GA(r),t!==null){e.blockedOn=t,ek(e.priority,function(){ZA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=uv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);iv=n,r.target.dispatchEvent(n),iv=null}else return t=$c(r),t!==null&&qv(t),e.blockedOn=r,!1;t.shift()}return!0}function Lw(e,t,r){Jd(e)&&r.delete(t)}function P3(){cv=!1,ys!==null&&Jd(ys)&&(ys=null),Es!==null&&Jd(Es)&&(Es=null),Ts!==null&&Jd(Ts)&&(Ts=null),Cc.forEach(Lw),xc.forEach(Lw)}function ic(e,t){e.blockedOn===t&&(e.blockedOn=null,cv||(cv=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,P3)))}function Rc(e){function t(i){return ic(i,e)}if(0<Ud.length){ic(Ud[0],e);for(var r=1;r<Ud.length;r++){var n=Ud[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ys!==null&&ic(ys,e),Es!==null&&ic(Es,e),Ts!==null&&ic(Ts,e),Cc.forEach(t),xc.forEach(t),r=0;r<ps.length;r++)n=ps[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ps.length&&(r=ps[0],r.blockedOn===null);)tk(r),r.blockedOn===null&&ps.shift()}var La=zi.ReactCurrentBatchConfig,ph=!0;function D3(e,t,r,n){var i=lt,s=La.transition;La.transition=null;try{lt=1,Kv(e,t,r,n)}finally{lt=i,La.transition=s}}function O3(e,t,r,n){var i=lt,s=La.transition;La.transition=null;try{lt=4,Kv(e,t,r,n)}finally{lt=i,La.transition=s}}function Kv(e,t,r,n){if(ph){var i=uv(e,t,r,n);if(i===null)Nm(e,t,n,gh,r),_w(e,n);else if(L3(i,e,t,r,n))n.stopPropagation();else if(_w(e,n),t&4&&-1<_3.indexOf(e)){for(;i!==null;){var s=$c(i);if(s!==null&&QA(s),s=uv(e,t,r,n),s===null&&Nm(e,t,n,gh,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Nm(e,t,n,null,r)}}var gh=null;function uv(e,t,r,n){if(gh=null,e=jv(n),e=co(e),e!==null)if(t=So(e),t===null)e=null;else if(r=t.tag,r===13){if(e=GA(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gh=e,null}function rk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S3()){case Vv:return 1;case qA:return 4;case hh:case b3:return 16;case KA:return 536870912;default:return 16}default:return 16}}var ms=null,Yv=null,eh=null;function nk(){if(eh)return eh;var e,t=Yv,r=t.length,n,i="value"in ms?ms.value:ms.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return eh=i.slice(e,1<n?1-n:void 0)}function th(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hd(){return!0}function Pw(){return!1}function an(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hd:Pw,this.isPropagationStopped=Pw,this}return Ft(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hd)},persist:function(){},isPersistent:Hd}),t}var za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xv=an(za),zc=Ft({},za,{view:0,detail:0}),N3=an(zc),Im,_m,sc,Oh=Ft({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sc&&(sc&&e.type==="mousemove"?(Im=e.screenX-sc.screenX,_m=e.screenY-sc.screenY):_m=Im=0,sc=e),Im)},movementY:function(e){return"movementY"in e?e.movementY:_m}}),Dw=an(Oh),M3=Ft({},Oh,{dataTransfer:0}),F3=an(M3),B3=Ft({},zc,{relatedTarget:0}),Lm=an(B3),U3=Ft({},za,{animationName:0,elapsedTime:0,pseudoElement:0}),H3=an(U3),z3=Ft({},za,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$3=an(z3),G3=Ft({},za,{data:0}),Ow=an(G3),j3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=W3[e])?!!t[e]:!1}function Qv(){return q3}var K3=Ft({},zc,{key:function(e){if(e.key){var t=j3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=th(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?V3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qv,charCode:function(e){return e.type==="keypress"?th(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?th(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Y3=an(K3),X3=Ft({},Oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nw=an(X3),Q3=Ft({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qv}),Z3=an(Q3),J3=Ft({},za,{propertyName:0,elapsedTime:0,pseudoElement:0}),e4=an(J3),t4=Ft({},Oh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),r4=an(t4),n4=[9,13,27,32],Zv=Fi&&"CompositionEvent"in window,mc=null;Fi&&"documentMode"in document&&(mc=document.documentMode);var i4=Fi&&"TextEvent"in window&&!mc,ik=Fi&&(!Zv||mc&&8<mc&&11>=mc),Mw=" ",Fw=!1;function sk(e,t){switch(e){case"keyup":return n4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ok(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ya=!1;function s4(e,t){switch(e){case"compositionend":return ok(t);case"keypress":return t.which!==32?null:(Fw=!0,Mw);case"textInput":return e=t.data,e===Mw&&Fw?null:e;default:return null}}function o4(e,t){if(ya)return e==="compositionend"||!Zv&&sk(e,t)?(e=nk(),eh=Yv=ms=null,ya=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ik&&t.locale!=="ko"?null:t.data;default:return null}}var a4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!a4[e.type]:t==="textarea"}function ak(e,t,r,n){BA(n),t=mh(t,"onChange"),0<t.length&&(r=new Xv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var vc=null,Ic=null;function l4(e){yk(e,0)}function Nh(e){var t=Sa(e);if(LA(t))return e}function c4(e,t){if(e==="change")return t}var lk=!1;Fi&&(Fi?($d="oninput"in document,$d||(Pm=document.createElement("div"),Pm.setAttribute("oninput","return;"),$d=typeof Pm.oninput=="function"),zd=$d):zd=!1,lk=zd&&(!document.documentMode||9<document.documentMode));var zd,$d,Pm;function Uw(){vc&&(vc.detachEvent("onpropertychange",ck),Ic=vc=null)}function ck(e){if(e.propertyName==="value"&&Nh(Ic)){var t=[];ak(t,Ic,e,jv(e)),$A(l4,t)}}function u4(e,t,r){e==="focusin"?(Uw(),vc=t,Ic=r,vc.attachEvent("onpropertychange",ck)):e==="focusout"&&Uw()}function d4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nh(Ic)}function h4(e,t){if(e==="click")return Nh(t)}function f4(e,t){if(e==="input"||e==="change")return Nh(t)}function p4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zn=typeof Object.is=="function"?Object.is:p4;function _c(e,t){if(zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Wm.call(t,i)||!zn(e[i],t[i]))return!1}return!0}function Hw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zw(e,t){var r=Hw(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hw(r)}}function uk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dk(){for(var e=window,t=ch();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ch(e.document)}return t}function Jv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function g4(e){var t=dk(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&uk(r.ownerDocument.documentElement,r)){if(n!==null&&Jv(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=zw(r,s);var o=zw(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var m4=Fi&&"documentMode"in document&&11>=document.documentMode,Ea=null,dv=null,yc=null,hv=!1;function $w(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;hv||Ea==null||Ea!==ch(n)||(n=Ea,"selectionStart"in n&&Jv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yc&&_c(yc,n)||(yc=n,n=mh(dv,"onSelect"),0<n.length&&(t=new Xv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ea)))}function Gd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ta={animationend:Gd("Animation","AnimationEnd"),animationiteration:Gd("Animation","AnimationIteration"),animationstart:Gd("Animation","AnimationStart"),transitionend:Gd("Transition","TransitionEnd")},Dm={},hk={};Fi&&(hk=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Mh(e){if(Dm[e])return Dm[e];if(!Ta[e])return e;var t=Ta[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in hk)return Dm[e]=t[r];return e}var fk=Mh("animationend"),pk=Mh("animationiteration"),gk=Mh("animationstart"),mk=Mh("transitionend"),vk=new Map,Gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rs(e,t){vk.set(e,t),To(t,[e])}for(jd=0;jd<Gw.length;jd++)Vd=Gw[jd],jw=Vd.toLowerCase(),Vw=Vd[0].toUpperCase()+Vd.slice(1),Rs(jw,"on"+Vw);var Vd,jw,Vw,jd;Rs(fk,"onAnimationEnd");Rs(pk,"onAnimationIteration");Rs(gk,"onAnimationStart");Rs("dblclick","onDoubleClick");Rs("focusin","onFocus");Rs("focusout","onBlur");Rs(mk,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);To("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));To("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));To("onBeforeInput",["compositionend","keypress","textInput","paste"]);To("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));To("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));To("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v4=new Set("cancel close invalid load scroll toggle".split(" ").concat(fc));function Ww(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,v3(n,t,void 0,e),e.currentTarget=null}function yk(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Ww(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Ww(i,a,c),s=l}}}if(dh)throw e=av,dh=!1,av=null,e}function xt(e,t){var r=t[vv];r===void 0&&(r=t[vv]=new Set);var n=e+"__bubble";r.has(n)||(Ek(t,e,2,!1),r.add(n))}function Om(e,t,r){var n=0;t&&(n|=4),Ek(r,e,n,t)}var Wd="_reactListening"+Math.random().toString(36).slice(2);function Lc(e){if(!e[Wd]){e[Wd]=!0,CA.forEach(function(r){r!=="selectionchange"&&(v4.has(r)||Om(r,!1,e),Om(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wd]||(t[Wd]=!0,Om("selectionchange",!1,t))}}function Ek(e,t,r,n){switch(rk(t)){case 1:var i=D3;break;case 4:i=O3;break;default:i=Kv}r=i.bind(null,t,r,e),i=void 0,!ov||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Nm(e,t,r,n,i){var s=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=co(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}$A(function(){var c=s,u=jv(r),d=[];e:{var h=vk.get(e);if(h!==void 0){var f=Xv,p=e;switch(e){case"keypress":if(th(r)===0)break e;case"keydown":case"keyup":f=Y3;break;case"focusin":p="focus",f=Lm;break;case"focusout":p="blur",f=Lm;break;case"beforeblur":case"afterblur":f=Lm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Dw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=F3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Z3;break;case fk:case pk:case gk:f=H3;break;case mk:f=e4;break;case"scroll":f=N3;break;case"wheel":f=r4;break;case"copy":case"cut":case"paste":f=$3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Nw}var g=(t&4)!==0,v=!g&&e==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var y=c,E;y!==null;){E=y;var S=E.stateNode;if(E.tag===5&&S!==null&&(E=S,m!==null&&(S=kc(y,m),S!=null&&g.push(Pc(y,S,E)))),v)break;y=y.return}0<g.length&&(h=new f(h,p,null,r,u),d.push({event:h,listeners:g}))}}if((t&7)===0){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&r!==iv&&(p=r.relatedTarget||r.fromElement)&&(co(p)||p[Bi]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=r.relatedTarget||r.toElement,f=c,p=p?co(p):null,p!==null&&(v=So(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=Dw,S="onMouseLeave",m="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=Nw,S="onPointerLeave",m="onPointerEnter",y="pointer"),v=f==null?h:Sa(f),E=p==null?h:Sa(p),h=new g(S,y+"leave",f,r,u),h.target=v,h.relatedTarget=E,S=null,co(u)===c&&(g=new g(m,y+"enter",p,r,u),g.target=E,g.relatedTarget=v,S=g),v=S,f&&p)t:{for(g=f,m=p,y=0,E=g;E;E=ga(E))y++;for(E=0,S=m;S;S=ga(S))E++;for(;0<y-E;)g=ga(g),y--;for(;0<E-y;)m=ga(m),E--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=ga(g),m=ga(m)}g=null}else g=null;f!==null&&qw(d,h,f,g,!1),p!==null&&v!==null&&qw(d,v,p,g,!0)}}e:{if(h=c?Sa(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var b=c4;else if(Bw(h))if(lk)b=f4;else{b=d4;var w=u4}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=h4);if(b&&(b=b(e,c))){ak(d,b,r,u);break e}w&&w(e,h,c),e==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&Jm(h,"number",h.value)}switch(w=c?Sa(c):window,e){case"focusin":(Bw(w)||w.contentEditable==="true")&&(Ea=w,dv=c,yc=null);break;case"focusout":yc=dv=Ea=null;break;case"mousedown":hv=!0;break;case"contextmenu":case"mouseup":case"dragend":hv=!1,$w(d,r,u);break;case"selectionchange":if(m4)break;case"keydown":case"keyup":$w(d,r,u)}var x;if(Zv)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else ya?sk(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(ik&&r.locale!=="ko"&&(ya||D!=="onCompositionStart"?D==="onCompositionEnd"&&ya&&(x=nk()):(ms=u,Yv="value"in ms?ms.value:ms.textContent,ya=!0)),w=mh(c,D),0<w.length&&(D=new Ow(D,e,null,r,u),d.push({event:D,listeners:w}),x?D.data=x:(x=ok(r),x!==null&&(D.data=x)))),(x=i4?s4(e,r):o4(e,r))&&(c=mh(c,"onBeforeInput"),0<c.length&&(u=new Ow("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:c}),u.data=x))}yk(d,t)})}function Pc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function mh(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=kc(e,r),s!=null&&n.unshift(Pc(e,s,i)),s=kc(e,t),s!=null&&n.push(Pc(e,s,i))),e=e.return}return n}function ga(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qw(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=kc(r,s),l!=null&&o.unshift(Pc(r,l,a))):i||(l=kc(r,s),l!=null&&o.push(Pc(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var y4=/\r\n?/g,E4=/\u0000|\uFFFD/g;function Kw(e){return(typeof e=="string"?e:""+e).replace(y4,`
`).replace(E4,"")}function qd(e,t,r){if(t=Kw(t),Kw(e)!==t&&r)throw Error(pe(425))}function vh(){}var fv=null,pv=null;function gv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mv=typeof setTimeout=="function"?setTimeout:void 0,T4=typeof clearTimeout=="function"?clearTimeout:void 0,Yw=typeof Promise=="function"?Promise:void 0,S4=typeof queueMicrotask=="function"?queueMicrotask:typeof Yw<"u"?function(e){return Yw.resolve(null).then(e).catch(b4)}:mv;function b4(e){setTimeout(function(){throw e})}function Mm(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Rc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Rc(t)}function Ss(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var $a=Math.random().toString(36).slice(2),ii="__reactFiber$"+$a,Dc="__reactProps$"+$a,Bi="__reactContainer$"+$a,vv="__reactEvents$"+$a,w4="__reactListeners$"+$a,A4="__reactHandles$"+$a;function co(e){var t=e[ii];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Bi]||r[ii]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Xw(e);e!==null;){if(r=e[ii])return r;e=Xw(e)}return t}e=r,r=e.parentNode}return null}function $c(e){return e=e[ii]||e[Bi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pe(33))}function Fh(e){return e[Dc]||null}var yv=[],ba=-1;function Is(e){return{current:e}}function Rt(e){0>ba||(e.current=yv[ba],yv[ba]=null,ba--)}function Tt(e,t){ba++,yv[ba]=e.current,e.current=t}var xs={},wr=Is(xs),zr=Is(!1),go=xs;function Na(e,t){var r=e.type.contextTypes;if(!r)return xs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function $r(e){return e=e.childContextTypes,e!=null}function yh(){Rt(zr),Rt(wr)}function Qw(e,t,r){if(wr.current!==xs)throw Error(pe(168));Tt(wr,t),Tt(zr,r)}function Tk(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(pe(108,u3(e)||"Unknown",i));return Ft({},r,n)}function Eh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xs,go=wr.current,Tt(wr,e),Tt(zr,zr.current),!0}function Zw(e,t,r){var n=e.stateNode;if(!n)throw Error(pe(169));r?(e=Tk(e,t,go),n.__reactInternalMemoizedMergedChildContext=e,Rt(zr),Rt(wr),Tt(wr,e)):Rt(zr),Tt(zr,r)}var Di=null,Bh=!1,Fm=!1;function Sk(e){Di===null?Di=[e]:Di.push(e)}function k4(e){Bh=!0,Sk(e)}function _s(){if(!Fm&&Di!==null){Fm=!0;var e=0,t=lt;try{var r=Di;for(lt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Di=null,Bh=!1}catch(i){throw Di!==null&&(Di=Di.slice(e+1)),WA(Vv,_s),i}finally{lt=t,Fm=!1}}return null}var wa=[],Aa=0,Th=null,Sh=0,bn=[],wn=0,mo=null,Oi=1,Ni="";function ao(e,t){wa[Aa++]=Sh,wa[Aa++]=Th,Th=e,Sh=t}function bk(e,t,r){bn[wn++]=Oi,bn[wn++]=Ni,bn[wn++]=mo,mo=e;var n=Oi;e=Ni;var i=32-Un(n)-1;n&=~(1<<i),r+=1;var s=32-Un(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Oi=1<<32-Un(t)+i|r<<i|n,Ni=s+e}else Oi=1<<s|r<<i|n,Ni=e}function ey(e){e.return!==null&&(ao(e,1),bk(e,1,0))}function ty(e){for(;e===Th;)Th=wa[--Aa],wa[Aa]=null,Sh=wa[--Aa],wa[Aa]=null;for(;e===mo;)mo=bn[--wn],bn[wn]=null,Ni=bn[--wn],bn[wn]=null,Oi=bn[--wn],bn[wn]=null}var sn=null,nn=null,Lt=!1,Bn=null;function wk(e,t){var r=An(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Jw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,sn=e,nn=Ss(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,sn=e,nn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=mo!==null?{id:Oi,overflow:Ni}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=An(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,sn=e,nn=null,!0):!1;default:return!1}}function Ev(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tv(e){if(Lt){var t=nn;if(t){var r=t;if(!Jw(e,t)){if(Ev(e))throw Error(pe(418));t=Ss(r.nextSibling);var n=sn;t&&Jw(e,t)?wk(n,r):(e.flags=e.flags&-4097|2,Lt=!1,sn=e)}}else{if(Ev(e))throw Error(pe(418));e.flags=e.flags&-4097|2,Lt=!1,sn=e}}}function eA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;sn=e}function Kd(e){if(e!==sn)return!1;if(!Lt)return eA(e),Lt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gv(e.type,e.memoizedProps)),t&&(t=nn)){if(Ev(e))throw Ak(),Error(pe(418));for(;t;)wk(e,t),t=Ss(t.nextSibling)}if(eA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){nn=Ss(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}nn=null}}else nn=sn?Ss(e.stateNode.nextSibling):null;return!0}function Ak(){for(var e=nn;e;)e=Ss(e.nextSibling)}function Ma(){nn=sn=null,Lt=!1}function ry(e){Bn===null?Bn=[e]:Bn.push(e)}var C4=zi.ReactCurrentBatchConfig;function oc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,e))}return e}function Yd(e,t){throw e=Object.prototype.toString.call(t),Error(pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tA(e){var t=e._init;return t(e._payload)}function kk(e){function t(m,y){if(e){var E=m.deletions;E===null?(m.deletions=[y],m.flags|=16):E.push(y)}}function r(m,y){if(!e)return null;for(;y!==null;)t(m,y),y=y.sibling;return null}function n(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=ks(m,y),m.index=0,m.sibling=null,m}function s(m,y,E){return m.index=E,e?(E=m.alternate,E!==null?(E=E.index,E<y?(m.flags|=2,y):E):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,y,E,S){return y===null||y.tag!==6?(y=jm(E,m.mode,S),y.return=m,y):(y=i(y,E),y.return=m,y)}function l(m,y,E,S){var b=E.type;return b===va?u(m,y,E.props.children,S,E.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===hs&&tA(b)===y.type)?(S=i(y,E.props),S.ref=oc(m,y,E),S.return=m,S):(S=lh(E.type,E.key,E.props,null,m.mode,S),S.ref=oc(m,y,E),S.return=m,S)}function c(m,y,E,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=Vm(E,m.mode,S),y.return=m,y):(y=i(y,E.children||[]),y.return=m,y)}function u(m,y,E,S,b){return y===null||y.tag!==7?(y=po(E,m.mode,S,b),y.return=m,y):(y=i(y,E),y.return=m,y)}function d(m,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=jm(""+y,m.mode,E),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Od:return E=lh(y.type,y.key,y.props,null,m.mode,E),E.ref=oc(m,null,y),E.return=m,E;case ma:return y=Vm(y,m.mode,E),y.return=m,y;case hs:var S=y._init;return d(m,S(y._payload),E)}if(dc(y)||rc(y))return y=po(y,m.mode,E,null),y.return=m,y;Yd(m,y)}return null}function h(m,y,E,S){var b=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return b!==null?null:a(m,y,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Od:return E.key===b?l(m,y,E,S):null;case ma:return E.key===b?c(m,y,E,S):null;case hs:return b=E._init,h(m,y,b(E._payload),S)}if(dc(E)||rc(E))return b!==null?null:u(m,y,E,S,null);Yd(m,E)}return null}function f(m,y,E,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(E)||null,a(y,m,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Od:return m=m.get(S.key===null?E:S.key)||null,l(y,m,S,b);case ma:return m=m.get(S.key===null?E:S.key)||null,c(y,m,S,b);case hs:var w=S._init;return f(m,y,E,w(S._payload),b)}if(dc(S)||rc(S))return m=m.get(E)||null,u(y,m,S,b,null);Yd(y,S)}return null}function p(m,y,E,S){for(var b=null,w=null,x=y,D=y=0,N=null;x!==null&&D<E.length;D++){x.index>D?(N=x,x=null):N=x.sibling;var C=h(m,x,E[D],S);if(C===null){x===null&&(x=N);break}e&&x&&C.alternate===null&&t(m,x),y=s(C,y,D),w===null?b=C:w.sibling=C,w=C,x=N}if(D===E.length)return r(m,x),Lt&&ao(m,D),b;if(x===null){for(;D<E.length;D++)x=d(m,E[D],S),x!==null&&(y=s(x,y,D),w===null?b=x:w.sibling=x,w=x);return Lt&&ao(m,D),b}for(x=n(m,x);D<E.length;D++)N=f(x,m,D,E[D],S),N!==null&&(e&&N.alternate!==null&&x.delete(N.key===null?D:N.key),y=s(N,y,D),w===null?b=N:w.sibling=N,w=N);return e&&x.forEach(function(P){return t(m,P)}),Lt&&ao(m,D),b}function g(m,y,E,S){var b=rc(E);if(typeof b!="function")throw Error(pe(150));if(E=b.call(E),E==null)throw Error(pe(151));for(var w=b=null,x=y,D=y=0,N=null,C=E.next();x!==null&&!C.done;D++,C=E.next()){x.index>D?(N=x,x=null):N=x.sibling;var P=h(m,x,C.value,S);if(P===null){x===null&&(x=N);break}e&&x&&P.alternate===null&&t(m,x),y=s(P,y,D),w===null?b=P:w.sibling=P,w=P,x=N}if(C.done)return r(m,x),Lt&&ao(m,D),b;if(x===null){for(;!C.done;D++,C=E.next())C=d(m,C.value,S),C!==null&&(y=s(C,y,D),w===null?b=C:w.sibling=C,w=C);return Lt&&ao(m,D),b}for(x=n(m,x);!C.done;D++,C=E.next())C=f(x,m,D,C.value,S),C!==null&&(e&&C.alternate!==null&&x.delete(C.key===null?D:C.key),y=s(C,y,D),w===null?b=C:w.sibling=C,w=C);return e&&x.forEach(function(U){return t(m,U)}),Lt&&ao(m,D),b}function v(m,y,E,S){if(typeof E=="object"&&E!==null&&E.type===va&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Od:e:{for(var b=E.key,w=y;w!==null;){if(w.key===b){if(b=E.type,b===va){if(w.tag===7){r(m,w.sibling),y=i(w,E.props.children),y.return=m,m=y;break e}}else if(w.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===hs&&tA(b)===w.type){r(m,w.sibling),y=i(w,E.props),y.ref=oc(m,w,E),y.return=m,m=y;break e}r(m,w);break}else t(m,w);w=w.sibling}E.type===va?(y=po(E.props.children,m.mode,S,E.key),y.return=m,m=y):(S=lh(E.type,E.key,E.props,null,m.mode,S),S.ref=oc(m,y,E),S.return=m,m=S)}return o(m);case ma:e:{for(w=E.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){r(m,y.sibling),y=i(y,E.children||[]),y.return=m,m=y;break e}else{r(m,y);break}else t(m,y);y=y.sibling}y=Vm(E,m.mode,S),y.return=m,m=y}return o(m);case hs:return w=E._init,v(m,y,w(E._payload),S)}if(dc(E))return p(m,y,E,S);if(rc(E))return g(m,y,E,S);Yd(m,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(r(m,y.sibling),y=i(y,E),y.return=m,m=y):(r(m,y),y=jm(E,m.mode,S),y.return=m,m=y),o(m)):r(m,y)}return v}var Fa=kk(!0),Ck=kk(!1),bh=Is(null),wh=null,ka=null,ny=null;function iy(){ny=ka=wh=null}function sy(e){var t=bh.current;Rt(bh),e._currentValue=t}function Sv(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Pa(e,t){wh=e,ny=ka=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Hr=!0),e.firstContext=null)}function Cn(e){var t=e._currentValue;if(ny!==e)if(e={context:e,memoizedValue:t,next:null},ka===null){if(wh===null)throw Error(pe(308));ka=e,wh.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var uo=null;function oy(e){uo===null?uo=[e]:uo.push(e)}function xk(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,oy(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ui(e,n)}function Ui(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fs=!1;function ay(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(st&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ui(e,r)}return i=n.interleaved,i===null?(t.next=t,oy(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ui(e,r)}function rh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Wv(e,r)}}function rA(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ah(e,t,r,n){var i=e.updateQueue;fs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=r,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ft({},d,h);break e;case 2:fs=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);yo|=o,e.lanes=o,e.memoizedState=d}}function nA(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(pe(191,i));i.call(n)}}}var Gc={},oi=Is(Gc),Oc=Is(Gc),Nc=Is(Gc);function ho(e){if(e===Gc)throw Error(pe(174));return e}function ly(e,t){switch(Tt(Nc,t),Tt(Oc,e),Tt(oi,Gc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=tv(t,e)}Rt(oi),Tt(oi,t)}function Ba(){Rt(oi),Rt(Oc),Rt(Nc)}function Ik(e){ho(Nc.current);var t=ho(oi.current),r=tv(t,e.type);t!==r&&(Tt(Oc,e),Tt(oi,r))}function cy(e){Oc.current===e&&(Rt(oi),Rt(Oc))}var Nt=Is(0);function kh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bm=[];function uy(){for(var e=0;e<Bm.length;e++)Bm[e]._workInProgressVersionPrimary=null;Bm.length=0}var nh=zi.ReactCurrentDispatcher,Um=zi.ReactCurrentBatchConfig,vo=0,Mt=null,Jt=null,ar=null,Ch=!1,Ec=!1,Mc=0,x4=0;function Tr(){throw Error(pe(321))}function dy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!zn(e[r],t[r]))return!1;return!0}function hy(e,t,r,n,i,s){if(vo=s,Mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nh.current=e===null||e.memoizedState===null?L4:P4,e=r(n,i),Ec){s=0;do{if(Ec=!1,Mc=0,25<=s)throw Error(pe(301));s+=1,ar=Jt=null,t.updateQueue=null,nh.current=D4,e=r(n,i)}while(Ec)}if(nh.current=xh,t=Jt!==null&&Jt.next!==null,vo=0,ar=Jt=Mt=null,Ch=!1,t)throw Error(pe(300));return e}function fy(){var e=Mc!==0;return Mc=0,e}function ni(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?Mt.memoizedState=ar=e:ar=ar.next=e,ar}function xn(){if(Jt===null){var e=Mt.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var t=ar===null?Mt.memoizedState:ar.next;if(t!==null)ar=t,Jt=e;else{if(e===null)throw Error(pe(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},ar===null?Mt.memoizedState=ar=e:ar=ar.next=e}return ar}function Fc(e,t){return typeof t=="function"?t(e):t}function Hm(e){var t=xn(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=Jt,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((vo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,Mt.lanes|=u,yo|=u}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,zn(n,t.memoizedState)||(Hr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,Mt.lanes|=s,yo|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function zm(e){var t=xn(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);zn(s,t.memoizedState)||(Hr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function _k(){}function Lk(e,t){var r=Mt,n=xn(),i=t(),s=!zn(n.memoizedState,i);if(s&&(n.memoizedState=i,Hr=!0),n=n.queue,py(Ok.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||ar!==null&&ar.memoizedState.tag&1){if(r.flags|=2048,Bc(9,Dk.bind(null,r,n,i,t),void 0,null),lr===null)throw Error(pe(349));(vo&30)!==0||Pk(r,t,i)}return i}function Pk(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Mt.updateQueue,t===null?(t={lastEffect:null,stores:null},Mt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Dk(e,t,r,n){t.value=r,t.getSnapshot=n,Nk(t)&&Mk(e)}function Ok(e,t,r){return r(function(){Nk(t)&&Mk(e)})}function Nk(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!zn(e,r)}catch{return!0}}function Mk(e){var t=Ui(e,1);t!==null&&Hn(t,e,1,-1)}function iA(e){var t=ni();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fc,lastRenderedState:e},t.queue=e,e=e.dispatch=_4.bind(null,Mt,e),[t.memoizedState,e]}function Bc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Mt.updateQueue,t===null?(t={lastEffect:null,stores:null},Mt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Fk(){return xn().memoizedState}function ih(e,t,r,n){var i=ni();Mt.flags|=e,i.memoizedState=Bc(1|t,r,void 0,n===void 0?null:n)}function Uh(e,t,r,n){var i=xn();n=n===void 0?null:n;var s=void 0;if(Jt!==null){var o=Jt.memoizedState;if(s=o.destroy,n!==null&&dy(n,o.deps)){i.memoizedState=Bc(t,r,s,n);return}}Mt.flags|=e,i.memoizedState=Bc(1|t,r,s,n)}function sA(e,t){return ih(8390656,8,e,t)}function py(e,t){return Uh(2048,8,e,t)}function Bk(e,t){return Uh(4,2,e,t)}function Uk(e,t){return Uh(4,4,e,t)}function Hk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zk(e,t,r){return r=r!=null?r.concat([e]):null,Uh(4,4,Hk.bind(null,t,e),r)}function gy(){}function $k(e,t){var r=xn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&dy(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Gk(e,t){var r=xn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&dy(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function jk(e,t,r){return(vo&21)===0?(e.baseState&&(e.baseState=!1,Hr=!0),e.memoizedState=r):(zn(r,t)||(r=YA(),Mt.lanes|=r,yo|=r,e.baseState=!0),t)}function R4(e,t){var r=lt;lt=r!==0&&4>r?r:4,e(!0);var n=Um.transition;Um.transition={};try{e(!1),t()}finally{lt=r,Um.transition=n}}function Vk(){return xn().memoizedState}function I4(e,t,r){var n=As(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Wk(e))qk(t,r);else if(r=xk(e,t,r,n),r!==null){var i=Lr();Hn(r,e,n,i),Kk(r,t,n)}}function _4(e,t,r){var n=As(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Wk(e))qk(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,zn(a,o)){var l=t.interleaved;l===null?(i.next=i,oy(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}r=xk(e,t,i,n),r!==null&&(i=Lr(),Hn(r,e,n,i),Kk(r,t,n))}}function Wk(e){var t=e.alternate;return e===Mt||t!==null&&t===Mt}function qk(e,t){Ec=Ch=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Kk(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Wv(e,r)}}var xh={readContext:Cn,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},L4={readContext:Cn,useCallback:function(e,t){return ni().memoizedState=[e,t===void 0?null:t],e},useContext:Cn,useEffect:sA,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ih(4194308,4,Hk.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ih(4194308,4,e,t)},useInsertionEffect:function(e,t){return ih(4,2,e,t)},useMemo:function(e,t){var r=ni();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ni();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=I4.bind(null,Mt,e),[n.memoizedState,e]},useRef:function(e){var t=ni();return e={current:e},t.memoizedState=e},useState:iA,useDebugValue:gy,useDeferredValue:function(e){return ni().memoizedState=e},useTransition:function(){var e=iA(!1),t=e[0];return e=R4.bind(null,e[1]),ni().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Mt,i=ni();if(Lt){if(r===void 0)throw Error(pe(407));r=r()}else{if(r=t(),lr===null)throw Error(pe(349));(vo&30)!==0||Pk(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,sA(Ok.bind(null,n,s,e),[e]),n.flags|=2048,Bc(9,Dk.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=ni(),t=lr.identifierPrefix;if(Lt){var r=Ni,n=Oi;r=(n&~(1<<32-Un(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Mc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=x4++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},P4={readContext:Cn,useCallback:$k,useContext:Cn,useEffect:py,useImperativeHandle:zk,useInsertionEffect:Bk,useLayoutEffect:Uk,useMemo:Gk,useReducer:Hm,useRef:Fk,useState:function(){return Hm(Fc)},useDebugValue:gy,useDeferredValue:function(e){var t=xn();return jk(t,Jt.memoizedState,e)},useTransition:function(){var e=Hm(Fc)[0],t=xn().memoizedState;return[e,t]},useMutableSource:_k,useSyncExternalStore:Lk,useId:Vk,unstable_isNewReconciler:!1},D4={readContext:Cn,useCallback:$k,useContext:Cn,useEffect:py,useImperativeHandle:zk,useInsertionEffect:Bk,useLayoutEffect:Uk,useMemo:Gk,useReducer:zm,useRef:Fk,useState:function(){return zm(Fc)},useDebugValue:gy,useDeferredValue:function(e){var t=xn();return Jt===null?t.memoizedState=e:jk(t,Jt.memoizedState,e)},useTransition:function(){var e=zm(Fc)[0],t=xn().memoizedState;return[e,t]},useMutableSource:_k,useSyncExternalStore:Lk,useId:Vk,unstable_isNewReconciler:!1};function Mn(e,t){if(e&&e.defaultProps){t=Ft({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function bv(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ft({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Hh={isMounted:function(e){return(e=e._reactInternals)?So(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Lr(),i=As(e),s=Mi(n,i);s.payload=t,r!=null&&(s.callback=r),t=bs(e,s,i),t!==null&&(Hn(t,e,i,n),rh(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Lr(),i=As(e),s=Mi(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=bs(e,s,i),t!==null&&(Hn(t,e,i,n),rh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Lr(),n=As(e),i=Mi(r,n);i.tag=2,t!=null&&(i.callback=t),t=bs(e,i,n),t!==null&&(Hn(t,e,n,r),rh(t,e,n))}};function oA(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!_c(r,n)||!_c(i,s):!0}function Yk(e,t,r){var n=!1,i=xs,s=t.contextType;return typeof s=="object"&&s!==null?s=Cn(s):(i=$r(t)?go:wr.current,n=t.contextTypes,s=(n=n!=null)?Na(e,i):xs),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aA(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Hh.enqueueReplaceState(t,t.state,null)}function wv(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},ay(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Cn(s):(s=$r(t)?go:wr.current,i.context=Na(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(bv(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Hh.enqueueReplaceState(i,i.state,null),Ah(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ua(e,t){try{var r="",n=t;do r+=c3(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function $m(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Av(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var O4=typeof WeakMap=="function"?WeakMap:Map;function Xk(e,t,r){r=Mi(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ih||(Ih=!0,Ov=n),Av(e,t)},r}function Qk(e,t,r){r=Mi(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Av(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Av(e,t),typeof n!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function lA(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new O4;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=K4.bind(null,e,t,r),t.then(e,e))}function cA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uA(e,t,r,n,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Mi(-1,1),t.tag=2,bs(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var N4=zi.ReactCurrentOwner,Hr=!1;function _r(e,t,r,n){t.child=e===null?Ck(t,null,r,n):Fa(t,e.child,r,n)}function dA(e,t,r,n,i){r=r.render;var s=t.ref;return Pa(t,i),n=hy(e,t,r,n,s,i),r=fy(),e!==null&&!Hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hi(e,t,i)):(Lt&&r&&ey(t),t.flags|=1,_r(e,t,n,i),t.child)}function hA(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!wy(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,Zk(e,t,s,n,i)):(e=lh(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&i)===0){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:_c,r(o,n)&&e.ref===t.ref)return Hi(e,t,i)}return t.flags|=1,e=ks(s,n),e.ref=t.ref,e.return=t,t.child=e}function Zk(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(_c(s,n)&&e.ref===t.ref)if(Hr=!1,t.pendingProps=n=s,(e.lanes&i)!==0)(e.flags&131072)!==0&&(Hr=!0);else return t.lanes=e.lanes,Hi(e,t,i)}return kv(e,t,r,n,i)}function Jk(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(xa,rn),rn|=r;else{if((r&1073741824)===0)return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tt(xa,rn),rn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Tt(xa,rn),rn|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,Tt(xa,rn),rn|=n;return _r(e,t,i,r),t.child}function eC(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function kv(e,t,r,n,i){var s=$r(r)?go:wr.current;return s=Na(t,s),Pa(t,i),r=hy(e,t,r,n,s,i),n=fy(),e!==null&&!Hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hi(e,t,i)):(Lt&&n&&ey(t),t.flags|=1,_r(e,t,r,i),t.child)}function fA(e,t,r,n,i){if($r(r)){var s=!0;Eh(t)}else s=!1;if(Pa(t,i),t.stateNode===null)sh(e,t),Yk(t,r,n),wv(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Cn(c):(c=$r(r)?go:wr.current,c=Na(t,c));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&aA(t,o,n,c),fs=!1;var h=t.memoizedState;o.state=h,Ah(t,n,o,i),l=t.memoizedState,a!==n||h!==l||zr.current||fs?(typeof u=="function"&&(bv(t,r,u,n),l=t.memoizedState),(a=fs||oA(t,r,a,n,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Rk(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Mn(t.type,a),o.props=c,d=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Cn(l):(l=$r(r)?go:wr.current,l=Na(t,l));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&aA(t,o,n,l),fs=!1,h=t.memoizedState,o.state=h,Ah(t,n,o,i);var p=t.memoizedState;a!==d||h!==p||zr.current||fs?(typeof f=="function"&&(bv(t,r,f,n),p=t.memoizedState),(c=fs||oA(t,r,c,n,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Cv(e,t,r,n,s,i)}function Cv(e,t,r,n,i,s){eC(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&Zw(t,r,!1),Hi(e,t,s);n=t.stateNode,N4.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Fa(t,e.child,null,s),t.child=Fa(t,null,a,s)):_r(e,t,a,s),t.memoizedState=n.state,i&&Zw(t,r,!0),t.child}function tC(e){var t=e.stateNode;t.pendingContext?Qw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qw(e,t.context,!1),ly(e,t.containerInfo)}function pA(e,t,r,n,i){return Ma(),ry(i),t.flags|=256,_r(e,t,r,n),t.child}var xv={dehydrated:null,treeContext:null,retryLane:0};function Rv(e){return{baseLanes:e,cachePool:null,transitions:null}}function rC(e,t,r){var n=t.pendingProps,i=Nt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Tt(Nt,i&1),e===null)return Tv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},(n&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gh(o,n,0,null),e=po(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rv(r),t.memoizedState=xv,e):my(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return M4(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:n.children};return(o&1)===0&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=ks(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ks(a,s):(s=po(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?Rv(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=xv,n}return s=e.child,e=s.sibling,n=ks(s,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function my(e,t){return t=Gh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xd(e,t,r,n){return n!==null&&ry(n),Fa(t,e.child,null,r),e=my(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function M4(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=$m(Error(pe(422))),Xd(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=Gh({mode:"visible",children:n.children},i,0,null),s=po(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,(t.mode&1)!==0&&Fa(t,e.child,null,o),t.child.memoizedState=Rv(o),t.memoizedState=xv,s);if((t.mode&1)===0)return Xd(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(pe(419)),n=$m(s,n,void 0),Xd(e,t,o,n)}if(a=(o&e.childLanes)!==0,Hr||a){if(n=lr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(n.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ui(e,i),Hn(n,e,i,-1))}return by(),n=$m(Error(pe(421))),Xd(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Y4.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,nn=Ss(i.nextSibling),sn=t,Lt=!0,Bn=null,e!==null&&(bn[wn++]=Oi,bn[wn++]=Ni,bn[wn++]=mo,Oi=e.id,Ni=e.overflow,mo=t),t=my(t,n.children),t.flags|=4096,t)}function gA(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Sv(e.return,t,r)}function Gm(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function nC(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(_r(e,t,n.children,r),n=Nt.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gA(e,r,t);else if(e.tag===19)gA(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Tt(Nt,n),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&kh(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Gm(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&kh(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Gm(t,!0,r,null,s);break;case"together":Gm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sh(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),yo|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(pe(153));if(t.child!==null){for(e=t.child,r=ks(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ks(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function F4(e,t,r){switch(t.tag){case 3:tC(t),Ma();break;case 5:Ik(t);break;case 1:$r(t.type)&&Eh(t);break;case 4:ly(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Tt(bh,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Tt(Nt,Nt.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?rC(e,t,r):(Tt(Nt,Nt.current&1),e=Hi(e,t,r),e!==null?e.sibling:null);Tt(Nt,Nt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return nC(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(Nt,Nt.current),n)break;return null;case 22:case 23:return t.lanes=0,Jk(e,t,r)}return Hi(e,t,r)}var iC,Iv,sC,oC;iC=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Iv=function(){};sC=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ho(oi.current);var s=null;switch(r){case"input":i=Qm(e,i),n=Qm(e,n),s=[];break;case"select":i=Ft({},i,{value:void 0}),n=Ft({},n,{value:void 0}),s=[];break;case"textarea":i=ev(e,i),n=ev(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=vh)}rv(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i?.[c],n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};oC=function(e,t,r,n){r!==n&&(t.flags|=4)};function ac(e,t){if(!Lt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Sr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function B4(e,t,r){var n=t.pendingProps;switch(ty(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(t),null;case 1:return $r(t.type)&&yh(),Sr(t),null;case 3:return n=t.stateNode,Ba(),Rt(zr),Rt(wr),uy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Kd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Bn!==null&&(Fv(Bn),Bn=null))),Iv(e,t),Sr(t),null;case 5:cy(t);var i=ho(Nc.current);if(r=t.type,e!==null&&t.stateNode!=null)sC(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(pe(166));return Sr(t),null}if(e=ho(oi.current),Kd(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[ii]=t,n[Dc]=s,e=(t.mode&1)!==0,r){case"dialog":xt("cancel",n),xt("close",n);break;case"iframe":case"object":case"embed":xt("load",n);break;case"video":case"audio":for(i=0;i<fc.length;i++)xt(fc[i],n);break;case"source":xt("error",n);break;case"img":case"image":case"link":xt("error",n),xt("load",n);break;case"details":xt("toggle",n);break;case"input":ww(n,s),xt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},xt("invalid",n);break;case"textarea":kw(n,s),xt("invalid",n)}rv(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&qd(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&qd(n.textContent,a,e),i=["children",""+a]):wc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xt("scroll",n)}switch(r){case"input":Nd(n),Aw(n,s,!0);break;case"textarea":Nd(n),Cw(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=vh)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=OA(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ii]=t,e[Dc]=n,iC(e,t,!1,!1),t.stateNode=e;e:{switch(o=nv(r,n),r){case"dialog":xt("cancel",e),xt("close",e),i=n;break;case"iframe":case"object":case"embed":xt("load",e),i=n;break;case"video":case"audio":for(i=0;i<fc.length;i++)xt(fc[i],e);i=n;break;case"source":xt("error",e),i=n;break;case"img":case"image":case"link":xt("error",e),xt("load",e),i=n;break;case"details":xt("toggle",e),i=n;break;case"input":ww(e,n),i=Qm(e,n),xt("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Ft({},n,{value:void 0}),xt("invalid",e);break;case"textarea":kw(e,n),i=ev(e,n),xt("invalid",e);break;default:i=n}rv(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?FA(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&NA(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ac(e,l):typeof l=="number"&&Ac(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xt("scroll",e):l!=null&&Hv(e,s,l,o))}switch(r){case"input":Nd(e),Aw(e,n,!1);break;case"textarea":Nd(e),Cw(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Cs(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Ra(e,!!n.multiple,s,!1):n.defaultValue!=null&&Ra(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=vh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Sr(t),null;case 6:if(e&&t.stateNode!=null)oC(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(pe(166));if(r=ho(Nc.current),ho(oi.current),Kd(t)){if(n=t.stateNode,r=t.memoizedProps,n[ii]=t,(s=n.nodeValue!==r)&&(e=sn,e!==null))switch(e.tag){case 3:qd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qd(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ii]=t,t.stateNode=n}return Sr(t),null;case 13:if(Rt(Nt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Lt&&nn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ak(),Ma(),t.flags|=98560,s=!1;else if(s=Kd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(pe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(pe(317));s[ii]=t}else Ma(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Sr(t),s=!1}else Bn!==null&&(Fv(Bn),Bn=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Nt.current&1)!==0?er===0&&(er=3):by())),t.updateQueue!==null&&(t.flags|=4),Sr(t),null);case 4:return Ba(),Iv(e,t),e===null&&Lc(t.stateNode.containerInfo),Sr(t),null;case 10:return sy(t.type._context),Sr(t),null;case 17:return $r(t.type)&&yh(),Sr(t),null;case 19:if(Rt(Nt),s=t.memoizedState,s===null)return Sr(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)ac(s,!1);else{if(er!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=kh(e),o!==null){for(t.flags|=128,ac(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Tt(Nt,Nt.current&1|2),t.child}e=e.sibling}s.tail!==null&&jt()>Ha&&(t.flags|=128,n=!0,ac(s,!1),t.lanes=4194304)}else{if(!n)if(e=kh(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ac(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Lt)return Sr(t),null}else 2*jt()-s.renderingStartTime>Ha&&r!==1073741824&&(t.flags|=128,n=!0,ac(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=jt(),t.sibling=null,r=Nt.current,Tt(Nt,n?r&1|2:r&1),t):(Sr(t),null);case 22:case 23:return Sy(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(rn&1073741824)!==0&&(Sr(t),t.subtreeFlags&6&&(t.flags|=8192)):Sr(t),null;case 24:return null;case 25:return null}throw Error(pe(156,t.tag))}function U4(e,t){switch(ty(t),t.tag){case 1:return $r(t.type)&&yh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ba(),Rt(zr),Rt(wr),uy(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return cy(t),null;case 13:if(Rt(Nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pe(340));Ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(Nt),null;case 4:return Ba(),null;case 10:return sy(t.type._context),null;case 22:case 23:return Sy(),null;case 24:return null;default:return null}}var Qd=!1,br=!1,H4=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Ca(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){zt(e,t,n)}else r.current=null}function _v(e,t,r){try{r()}catch(n){zt(e,t,n)}}var mA=!1;function z4(e,t){if(fv=ph,e=dk(),Jv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==r||i!==0&&d.nodeType!==3||(a=o+i),d!==s||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===e)break t;if(h===r&&++c===i&&(a=o),h===s&&++u===n&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(pv={focusedElem:e,selectionRange:r},ph=!1,Ie=t;Ie!==null;)if(t=Ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ie=e;else for(;Ie!==null;){t=Ie;try{var p=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=t.stateNode,y=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:Mn(t.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(S){zt(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}return p=mA,mA=!1,p}function Tc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&_v(t,r,s)}i=i.next}while(i!==n)}}function zh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Lv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function aC(e){var t=e.alternate;t!==null&&(e.alternate=null,aC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ii],delete t[Dc],delete t[vv],delete t[w4],delete t[A4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lC(e){return e.tag===5||e.tag===3||e.tag===4}function vA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=vh));else if(n!==4&&(e=e.child,e!==null))for(Pv(e,t,r),e=e.sibling;e!==null;)Pv(e,t,r),e=e.sibling}function Dv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Dv(e,t,r),e=e.sibling;e!==null;)Dv(e,t,r),e=e.sibling}var hr=null,Fn=!1;function ds(e,t,r){for(r=r.child;r!==null;)cC(e,t,r),r=r.sibling}function cC(e,t,r){if(si&&typeof si.onCommitFiberUnmount=="function")try{si.onCommitFiberUnmount(Dh,r)}catch{}switch(r.tag){case 5:br||Ca(r,t);case 6:var n=hr,i=Fn;hr=null,ds(e,t,r),hr=n,Fn=i,hr!==null&&(Fn?(e=hr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):hr.removeChild(r.stateNode));break;case 18:hr!==null&&(Fn?(e=hr,r=r.stateNode,e.nodeType===8?Mm(e.parentNode,r):e.nodeType===1&&Mm(e,r),Rc(e)):Mm(hr,r.stateNode));break;case 4:n=hr,i=Fn,hr=r.stateNode.containerInfo,Fn=!0,ds(e,t,r),hr=n,Fn=i;break;case 0:case 11:case 14:case 15:if(!br&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&_v(r,t,o),i=i.next}while(i!==n)}ds(e,t,r);break;case 1:if(!br&&(Ca(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){zt(r,t,a)}ds(e,t,r);break;case 21:ds(e,t,r);break;case 22:r.mode&1?(br=(n=br)||r.memoizedState!==null,ds(e,t,r),br=n):ds(e,t,r);break;default:ds(e,t,r)}}function yA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new H4),t.forEach(function(n){var i=X4.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Nn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:hr=a.stateNode,Fn=!1;break e;case 3:hr=a.stateNode.containerInfo,Fn=!0;break e;case 4:hr=a.stateNode.containerInfo,Fn=!0;break e}a=a.return}if(hr===null)throw Error(pe(160));cC(s,o,i),hr=null,Fn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){zt(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uC(t,e),t=t.sibling}function uC(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Nn(t,e),ri(e),n&4){try{Tc(3,e,e.return),zh(3,e)}catch(g){zt(e,e.return,g)}try{Tc(5,e,e.return)}catch(g){zt(e,e.return,g)}}break;case 1:Nn(t,e),ri(e),n&512&&r!==null&&Ca(r,r.return);break;case 5:if(Nn(t,e),ri(e),n&512&&r!==null&&Ca(r,r.return),e.flags&32){var i=e.stateNode;try{Ac(i,"")}catch(g){zt(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&PA(i,s),nv(a,o);var c=nv(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?FA(i,d):u==="dangerouslySetInnerHTML"?NA(i,d):u==="children"?Ac(i,d):Hv(i,u,d,c)}switch(a){case"input":Zm(i,s);break;case"textarea":DA(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ra(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Ra(i,!!s.multiple,s.defaultValue,!0):Ra(i,!!s.multiple,s.multiple?[]:"",!1))}i[Dc]=s}catch(g){zt(e,e.return,g)}}break;case 6:if(Nn(t,e),ri(e),n&4){if(e.stateNode===null)throw Error(pe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){zt(e,e.return,g)}}break;case 3:if(Nn(t,e),ri(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Rc(t.containerInfo)}catch(g){zt(e,e.return,g)}break;case 4:Nn(t,e),ri(e);break;case 13:Nn(t,e),ri(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ey=jt())),n&4&&yA(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(br=(c=br)||u,Nn(t,e),br=c):Nn(t,e),ri(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&(e.mode&1)!==0)for(Ie=e,u=e.child;u!==null;){for(d=Ie=u;Ie!==null;){switch(h=Ie,f=h.child,h.tag){case 0:case 11:case 14:case 15:Tc(4,h,h.return);break;case 1:Ca(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){zt(n,r,g)}}break;case 5:Ca(h,h.return);break;case 22:if(h.memoizedState!==null){TA(d);continue}}f!==null?(f.return=h,Ie=f):TA(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=MA("display",o))}catch(g){zt(e,e.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){zt(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Nn(t,e),ri(e),n&4&&yA(e);break;case 21:break;default:Nn(t,e),ri(e)}}function ri(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(lC(r)){var n=r;break e}r=r.return}throw Error(pe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ac(i,""),n.flags&=-33);var s=vA(e);Dv(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=vA(e);Pv(e,a,o);break;default:throw Error(pe(161))}}catch(l){zt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $4(e,t,r){Ie=e,dC(e,t,r)}function dC(e,t,r){for(var n=(e.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Qd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||br;a=Qd;var c=br;if(Qd=o,(br=l)&&!c)for(Ie=i;Ie!==null;)o=Ie,l=o.child,o.tag===22&&o.memoizedState!==null?SA(i):l!==null?(l.return=o,Ie=l):SA(i);for(;s!==null;)Ie=s,dC(s,t,r),s=s.sibling;Ie=i,Qd=a,br=c}EA(e,t,r)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,Ie=s):EA(e,t,r)}}function EA(e){for(;Ie!==null;){var t=Ie;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:br||zh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!br)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Mn(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&nA(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}nA(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Rc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}br||t.flags&512&&Lv(t)}catch(h){zt(t,t.return,h)}}if(t===e){Ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ie=r;break}Ie=t.return}}function TA(e){for(;Ie!==null;){var t=Ie;if(t===e){Ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ie=r;break}Ie=t.return}}function SA(e){for(;Ie!==null;){var t=Ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{zh(4,t)}catch(l){zt(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){zt(t,i,l)}}var s=t.return;try{Lv(t)}catch(l){zt(t,s,l)}break;case 5:var o=t.return;try{Lv(t)}catch(l){zt(t,o,l)}}}catch(l){zt(t,t.return,l)}if(t===e){Ie=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ie=a;break}Ie=t.return}}var G4=Math.ceil,Rh=zi.ReactCurrentDispatcher,vy=zi.ReactCurrentOwner,kn=zi.ReactCurrentBatchConfig,st=0,lr=null,Wt=null,fr=0,rn=0,xa=Is(0),er=0,Uc=null,yo=0,$h=0,yy=0,Sc=null,Ur=null,Ey=0,Ha=1/0,Pi=null,Ih=!1,Ov=null,ws=null,Zd=!1,vs=null,_h=0,bc=0,Nv=null,oh=-1,ah=0;function Lr(){return(st&6)!==0?jt():oh!==-1?oh:oh=jt()}function As(e){return(e.mode&1)===0?1:(st&2)!==0&&fr!==0?fr&-fr:C4.transition!==null?(ah===0&&(ah=YA()),ah):(e=lt,e!==0||(e=window.event,e=e===void 0?16:rk(e.type)),e)}function Hn(e,t,r,n){if(50<bc)throw bc=0,Nv=null,Error(pe(185));Hc(e,r,n),((st&2)===0||e!==lr)&&(e===lr&&((st&2)===0&&($h|=r),er===4&&gs(e,fr)),Gr(e,n),r===1&&st===0&&(t.mode&1)===0&&(Ha=jt()+500,Bh&&_s()))}function Gr(e,t){var r=e.callbackNode;R3(e,t);var n=fh(e,e===lr?fr:0);if(n===0)r!==null&&Iw(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Iw(r),t===1)e.tag===0?k4(bA.bind(null,e)):Sk(bA.bind(null,e)),S4(function(){(st&6)===0&&_s()}),r=null;else{switch(XA(n)){case 1:r=Vv;break;case 4:r=qA;break;case 16:r=hh;break;case 536870912:r=KA;break;default:r=hh}r=EC(r,hC.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function hC(e,t){if(oh=-1,ah=0,(st&6)!==0)throw Error(pe(327));var r=e.callbackNode;if(Da()&&e.callbackNode!==r)return null;var n=fh(e,e===lr?fr:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=Lh(e,n);else{t=n;var i=st;st|=2;var s=pC();(lr!==e||fr!==t)&&(Pi=null,Ha=jt()+500,fo(e,t));do try{W4();break}catch(a){fC(e,a)}while(!0);iy(),Rh.current=s,st=i,Wt!==null?t=0:(lr=null,fr=0,t=er)}if(t!==0){if(t===2&&(i=lv(e),i!==0&&(n=i,t=Mv(e,i))),t===1)throw r=Uc,fo(e,0),gs(e,n),Gr(e,jt()),r;if(t===6)gs(e,n);else{if(i=e.current.alternate,(n&30)===0&&!j4(i)&&(t=Lh(e,n),t===2&&(s=lv(e),s!==0&&(n=s,t=Mv(e,s))),t===1))throw r=Uc,fo(e,0),gs(e,n),Gr(e,jt()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(pe(345));case 2:lo(e,Ur,Pi);break;case 3:if(gs(e,n),(n&130023424)===n&&(t=Ey+500-jt(),10<t)){if(fh(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Lr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=mv(lo.bind(null,e,Ur,Pi),t);break}lo(e,Ur,Pi);break;case 4:if(gs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-Un(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=jt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*G4(n/1960))-n,10<n){e.timeoutHandle=mv(lo.bind(null,e,Ur,Pi),n);break}lo(e,Ur,Pi);break;case 5:lo(e,Ur,Pi);break;default:throw Error(pe(329))}}}return Gr(e,jt()),e.callbackNode===r?hC.bind(null,e):null}function Mv(e,t){var r=Sc;return e.current.memoizedState.isDehydrated&&(fo(e,t).flags|=256),e=Lh(e,t),e!==2&&(t=Ur,Ur=r,t!==null&&Fv(t)),e}function Fv(e){Ur===null?Ur=e:Ur.push.apply(Ur,e)}function j4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!zn(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gs(e,t){for(t&=~yy,t&=~$h,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Un(t),n=1<<r;e[r]=-1,t&=~n}}function bA(e){if((st&6)!==0)throw Error(pe(327));Da();var t=fh(e,0);if((t&1)===0)return Gr(e,jt()),null;var r=Lh(e,t);if(e.tag!==0&&r===2){var n=lv(e);n!==0&&(t=n,r=Mv(e,n))}if(r===1)throw r=Uc,fo(e,0),gs(e,t),Gr(e,jt()),r;if(r===6)throw Error(pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lo(e,Ur,Pi),Gr(e,jt()),null}function Ty(e,t){var r=st;st|=1;try{return e(t)}finally{st=r,st===0&&(Ha=jt()+500,Bh&&_s())}}function Eo(e){vs!==null&&vs.tag===0&&(st&6)===0&&Da();var t=st;st|=1;var r=kn.transition,n=lt;try{if(kn.transition=null,lt=1,e)return e()}finally{lt=n,kn.transition=r,st=t,(st&6)===0&&_s()}}function Sy(){rn=xa.current,Rt(xa)}function fo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,T4(r)),Wt!==null)for(r=Wt.return;r!==null;){var n=r;switch(ty(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&yh();break;case 3:Ba(),Rt(zr),Rt(wr),uy();break;case 5:cy(n);break;case 4:Ba();break;case 13:Rt(Nt);break;case 19:Rt(Nt);break;case 10:sy(n.type._context);break;case 22:case 23:Sy()}r=r.return}if(lr=e,Wt=e=ks(e.current,null),fr=rn=t,er=0,Uc=null,yy=$h=yo=0,Ur=Sc=null,uo!==null){for(t=0;t<uo.length;t++)if(r=uo[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}uo=null}return e}function fC(e,t){do{var r=Wt;try{if(iy(),nh.current=xh,Ch){for(var n=Mt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ch=!1}if(vo=0,ar=Jt=Mt=null,Ec=!1,Mc=0,vy.current=null,r===null||r.return===null){er=1,Uc=t,Wt=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=fr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if((u.mode&1)===0&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=cA(o);if(f!==null){f.flags&=-257,uA(f,o,a,s,t),f.mode&1&&lA(s,c,t),t=f,l=c;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}else{if((t&1)===0){lA(s,c,t),by();break e}l=Error(pe(426))}}else if(Lt&&a.mode&1){var v=cA(o);if(v!==null){(v.flags&65536)===0&&(v.flags|=256),uA(v,o,a,s,t),ry(Ua(l,a));break e}}s=l=Ua(l,a),er!==4&&(er=2),Sc===null?Sc=[s]:Sc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=Xk(s,l,t);rA(s,m);break e;case 1:a=l;var y=s.type,E=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ws===null||!ws.has(E)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=Qk(s,a,t);rA(s,S);break e}}s=s.return}while(s!==null)}mC(r)}catch(b){t=b,Wt===r&&r!==null&&(Wt=r=r.return);continue}break}while(!0)}function pC(){var e=Rh.current;return Rh.current=xh,e===null?xh:e}function by(){(er===0||er===3||er===2)&&(er=4),lr===null||(yo&268435455)===0&&($h&268435455)===0||gs(lr,fr)}function Lh(e,t){var r=st;st|=2;var n=pC();(lr!==e||fr!==t)&&(Pi=null,fo(e,t));do try{V4();break}catch(i){fC(e,i)}while(!0);if(iy(),st=r,Rh.current=n,Wt!==null)throw Error(pe(261));return lr=null,fr=0,er}function V4(){for(;Wt!==null;)gC(Wt)}function W4(){for(;Wt!==null&&!E3();)gC(Wt)}function gC(e){var t=yC(e.alternate,e,rn);e.memoizedProps=e.pendingProps,t===null?mC(e):Wt=t,vy.current=null}function mC(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=B4(r,t,rn),r!==null){Wt=r;return}}else{if(r=U4(r,t),r!==null){r.flags&=32767,Wt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{er=6,Wt=null;return}}if(t=t.sibling,t!==null){Wt=t;return}Wt=t=e}while(t!==null);er===0&&(er=5)}function lo(e,t,r){var n=lt,i=kn.transition;try{kn.transition=null,lt=1,q4(e,t,r,n)}finally{kn.transition=i,lt=n}return null}function q4(e,t,r,n){do Da();while(vs!==null);if((st&6)!==0)throw Error(pe(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(pe(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(I3(e,s),e===lr&&(Wt=lr=null,fr=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Zd||(Zd=!0,EC(hh,function(){return Da(),null})),s=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||s){s=kn.transition,kn.transition=null;var o=lt;lt=1;var a=st;st|=4,vy.current=null,z4(e,r),uC(r,e),g4(pv),ph=!!fv,pv=fv=null,e.current=r,$4(r,e,i),T3(),st=a,lt=o,kn.transition=s}else e.current=r;if(Zd&&(Zd=!1,vs=e,_h=i),s=e.pendingLanes,s===0&&(ws=null),w3(r.stateNode,n),Gr(e,jt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ih)throw Ih=!1,e=Ov,Ov=null,e;return(_h&1)!==0&&e.tag!==0&&Da(),s=e.pendingLanes,(s&1)!==0?e===Nv?bc++:(bc=0,Nv=e):bc=0,_s(),null}function Da(){if(vs!==null){var e=XA(_h),t=kn.transition,r=lt;try{if(kn.transition=null,lt=16>e?16:e,vs===null)var n=!1;else{if(e=vs,vs=null,_h=0,(st&6)!==0)throw Error(pe(331));var i=st;for(st|=4,Ie=e.current;Ie!==null;){var s=Ie,o=s.child;if((Ie.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ie=c;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:Tc(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ie=d;else for(;Ie!==null;){u=Ie;var h=u.sibling,f=u.return;if(aC(u),u===c){Ie=null;break}if(h!==null){h.return=f,Ie=h;break}Ie=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Ie=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,Ie=o;else e:for(;Ie!==null;){if(s=Ie,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Tc(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Ie=m;break e}Ie=s.return}}var y=e.current;for(Ie=y;Ie!==null;){o=Ie;var E=o.child;if((o.subtreeFlags&2064)!==0&&E!==null)E.return=o,Ie=E;else e:for(o=y;Ie!==null;){if(a=Ie,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:zh(9,a)}}catch(b){zt(a,a.return,b)}if(a===o){Ie=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Ie=S;break e}Ie=a.return}}if(st=i,_s(),si&&typeof si.onPostCommitFiberRoot=="function")try{si.onPostCommitFiberRoot(Dh,e)}catch{}n=!0}return n}finally{lt=r,kn.transition=t}}return!1}function wA(e,t,r){t=Ua(r,t),t=Xk(e,t,1),e=bs(e,t,1),t=Lr(),e!==null&&(Hc(e,1,t),Gr(e,t))}function zt(e,t,r){if(e.tag===3)wA(e,e,r);else for(;t!==null;){if(t.tag===3){wA(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ws===null||!ws.has(n))){e=Ua(r,e),e=Qk(t,e,1),t=bs(t,e,1),e=Lr(),t!==null&&(Hc(t,1,e),Gr(t,e));break}}t=t.return}}function K4(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Lr(),e.pingedLanes|=e.suspendedLanes&r,lr===e&&(fr&r)===r&&(er===4||er===3&&(fr&130023424)===fr&&500>jt()-Ey?fo(e,0):yy|=r),Gr(e,t)}function vC(e,t){t===0&&((e.mode&1)===0?t=1:(t=Bd,Bd<<=1,(Bd&130023424)===0&&(Bd=4194304)));var r=Lr();e=Ui(e,t),e!==null&&(Hc(e,t,r),Gr(e,r))}function Y4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),vC(e,r)}function X4(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(t),vC(e,r)}var yC;yC=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||zr.current)Hr=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Hr=!1,F4(e,t,r);Hr=(e.flags&131072)!==0}else Hr=!1,Lt&&(t.flags&1048576)!==0&&bk(t,Sh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;sh(e,t),e=t.pendingProps;var i=Na(t,wr.current);Pa(t,r),i=hy(null,t,n,e,i,r);var s=fy();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$r(n)?(s=!0,Eh(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ay(t),i.updater=Hh,t.stateNode=i,i._reactInternals=t,wv(t,n,e,r),t=Cv(null,t,n,!0,s,r)):(t.tag=0,Lt&&s&&ey(t),_r(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(sh(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Z4(n),e=Mn(n,e),i){case 0:t=kv(null,t,n,e,r);break e;case 1:t=fA(null,t,n,e,r);break e;case 11:t=dA(null,t,n,e,r);break e;case 14:t=hA(null,t,n,Mn(n.type,e),r);break e}throw Error(pe(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),kv(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),fA(e,t,n,i,r);case 3:e:{if(tC(t),e===null)throw Error(pe(387));n=t.pendingProps,s=t.memoizedState,i=s.element,Rk(e,t),Ah(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ua(Error(pe(423)),t),t=pA(e,t,n,r,i);break e}else if(n!==i){i=Ua(Error(pe(424)),t),t=pA(e,t,n,r,i);break e}else for(nn=Ss(t.stateNode.containerInfo.firstChild),sn=t,Lt=!0,Bn=null,r=Ck(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ma(),n===i){t=Hi(e,t,r);break e}_r(e,t,n,r)}t=t.child}return t;case 5:return Ik(t),e===null&&Tv(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,gv(n,i)?o=null:s!==null&&gv(n,s)&&(t.flags|=32),eC(e,t),_r(e,t,o,r),t.child;case 6:return e===null&&Tv(t),null;case 13:return rC(e,t,r);case 4:return ly(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Fa(t,null,n,r):_r(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),dA(e,t,n,i,r);case 7:return _r(e,t,t.pendingProps,r),t.child;case 8:return _r(e,t,t.pendingProps.children,r),t.child;case 12:return _r(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Tt(bh,n._currentValue),n._currentValue=o,s!==null)if(zn(s.value,o)){if(s.children===i.children&&!zr.current){t=Hi(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Mi(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Sv(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(pe(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Sv(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}_r(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Pa(t,r),i=Cn(i),n=n(i),t.flags|=1,_r(e,t,n,r),t.child;case 14:return n=t.type,i=Mn(n,t.pendingProps),i=Mn(n.type,i),hA(e,t,n,i,r);case 15:return Zk(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),sh(e,t),t.tag=1,$r(n)?(e=!0,Eh(t)):e=!1,Pa(t,r),Yk(t,n,i),wv(t,n,i,r),Cv(null,t,n,!0,e,r);case 19:return nC(e,t,r);case 22:return Jk(e,t,r)}throw Error(pe(156,t.tag))};function EC(e,t){return WA(e,t)}function Q4(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,t,r,n){return new Q4(e,t,r,n)}function wy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Z4(e){if(typeof e=="function")return wy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$v)return 11;if(e===Gv)return 14}return 2}function ks(e,t){var r=e.alternate;return r===null?(r=An(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function lh(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")wy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case va:return po(r.children,i,s,t);case zv:o=8,i|=8;break;case qm:return e=An(12,r,t,i|2),e.elementType=qm,e.lanes=s,e;case Km:return e=An(13,r,t,i),e.elementType=Km,e.lanes=s,e;case Ym:return e=An(19,r,t,i),e.elementType=Ym,e.lanes=s,e;case IA:return Gh(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xA:o=10;break e;case RA:o=9;break e;case $v:o=11;break e;case Gv:o=14;break e;case hs:o=16,n=null;break e}throw Error(pe(130,e==null?e:typeof e,""))}return t=An(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function po(e,t,r,n){return e=An(7,e,n,t),e.lanes=r,e}function Gh(e,t,r,n){return e=An(22,e,n,t),e.elementType=IA,e.lanes=r,e.stateNode={isHidden:!1},e}function jm(e,t,r){return e=An(6,e,null,t),e.lanes=r,e}function Vm(e,t,r){return t=An(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function J4(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rm(0),this.expirationTimes=Rm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rm(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ay(e,t,r,n,i,s,o,a,l){return e=new J4(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=An(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ay(s),e}function ez(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function TC(e){if(!e)return xs;e=e._reactInternals;e:{if(So(e)!==e||e.tag!==1)throw Error(pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($r(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pe(171))}if(e.tag===1){var r=e.type;if($r(r))return Tk(e,r,t)}return t}function SC(e,t,r,n,i,s,o,a,l){return e=Ay(r,n,!0,e,i,s,o,a,l),e.context=TC(null),r=e.current,n=Lr(),i=As(r),s=Mi(n,i),s.callback=t??null,bs(r,s,i),e.current.lanes=i,Hc(e,i,n),Gr(e,n),e}function jh(e,t,r,n){var i=t.current,s=Lr(),o=As(i);return r=TC(r),t.context===null?t.context=r:t.pendingContext=r,t=Mi(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=bs(i,t,o),e!==null&&(Hn(e,i,o,s),rh(e,i,o)),o}function Ph(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function AA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ky(e,t){AA(e,t),(e=e.alternate)&&AA(e,t)}function tz(){return null}var bC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Cy(e){this._internalRoot=e}Vh.prototype.render=Cy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pe(409));jh(e,t,null,null)};Vh.prototype.unmount=Cy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Eo(function(){jh(null,e,null,null)}),t[Bi]=null}};function Vh(e){this._internalRoot=e}Vh.prototype.unstable_scheduleHydration=function(e){if(e){var t=JA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ps.length&&t!==0&&t<ps[r].priority;r++);ps.splice(r,0,e),r===0&&tk(e)}};function xy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kA(){}function rz(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Ph(o);s.call(c)}}var o=SC(t,n,e,0,null,!1,!1,"",kA);return e._reactRootContainer=o,e[Bi]=o.current,Lc(e.nodeType===8?e.parentNode:e),Eo(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Ph(l);a.call(c)}}var l=Ay(e,0,!1,null,null,!1,!1,"",kA);return e._reactRootContainer=l,e[Bi]=l.current,Lc(e.nodeType===8?e.parentNode:e),Eo(function(){jh(t,l,r,n)}),l}function qh(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ph(o);a.call(l)}}jh(t,o,e,i)}else o=rz(r,t,e,i,n);return Ph(o)}QA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=hc(t.pendingLanes);r!==0&&(Wv(t,r|1),Gr(t,jt()),(st&6)===0&&(Ha=jt()+500,_s()))}break;case 13:Eo(function(){var n=Ui(e,1);if(n!==null){var i=Lr();Hn(n,e,1,i)}}),ky(e,1)}};qv=function(e){if(e.tag===13){var t=Ui(e,134217728);if(t!==null){var r=Lr();Hn(t,e,134217728,r)}ky(e,134217728)}};ZA=function(e){if(e.tag===13){var t=As(e),r=Ui(e,t);if(r!==null){var n=Lr();Hn(r,e,t,n)}ky(e,t)}};JA=function(){return lt};ek=function(e,t){var r=lt;try{return lt=e,t()}finally{lt=r}};sv=function(e,t,r){switch(t){case"input":if(Zm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Fh(n);if(!i)throw Error(pe(90));LA(n),Zm(n,i)}}}break;case"textarea":DA(e,r);break;case"select":t=r.value,t!=null&&Ra(e,!!r.multiple,t,!1)}};HA=Ty;zA=Eo;var nz={usingClientEntryPoint:!1,Events:[$c,Sa,Fh,BA,UA,Ty]},lc={findFiberByHostInstance:co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iz={bundleType:lc.bundleType,version:lc.version,rendererPackageName:lc.rendererPackageName,rendererConfig:lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jA(e),e===null?null:e.stateNode},findFiberByHostInstance:lc.findFiberByHostInstance||tz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(cc=__REACT_DEVTOOLS_GLOBAL_HOOK__,!cc.isDisabled&&cc.supportsFiber))try{Dh=cc.inject(iz),si=cc}catch{}var cc;ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nz;ln.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xy(t))throw Error(pe(200));return ez(e,t,null,r)};ln.createRoot=function(e,t){if(!xy(e))throw Error(pe(299));var r=!1,n="",i=bC;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Ay(e,1,!1,null,null,r,!1,n,i),e[Bi]=t.current,Lc(e.nodeType===8?e.parentNode:e),new Cy(t)};ln.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pe(188)):(e=Object.keys(e).join(","),Error(pe(268,e)));return e=jA(t),e=e===null?null:e.stateNode,e};ln.flushSync=function(e){return Eo(e)};ln.hydrate=function(e,t,r){if(!Wh(t))throw Error(pe(200));return qh(null,e,t,!0,r)};ln.hydrateRoot=function(e,t,r){if(!xy(e))throw Error(pe(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=bC;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=SC(t,null,e,1,r??null,i,!1,s,o),e[Bi]=t.current,Lc(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Vh(t)};ln.render=function(e,t,r){if(!Wh(t))throw Error(pe(200));return qh(null,e,t,!1,r)};ln.unmountComponentAtNode=function(e){if(!Wh(e))throw Error(pe(40));return e._reactRootContainer?(Eo(function(){qh(null,null,e,!1,function(){e._reactRootContainer=null,e[Bi]=null})}),!0):!1};ln.unstable_batchedUpdates=Ty;ln.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Wh(r))throw Error(pe(200));if(e==null||e._reactInternals===void 0)throw Error(pe(38));return qh(e,t,r,!1,n)};ln.version="18.3.1-next-f1338f8080-20240426"});var Kh=Li((Jme,kC)=>{"use strict";function AC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AC)}catch(e){console.error(e)}}AC(),kC.exports=wC()});var xC=Li(Ry=>{"use strict";var CC=Kh();Ry.createRoot=CC.createRoot,Ry.hydrateRoot=CC.hydrateRoot;var eve});var _C=Li(Yh=>{"use strict";var oz=fa(),az=Symbol.for("react.element"),lz=Symbol.for("react.fragment"),cz=Object.prototype.hasOwnProperty,uz=oz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dz={key:!0,ref:!0,__self:!0,__source:!0};function IC(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)cz.call(t,n)&&!dz.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:az,type:e,key:s,ref:o,props:i,_owner:uz.current}}Yh.Fragment=lz;Yh.jsx=IC;Yh.jsxs=IC});var PC=Li((ive,LC)=>{"use strict";LC.exports=_C()});var jb=so(fa()),MH=so(xC());var k={};Kb(k,{default:()=>I});ei(k,so(fa(),1));var sz=so(fa(),1),RC={...sz};RC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentOwner:{current:null}};var I=RC;var oe=so(PC(),1);var jr={};Kb(jr,{default:()=>Iy});ei(jr,so(Kh(),1));var hz=so(Kh(),1),Iy=hz;var{slice:fz,forEach:pz}=[];function gz(e){return pz.call(fz.call(arguments,1),t=>{if(t)for(let r in t)e[r]===void 0&&(e[r]=t[r])}),e}function mz(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(e))}var DC=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,vz=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},n=encodeURIComponent(t),i=`${e}=${n}`;if(r.maxAge>0){let s=r.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(s)}`}if(r.domain){if(!DC.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!DC.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(i+="; Partitioned"),i},OC={create(e,t,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+r*60*1e3)),n&&(i.domain=n),document.cookie=vz(e,t,i)},read(e){let t=`${e}=`,r=document.cookie.split(";");for(let n=0;n<r.length;n++){let i=r[n];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove(e,t){this.create(e,"",-1,t)}},yz={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return OC.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:r,cookieMinutes:n,cookieDomain:i,cookieOptions:s}=t;r&&typeof document<"u"&&OC.create(r,e,n,i,s)}},Ez={name:"querystring",lookup(e){var t;let{lookupQuerystring:r}=e,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((t=window.location.hash)==null?void 0:t.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));let s=i.substring(1).split("&");for(let o=0;o<s.length;o++){let a=s[o].indexOf("=");a>0&&s[o].substring(0,a)===r&&(n=s[o].substring(a+1))}}return n}},Tz={name:"hash",lookup(e){var t;let{lookupHash:r,lookupFromHashIndex:n}=e,i;if(typeof window<"u"){let{hash:s}=window.location;if(s&&s.length>2){let o=s.substring(1);if(r){let a=o.split("&");for(let l=0;l<a.length;l++){let c=a[l].indexOf("=");c>0&&a[l].substring(0,c)===r&&(i=a[l].substring(c+1))}}if(i)return i;if(!i&&n>-1){let a=s.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(t=a[typeof n=="number"?n:0])==null?void 0:t.replace("/",""):void 0}}}return i}},Ga=null,NC=()=>{if(Ga!==null)return Ga;try{if(Ga=typeof window<"u"&&window.localStorage!==null,!Ga)return!1;let e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Ga=!1}return Ga},Sz={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&NC())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:r}=t;r&&NC()&&window.localStorage.setItem(r,e)}},ja=null,MC=()=>{if(ja!==null)return ja;try{if(ja=typeof window<"u"&&window.sessionStorage!==null,!ja)return!1;let e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{ja=!1}return ja},bz={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&MC())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:r}=t;r&&MC()&&window.sessionStorage.setItem(r,e)}},wz={name:"navigator",lookup(e){let t=[];if(typeof navigator<"u"){let{languages:r,userLanguage:n,language:i}=navigator;if(r)for(let s=0;s<r.length;s++)t.push(r[s]);n&&t.push(n),i&&t.push(i)}return t.length>0?t:void 0}},Az={name:"htmlTag",lookup(e){let{htmlTag:t}=e,r,n=t||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},kz={name:"path",lookup(e){var t;let{lookupFromPathIndex:r}=e;if(typeof window>"u")return;let n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(t=n[typeof r=="number"?r:0])==null?void 0:t.replace("/",""):void 0}},Cz={name:"subdomain",lookup(e){var t,r;let{lookupFromSubdomainIndex:n}=e,i=typeof n=="number"?n+1:1,s=typeof window<"u"&&((r=(t=window.location)==null?void 0:t.hostname)==null?void 0:r.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(s)return s[i]}},_L=!1;try{document.cookie,_L=!0}catch{}var LL=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];_L||LL.splice(1,1);var xz=()=>({order:LL,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),fp=class{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,r)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=gz(r,this.options||{},xz()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(yz),this.addDetector(Ez),this.addDetector(Sz),this.addDetector(bz),this.addDetector(wz),this.addDetector(Az),this.addDetector(kz),this.addDetector(Cz),this.addDetector(Tz)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return t.forEach(n=>{if(this.detectors[n]){let i=this.detectors[n].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(r=r.concat(i))}}),r=r.filter(n=>n!=null&&!mz(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(t,this.options)}))}};fp.type="languageDetector";var Ge=e=>typeof e=="string",jc=()=>{let e,t,r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r},FC=e=>e==null?"":""+e,Rz=(e,t,r)=>{e.forEach(n=>{t[n]&&(r[n]=t[n])})},Iz=/###/g,BC=e=>e&&e.indexOf("###")>-1?e.replace(Iz,"."):e,UC=e=>!e||Ge(e),du=(e,t,r)=>{let n=Ge(t)?t.split("."):t,i=0;for(;i<n.length-1;){if(UC(e))return{};let s=BC(n[i]);!e[s]&&r&&(e[s]=new r),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++i}return UC(e)?{}:{obj:e,k:BC(n[i])}},HC=(e,t,r)=>{let{obj:n,k:i}=du(e,t,Object);if(n!==void 0||t.length===1){n[i]=r;return}let s=t[t.length-1],o=t.slice(0,t.length-1),a=du(e,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=du(e,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=r},_z=(e,t,r,n)=>{let{obj:i,k:s}=du(e,t,Object);i[s]=i[s]||[],i[s].push(r)},pp=(e,t)=>{let{obj:r,k:n}=du(e,t);if(r)return r[n]},Lz=(e,t,r)=>{let n=pp(e,r);return n!==void 0?n:pp(t,r)},PL=(e,t,r)=>{for(let n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?Ge(e[n])||e[n]instanceof String||Ge(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):PL(e[n],t[n],r):e[n]=t[n]);return e},Va=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),Pz={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Dz=e=>Ge(e)?e.replace(/[&<>"'\/]/g,t=>Pz[t]):e,X0=class{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){let r=this.regExpMap.get(t);if(r!==void 0)return r;let n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}},Oz=[" ",",","?","!",";"],Nz=new X0(20),Mz=(e,t,r)=>{t=t||"",r=r||"";let n=Oz.filter(o=>t.indexOf(o)<0&&r.indexOf(o)<0);if(n.length===0)return!0;let i=Nz.getRegExp(`(${n.map(o=>o==="?"?"\\?":o).join("|")})`),s=!i.test(e);if(!s){let o=e.indexOf(r);o>0&&!i.test(e.substring(0,o))&&(s=!0)}return s},Q0=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];let n=t.split(r),i=e;for(let s=0;s<n.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<n.length;++l)if(l!==s&&(a+=r),a+=n[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<n.length-1)continue;s+=l-s+1;break}i=o}return i},gp=e=>e&&e.replace("_","-"),Fz={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}},Bz=class Z0{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,r)}init(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=t||Fz,this.options=r,this.debug=r.debug}log(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"log","",!0)}warn(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"warn","",!0)}error(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"error","")}deprecate(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,i){return i&&!this.debug?null:(Ge(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new Z0(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Z0(this.logger,t)}},mi=new Bz,gg=class{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);let n=this.observers[r].get(t)||0;this.observers[r].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(i=>{let[s,o]=i;for(let a=0;a<o;a++)s(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[s,o]=i;for(let a=0;a<o;a++)s.apply(s,[e,...r])})}},mp=class extends gg{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){let r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure,a;t.indexOf(".")>-1?a=t.split("."):(a=[t,r],n&&(Array.isArray(n)?a.push(...n):Ge(n)&&s?a.push(...n.split(s)):a.push(n)));let l=pp(this.data,a);return!l&&!r&&!n&&t.indexOf(".")>-1&&(t=a[0],r=a[1],n=a.slice(2).join(".")),l||!o||!Ge(n)?l:Q0(this.data&&this.data[t]&&this.data[t][r],n,s)}addResource(t,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=[t,r];n&&(a=a.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(a=t.split("."),i=r,r=a[1]),this.addNamespaces(r),HC(this.data,a,i),s.silent||this.emit("added",t,r,n,i)}addResources(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(let s in n)(Ge(n[s])||Array.isArray(n[s]))&&this.addResource(t,r,s,n[s],{silent:!0});i.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[t,r];t.indexOf(".")>-1&&(a=t.split("."),i=n,n=r,r=a[1]),this.addNamespaces(r);let l=pp(this.data,a)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?PL(l,n,s):l={...l,...n},HC(this.data,a,l),o.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,r)}:this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){let r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(n=>r[n]&&Object.keys(r[n]).length>0)}toJSON(){return this.data}},DL={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,i){return e.forEach(s=>{this.processors[s]&&(t=this.processors[s].process(t,r,n,i))}),t}},zC={},vp=class e extends gg{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Rz(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=mi.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;let n=this.resolve(t,r);return n&&n.res!==void 0}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");let i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,s=r.ns||this.options.defaultNS||[],o=n&&t.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!Mz(t,n,i);if(o&&!a){let l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:Ge(s)?[s]:s};let c=t.split(n);(n!==i||n===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),t=c.join(i)}return{key:t,namespaces:Ge(s)?[s]:s}}translate(t,r,n){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);let i=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(t[t.length-1],r),l=a[a.length-1],c=r.lng||this.language,u=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(u){let S=r.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${S}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${S}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:o}let d=this.resolve(t,r),h=d&&d.res,f=d&&d.usedKey||o,p=d&&d.exactUsedKey||o,g=Object.prototype.toString.apply(h),v=["[object Number]","[object Function]","[object RegExp]"],m=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,E=!Ge(h)&&typeof h!="boolean"&&typeof h!="number";if(y&&h&&E&&v.indexOf(g)<0&&!(Ge(m)&&Array.isArray(h))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,h,{...r,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(d.res=S,d.usedParams=this.getUsedParamsDetails(r),d):S}if(s){let S=Array.isArray(h),b=S?[]:{},w=S?p:f;for(let x in h)if(Object.prototype.hasOwnProperty.call(h,x)){let D=`${w}${s}${x}`;b[x]=this.translate(D,{...r,joinArrays:!1,ns:a}),b[x]===D&&(b[x]=h[x])}h=b}}else if(y&&Ge(m)&&Array.isArray(h))h=h.join(m),h&&(h=this.extendTranslation(h,t,r,n));else{let S=!1,b=!1,w=r.count!==void 0&&!Ge(r.count),x=e.hasDefaultValue(r),D=w?this.pluralResolver.getSuffix(c,r.count,r):"",N=r.ordinal&&w?this.pluralResolver.getSuffix(c,r.count,{ordinal:!1}):"",C=w&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),P=C&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${D}`]||r[`defaultValue${N}`]||r.defaultValue;!this.isValidLookup(h)&&x&&(S=!0,h=P),this.isValidLookup(h)||(b=!0,h=o);let U=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&b?void 0:h,G=x&&P!==h&&this.options.updateMissing;if(b||S||G){if(this.logger.log(G?"updateKey":"missingKey",c,l,o,G?P:h),s){let W=this.resolve(o,{...r,keySeparator:!1});W&&W.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let K=[],B=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&B&&B[0])for(let W=0;W<B.length;W++)K.push(B[W]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(r.lng||this.language):K.push(r.lng||this.language);let V=(W,X,Y)=>{let O=x&&Y!==h?Y:U;this.options.missingKeyHandler?this.options.missingKeyHandler(W,l,X,O,G,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(W,l,X,O,G,r),this.emit("missingKey",W,l,X,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&w?K.forEach(W=>{let X=this.pluralResolver.getSuffixes(W,r);C&&r[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(Y=>{V([W],o+Y,r[`defaultValue${Y}`]||P)})}):V(K,o,P))}h=this.extendTranslation(h,t,r,d,n),b&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${o}`),(b||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,S?h:void 0):h=this.options.parseMissingKeyHandler(h))}return i?(d.res=h,d.usedParams=this.getUsedParamsDetails(r),d):h}extendTranslation(t,r,n,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});let c=Ge(t)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),u;if(c){let h=t.match(this.interpolator.nestingRegexp);u=h&&h.length}let d=n.replace&&!Ge(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),t=this.interpolator.interpolate(t,d,n.lng||this.language||i.usedLng,n),c){let h=t.match(this.interpolator.nestingRegexp),f=h&&h.length;u<f&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var h=arguments.length,f=new Array(h),p=0;p<h;p++)f[p]=arguments[p];return s&&s[0]===f[0]&&!n.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${r[0]}`),null):o.translate(...f,r)},n)),n.interpolation&&this.interpolator.reset()}let a=n.postProcess||this.options.postProcess,l=Ge(a)?[a]:a;return t!=null&&l&&l.length&&n.applyPostProcessor!==!1&&(t=DL.handle(l,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i,s,o,a;return Ge(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(n))return;let c=this.extractFromKey(l,r),u=c.key;i=u;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));let h=r.count!==void 0&&!Ge(r.count),f=h&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),p=r.context!==void 0&&(Ge(r.context)||typeof r.context=="number")&&r.context!=="",g=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);d.forEach(v=>{this.isValidLookup(n)||(a=v,!zC[`${g[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(zC[`${g[0]}-${v}`]=!0,this.logger.warn(`key "${i}" for languages "${g.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(m=>{if(this.isValidLookup(n))return;o=m;let y=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,u,m,v,r);else{let S;h&&(S=this.pluralResolver.getSuffix(m,r.count,r));let b=`${this.options.pluralSeparator}zero`,w=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(y.push(u+S),r.ordinal&&S.indexOf(w)===0&&y.push(u+S.replace(w,this.options.pluralSeparator)),f&&y.push(u+b)),p){let x=`${u}${this.options.contextSeparator}${r.context}`;y.push(x),h&&(y.push(x+S),r.ordinal&&S.indexOf(w)===0&&y.push(x+S.replace(w,this.options.pluralSeparator)),f&&y.push(x+b))}}let E;for(;E=y.pop();)this.isValidLookup(n)||(s=E,n=this.getResource(m,v,E,r))}))})}),{res:n,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,r,n,i):this.resourceStore.getResource(t,r,n,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!Ge(t.replace),i=n?t.replace:t;if(n&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(let s of r)delete i[s]}return i}static hasDefaultValue(t){let r="defaultValue";for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}},_y=e=>e.charAt(0).toUpperCase()+e.slice(1),yp=class{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=mi.create("languageUtils")}getScriptPartFromCode(t){if(t=gp(t),!t||t.indexOf("-")<0)return null;let r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=gp(t),!t||t.indexOf("-")<0)return t;let r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(Ge(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(t)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}let r=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map(i=>i.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=_y(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=_y(n[1].toLowerCase())),r.indexOf(n[2].toLowerCase())>-1&&(n[2]=_y(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;let i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(r=i)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;let i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(s=>{if(s===i||!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),Ge(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){let n=this.getFallbackCodes(r||this.options.fallbackLng||[],t),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Ge(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):Ge(t)&&s(this.formatLanguageCode(t)),n.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}},Uz=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Hz={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3},zz=["v1","v2","v3"],$z=["v4"],$C={zero:0,one:1,two:2,few:3,many:4,other:5},Gz=()=>{let e={};return Uz.forEach(t=>{t.lngs.forEach(r=>{e[r]={numbers:t.nr,plurals:Hz[t.fc]}})}),e},J0=class{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=r,this.logger=mi.create("pluralResolver"),(!this.options.compatibilityJSON||$z.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Gz(),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){let n=gp(t==="dev"?"en":t),i=r.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(n,{type:i})}catch{if(!t.match(/-|_/))return;let a=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(a,r)}return this.pluralRulesCache[s]=o,o}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(t,r);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,n).map(i=>`${r}${i}`)}getSuffixes(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(t,r);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((i,s)=>$C[i]-$C[s]).map(i=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i}`):n.numbers.map(i=>this.getSuffix(t,i,r)):[]}getSuffix(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=this.getRule(t,n);return i?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(r)}`:this.getSuffixRetroCompatible(i,r):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,r){let n=t.noAbs?t.plurals(r):t.plurals(Math.abs(r)),i=t.numbers[n];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));let s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?s():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!zz.includes(this.options.compatibilityJSON)}},GC=function(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Lz(e,t,r);return!s&&i&&Ge(r)&&(s=Q0(e,r,n),s===void 0&&(s=Q0(t,r,n))),s},Ly=e=>e.replace(/\$/g,"$$$$"),eE=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=mi.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(r=>r),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});let{escape:r,escapeValue:n,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:u,unescapePrefix:d,nestingPrefix:h,nestingPrefixEscaped:f,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:v,maxReplaces:m,alwaysFormat:y}=t.interpolation;this.escape=r!==void 0?r:Dz,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?Va(s):o||"{{",this.suffix=a?Va(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=h?Va(h):f||Va("$t("),this.nestingSuffix=p?Va(p):g||Va(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=m||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let t=(r,n)=>r&&r.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,r,n,i){let s,o,a,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=h=>{if(h.indexOf(this.formatSeparator)<0){let v=GC(r,l,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(v,void 0,n,{...i,...r,interpolationkey:h}):v}let f=h.split(this.formatSeparator),p=f.shift().trim(),g=f.join(this.formatSeparator).trim();return this.format(GC(r,l,p,this.options.keySeparator,this.options.ignoreJSONStructure),g,n,{...i,...r,interpolationkey:p})};this.resetRegExp();let u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>Ly(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?Ly(this.escape(h)):Ly(h)}].forEach(h=>{for(a=0;s=h.regex.exec(t);){let f=s[1].trim();if(o=c(f),o===void 0)if(typeof u=="function"){let g=u(t,s,i);o=Ge(g)?g:""}else if(i&&Object.prototype.hasOwnProperty.call(i,f))o="";else if(d){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${f} for interpolating ${t}`),o="";else!Ge(o)&&!this.useRawValueToEscape&&(o=FC(o));let p=h.safeValue(o);if(t=t.replace(s[0],p),d?(h.regex.lastIndex+=o.length,h.regex.lastIndex-=s[0].length):h.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o,a=(l,c)=>{let u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;let d=l.split(new RegExp(`${u}[ ]*{`)),h=`{${d[1]}`;l=d[0],h=this.interpolate(h,o);let f=h.match(/'/g),p=h.match(/"/g);(f&&f.length%2===0&&!p||p.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),c&&(o={...c,...o})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${u}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;i=this.nestingRegexp.exec(t);){let l=[];o={...n},o=o.replace&&!Ge(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){let u=i[1].split(this.formatSeparator).map(d=>d.trim());i[1]=u.shift(),l=u,c=!0}if(s=r(a.call(this,i[1].trim(),o),o),s&&i[0]===t&&!Ge(s))return s;Ge(s)||(s=FC(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),s=""),c&&(s=l.reduce((u,d)=>this.format(u,d,n.lng,{...n,interpolationkey:i[1].trim()}),s.trim())),t=t.replace(i[0],s),this.regexp.lastIndex=0}return t}},jz=e=>{let t=e.toLowerCase().trim(),r={};if(e.indexOf("(")>-1){let n=e.split("(");t=n[0].toLowerCase().trim();let i=n[1].substring(0,n[1].length-1);t==="currency"&&i.indexOf(":")<0?r.currency||(r.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?r.range||(r.range=i.trim()):i.split(";").forEach(s=>{if(s){let[o,...a]=s.split(":"),l=a.join(":").trim().replace(/^'+|'+$/g,""),c=o.trim();r[c]||(r[c]=l),l==="false"&&(r[c]=!1),l==="true"&&(r[c]=!0),isNaN(l)||(r[c]=parseInt(l,10))}})}return{formatName:t,formatOptions:r}},Wa=e=>{let t={};return(r,n,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});let o=n+JSON.stringify(s),a=t[o];return a||(a=e(gp(n),i),t[o]=a),a(r)}},tE=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=mi.create("formatter"),this.options=t,this.formats={number:Wa((r,n)=>{let i=new Intl.NumberFormat(r,{...n});return s=>i.format(s)}),currency:Wa((r,n)=>{let i=new Intl.NumberFormat(r,{...n,style:"currency"});return s=>i.format(s)}),datetime:Wa((r,n)=>{let i=new Intl.DateTimeFormat(r,{...n});return s=>i.format(s)}),relativetime:Wa((r,n)=>{let i=new Intl.RelativeTimeFormat(r,{...n});return s=>i.format(s,n.range||"day")}),list:Wa((r,n)=>{let i=new Intl.ListFormat(r,{...n});return s=>i.format(s)})},this.init(t)}init(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=r.interpolation.formatSeparator||","}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=Wa(r)}format(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=r.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){let o=s.findIndex(a=>a.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,a)=>{let{formatName:l,formatOptions:c}=jz(a);if(this.formats[l]){let u=o;try{let d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},h=d.locale||d.lng||i.locale||i.lng||n;u=this.formats[l](o,h,{...c,...i,...d})}catch(d){this.logger.warn(d)}return u}else this.logger.warn(`there was no format function for ${l}`);return o},t)}},Vz=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)},rE=class extends gg{constructor(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=mi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(t,r,n,i){let s={},o={},a={},l={};return t.forEach(c=>{let u=!0;r.forEach(d=>{let h=`${c}|${d}`;!n.reload&&this.store.hasResourceBundle(c,d)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,u=!1,o[h]===void 0&&(o[h]=!0),s[h]===void 0&&(s[h]=!0),l[d]===void 0&&(l[d]=!0)))}),u||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,r,n){let i=t.split("|"),s=i[0],o=i[1];r&&this.emit("failedLoading",s,o,r),!r&&n&&this.store.addResourceBundle(s,o,n,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&n&&(this.state[t]=0);let a={};this.queue.forEach(l=>{_z(l.loaded,[s],o),Vz(l,t),r&&l.errors.push(r),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});let u=l.loaded[c];u.length&&u.forEach(d=>{a[c][d]===void 0&&(a[c][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:i,wait:s,callback:o});return}this.readingCalls++;let a=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){let d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(c&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,i+1,s*2,o)},s);return}o(c,u)},l=this.backend[n].bind(this.backend);if(l.length===2){try{let c=l(t,r);c&&typeof c.then=="function"?c.then(u=>a(null,u)).catch(a):a(null,c)}catch(c){a(c)}return}return l(t,r,a)}prepareLoading(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Ge(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Ge(r)&&(r=[r]);let s=this.queueLoad(t,r,n,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=t.split("|"),i=n[0],s=n[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${r}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${r}loaded namespace ${s} for language ${i}`,a),this.loaded(t,o,a)})}saveMissing(t,r,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){let l={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let u;c.length===5?u=c(t,r,n,i,l):u=c(t,r,n,i),u&&typeof u.then=="function"?u.then(d=>a(null,d)).catch(a):a(null,u)}catch(u){a(u)}else c(t,r,n,i,a,l)}!t||!t[0]||this.store.addResource(t[0],r,n,i)}}},jC=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Ge(e[1])&&(t.defaultValue=e[1]),Ge(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){let r=e[3]||e[2];Object.keys(r).forEach(n=>{t[n]=r[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),VC=e=>(Ge(e.ns)&&(e.ns=[e.ns]),Ge(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Ge(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),Xh=()=>{},Wz=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(t=>{typeof e[t]=="function"&&(e[t]=e[t].bind(e))})},Ep=class e extends gg{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=VC(t),this.services={},this.logger=mi,this.modules={external:[]},Wz(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(){var t=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(n=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(Ge(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));let i=jC();this.options={...i,...this.options,...VC(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);let s=l=>l?typeof l=="function"?new l:l:null;if(!this.options.isClone){this.modules.logger?mi.init(s(this.modules.logger),this.options):mi.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=tE);let c=new yp(this.options);this.store=new mp(this.options.resources,this.options);let u=this.services;u.logger=mi,u.resourceStore=this.store,u.languageUtils=c,u.pluralResolver=new J0(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(u.formatter=s(l),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new eE(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new rE(s(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(d){for(var h=arguments.length,f=new Array(h>1?h-1:0),p=1;p<h;p++)f[p-1]=arguments[p];t.emit(d,...f)}),this.modules.languageDetector&&(u.languageDetector=s(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=s(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new vp(this.services,this.options),this.translator.on("*",function(d){for(var h=arguments.length,f=new Array(h>1?h-1:0),p=1;p<h;p++)f[p-1]=arguments[p];t.emit(d,...f)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Xh),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=function(){return t.store[l](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=function(){return t.store[l](...arguments),t}});let o=jc(),a=()=>{let l=(c,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(u),n(c,u)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),o}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xh,n=Ge(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(n&&n.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();let i=[],s=o=>{!o||o==="cimode"||this.services.languageUtils.toResolveHierarchy(o).forEach(a=>{a!=="cimode"&&i.indexOf(a)<0&&i.push(a)})};n?s(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(o=>s(o)),this.options.preload&&this.options.preload.forEach(o=>s(o)),this.services.backendConnector.load(i,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(o)})}else r(null)}reloadResources(t,r,n){let i=jc();return typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),n||(n=Xh),this.services.backendConnector.reload(t,r,s=>{i.resolve(),n(s)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&DL.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let r=0;r<this.languages.length;r++){let n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(t,r){var n=this;this.isLanguageChangingTo=t;let i=jc();this.emit("languageChanging",t);let s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return n.t(...arguments)}),r&&r(l,function(){return n.t(...arguments)})},a=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);let c=Ge(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,u=>{o(u,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),i}getFixedT(t,r,n){var i=this;let s=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,u=new Array(c>2?c-2:0),d=2;d<c;d++)u[d-2]=arguments[d];l=i.options.overloadTranslationOptionHandler([o,a].concat(u))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||s.keyPrefix);let h=i.options.keySeparator||".",f;return l.keyPrefix&&Array.isArray(o)?f=o.map(p=>`${l.keyPrefix}${h}${p}`):f=l.keyPrefix?`${l.keyPrefix}${h}${o}`:o,i.t(f,l)};return Ge(t)?s.lng=t:s.lngs=t,s.ns=r,s.keyPrefix=n,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let n=r.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;let o=(a,l)=>{let c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(r.precheck){let a=r.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,t)&&(!i||o(s,t)))}loadNamespaces(t,r){let n=jc();return this.options.ns?(Ge(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),r&&r(i)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){let n=jc();Ge(t)&&(t=[t]);let i=this.options.preload||[],s=t.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{n.resolve(),r&&r(o)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";let r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new yp(jC());return r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new e(t,r)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xh,n=t.forkResourceStore;n&&delete t.forkResourceStore;let i={...this.options,...t,isClone:!0},s=new e(i);return(t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n&&(s.store=new mp(this.store.data,i),s.services.resourceStore=s.store),s.translator=new vp(s.services,i),s.translator.on("*",function(o){for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];s.emit(o,...l)}),s.init(i,r),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},xr=Ep.createInstance();xr.createInstance=Ep.createInstance;xr.createInstance;xr.dir;xr.init;xr.loadResources;xr.reloadResources;xr.use;xr.changeLanguage;xr.getFixedT;xr.t;xr.exists;xr.setDefaultNamespace;xr.hasLoadedNamespace;xr.loadNamespaces;xr.loadLanguages;var He=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qz(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Kz=(e,t,r,n)=>{var i,s,o,a;let l=[r,{code:t,...n||{}}];if((s=(i=e?.services)==null?void 0:i.logger)!=null&&s.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);Bo(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(a=(o=e?.services)==null?void 0:o.logger)!=null&&a.warn?e.services.logger.warn(...l):console!=null&&console.warn&&console.warn(...l)},WC={},nE=(e,t,r,n)=>{Bo(r)&&WC[r]||(Bo(r)&&(WC[r]=new Date),Kz(e,t,r,n))},OL=(e,t)=>()=>{if(e.isInitialized)t();else{let r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},iE=(e,t,r)=>{e.loadNamespaces(t,OL(e,r))},qC=(e,t,r,n)=>{if(Bo(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return iE(e,r,n);r.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,OL(e,n))},Yz=(e,t,r={})=>!t.languages||!t.languages.length?(nE(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,i)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!i(n.isLanguageChangingTo,e))return!1}}),Bo=e=>typeof e=="string",Xz=e=>typeof e=="object"&&e!==null,Qz=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Zz={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xA9","&#169;":"\xA9","&reg;":"\xAE","&#174;":"\xAE","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},Jz=e=>Zz[e],e$=e=>e.replace(Qz,Jz),sE={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e$},t$=(e={})=>{sE={...sE,...e}},r$=()=>sE,NL,n$=e=>{NL=e},i$=()=>NL,s$={type:"3rdParty",init(e){t$(e.options.react),n$(e)}},o$=(0,k.createContext)(),oE=class{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}},a$=(e,t)=>{let r=(0,k.useRef)();return(0,k.useEffect)(()=>{r.current=e},[e,t]),r.current},ML=(e,t,r,n)=>e.getFixedT(t,r,n),l$=(e,t,r,n)=>(0,k.useCallback)(ML(e,t,r,n),[e,t,r,n]),Ai=(e,t={})=>{var r,n,i,s;let{i18n:o}=t,{i18n:a,defaultNS:l}=(0,k.useContext)(o$)||{},c=o||a||i$();if(c&&!c.reportNamespaces&&(c.reportNamespaces=new oE),!c){nE(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");let D=(C,P)=>Bo(P)?P:Xz(P)&&Bo(P.defaultValue)?P.defaultValue:Array.isArray(C)?C[C.length-1]:C,N=[D,{},!1];return N.t=D,N.i18n={},N.ready=!1,N}(r=c.options.react)!=null&&r.wait&&nE(c,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");let u={...r$(),...c.options.react,...t},{useSuspense:d,keyPrefix:h}=u,f=l||((n=c.options)==null?void 0:n.defaultNS);f=Bo(f)?[f]:f||["translation"],(s=(i=c.reportNamespaces).addUsedNamespaces)==null||s.call(i,f);let p=(c.isInitialized||c.initializedStoreOnce)&&f.every(D=>Yz(D,c,u)),g=l$(c,t.lng||null,u.nsMode==="fallback"?f:f[0],h),v=()=>g,m=()=>ML(c,t.lng||null,u.nsMode==="fallback"?f:f[0],h),[y,E]=(0,k.useState)(v),S=f.join();t.lng&&(S=`${t.lng}${S}`);let b=a$(S),w=(0,k.useRef)(!0);(0,k.useEffect)(()=>{let{bindI18n:D,bindI18nStore:N}=u;w.current=!0,!p&&!d&&(t.lng?qC(c,t.lng,f,()=>{w.current&&E(m)}):iE(c,f,()=>{w.current&&E(m)})),p&&b&&b!==S&&w.current&&E(m);let C=()=>{w.current&&E(m)};return D&&c?.on(D,C),N&&c?.store.on(N,C),()=>{w.current=!1,c&&D&&D?.split(" ").forEach(P=>c.off(P,C)),N&&c&&N.split(" ").forEach(P=>c.store.off(P,C))}},[c,S]),(0,k.useEffect)(()=>{w.current&&p&&E(v)},[c,h,p]);let x=[y,c,p];if(x.t=y,x.i18n=c,x.ready=p,p||!p&&!d)return x;throw new Promise(D=>{t.lng?qC(c,t.lng,f,()=>D()):iE(c,f,()=>D())})},c$="Close",u$="Next",d$="Open",h$="Previous",f$="Search",p$="Search...",g$="Share",m$="View All",v$="Failed",y$="Copied",E$="Loading...",T$="Search",S$="No Results",b$="More Results",w$="Full screen",A$="Reset zoom",k$="Rotate left",C$="Rotate right",x$="Zoom in",R$="Zoom out",I$="Select",_$="Viewer",L$="About",P$="Annotations",D$="Search",O$="More Information",N$="View Collection",M$="Copy Collection URL",F$="View Manifest",B$="Copy Manifest URL",U$={commonClose:c$,commonNext:u$,commonOpen:d$,commonPrevious:h$,commonSearch:f$,commonSearchPlaceholder:p$,commonShare:g$,commonViewAll:m$,copyFailure:v$,copySuccess:y$,contentSearchLoading:E$,contentSearchPlaceholder:T$,contentSearchResultsNone:S$,contentSearchResultsMore:b$,imageFullScreen:w$,imageResetZoom:A$,imageRotateLeft:k$,imageRotateRight:C$,imageZoomIn:x$,imageZoomOut:R$,informationPanelTabs:I$,informationPanelTabsClose:_$,informationPanelTabsAbout:L$,informationPanelTabsAnnotations:P$,informationPanelTabsSearch:D$,informationPanelToggle:O$,shareCollectionJson:N$,shareCollectionCopy:M$,shareManifestJson:F$,shareManifestCopy:B$},H$="Sulje",z$="Seuraava",$$="Edellinen",G$="Hae",j$="Hae...",V$="Jaa",W$="N\xE4yt\xE4 kaikki",q$="Kopiointi ep\xE4onnistui",K$="Kopioitu",Y$="Ladataan...",X$="Haku",Q$="Ei osumia",Z$="Lis\xE4\xE4 osumia",J$="Valitse",e5="Katselu",t5="Tiedot",r5="Annotaatiot",n5="Haku",i5="Lis\xE4tiedot",s5="N\xE4yt\xE4 kokoelma",o5="Kopioi kokoelman osoite",a5="N\xE4yt\xE4 manifesti",l5="Kopioi manifestin osoite",c5={commonClose:H$,commonNext:z$,commonPrevious:$$,commonSearch:G$,commonSearchPlaceholder:j$,commonShare:V$,commonViewAll:W$,copyFailure:q$,copySuccess:K$,contentSearchLoading:Y$,contentSearchPlaceholder:X$,contentSearchResultsNone:Q$,contentSearchResultsMore:Z$,informationPanelTabs:J$,informationPanelTabsClose:e5,informationPanelTabsAbout:t5,informationPanelTabsAnnotations:r5,informationPanelTabsSearch:n5,informationPanelToggle:i5,shareCollectionJson:s5,shareCollectionCopy:o5,shareManifestJson:a5,shareManifestCopy:l5},u5="Lukk",d5="Neste",h5="Forrige",f5="S\xF8k",p5="S\xF8k...",g5="Del",m5="Se alle",v5="Feilet",y5="Kopiert",E5="Laster inn...",T5="S\xF8k",S5="Ingen resultat",b5="Flere resultat",w5="Velg",A5="Viewer",k5="Om",C5="Annoteringer",x5="S\xF8k",R5="Mer informasjon",I5="Se samlingen",_5="Kopi\xE9r samlingens URL",L5="Se manifestet",P5="Kopi\xE9r manifestets URL",D5={commonClose:u5,commonNext:d5,commonPrevious:h5,commonSearch:f5,commonSearchPlaceholder:p5,commonShare:g5,commonViewAll:m5,copyFailure:v5,copySuccess:y5,contentSearchLoading:E5,contentSearchPlaceholder:T5,contentSearchResultsNone:S5,contentSearchResultsMore:b5,informationPanelTabs:w5,informationPanelTabsClose:A5,informationPanelTabsAbout:k5,informationPanelTabsAnnotations:C5,informationPanelTabsSearch:x5,informationPanelToggle:R5,shareCollectionJson:I5,shareCollectionCopy:_5,shareManifestJson:L5,shareManifestCopy:P5},O5="Lukk",N5="Neste",M5="F\xF8rre",F5="S\xF8k",B5="S\xF8k...",U5="Del",H5="Sj\xE5 alle",z5="Feila",$5="Kopiert",G5="Laster inn...",j5="S\xF8k",V5="Ingen resultat",W5="Fleire resultat",q5="Vel",K5="Viewer",Y5="Om",X5="Annoteringa",Q5="S\xF8k",Z5="Meir informasjon",J5="Sj\xE5 samlinga",eG="Kopi\xE9r samlingas URL",tG="Sj\xE5 manifestet",rG="Kopi\xE9r manifestets URL",nG={commonClose:O5,commonNext:N5,commonPrevious:M5,commonSearch:F5,commonSearchPlaceholder:B5,commonShare:U5,commonViewAll:H5,copyFailure:z5,copySuccess:$5,contentSearchLoading:G5,contentSearchPlaceholder:j5,contentSearchResultsNone:V5,contentSearchResultsMore:W5,informationPanelTabs:q5,informationPanelTabsClose:K5,informationPanelTabsAbout:Y5,informationPanelTabsAnnotations:X5,informationPanelTabsSearch:Q5,informationPanelToggle:Z5,shareCollectionJson:J5,shareCollectionCopy:eG,shareManifestJson:tG,shareManifestCopy:rG},iG="Lukk",sG="Neste",oG="Forrige",aG="S\xF8k",lG="S\xF8k...",cG="Del",uG="Se alle",dG="Feilet",hG="Kopiert",fG="Laster inn...",pG="S\xF8k",gG="Ingen resultat",mG="Flere resultat",vG="Velg",yG="Viewer",EG="Om",TG="Annoteringer",SG="S\xF8k",bG="Mer informasjon",wG="Se samlingen",AG="Kopi\xE9r samlingens URL",kG="Se manifestet",CG="Kopi\xE9r manifestets URL",xG={commonClose:iG,commonNext:sG,commonPrevious:oG,commonSearch:aG,commonSearchPlaceholder:lG,commonShare:cG,commonViewAll:uG,copyFailure:dG,copySuccess:hG,contentSearchLoading:fG,contentSearchPlaceholder:pG,contentSearchResultsNone:gG,contentSearchResultsMore:mG,informationPanelTabs:vG,informationPanelTabsClose:yG,informationPanelTabsAbout:EG,informationPanelTabsAnnotations:TG,informationPanelTabsSearch:SG,informationPanelToggle:bG,shareCollectionJson:wG,shareCollectionCopy:AG,shareManifestJson:kG,shareManifestCopy:CG},RG={},IG={en:U$,fi:c5,nb:D5,nn:nG,no:xG,pt:RG},aE="clover",_G=Object.fromEntries(Object.entries(IG).map(([e,t])=>[e,{[`${aE}`]:t}]));xr.use(fp).use(s$).init({defaultNS:aE,fallbackLng:"en",ns:[aE],resources:{..._G}});function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}function LG(e,t){if(Ru(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ru(n)!="object")return n;throw TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PG(e){var t=LG(e,"string");return Ru(t)=="symbol"?t:t+""}function Rn(e,t,r){return(t=PG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var DG={},KC=e=>{let t,r=new Set,n=(u,d)=>{let h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){let f=t;t=d??(typeof h!="object"||!h)?h:Object.assign({},t,h),r.forEach(p=>p(t,f))}},i=()=>t,s=()=>c,o=u=>(r.add(u),()=>r.delete(u)),a=()=>{(DG?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()},l={setState:n,getState:i,getInitialState:s,subscribe:o,destroy:a},c=t=e(n,i,l);return l},FL=e=>e?KC(e):KC;function BL(e){return{all:e||(e=new Map),on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}function OG(e,t){if(Iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Iu(n)!="object")return n;throw TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NG(e){var t=OG(e,"string");return Iu(t)=="symbol"?t:t+""}function Us(e,t,r){return(t=NG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vi(e){return Array.isArray(e)?e:e?[e]:[]}function ki(e){for(let t in e)(e[t]===void 0||e[t]===null)&&delete e[t];return e}function Yi(e){return typeof e=="string"?!1:e&&!e.type&&"source"in e?(e.type="SpecificResource",!0):!!e&&e.type==="SpecificResource"}function Qh(...e){return t=>e.reduce((r,n)=>n(r),t)}var YC=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];function MG(e,t){if(e==null)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw Error("Array is not a valid entity");if(typeof e!="object"){if(t)return t;throw Error(`${typeof e} is not a valid entity`)}if(typeof e.type=="string"){let r=YC.indexOf(e.type);if(r!==-1)return YC[r]}if(e.profile)return"Service";throw Error("Resource type is not known")}var FG=class UL{constructor(t,r={}){Us(this,"traversals",void 0),Us(this,"options",void 0),Us(this,"_traverseManifest",Qh(this.traverseManifestItems.bind(this),this.traverseNavPlace.bind(this),this.traverseLinking.bind(this),this.traverseDescriptive.bind(this),this.traverseLinkedCanvases.bind(this),this.traverseManifestStructures.bind(this),this.traverseInlineAnnotationPages.bind(this))),Us(this,"_traverseCanvas",Qh(this.traverseCanvasItems.bind(this),this.traverseLinking.bind(this),this.traverseDescriptive.bind(this),this.traverseLinkedCanvases.bind(this),this.traverseInlineAnnotationPages.bind(this))),Us(this,"_traverseAnnotationPage",Qh(this.traverseAnnotationPageItems.bind(this),this.traverseLinking.bind(this),this.traverseDescriptive.bind(this))),Us(this,"_traverseRange",Qh(this.traverseRangeRanges.bind(this),this.traverseLinking.bind(this),this.traverseDescriptive.bind(this),this.traverseLinkedCanvases.bind(this))),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],specificResource:[],geoJson:[],...t},this.options={allowUndefinedReturn:!1,...r}}static all(t){return new UL({collection:[t],manifest:[t],canvas:[t],annotationCollection:[t],annotationPage:[t],annotation:[t],contentResource:[t],choice:[t],range:[t],service:[t],geoJson:[t],specificResource:[t],agent:[t]})}traverseDescriptive(t){return t.thumbnail&&(t.thumbnail=Vi(t.thumbnail).map(r=>this.traverseType(r,{parent:t},this.traversals.contentResource))),t.provider&&(t.provider=t.provider.map(r=>this.traverseAgent(r,t))),t}traverseLinking(t){return t.seeAlso&&(t.seeAlso=Vi(t.seeAlso).map(r=>this.traverseType(r,{parent:t},this.traversals.contentResource))),t.service&&(t.service=Vi(t.service).map(r=>this.traverseService(r))),t.services&&(t.services=Vi(t.services).map(r=>this.traverseService(r,t))),t.logo&&(t.logo=Vi(t.logo).map(r=>this.traverseType(r,{parent:t},this.traversals.contentResource))),t.homepage&&(t.homepage=Vi(t.homepage).map(r=>this.traverseType(r,{parent:t},this.traversals.contentResource))),t.partOf&&(t.partOf=t.partOf.map(r=>typeof r=="string"||!r.type?this.traverseType(r,{parent:t},this.traversals.contentResource):r.type==="Canvas"?this.traverseType(r,{parent:t},this.traversals.canvas):r.type==="AnnotationCollection"?this.traverseType(r,{parent:t},this.traversals.annotationCollection):r.type==="Collection"?this.traverseType(r,{parent:t},this.traversals.collection):this.traverseType(r,{parent:t},this.traversals.contentResource))),t.start&&(Yi(t.start)?t.start=this.traverseSpecificResource(t.start,"Canvas",t):t.start=this.traverseType(t.start,{parent:t},this.traversals.canvas)),t.rendering&&(t.rendering=t.rendering.map(r=>this.traverseType(r,{parent:t},this.traversals.contentResource))),t.supplementary&&(t.supplementary=t.supplementary.map(r=>this.traverseType(r,{parent:t},this.traversals.contentResource))),t}traverseCollectionItems(t){return t.items&&t.items.map(r=>r.type==="Collection"?this.traverseCollection(r):this.traverseManifest(r)),t}traverseCollection(t,r){return this.traverseType(this.traverseDescriptive(this.traverseNavPlace(this.traverseInlineAnnotationPages(this.traverseLinking(this.traverseLinkedCanvases(this.traverseCollectionItems(t)))))),{parent:r},this.traversals.collection)}traverseGeoJson(t,r){return this.traverseType(t,{parent:r},this.traversals.geoJson)}traverseNavPlace(t){return t.navPlace&&(t.navPlace=this.traverseGeoJson(t.navPlace,t)),t}traverseManifestItems(t){return t.items&&(t.items=t.items.map(r=>this.traverseCanvas(r))),t}traverseManifestStructures(t){return t.structures&&(t.structures=t.structures.map(r=>this.traverseRange(r))),t}traverseManifest(t,r){return this.traverseType(this._traverseManifest(t),{parent:r},this.traversals.manifest)}traverseCanvasItems(t){return t.items=(t.items||[]).map(r=>this.traverseAnnotationPage(r,t)),t}traverseInlineAnnotationPages(t){return typeof t=="string"||!t||t.annotations&&(t.annotations=t.annotations.map(r=>this.traverseAnnotationPage(r,t))),t}traverseCanvas(t,r){return this.traverseType(this._traverseCanvas(t),{parent:r},this.traversals.canvas)}traverseAnnotationPageItems(t){return t.items&&(t.items=t.items.map(r=>this.traverseAnnotation(r,t))),t}traverseAnnotationPage(t,r){return this.traverseType(this._traverseAnnotationPage(t),{parent:r},this.traversals.annotationPage)}traverseAnnotationBody(t){return Array.isArray(t.body)?t.body=t.body.map(r=>this.traverseContentResource(r,t)):t.body&&(t.body=this.traverseContentResource(t.body,t)),t}traverseLinkedCanvases(t){return t.placeholderCanvas&&(t.placeholderCanvas=this.traverseCanvas(t.placeholderCanvas)),t.accompanyingCanvas&&(t.accompanyingCanvas=this.traverseCanvas(t.accompanyingCanvas)),t}traverseAnnotation(t,r){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(this.traverseDescriptive(t))),{parent:r},this.traversals.annotation)}traverseContentResourceLinking(t){return typeof t=="string"||!t||t&&t.service&&(t.service=Vi(t.service||[]).map(r=>this.traverseService(r,t))),t}traverseContentResource(t,r){return t.type==="Choice"&&(t.items=t.items.map(n=>this.traverseContentResource(n,t))),Yi(t)?this.traverseSpecificResource(t,"ContentResource"):this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(t)),{parent:r},this.traversals.contentResource)}traverseSpecificResource(t,r,n){let i=t.source;return typeof t.source=="string"&&(i={id:t.source,type:r||"unknown"}),this.traverseType({...t,source:r==="Canvas"||i.type==="Canvas"?this.traverseType(i,{parent:n},this.traversals.canvas):r==="ContentResource"?this.traverseContentResource(i,{parent:n}):this.traverseUnknown(i,{parent:n,typeHint:r})},{parent:n},this.traversals.specificResource)}traverseRangeRanges(t){return t.items&&(t.items=t.items.map(r=>typeof r=="string"?this.traverseCanvas({id:r,type:"Canvas"},t):Yi(r)?this.traverseSpecificResource(r,"Canvas",t):r.type==="Manifest"?this.traverseManifest(r,t):this.traverseRange(r,t))),t}traverseRange(t,r){return this.traverseType(this._traverseRange(t),{parent:r},this.traversals.range)}traverseAgent(t,r){return this.traverseType(this.traverseDescriptive(this.traverseLinking(t)),{parent:r},this.traversals.agent)}traverseType(t,r,n){return n.reduce((i,s)=>{let o=s(i,r);return o===void 0&&!this.options.allowUndefinedReturn?i:o},t)}traverseService(t,r){let n=Object.assign({},t);return n&&n.service&&(n.service=Vi(n.service).map(i=>this.traverseService(i))),this.traverseType(n,{parent:r},this.traversals.service)}traverseUnknown(t,{parent:r,typeHint:n}={}){let i=MG(t,n);switch(i){case"Collection":return this.traverseCollection(t,r);case"Manifest":return this.traverseManifest(t,r);case"Canvas":return this.traverseCanvas(t,r);case"AnnotationPage":return this.traverseAnnotationPage(t,r);case"Annotation":return this.traverseAnnotation(t,r);case"ContentResource":return this.traverseContentResource(t,r);case"Range":return this.traverseRange(t,r);case"Service":return this.traverseService(t,r);case"Agent":return this.traverseAgent(t,r);default:throw Error(`Unknown or unsupported resource type of ${i}`)}}},HL="http://library.stanford.edu/iiif/image-api/compliance.html#level0",zL="http://library.stanford.edu/iiif/image-api/compliance.html#level1",$L="http://library.stanford.edu/iiif/image-api/compliance.html#level2",GL="http://library.stanford.edu/iiif/image-api/conformance.html#level0",jL="http://library.stanford.edu/iiif/image-api/conformance.html#level1",VL="http://library.stanford.edu/iiif/image-api/conformance.html#level2",WL="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",qL="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",KL="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",YL="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",XL="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",QL="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",ZL="http://iiif.io/api/image/1/level0.json",JL="http://iiif.io/api/image/1/profiles/level0.json",eP="http://iiif.io/api/image/1/level1.json",tP="http://iiif.io/api/image/1/profiles/level1.json",rP="http://iiif.io/api/image/1/level2.json",nP="http://iiif.io/api/image/1/profiles/level2.json",iP="http://iiif.io/api/image/2/level0.json",sP="http://iiif.io/api/image/2/profiles/level0.json",oP="http://iiif.io/api/image/2/level1.json",aP="http://iiif.io/api/image/2/profiles/level1.json",lP="http://iiif.io/api/image/2/level2.json",cP="http://iiif.io/api/image/2/profiles/level2.json",uP="level0",dP="level1",hP="level2",fP="http://iiif.io/api/image/2/level0",pP="http://iiif.io/api/image/2/level1",gP="http://iiif.io/api/image/2/level2",mg=[gP,$L,VL,KL,QL,rP,nP,lP,cP,hP],t1=[...mg,pP,zL,jL,qL,XL,eP,tP,oP,aP,dP],mP=[fP,pP,gP,HL,zL,$L,GL,jL,VL,WL,qL,KL,YL,XL,QL,ZL,JL,eP,tP,rP,nP,iP,sP,oP,aP,lP,cP,uP,dP,hP],BG=mP,vP=[fP,HL,GL,WL,YL,ZL,JL,iP,sP,uP],UG={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},HG={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},zG={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]},XC=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];function $G(e){if(e==null)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw Error("Array is not a valid entity");if(typeof e!="object")throw Error(`${typeof e} is not a valid entity`);if(typeof e["@type"]=="string"){let t=XC.indexOf(e["@type"]);if(t!==-1)return XC[t]}if(e.profile)return"Service";if(e.format||e["@type"])return"ContentResource";throw Error("Resource type is not known")}var GG=class yP{constructor(t,r={}){Us(this,"traversals",void 0),Us(this,"options",void 0),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...t},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...r}}static all(t){return new yP({collection:[t],manifest:[t],canvas:[t],annotationList:[t],sequence:[t],annotation:[t],contentResource:[t],choice:[t],range:[t],service:[t],layer:[t]})}traverseCollection(t){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(t))),this.traversals.collection)}traverseCollectionItems(t){if(this.options.mergeMemberProperties){let r=[...(t.manifests||[]).map(s=>typeof s=="string"?{"@id":s,"@type":"sc:Manifest"}:s),...(t.collections||[]).map(s=>typeof s=="string"?{"@id":s,"@type":"sc:Collection"}:s),...t.members||[]],n=[],i=r.filter(s=>n.includes(s["@id"])?!1:(n.push(s["@id"]),!0));delete t.collections,delete t.manifests,t.members=i}return t.manifests&&(t.manifests=t.manifests.map(r=>this.traverseManifest(typeof r=="string"?{"@id":r,"@type":"sc:Manifest"}:r))),t.collections&&(t.collections=t.collections.map(r=>this.traverseCollection(typeof r=="string"?{"@id":r,"@type":"sc:Collection"}:r))),t.members&&(t.members=t.members.map(r=>typeof r=="string"?r:r["@type"]==="sc:Collection"?this.traverseCollection(r):r["@type"]==="sc:Manifest"?this.traverseManifest(r):this.traverseUnknown(r))),t}traverseManifest(t){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(t))),this.traversals.manifest)}traverseManifestItems(t){return t.sequences&&(t.sequences=t.sequences.map(r=>this.traverseSequence(r))),t.structures&&(t.structures=t.structures.map(r=>this.traverseRange(r))),t}traverseSequence(t){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(t))),this.traversals.sequence)}traverseSequenceItems(t){return t.canvases&&(t.canvases=t.canvases.map(r=>this.traverseCanvas(r))),t}traverseCanvas(t){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(t))),this.traversals.canvas)}traverseCanvasItems(t){return t.images&&(t.images=t.images.map(r=>this.traverseAnnotation(r))),t.otherContent&&(t.otherContent=t.otherContent.map(r=>this.traverseAnnotationList(r))),t}traverseRange(t){return t["@type"]!=="sc:Range"&&(t["@type"]="sc:Range"),this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(t))),this.traversals.range)}traverseRangeItems(t){if(this.options.mergeMemberProperties){let r=[...(t.ranges||[]).map(n=>typeof n=="string"?{"@id":n,"@type":"sc:Range"}:n),...(t.canvases||[]).map(n=>typeof n=="string"?{"@id":n,"@type":"sc:Canvas"}:n),...t.members||[]];delete t.ranges,delete t.canvases,t.members=r.length?r.map(n=>this.traverseUnknown(n)):void 0}return t}traverseAnnotationList(t){let r=typeof t=="string"?{"@id":t,"@type":"sc:AnnotationList"}:t;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(r)),this.traversals.annotationList)}traverseAnnotationListItems(t){return t.resources&&(t.resources=t.resources.map(r=>this.traverseAnnotation(r))),t}traverseAnnotation(t){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(t))),this.traversals.annotation)}traverseAnnotationItems(t){return t.resource&&(Array.isArray(t.resource)?t.resource=t.resource.map(r=>this.traverseContentResource(r)):t.resource=this.traverseContentResource(t.resource)),t.on,t}traverseLayer(t){return this.traverseType(this.traverseLinking(this.traverseLayerItems(t)),this.traversals.layer)}traverseLayerItems(t){return t.otherContent&&(t.otherContent=t.otherContent.map(r=>this.traverseAnnotationList(r))),t}traverseChoice(t){return this.traverseType(this.traverseChoiceItems(t),this.traversals.choice)}traverseChoiceItems(t){return t.default&&t.default!=="rdf:nil"&&(t.default=this.traverseContentResource(t.default)),t.item&&t.item!=="rdf:nil"&&(t.item=t.item.map(r=>this.traverseContentResource(r))),t}traverseService(t){return this.traverseType(this.traverseLinking(t),this.traversals.service)}traverseContentResource(t){return t["@type"]==="oa:Choice"?this.traverseChoice(t):this.traverseType(this.traverseDescriptive(this.traverseLinking(t)),this.traversals.contentResource)}traverseUnknown(t){if(!t["@type"]||typeof t=="string")return t;switch($G(t)){case"sc:Collection":return this.traverseCollection(t);case"sc:Manifest":return this.traverseManifest(t);case"sc:Canvas":return this.traverseCanvas(t);case"sc:Sequence":return this.traverseSequence(t);case"sc:Range":return this.traverseRange(t);case"oa:Annotation":return this.traverseAnnotation(t);case"sc:AnnotationList":return this.traverseAnnotationList(t);case"sc:Layer":return this.traverseLayer(t);case"Service":return this.traverseService(t);case"oa:Choice":return this.traverseChoice(t);case"ContentResource":return this.traverseContentResource(t)}return t.profile?this.traverseService(t):t}traverseImageResource(t){let r=Array.isArray(t),n=Array.isArray(t)?t:[t],i=[];for(let s of n)typeof s=="string"?i.push(this.traverseContentResource({"@id":s,"@type":"dctypes:Image"})):i.push(this.traverseContentResource(s));return!r&&!this.options.convertPropsToArray?i[0]:i}traverseDescriptive(t){return t.thumbnail&&(t.thumbnail=this.traverseImageResource(t.thumbnail)),t.logo&&(t.logo=this.traverseImageResource(t.logo)),t}traverseOneOrMoreServices(t){let r=Array.isArray(t),n=Array.isArray(t)?t:[t],i=[];for(let s of n)i.push(this.traverseService(s));return!r&&!this.options.convertPropsToArray?i[0]:i}traverseLinking(t){return t.related&&(t.related=this.traverseOneOrManyType(t.related,this.traversals.contentResource)),t.rendering&&(t.rendering=this.traverseOneOrManyType(t.rendering,this.traversals.contentResource)),t.service&&(t.service=this.traverseOneOrMoreServices(t.service)),t.seeAlso&&(t.seeAlso=this.traverseOneOrManyType(t.seeAlso,this.traversals.contentResource)),t.within&&(typeof t.within=="string"||(t.within=this.traverseOneOrManyType(t.within,this.traversals.contentResource))),t.startCanvas&&(typeof t.startCanvas=="string"?t.startCanvas=this.traverseType({"@id":t.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):t.startCanvas&&this.traverseType(t.startCanvas,this.traversals.canvas)),t.contentLayer&&(typeof t.contentLayer=="string"?t.contentLayer=this.traverseLayer({"@id":t.contentLayer,"@type":"sc:Layer"}):t.contentLayer=this.traverseLayer(t.contentLayer)),t}traverseOneOrManyType(t,r){if(!Array.isArray(t))if(this.options.convertPropsToArray)t=[t];else return this.traverseType(t,r);return t.map(n=>this.traverseType(n,r))}traverseType(t,r){return r.reduce((n,i)=>{let s=i(n);return s===void 0&&!this.options.allowUndefinedReturn?n:s},t)}},jG=["http://iiif.io/api/image/2/level1","http://iiif.io/api/image/2/level2","http://library.stanford.edu/iiif/image-api/compliance.html#level1","http://library.stanford.edu/iiif/image-api/compliance.html#level2","http://library.stanford.edu/iiif/image-api/conformance.html#level1","http://library.stanford.edu/iiif/image-api/conformance.html#level2","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2","http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1","http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2","http://iiif.io/api/image/1/level1.json","http://iiif.io/api/image/1/profiles/level1.json","http://iiif.io/api/image/1/level2.json","http://iiif.io/api/image/1/profiles/level2.json","http://iiif.io/api/image/2/level1.json","http://iiif.io/api/image/2/profiles/level1.json","http://iiif.io/api/image/2/level2.json","http://iiif.io/api/image/2/profiles/level2.json","level1","level2"],lE={attributionLabel:"Attribution",providerId:"http://example.org/provider",providerName:""};function VG(e){if(typeof e=="string")return[e];if(!e)return[];let t=Array.isArray(e)?e:[e],r=[];for(let n of t){if(typeof n=="string"){r.push(n);continue}r.push({"@language":n["@language"]||n.language,"@value":n["@value"]||n.value})}return r}function No(e,t="none"){if(!e)return{none:[""]};let r=VG(e),n={};for(let i of r){if(typeof i=="string"){n[t]=n[t]?n[t]:[],n[t].push(i||"");continue}if(!i["@language"]){n[t]=n[t]?n[t]:[],n[t].push(i["@value"]||"");continue}let s=i["@language"];n[s]=n[s]?n[s]:[],n[s].push(i["@value"]||"")}return Object.keys(n).length===0?{none:[""]}:n}function EP(e){if(Array.isArray(e))return EP(e.find(t=>typeof t=="string"));if(mg.indexOf(e)!==-1)return"level2";if(jG.indexOf(e)!==-1)return"level1";if(BG.indexOf(e)!==-1)return"level0";if(typeof e=="string")return e}function WG(e){let t=Array.isArray(e)?e:[e];for(let r of t)switch(r){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}function qG(e){switch(e){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}function QC(e){for(let t of["sc","oa","dcterms","dctypes","iiif"])if(e.startsWith(`${t}:`))return e.slice(t.length+1);return e}var KG=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function r1(e){let t=e["@id"]||e.id,r=e["@type"]||e.type,n=e.profile||void 0,i=e["@context"]||void 0;if(n){let s=qG(n);if(s)return s}if(i){let s=WG(i);if(s)return s}if(r){if(Array.isArray(r)){if(r.indexOf("oa:CssStylesheet")!==-1)return"CssStylesheet";if(r.indexOf("cnt:ContentAsText")!==-1)return"TextualBody";r=r[0]}for(let s of["sc","oa","dcterms","dctypes","iiif"])if(r.startsWith(`${s}:`)){r=r.slice(s.length+1);break}switch(r){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(r&&KG.indexOf(r)!==-1)return r;if(e.format){if(e.format.startsWith("image/"))return"Image";if(e.format.startsWith("text/")||e.format==="application/pdf")return"Text";if(e.format.startsWith("application/"))return"Dataset"}return t&&(t.endsWith(".jpg")||t.endsWith(".png")||t.endsWith(".jpeg"))?"Image":r||"unknown"}var YG=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm;function XG(e){let t=e.match(YG);return t?t[0]:e}function QG(e,t="Rights/License",r="none"){let n=null,i=[],s=Array.isArray(e)?e:[e];for(let o of s){let a=o?XG(o):void 0;if(a&&(a.indexOf("creativecommons.org")!==-1||a.indexOf("rightsstatements.org")!==-1)){n=a.startsWith("https://")?`http://${a.slice(8)}`:a;continue}a&&i.push({label:{[r]:[t]},value:{[r]:[a]}})}return[n,i]}var ZG=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function JG(e){if(e){let t=Array.isArray(e)?e:[e],r=[];for(let n of t)n==="http://iiif.io/api/presentation/2/context.json"&&r.push("http://iiif.io/api/presentation/3/context.json"),ZG.indexOf(n)===-1&&r.push(n);if(t.length)return r.length===1?r[0]:r}}function e6(e){return e?e.map(t=>({label:No(t.label),value:No(t.value)})):[]}var ZC=0;function TP(e,t){let r=encodeURI(e.id||e["@id"]||"").trim();return r&&t?`${r}/${t}`:r||(ZC++,`http://example.org/${e["@type"]}${t?`/${t}`:""}/${ZC}`)}function is(e){let t=[...e.behavior||[]];e.viewingHint&&t.push(e.viewingHint);let r;return Array.isArray(e.motivation)?r=e.motivation.map(QC):e.motivation&&(r=QC(e.motivation)),{"@context":e["@context"]?JG(e["@context"]):void 0,id:(e["@id"]||TP(e)).trim(),type:r1(e),behavior:t.length?t:void 0,height:e.height?e.height:void 0,width:e.width?e.width:void 0,motivation:r,viewingDirection:e.viewingDirection,profile:e.profile,format:e.format?e.format:void 0,duration:void 0,timeMode:void 0}}function ss(e){let[t,r]=QG(e.license),n=[...e.metadata?e6(e.metadata):[],...r];return{rights:t,metadata:n.length?n:void 0,label:e.label?No(e.label):void 0,requiredStatement:e.attribution?{label:No(lE.attributionLabel),value:No(e.attribution)}:void 0,navDate:e.navDate,summary:e.description?No(e.description):void 0,thumbnail:t6(e.thumbnail)}}function t6(e){return e&&(Array.isArray(e)?e:[e]).map(t=>typeof t=="string"?{id:t,type:"Image"}:(t.type==="unknown"&&(t.type="Image"),t))}function r6(e){if(!e.within)return;let t=Array.isArray(e.within)?e.within:[e.within],r=[];for(let n of t)if(typeof n=="string"){if(n)switch(e["@type"]){case"sc:Manifest":r.push({id:n,type:"Collection"});break}}else n["@id"]&&r.push({id:n["@id"],type:r1(n)});return r.length?r:void 0}function Zs(e){let t=e.related?Array.isArray(e.related)?e.related:[e.related]:[],r=e.contentLayer;return{provider:e.logo||t.length?[{id:lE.providerId,type:"Agent",homepage:t.length?[t[0]]:void 0,logo:e.logo?Array.isArray(e.logo)?e.logo:[e.logo]:void 0,label:No(lE.providerName)}]:void 0,partOf:r6(e),rendering:e.rendering,seeAlso:e.seeAlso,start:e.startCanvas,service:e.service?Vi(e.service):void 0,supplementary:r?[r]:void 0}}function n6(e){return{chars:e.chars,format:e.format?e.format:void 0,language:e.language}}function Py(e,t){return e?typeof e=="string"?{id:e,type:t}:typeof e?.["@id"]=="string"?{id:e["@id"],type:t}:typeof e.id=="string"?{id:e.id,type:t}:null:null}function i6(e){let t={};if(e.first){let r=Py(e.first,"Collection");r&&(t.first=r)}if((e.total||e.total===0)&&(t.total=e.total),e.prev){let r=Py(e.prev,"Collection");r&&(t.prev=r)}if(e.next){let r=Py(e.next,"Collection");r&&(t.next=r)}return t}function s6(e){let t=[];for(let r of e){let n={...r};n.items&&n.items.length===0&&delete n.items,t.push(n)}return t}function o6(e){return ki({...is(e),...ss(e),...Zs(e),...i6(e),items:s6(e.members)})}function a6(e){let t=[],r=[],n,i;for(let o of e.sequences||[])o.canvases.length&&t.push(...o.canvases),o.behavior&&r.push(...o.behavior),o.viewingDirection&&(i=o.viewingDirection),o.startCanvas&&(n=o.startCanvas);let s=is(e);return r.length&&(s.behavior?s.behavior.push(...r):s.behavior=r),ki({...s,...ss(e),...Zs(e),viewingDirection:i,start:n,items:t,structures:l6(e.structures)})}function l6(e){if(!e)return e;let t=new Map;for(let n of e)t.set(n.id,n);let r=[];for(let n of e)if(n.items){let i=n.items.map(s=>typeof s=="string"?(r.push(s),t.get(s)||s):s&&s.id?(r.push(s.id),t.get(s.id)||s):s);n.items=i}return e.filter(n=>r.indexOf(n.id)===-1)}function c6(e){return ki({...is(e),...ss(e),...Zs(e),annotations:e.otherContent&&e.otherContent.length?e.otherContent:void 0,items:e.images&&e.images.length?[{id:TP(e,"annotation-page"),type:"AnnotationPage",items:e.images}]:void 0})}function u6(e){return ki({...is(e),...ss(e),...Zs(e),items:e.resources&&e.resources.length?e.resources:void 0})}function d6(e){return!e.canvases||e.canvases.length===0?{canvases:[],behavior:[]}:{canvases:e.canvases,behavior:e.viewingHint?[e.viewingHint]:[],viewingDirection:e.viewingDirection,startCanvas:e.startCanvas}}function h6(e){function t(r){if(Array.isArray(r)){if(r.length>1)return{type:"List",items:r.map(t)};r=r[0]}if(typeof r=="string")return encodeURI(r).trim();if("@type"in r){let n;if(typeof r.full=="string")n=r.full;else if(r.full["@type"]==="dctypes:Image")n={id:r.full["@id"],type:"Image"};else if(r.full["@type"]==="sc:Canvas")n={id:r.full["@id"],type:"Canvas"};else throw Error(`Unsupported source type on annotation: ${r.full["@type"]}`);return{type:"SpecificResource",source:n,selector:cE(r.selector)}}else return encodeURI(r["@id"]).trim()}return ki({...is(e),...ss(e),...Zs(e),target:t(e.on),body:Array.isArray(e.resource)?e.resource.map(JC):JC(e.resource)})}function JC(e){return e.type==="Choice"?e:SP(e)}function SP(e){let t=e;return ki({...is(t),...ss(t),...Zs(t),...n6(t)})}function f6(e){let t=[];return e.default&&e.default!=="rdf:nil"&&t.push(e.default),e.item&&e.item!=="rdf:nil"&&t.push(...e.item),ki({...is(e),...ss(e),items:t})}function p6(e){return ki({...is(e),...ss(e),...Zs(e),items:e.members})}function g6(e){let{"@id":t,"@type":r,"@context":n,profile:i,...s}=e,o={};return t&&(o["@id"]=t),o["@type"]=r1(e),o["@type"]==="unknown"&&(n&&n.length&&(o["@context"]=n),o["@type"]="Service"),i&&(o.profile=EP(i)),ki({...o,...s})}function m6(e){return ki({...is(e),...ss(e),...Zs(e)})}var v6=new GG({collection:[o6],manifest:[a6],canvas:[c6],annotationList:[u6],sequence:[d6],annotation:[h6],contentResource:[SP],choice:[f6],range:[p6],service:[g6],layer:[m6]});function bP(e){return e&&e["@context"]&&(e["@context"]==="http://iiif.io/api/presentation/2/context.json"||e["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")!==-1||e["@context"]==="http://www.shared-canvas.org/ns/context.json")||e["@context"]==="http://iiif.io/api/image/2/context.json"||e["@id"]&&e["@type"]==="sc:Collection"||e["@id"]&&e["@type"]==="sc:Manifest"?(e["@context"]||(e["@context"]="http://iiif.io/api/presentation/2/context.json"),v6.traverseUnknown(e)):e}function cE(e){if((Array.isArray(e["@type"])&&e["@type"].includes("oa:SvgSelector")||e["@type"]=="oa:SvgSelector")&&("chars"in e||"value"in e))return{type:"SvgSelector",value:"chars"in e?e.chars:e.value};if(e["@type"]==="oa:FragmentSelector")return{type:"FragmentSelector",value:e.value};if(e["@type"]==="oa:Choice")return[cE(e.default),...(Array.isArray(e.item)?e.item:[e.item]).map(cE)];if(e["@type"]=="iiif:ImageApiSelector")return{type:"ImageApiSelector",region:"region"in e?e.region:void 0,rotation:"rotation"in e?e.rotation:void 0};throw Error(`Unsupported selector type: ${e["@type"]}`)}function vg(e,t){let r="unknown";if(!e)return;if(typeof e=="string")return{id:e,type:r};if(Yi(e))return vg(e.source);let n=e.type||e["@type"],i=e.id||e["@id"];if(n&&n.indexOf(":")!==-1&&(n=n.split(":").pop()),i&&n)return{id:i,type:n}}var hu={},rr="iiif-parser:hasPart",Xi="iiif-parser:partOf",fu="iiif-parser:isExternal",Kn="__$UNSET$__",wP="__$UNWRAP$__",De=[];Object.freeze(De),Object.freeze(hu);function y6(e){if(e===hu||Object.keys(e).length===0)return!0;for(let t in e)return!1;return!0}function n1(e,t){if(t&&t["@explicit"]){let r={},n=Object.keys(t);for(let i of n)i===Xi||i==="@explicit"||(y6(t[i])?r[i]=e[i]:r[i]=t[i]);return r}return e}function AP(e,t,r){let n=vg(t);if(!n)return[void 0,void 0];let i=e.requests[n.id],s=n.type||e.mapping[n.id];if(!s||i&&i.resourceUri&&(!e.entities[s]||!e.entities[s][i.resourceUri]))return[void 0,void 0];let o=e.entities[s][i?i.resourceUri:n.id];if(n.type&&!o)return AP(e,{id:n.id},r);if(o&&o[rr]){let a=o[rr].find(l=>r?l[Xi]===r.id:l[Xi]===o.id);return[n1(o,a),o]}return[o,o]}var E6={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:De,label:null,thumbnail:De,summary:null,requiredStatement:null,metadata:De,rights:null,provider:De,items:De,seeAlso:De,homepage:De,rendering:De,service:De},T6={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:De,thumbnail:De,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:De,rights:null,navDate:null,provider:De,items:De,annotations:De,seeAlso:De,homepage:De,partOf:De,rendering:De,service:De,duration:0,height:0,width:0},S6={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:De,thumbnail:De,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:De,rights:null,navDate:null,provider:De,items:De,annotations:De,seeAlso:De,homepage:De,partOf:De,rendering:De,service:De,services:De},b6={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:De,behavior:De,homepage:De,items:De,label:null,metadata:De,navDate:null,provider:De,partOf:De,accompanyingCanvas:null,placeholderCanvas:null,rendering:De,requiredStatement:null,rights:null,seeAlso:De,service:De,services:De,start:null,structures:De,summary:null,thumbnail:De,viewingDirection:"left-to-right"},w6={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:De,thumbnail:De,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:De,rights:null,navDate:null,provider:De,items:De,annotations:De,seeAlso:De,homepage:De,partOf:De,rendering:De,service:De,start:null,supplementary:null,viewingDirection:"left-to-right"},A6={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:De,seeAlso:De,homepage:De},k6={id:"https://iiif-parser/empty-service",type:"UnknownService"};function Vf(e,t={}){if(Array.isArray(e))return Vf(e[0]);if(typeof e=="string"){let[r,n]=e.split("#");return n?{type:"SpecificResource",source:{id:r,type:t.typeHint||"Unknown"},selector:{type:"FragmentSelector",value:n}}:{type:"SpecificResource",source:{id:r,type:t.typeMap&&t.typeMap[r]||t.typeHint||"Unknown"}}}if(e.type==="Choice"||e.type==="List"||e.type==="Composite"||e.type==="Independents")return Vf(e.items[0]);if(!e.type&&"source"in e&&(e.type="SpecificResource"),e.type==="SpecificResource"){e.source.type==="Canvas"&&e.source.partOf&&typeof e.source.partOf=="string"&&(e.source.partOf=[{id:e.source.partOf,type:"Manifest"}]);let r=typeof e.source=="string"?e.source:e.source.id;if(r!=null&&r.includes("#")){let n=Vf(r,t);n&&(e.selector=n.selector,e.source=n.source)}return e.selector?{...e,type:"SpecificResource",source:e.source,selector:e.selector}:{...e,type:"SpecificResource",source:e.source}}if(e.id){e.type==="Canvas"&&e.partOf&&typeof e.partOf=="string"&&(e.partOf=[{id:e.partOf,type:"Manifest"}]);let[r,n]=e.id.split("#");return n?{type:"SpecificResource",source:{...e,id:r},selector:{type:"FragmentSelector",value:n}}:{type:"SpecificResource",source:{...e,id:r}}}return{type:"SpecificResource",source:e}}function C6(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function kP(e,t){if(typeof e=="string")return{id:e,type:t};if(!e.id)throw Error(`Invalid resource does not have an ID (${JSON.stringify(e)}, ${t})`);return e}function x6(e,t){return(r,n)=>{let i=e[r]?e[r]:{};return(s,o)=>{let a=kP(s,n||r);return a&&a.id&&r?(i[a.id]=i[a.id]?dE(i[a.id],a,{parent:o.parent,isTopLevel:t.id===a.id}):dE({id:a.id,type:a.type},a,{parent:o.parent,isTopLevel:t.id===a.id}),{id:a.id,type:r==="ContentResource"?r:a.type}):a}}}function uE(e,t,r){if(!t)return e;if(Array.isArray(e)){if(!Array.isArray(t))throw Error("Cannot merge array with non-array");let n=[...e];for(let i of t)if(i["@id"]&&!i.id&&(i.id=i["@id"]),i["@type"]&&!i.type&&(i.type=i["@type"]),i!=null)if(Array.isArray(i))n.push(i);else if(typeof i=="object"&&i.id&&i.type){let s=n.findIndex(o=>o.id===i.id&&o.type===i.type);s>=0&&(n[s]=uE(n[s],i))}else e.indexOf(i)===-1&&n.push(i);return n}else if(typeof e=="object"){if(Array.isArray(t)||typeof t!="object")throw Error("Cannot merge object with non-object");let n={...e},i=[],s=[],o=Object.keys(e).filter(c=>c!==rr&&c!=="id"&&c!=="type"),a={},l={};for(let[c,u]of Object.entries(t)){if(c===rr||c==="id"||c==="type")continue;let d=n[c];d===u?s.push(c):d===De||!d?(i.push(c),n[c]=u):(d&&u&&(a[c]=d,l[c]=u),n[c]=uE(d,u),n[c]===a[c]&&(s.push(c),delete a[c]))}if(r&&(r.parent&&r.parent.id||r.isTopLevel)){let c=[],u={};if(r.parent?u[Xi]=r.parent.id:r.isTopLevel&&(u[Xi]=e.id),n[rr]&&n[rr].length){let d=!(n[rr]||[]).find(f=>f["@explicit"]),h=i.length>0||s.length!==o.length;if(d&&h)for(let f of n[rr]){let p={...f},g=Object.keys(a);if(p){p["@explicit"]=!0;for(let v of o)v!==rr&&(p[v]=hu);for(let v of g)p[v]=a[v]}c.push(p)}else c.push(...n[rr]);if(h){let f=Object.keys(l);u["@explicit"]=!0;for(let p of i)u[p]=hu;for(let p of s)u[p]=hu;for(let p of f)u[p]=l[p]}}u.id=n.id,u.type=n.type,c.push(u),n[rr]=c}return n}else if(e)return e;return t}function dE(e,t,r){if(typeof e=="string")return e;if(t.id!==e.id||t.type!==e.type){if(t.type==="ImageService3")return t;if(e.type==="ImageService3")return e;throw Error(`Can only merge entities with identical identifiers and type! ${t.type}(${t.id}) => ${e.type}(${e.id})`)}return uE({...e},t,r)}function R6(e){return(t,r)=>n=>{let{id:i,type:s}=kP(n,r||t);if(i===void 0)throw Error("Found invalid entity without an ID.");return t==="ContentResource"||t==="Service"?e[i]=t:e[i]=s,n}}function I6(e){let t=Object.assign({},e);if(t["@id"]&&(t.id=t["@id"]),t["@type"]&&(t.type=t["@type"]),t.service){let r=[];t.service=Array.isArray(t.service)?t.service:[t.service];for(let n of t.service)r.push({id:n["@id"]||n.id,type:n["@type"]||n.type});t.service=r}return Object.assign({},k6,t)}function _6(e){return t=>{e.Service=e.Service?e.Service:{};let r=t.id||t["@id"],n=I6(t);return n&&n.id&&(e.Service[n.id]?e.Service[r]=dE(e.Service[r],n):e.Service[r]=n),t}}function L6(e){let t=JSON.stringify(e),r=5381,n=t.length;for(;n;)r=r*33^t.charCodeAt(--n);let i=r>>>0,s=i.toString(16);return s.length%2?"0"+s:s}function Dy(e){return t=>typeof t=="string"?{id:t,type:e}:t.id?t.type?t:{type:e,...t}:{id:`vault://${L6(t)}`,type:e,...t}}function qa(e){return t=>({...e,...t})}function Vc(e){return Array.isArray(e)?e:[e]}function P6(e){return e.body&&(e.body=Vc(e.body)),e.seeAlso&&(e.seeAlso=Vc(e.seeAlso)),e.audience&&(e.audience=Vc(e.audience)),e.accessibility&&(e.accessibility=Vc(e.accessibility)),e.motivation&&(e.motivation=Vc(e.motivation)),e}function CP(e,{typeHint:t,partOfTypeHint:r}={}){if(typeof e=="string"&&(e={id:e,type:t||"unknown"}),Yi(e))return typeof e.source=="string"&&(e.source={id:e.source,type:t||"unknown"}),e.source.type==="Canvas"&&e.source.partOf&&typeof e.source.partOf=="string"&&(e.source.partOf=[{id:e.source.partOf,type:r||"Manifest"}]),e;let n;if((e.id||"").indexOf("#")!==-1){let[i,s]=(e.id||"").split("#");e.id=i,s&&(n={type:"FragmentSelector",value:s})}return{type:"SpecificResource",source:e,selector:n}}function D6(e){let t=Object.assign({},e);return e&&e.items&&(t.items=e.items.map(r=>typeof r=="string"||r.type==="Canvas"?CP(r):r)),t}function O6(e){let t=Object.assign({},e);return t.start?(t.start=CP(t.start,{typeHint:"Canvas"}),t):e}function N6(e){let t=Object.assign({},e);return t.target?(t.target=Vf(t.target,{typeHint:"Canvas"}),t):e}function M6(e){return e}function Oy(e){return e.items===void 0&&(e[fu]=!0),e}function F6(e){let t=bP(e),r=C6(),n={},i=x6(r,t),s=R6(n),o=new FG({collection:[Oy,qa(S6),s("Collection"),i("Collection")],manifest:[Oy,qa(b6),O6,s("Manifest"),i("Manifest")],canvas:[qa(T6),s("Canvas"),i("Canvas")],annotationPage:[Oy,Dy("AnnotationPage"),qa(E6),s("AnnotationPage"),i("AnnotationPage")],annotation:[Dy("Annotation"),P6,N6,s("Annotation"),i("Annotation")],contentResource:[Dy("ContentResource"),s("ContentResource"),i("ContentResource")],range:[qa(w6),D6,s("Range","Canvas"),i("Range","Canvas")],agent:[qa(A6),s("Agent"),i("Agent")],specificResource:[M6],service:[_6(r)]}),a=o.traverseUnknown(t);return{entities:r,resource:a,mapping:n}}function B6(e){let t={};for(let[r,n]of e){if(r===wP&&n!==Kn)return n;n!==Kn&&n!=null&&(t[r]=n)}return t}function U6(e,t,r){if(!t.type||!t.id)throw Error("Unknown entity");if(!r[t.type])throw Error(`Serializer not found for ${t.type}`);function n(i,s,o=0){let a=r[i.type];if(!a)return Kn;if(o>20)throw Error("Circular reference: "+i.id+" "+i.type);let[l,c]=AP(e,i.type?i:i.id,s)||(i.id&&i.type?i:null);if(!l)return Kn;let u=a(l,e,{parent:s,isTopLevel:t.id===i.id,fullResource:c}),d=u.next();for(;!d.done;){let h=d.value,f=Kn;if(h)if(Array.isArray(h)){let p=[];for(let g of h)p.push(n(g,i,o+1));f=p}else f=n(h,i,o+1);d=u.next(f)}return d.value===Kn?Kn:B6(d.value)}return n(t)}function pu(e,{allowSourceString:t=!0,allowString:r=!1,allowedStringType:n}={}){let i=s=>{if(t&&s&&s.source&&typeof s.source!="string"){let o=Object.keys(s.source);if(s.source.id&&s.source.type&&o.length===2)return{...s,source:s.source.id}}return s};if(e){if(e.source&&e.source.partOf)return i(e);let s=Object.keys(e);if(s.length===2&&e.type&&e.source||s.length===3&&e.type&&e.source&&s.indexOf("selector")!==-1&&!e.selector)return r&&(!n||n===e.source.type)?e.source.id:e.source.type==="ContentResource"?{type:"SpecificResource",source:e.source.id}:e.source;if(e.selector&&!Array.isArray(e.selector)&&typeof e.selector!="string"&&e.selector.type==="FragmentSelector"){let o=`${e.source.id}#${e.selector.value}`;return r?o:{id:o,type:e.source.type}}}return i(e)}function sl(e){if(!e)return;let t=Object.keys(e);if(t.length!==0){if(t.length===1){let r=t[0];if(!r)return"";let n=(e[r]||[]).join("");return r==="@none"||r==="none"||r==="en"?n:{"@language":r,"@value":n}}return t.map(r=>({"@language":r,"@value":(e[r]||[]).join("")}))}}function xP(e){return Array.isArray(e)?e.map(t=>xP(t)):typeof e=="string"?e:e.type&&e.type==="Canvas"?e.id:e}function js(e,t=!1){if(e)return e.length>1&&!t?e:e[0]||void 0}function H6(e){if(e){if(typeof e=="string")return{"@id":e};if("@id"in e){let t={...e};return delete t["@type"],t}return{"@context":"http://iiif.io/api/image/2/context.json","@id":e.id,profile:`http://iiif.io/api/image/2/profiles/${e.profile}.json`}}}function bo(e,t){return[["@id",e.id],["@type",t],["format",e.format],["height",e.height],["width",e.width],["viewingDirection",e.viewingDirection==="left-to-right"?void 0:e.viewingDirection],["license",e.license?e.license:void 0]]}function*wo(e){let t=e.provider?yield e.provider[0]:void 0;return[["label",sl(e.label)],["metadata",e.metadata&&e.metadata.length?e.metadata.map(r=>({label:sl(r.label)||"",value:sl(r.value)||""})):void 0],["description",sl(e.summary)],["thumbnail",js(yield e.thumbnail)],["navDate",e.navDate],["logo",t?js(t.logo):void 0],["homepage",t?t.homepage:void 0],["attribution",e.requiredStatement?sl(e.requiredStatement.value):void 0]]}function*Wc(e){let t=e.start&&e.start.type&&e.start.type==="SpecificResource"?pu(e.start):e.start;return[["seeAlso",js(yield e.seeAlso)],["service",js((e.service||[]).map(H6))],["rendering",js(yield e.rendering)],["startCanvas",t?t.id:void 0]]}function z6(e){return e.type==="SpecificResource"}function $6(e){return e&&e.type==="FragmentSelector"}function G6(e){if(e&&z6(e)){let t=e.id,r=e.selector?Array.isArray(e.selector)?e.selector[0]:e.selector:void 0;return $6(r)&&(t+="#"+r.value),t}return e?.id}var j6={Manifest:function*(e,t,{isTopLevel:r}){return[...r?[["@context","http://iiif.io/api/presentation/2/context.json"]]:[],...bo(e,"sc:Manifest"),...yield*wo(e),...yield*Wc(e),["sequences",[{"@id":`${e.id}/sequence0`,"@type":"sc:Sequence",canvases:yield e.items}]],["structures",yield e.structures]]},Canvas:function*(e){let t=yield e.items,r=t[0];return[...bo(e,"sc:Canvas"),...yield*wo(e),...yield*Wc(e),["images",r?[r.resources]:void 0],["annotations",e.annotations&&e.annotations.length?js(yield e.annotations):void 0]]},AnnotationPage:function*(e){return[...bo(e,"sc:AnnotationList"),...yield*wo(e),["resources",e.items&&e.items.length?js(yield e.items):void 0]]},Annotation:function*(e){return[["@id",e.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",xP(e.target)],["resource",js(yield e.body,!0)]]},ContentResource:function*(e){switch(e.type){case"Image":return[...bo(e,"dctypes:Image"),...yield*wo(e),...yield*Wc(e)];case"Text":case"Dataset":default:return[...bo(e,void 0),...yield*wo(e)]}},AnnotationCollection:function*(e){return[["@id",e.id],["@type","sc:Layer"],["label",sl(e.label)]]},Collection:function*(e){return[...bo(e,"sc:Collection"),...yield*wo(e),...yield*Wc(e),["members",yield*e.items]]},Range:function*(e){let t=[],r=[];if(e.items)for(let n of e.items){let i=n.type==="SpecificResource"?n.source:n;if(i){let s=yield i;t.push({"@id":G6(n),"@type":i.type,label:s?s.label:void 0,within:e.id}),i.type==="Canvas"&&r.push(i.id)}}return[...bo(e,"sc:Range"),...yield*wo(e),...yield*Wc(e),["canvases",r.length===t.length?r:void 0],["members",r.length===t.length?void 0:t]]}};function Ao(e){var t;return[["id",(t=e.id)!=null&&t.startsWith("vault://")?void 0:e.id],["type",e.type],["format",e.format],["profile",e.profile],["height",e.height||void 0],["width",e.width||void 0],["duration",e.duration||void 0],["viewingDirection",e.viewingDirection==="left-to-right"?void 0:e.viewingDirection],["behavior",e.behavior&&e.behavior.length?e.behavior:void 0],["timeMode",e.timeMode],["motivation",Array.isArray(e.motivation)?e.motivation[0]:e.motivation],[rr,Kn]]}function Qt(e){if(e===Kn||!e||e.length===0)return;let t=e.filter(r=>r!==Kn);if(t.length!==0)return t}function RP(e){if(e&&e.type&&e.type==="ImageService2"){let{id:t,type:r,profile:n,...i}=e,s=typeof n=="string"?n:Array.isArray(n)?n.find(o=>typeof o=="string"):"";return{"@id":t,"@type":r,profile:s?s.startsWith("http")?s:`http://iiif.io/api/image/2/${s}.json`:"http://iiif.io/api/image/2/level0.json",...i}}return e}function ex(e){if(Array.isArray(e)||(e=e?[e]:[]),!(!e||e.length===0))return e.map(RP)}function*Ls(e){return[["label",e.label],["metadata",Qt(e.metadata)],["summary",e.summary],["requiredStatement",e.requiredStatement],["rights",Array.isArray(e.rights)?e.rights[0]||void 0:e.rights||void 0],["navDate",e.navDate],["language",e.language],["thumbnail",Qt(yield e.thumbnail)],["placeholderCanvas",yield e.placeholderCanvas],["accompanyingCanvas",yield e.accompanyingCanvas],["provider",Qt(yield e.provider)]]}function*Ps(e,t){let r=[];for(let n of e.partOf||[])n.type==="Manifest"&&t.type==="Manifest"||r.push(yield n);return[["seeAlso",Qt(yield e.seeAlso)],["service",Qt(ex(e.service))],["services",Qt(ex(e.services))],["rendering",Qt(yield e.rendering)],["supplementary",Qt(yield e.supplementary)],["homepage",Qt(yield e.homepage)],["logo",Qt(yield e.logo)],["partOf",Qt(r)],["start",e.start?pu(e.start):e.start]]}var V6={Manifest:function*(e,t,{isTopLevel:r}){if(!r)return[...Ao(e),...yield*Ls(e),["navPlace",e.navPlace]];let n="http://iiif.io/api/presentation/3/context.json";return(e.navPlace||tx(e))&&(n=["http://iiif.io/api/presentation/3/context.json","http://iiif.io/api/extension/navplace/context.json"]),[["@context",e["@context"]?e["@context"]:n],...Ao(e),...yield*Ls(e),...yield*Ps(e),["items",yield e.items],["structures",Qt(yield e.structures)],["annotations",Qt(yield e.annotations)],["navPlace",e.navPlace]]},Canvas:function*(e,t,{parent:r}){return r&&r.type!=="Manifest"&&r.type!=="Canvas"?[["id",e.id]]:[...Ao(e),...yield*Ls(e),...yield*Ps(e,r),["items",yield e.items],["annotations",Qt(yield e.annotations)],["navPlace",e.navPlace]]},Agent:function*(e){return[["id",e.id],["type","Agent"],["label",e.label],...yield*Ps(e)]},AnnotationPage:function*(e){var t;let r=Object.entries(e).map(([i,s])=>[i,Array.isArray(s)?Qt(s):s]).filter(([i,s])=>i!=="items"&&i!=="id"&&i!==rr&&i!==Xi&&i!==fu),n=yield e.items;return[["id",(t=e.id)!=null&&t.startsWith("vault://")?void 0:e.id],...r,...yield*Ps(e),["items",n.length||e[fu]===!1?n:Kn]]},Service:function*(e){return[[wP,RP(e)]]},Annotation:function*(e){let t=Object.entries(e).map(([n,i])=>n==="motivation"?[n,Array.isArray(i)?i[0]:i]:n==="target"?[n,pu(i,{allowString:!0,allowSourceString:!0,allowedStringType:"Canvas"})]:[n,Array.isArray(i)?Qt(i):i]).filter(([n])=>n!=="body"&&n!==rr&&n!==fu),r;if(Array.isArray(e.body)){let n=[];for(let i of e.body)if(i&&Yi(i)){let s={...i};i.source.type==="Canvas"?s.source=i.source:s.source=yield i.source,n.push(pu(s,{allowSourceString:!0}))}else n.push(yield i);r=n}else e.body&&Yi(e.body)?(r={...e.body},r.source=yield e.body.source):r=yield e.body;return[...t,...yield*Ls(e),...yield*Ps(e),["body",r.length===1?r[0]:r]]},ContentResource:function*(e){return W6([...Ao(e),...yield*Ls(e),...yield*Ps(e),["annotations",Qt(yield e.annotations)],["items",Qt(yield e.items)]],e)},AnnotationCollection:function*(e){return[["id",e.id],["type","AnnotationCollection"],["label",e.label]]},Collection:function*(e,t,{isTopLevel:r}){if(r){let n="http://iiif.io/api/presentation/3/context.json";return(e.navPlace||tx(e))&&(n=["http://iiif.io/api/extension/navplace/context.json","http://iiif.io/api/presentation/3/context.json"]),[["@context",n],...Ao(e),...yield*Ls(e),...yield*Ps(e),["items",Qt(yield e.items)],["navPlace",e.navPlace]]}return[...Ao(e),...yield*Ls(e),["navPlace",e.navPlace]]},Range:function*(e){let t=[];for(let r of e.items)r.type==="Range"?t.push(yield r):r&&r.type==="SpecificResource"?t.push(pu(r)):t.push(r);return[...Ao(e),...yield*Ls(e),...yield*Ps(e),["items",t],["annotations",Qt(yield e.annotations)],["navPlace",e.navPlace]]}};function W6(e,t){let r=Object.keys(t),n=e.map(([i])=>i);for(let i of r)i===rr||i===fu||n.indexOf(i)===-1&&t[i]!==void 0&&e.push([i,t[i]]);return e}function tx(e){if(!e.items||!Array.isArray(e.items))return!1;for(let t of e.items)if(t.navPlace)return!0;return!1}function q6(e,t){return Yi(e)?typeof e.source=="string"?{...e,source:t}:{...e,source:{...e.source||{},id:t}}:{...e,id:t}}var Ht=function(e){return function(){let t={type:e,getType:()=>e,toString:()=>e};return(r,n)=>({...t,...r!==void 0&&{payload:r},...n!==void 0&&{meta:n}})}},IP="@iiif/IMPORT_ENTITIES",_P="@iiif/MODIFY_ENTITY_FIELD",LP="@iiif/REORDER_ENTITY_FIELD",PP="@iiif/MOVE_ENTITY",hE="@iiif/MOVE_ENTITIES",DP="@iiif/ADD_REFERENCE",fE="@iiif/UPDATE_REFERENCE",OP="@iiif/CHANGE_REFERENCE_IDENTIFIER",NP="@iiif/REMOVE_REFERENCE",MP="@iiif/ADD_METADATA",FP="@iiif/REMOVE_METADATA",pE="@iiif/UPDATE_METADATA",BP="@iiif/REORDER_METADATA",UP=Ht(IP)(),K6=Ht(_P)(),Y6=Ht(LP)(),X6=Ht(PP)(),Q6=Ht(hE)(),Z6=Ht(DP)(),J6=Ht(NP)(),e8=Ht(fE)(),t8=Ht(OP)(),r8=Ht(MP)(),n8=Ht(pE)(),i8=Ht(FP)(),s8=Ht(BP)(),o8={importEntities:UP,modifyEntityField:K6,reorderEntityField:Y6,addReference:Z6,removeReference:J6,updateReference:e8,changeReferenceIdentifier:t8,addMetadata:r8,removeMetadata:i8,updateMetadata:n8,reorderMetadata:s8,moveEntity:X6,moveEntities:Q6},HP="@iiif/ADD_MAPPING",zP="@iiif/ADD_MAPPINGS",a8=Ht(HP)(),l8=Ht(zP)(),gE="RESOURCE_ERROR",$P="RESOURCE_LOADING",mE="RESOURCE_READY",GP="@iiif/REQUEST_RESOURCE",jP="@iiif/REQUEST_ERROR",VP="@iiif/REQUEST_MISMATCH",WP="@iiif/REQUEST_COMPLETE",c8="@iiif/REQUEST_OFFLINE_RESOURCE",u8=Ht(GP)(),vE=Ht(jP)(),d8=Ht(VP)(),h8=Ht(WP)(),i1="@iiif/BATCH",f8="@iiif/BATCH_IMPORT",yE=Ht(i1)(),qP="@iiif/SET_META_VALUE",KP="@iiif/SET_META_VALUE_DYNAMIC",YP="@iiif/UNSET_META_VALUE",p8=Ht(qP)(),g8=Ht(KP)(),m8=Ht(YP)(),rx={setMetaValue:p8,setMetaValueDynamic:g8,unsetMetaValue:m8},v8=(e,t)=>{let{entities:r,resource:n,mapping:i}=F6(t);if(n.id===void 0)return[vE({id:e,message:"ID is not defined in resource."})];let s=[UP({entities:r}),l8({mapping:i})];return n.id!==e&&(s.push(a8({id:e,type:n.type})),s.push(d8({requestId:e,actualId:n.id}))),s.push(h8({id:e})),s},nx=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function y8(e,t){return!!(e===t||nx(e)&&nx(t))}function ix(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!y8(e[r],t[r]))return!1;return!0}function Ny(e,t,r){let n=e.iiif.requests[t],i=e.iiif.mapping[t];if(!i||!e.iiif.entities[i][n.resourceUri])return;let s=e.iiif.entities[i][n.resourceUri];if(s&&s[rr]){let o=s[rr].find(a=>a[Xi]===s.id);return n1(s,o)}return s}function E8(e){return e&&typeof e.then=="function"}function sx(e,t,{waitTimeout:r=30}={}){return(n,i,s)=>{let o=e.getStore(),a=o.getState(),l=a.iiif.requests[n];if(l){if(l.loadingState===mE){let u=Ny(a,n);if(u)return u}switch(l.loadingState){case gE:break;case $P:return(async()=>{let u,d=!1;try{let h=await Promise.race([new Promise((f,p)=>{d||(u=o.subscribe(()=>{let g=o.getState();if(g.iiif.requests[n].loadingState===gE){p();return}if(g.iiif.requests[n].loadingState===mE){let v=Ny(g,n);v?f(v):p()}}))}),new Promise((f,p)=>setTimeout(()=>{d=!0,p()},r*60*1e3))]);if(u&&u(),h)return h}catch{u&&u()}})()}}e.dispatch(u8({id:n}));let c=u=>{if(!u)return;!u.id&&!u["@id"]&&(u["@type"]&&(u["@id"]=n),u.id=n);let d=v8(n,u);return e.dispatch(yE({actions:d})),Ny(o.getState(),n)};try{let u=t(n,i);return E8(u)?(async()=>{try{let d=await u;return s&&(d=s(d)),c(d)}catch(d){throw e.dispatch(vE({id:n,message:d.toString()})),d}})():c(s?s(u):u)}catch(u){throw e.dispatch(vE({id:n,message:u.toString()})),u}}}function XP(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}var My={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},T8=(e,t)=>(r,n,i)=>(i.dispatch=s=>(r(o=>e(o,s),!1,s),s),i.dispatchFromDevtools=!0,{dispatch:(...s)=>i.dispatch(...s),...t}),S8=T8,EE=new Map,Zh=e=>{let t=EE.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([r,n])=>[r,n.getState()])):{}},b8=(e,t,r)=>{if(e===void 0)return{type:"untracked",connection:t.connect(r)};let n=EE.get(r.name);if(n)return{type:"tracked",store:e,...n};let i={connection:t.connect(r),stores:{}};return EE.set(r.name,i),{type:"tracked",store:e,...i}},w8=(e,t={})=>(r,n,i)=>{let{enabled:s,anonymousActionType:o,store:a,...l}=t,c;try{c=(s??(My?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!c)return(My?"production":void 0)!=="production"&&s&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(r,n,i);let{connection:u,...d}=b8(a,c,l),h=!0;i.setState=(g,v,m)=>{let y=r(g,v);if(!h)return y;let E=m===void 0?{type:o||"anonymous"}:typeof m=="string"?{type:m}:m;return a===void 0?(u?.send(E,n()),y):(u?.send({...E,type:`${a}/${E.type}`},{...Zh(l.name),[a]:i.getState()}),y)};let f=(...g)=>{let v=h;h=!1,r(...g),h=v},p=e(i.setState,n,i);if(d.type==="untracked"?u?.init(p):(d.stores[d.store]=i,u?.init(Object.fromEntries(Object.entries(d.stores).map(([g,v])=>[g,g===d.store?p:v.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let g=!1,v=i.dispatch;i.dispatch=(...m)=>{(My?"production":void 0)!=="production"&&m[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),v(...m)}}return u.subscribe(g=>{var v;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Fy(g.payload,m=>{if(m.type==="__setState"){if(a===void 0){f(m.state);return}Object.keys(m.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let y=m.state[a];if(y==null)return;JSON.stringify(i.getState())!==JSON.stringify(y)&&f(y);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(m)});case"DISPATCH":switch(g.payload.type){case"RESET":return f(p),a===void 0?u?.init(i.getState()):u?.init(Zh(l.name));case"COMMIT":if(a===void 0){u?.init(i.getState());return}return u?.init(Zh(l.name));case"ROLLBACK":return Fy(g.state,m=>{if(a===void 0){f(m),u?.init(i.getState());return}f(m[a]),u?.init(Zh(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Fy(g.state,m=>{if(a===void 0){f(m);return}JSON.stringify(i.getState())!==JSON.stringify(m[a])&&f(m[a])});case"IMPORT_STATE":{let{nextLiftedState:m}=g.payload,y=(v=m.computedStates.slice(-1)[0])==null?void 0:v.state;if(!y)return;f(a===void 0?y:y[a]),u?.send(null,m);return}case"PAUSE_RECORDING":return h=!h}return}}),p},A8=w8,Fy=(e,t)=>{let r;try{r=JSON.parse(e)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}r!==void 0&&t(r)},k8=e=>(t,r,n)=>{let i=n.subscribe;return n.subscribe=(s,o,a)=>{let l=s;if(o){let c=a?.equalityFn||Object.is,u=s(n.getState());l=d=>{let h=s(d);if(!c(u,h)){let f=u;o(u=h,f)}},a!=null&&a.fireImmediately&&o(u,u)}return i(l)},e(t,r,n)},C8=k8,x8=(e={},t)=>{switch(t.type){case HP:return{...e,[t.payload.id]:t.payload.type};case zP:return{...e,...t.payload.mapping};default:return e}};function qc(e,t,r,n){return!(!e[r]||!e[r][t]||!e[r][t][n]||!Array.isArray(e[r][t][n]))}function R8(e,t){let r={},n=[];for(let[i,s]of Object.entries(e||{})){n.push(i);let o=(t||{})[i];if(!o||o.length===0){r[i]=s;continue}r[i]=o}for(let[i,s]of Object.entries(t||{}))n.indexOf(i)===-1&&(r[i]=s);return r}function Ne(e){return e.payload||{}}function I8(e,t,r){if(!e[t]||!Array.isArray(e[t]))return null;let n=r.index===void 0?e[t].findIndex(i=>{var s;return i?((s=vg(i))==null?void 0:s.id)===r.id:!1}):r.index;return n===-1?null:{entity:e[t][n],index:n}}function ox(e,t){var r;if(!(!(t!=null&&t.id)||!(t!=null&&t.type)))return(r=e[t.type])==null?void 0:r[t.id]}function Jh(e,t){return e===void 0?t:e}var QP=(e=XP(),t)=>{var r,n;let i=(s,o)=>({...e,[Ne(t).type]:{...e[Ne(t).type],[Ne(t).id]:{...s,...o}}});switch(t.type){case _P:{if(!e[Ne(t).type]||!e[Ne(t).type][Ne(t).id])return e;let s=e[Ne(t).type][Ne(t).id];return typeof s=="string"?e:i(s,{[Ne(t).key]:Ne(t).value})}case LP:{if(!qc(e,Ne(t).id,Ne(t).type,Ne(t).key))return e;let s=e[Ne(t).type][Ne(t).id];if(typeof s=="string")return e;let o=Array.from(s[Ne(t).key]),[a]=o.splice(Ne(t).startIndex,1);return o.splice(Ne(t).endIndex,0,a),i(s,{[Ne(t).key]:o})}case hE:{let s=Ne(t).subjects,o=Ne(t).from,a=Ne(t).to||o,l=ox(e,o),c=a?.key||o.key;if(!qc(e,o.id,o.type,o.key)||!qc(e,a.id,a.type,a.key))return e;let u=[],d=[];if(s.type==="slice"){let y=s.startIndex,E=s.length;u=Array.from(l[o.key]),d=u.splice(y,E)}else{let y=Array.from(l[o.key]);for(let E of s.items){let S=I8(l,o.key,E);S&&(d.push(S.entity),y[S.index]=null),u=y.filter(b=>b!==null)}}let h={...l,[o.key]:u},f={...e,[o.type]:{...e[o.type],[o.id]:h}},p=ox(f,a);if(!p)return e;let g=a?.index===void 0?p[c].length:a.index,v=Array.from(p[a.key]);v.splice(g,0,...d);let m={...p,[c]:v};return{...f,[a.type]:{...f[a.type],[a.id]:m}}}case PP:return QP(e,{type:hE,payload:{subjects:{type:"list",items:[Ne(t).subject]},from:Ne(t).from,to:Ne(t).to}});case OP:{let{id:s,index:o,key:a,newIdentifier:l,reference:c,type:u}=Ne(t),d=e[u][s],h=vg(c);if(!d||!d[a]||!h||o<0)return e;let f=d[a],p=f[o],g=(r=e[h.type])==null?void 0:r[h.id];if(!g||!p)return e;let v=q6(p,l),m=Array.from(f);m.splice(Jh(o,m.length+1),1,v);let y=i(d,{[a]:m}),E={...g,id:l};E["iiif-parser:hasPart"]&&(E["iiif-parser:hasPart"]=E["iiif-parser:hasPart"].filter(b=>b["iiif-parser:partOf"]===s).map(b=>({...b,id:l})));let S={...y[h.type],[l]:E};return y[h.type]=S,y}case IP:{let s=Object.keys(Ne(t).entities),o={...e};for(let a of s){let l=Ne(t).entities[a],c={...e[a]||{}},u=!1,d=Object.keys(l||{})||[];if(l&&d){for(let h of d)u=!0,c[h]=e[a][h]?R8(e[a][h],l[h]):l[h];u&&(o[a]=c)}}return o}case DP:{if(!qc(e,Ne(t).id,Ne(t).type,Ne(t).key))return e;let s=e[Ne(t).type][Ne(t).id],o=Array.from(s[Ne(t).key]);return o.splice(Jh(Ne(t).index,o.length+1),0,Ne(t).reference),i(s,{[Ne(t).key]:o})}case fE:case NP:{if(!qc(e,Ne(t).id,Ne(t).type,Ne(t).key))return e;let s=e[Ne(t).type][Ne(t).id],o=Array.from(s[Ne(t).key]),a=Jh(Ne(t).index,o.findIndex(l=>l&&l.id===Ne(t).reference.id));return a===-1||((n=o[a])==null?void 0:n.id)!==Ne(t).reference.id?e:(t.type===fE?o.splice(a,1,Ne(t).reference):o.splice(a,1),i(s,{[Ne(t).key]:o}))}case MP:{let s=e[Ne(t).type][Ne(t).id];if(!s)return e;let o=Array.from(s.metadata||[]),a=Ne(t);return o.splice(Jh(t.payload.beforeIndex,o.length+1),0,{label:a.label,value:a.label}),i(s,{metadata:o})}case BP:{let s=e[Ne(t).type][Ne(t).id];if(typeof s=="string"||!s)return e;let o=Array.from(s.metadata||[]),[a]=o.splice(Ne(t).startIndex,1);return o.splice(Ne(t).endIndex,0,a),i(s,{metadata:o})}case pE:case FP:{let s=e[Ne(t).type][Ne(t).id],o=Array.from(s.metadata||[]),a=Ne(t).atIndex;return a===void 0||a===-1||!o[a]?e:(t.type===pE?o.splice(a,1,{label:Ne(t).label,value:Ne(t).value}):o.splice(a,1),i(s,{metadata:o}))}default:return e}},_8=(e={},t)=>{switch(t.type){case GP:case c8:return{...e,[t.payload.id]:{requestUri:t.payload.id,loadingState:$P,uriMismatch:!1,resourceUri:t.payload.id}};case VP:return{...e,[t.payload.requestId]:{...e[t.payload.requestId]||{},uriMismatch:!0,resourceUri:t.payload.actualId},[t.payload.actualId]:{requestUri:t.payload.requestId,loadingState:e[t.payload.requestId].loadingState,uriMismatch:!0,resourceUri:t.payload.actualId}};case jP:return{...e,[t.payload.id]:{...e[t.payload.id]||{},loadingState:gE,error:t.payload.message}};case WP:return{...e,[t.payload.id]:{...e[t.payload.id]||{},loadingState:mE,error:void 0}}}return e},L8=(e={},t)=>{let{id:r,updateValue:n,value:i,meta:s,key:o}=t&&t.payload||{};switch(t.type){case qP:return{...e,[r]:{...e[r]||{},[s]:{...e[r]&&e[r][s]||{},[o]:i}}};case KP:return{...e,[r]:{...e[r]||{},[s]:{...e[r]&&e[r][s]||{},[o]:e[r]&&e[r][s]?n(e[r][s][o]):n(void 0)}}};case YP:return e[r]&&e[r][s]&&e[r][s][o]?{...e,[r]:{...e[r]||{},[s]:{...e[r]&&e[r][s]||{},[o]:void 0}}}:e;default:return e}};function ZP(e={}){let t=Object.keys(e);return function(r={},n){let i=!1,s={};for(let o=0;o<t.length;o++){let a=t[o];s[a]=e[a](r[a],n),i||(i=s[a]!==r[a])}return i?s:r}}function P8(e){return(t,r)=>r&&r.type===i1?r.payload.actions.reduce(e,t):r&&r.type===f8?{...t,iiif:{...t.iiif,...r.payload.state}}:e(t,r)}var D8=ZP({mapping:x8,entities:QP,requests:_8,meta:L8});function O8(){return{iiif:{entities:XP(),meta:{},mapping:{},requests:{}}}}function N8(e={}){let{enableDevtools:t=!1,iiifStoreName:r="iiif",defaultState:n=O8(),customReducers:i={}}=e,s=P8(ZP({[r]:D8,...i})),o=!!(typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__);return FL(C8((o?A8:(a,l)=>a)(S8(s,n),{enabled:t})))}function Dr(e,t,r,n=!0){t[pl]=t[pl]||[],t[pl].push(e);let i=new Map;Object.defineProperty(t,e,{enumerable:n,get(){if(t[_o][e]===void 0)return;let s=t[_o][e];if(!s)return s;let o=r.get(t[_o][e],{parent:this.id?{id:this.id,type:this.type}:void 0});return i.has(o)||(i.clear(),i.set(o,Lo(o,r))),i.get(o)},set(s){t[_o][e]!==s&&(this[Ro]?r.modifyEntityField({id:this.id,type:this.type},e,JP(s)):this[_o][e]=s)}})}var _o=Symbol.for("_refs_"),Ro=Symbol.for("_reactive_"),pl=Symbol.for("_defined_"),ax=Symbol.for("_parent_");function M8(e,t=!1,r){let n={id:"",type:"unknown",[pl]:[],[_o]:{},[ax]:null,[Ro]:null,is(i){return typeof i=="string"?this.id===i:i.id?i.id===this.id:!1},reactive(){if(!this[Ro])return this[Ro]=this.subscribe(()=>this.refresh(),!0),()=>{this.unreactive()}},refresh(){if(this.id){let i=this.unwrap();for(let s of Object.keys(i||{}))this[pl].includes(s)?this[_o][s]=i[s]:this[s]=i[s]}},unreactive(){this[Ro]&&(this[Ro](),this[Ro]=null)},unwrap(){if(!this.id)throw Error("Invalid object");let i=this[ax];return e.get(this.id,{parent:i?{id:i,type:"unknown"}:void 0})},toPresentation3(){return e.toPresentation3(this.unwrap())},toPresentation2(){return e.toPresentation2(this.unwrap())},valueOf(){return this.unwrap()},toJSON(){let i=this;return{...i,items:i.items,annotations:i.annotations,structures:i.structures,seeAlso:i.seeAlso,service:i.service,services:i.services,rendering:i.rendering,partOf:i.partOf,start:i.start,supplementary:i.supplementary,homepage:i.homepage,thumbnail:i.thumbnail,placeholderCanvas:i.placeholderCanvas,accompanyingCanvas:i.accompanyingCanvas,provider:i.provider}},subscribe(i,s=!0){return e.subscribe(()=>this.id?e.get(this.id):null,i,s)}};return Dr("items",n,e),Dr("annotations",n,e),Dr("structures",n,e),Dr("seeAlso",n,e),Dr("rendering",n,e),Dr("partOf",n,e),Dr("start",n,e,!1),Dr("supplementary",n,e),Dr("homepage",n,e),Dr("thumbnail",n,e),Dr("placeholderCanvas",n,e,!1),Dr("accompanyingCanvas",n,e,!1),Dr("provider",n,e),Dr("body",n,e),Dr("logo",n,e),n}function F8(e){return!!e[pl]}function JP(e){return Array.isArray(e)?e.map(t=>JP(t)):!e||!e.type?e:{id:e.id,type:e.type}}function Lo(e,t,r=!1,n){if(Array.isArray(e))return e.map(a=>Lo(a,t,r));if(!e||!e.type||!e.id)return e;let i=M8(t,r),s=Object.create(i),o=Object.assign(s,e);return r&&o.reactive(),o}function lx(e){switch(e){case"Image":case"Video":case"Sound":case"Dataset":case"Text":case"Composite":case"List":case"Independents":case"Audience":return"ContentResource";case"ImageService1":case"ImageService2":case"ImageService3":return"Service"}return e}var eD=class{constructor(e,t){Rn(this,"options",void 0),Rn(this,"store",void 0),Rn(this,"emitter",void 0),Rn(this,"isBatching",!1),Rn(this,"batchQueue",[]),Rn(this,"remoteFetcher",void 0),Rn(this,"staticFetcher",void 0),Rn(this,"defaultFetcher",r=>fetch(r).then(n=>{if(n.status===200)return n.json();{let i=Error(`${n.status} ${n.statusText}`);throw i.name="HTTPError",i}})),this.options=Object.assign({reducers:{},customFetcher:this.defaultFetcher,enableDevtools:!0},e||{}),this.store=t||N8({customReducers:this.options.reducers,defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=BL(),this.remoteFetcher=sx(this,this.options.customFetcher),this.staticFetcher=sx(this,(r,n)=>n)}batch(e){this.isBatching=!0;try{e(this),this.isBatching=!1,this.dispatch(yE({actions:this.batchQueue}))}catch(t){throw this.batchQueue=[],this.isBatching=!1,t}this.batchQueue=[]}async asyncBatch(e){this.isBatching=!0;try{await e(this),this.isBatching=!1,this.dispatch(yE({actions:this.batchQueue}))}catch(t){throw this.batchQueue=[],this.isBatching=!1,t}this.batchQueue=[]}modifyEntityField(e,t,r){this.dispatch(o8.modifyEntityField({id:e.id,type:e.type,key:t,value:r}))}dispatch(e){if(this.isBatching)this.batchQueue.push(e);else{if(e.type===i1){for(let n of e.payload.actions)this.emitter.emit(n.type,{action:n,state:this.store.getState()});this.store.dispatch(e);let r=this.getState();for(let n of e.payload.actions)this.emitter.emit(`after:${n.type}`,{action:n,state:r});return}this.emitter.emit(e.type,{action:e,state:this.store.getState()}),this.store.dispatch(e);let t=this.store.getState();this.emitter.emit(`after:${e.type}`,{action:e,state:t});return}}on(e,t){return this.emitter.on(e,t),()=>{this.emitter.off(e,t)}}serialize(e,t){return U6(this.getState().iiif,e,t)}toPresentation2(e){return this.serialize(e,j6)}toPresentation3(e){return this.serialize(e,V6)}hydrate(e,t,r={}){return this.get(e,t,{...r,skipSelfReturn:!1})}get(e,t,r={}){typeof t!="string"&&(r=t||{},t=void 0);let{skipSelfReturn:n=!0}=r||{},i=r.parent?typeof r.parent=="string"?r.parent:r.parent.id:void 0;if(Array.isArray(e))return e.map(u=>this.get(u,r));let s=this.getState();if(Yi(e)&&!r.preserveSpecificResources&&(e=e.source),typeof e=="string"){let u=lx(t||s.iiif.mapping[e]);if(!u)return n?null:{id:e,type:"unknown"};e={id:e,type:u}}if(e&&e.partOf&&!i&&!r.skipPartOfCheck){let u=Array.isArray(e.partOf)?e.partOf[0]:e.partOf;u&&(typeof u=="string"&&(i=u),typeof u.id=="string"&&(i=u.id))}let o=lx(t||e?.type),a=e?.id,l=s.iiif.entities[o];if(!l){let u=s.iiif.requests[a];return u&&u.resourceUri!==a?this.get(u.resourceUri,r):n?null:e}let c=l[e.id];if(c&&c[rr]){let u=c[rr].find(d=>i?d[Xi]===i:d[Xi]===c.id);return n1(c,u)}return l[e.id]||(n?null:e)}select(e){return e(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}deep(e,t){if(e===void 0)return this.get(t,{skipSelfReturn:!1});if(typeof e=="function")try{let n=e(this.get(t,{skipSelfReturn:!1})),i=s=>this.deep(s,n);return i.size=Array.isArray(n)?n.length:1,i}catch{let n=i=>this.deep(i,void 0);return n.size=0,n}let r=n=>this.deep(n,e);return r.size=Array.isArray(e)?e.length:1,r}loadManifest(e,t,r){let n=typeof e=="string"?e:e.id;return this.load(n,t,r)}loadCollection(e,t,r){let n=typeof e=="string"?e:e.id;return this.load(n,t,r)}load(e,t,r){let n=typeof e=="string"?e:e.id;return t?Promise.resolve(this.staticFetcher(n,t,r)):Promise.resolve(this.remoteFetcher(n,{},r))}loadSync(e,t,r){let n=typeof e=="string"?e:e.id;return this.staticFetcher(n,t,r)}loadManifestSync(e,t,r){let n=typeof e=="string"?e:e.id;return this.loadSync(n,t,r)}loadCollectionSync(e,t,r){let n=typeof e=="string"?e:e.id;return this.loadSync(n,t,r)}areInputsEqual(e,t){return ix(e,t)}subscribe(e,t,r){return r===void 0&&(t===void 0||t===!1||t===!0)&&(r=t,t=e,e=n=>n),this.store.subscribe(e,n=>t(n,this),{equalityFn:ix,fireImmediately:!r})}async ensureLoaded(e){let t=typeof e=="string"?e:e.id;this.requestStatus(t)||await this.load(t)}requestStatus(e){return this.select(t=>t.iiif.requests[e])}getPaginationState(e){let t=typeof e=="string"?e:e.id;if(!t)return null;let r=this.getResourceMeta(t,"@vault/pagination");if(r!=null&&r.state)return r.state;let n=this.get(e);if(n.first){let i={currentPage:null,currentPageIndex:null,isFetching:!1,isFullyLoaded:!1,next:n.first,page:1,pages:[],previous:null,totalItems:n.total,currentLength:0};return this.setMetaValue([t,"@vault/pagination","state"],i),i}return null}async loadNextPage(e,t){var r;let n=typeof e=="string"?e:e.id;if(!n)return[null,null];let i=this.getPaginationState(e);if(!i||i.isFullyLoaded||!i.next)return[null,null];if(i.isFetching)return[i,null];let s=typeof i.next=="string"?i.next:i.next.id,o=i.currentPage,a={...i,isFetching:!0};this.setMetaValue([n,"@vault/pagination","state"],a);let l;try{l=await this.loadCollection(s,t,f=>{let{id:p,"@id":g,...v}=f||{};return g?{"@id":s,...v}:{id:s,...v}})}catch(f){let p={...i,isFetching:!1,error:f};return this.setMetaValue([n,"@vault/pagination","state"],p),[p,null]}if(!l){let f={...i,isFetching:!1,error:Error("Collection not found")};return this.setMetaValue([n,"@vault/pagination","state"],f),[f,null]}let c=this.get(n),u=[...c.items||[],...l.items||[]].map(f=>({id:f.id,type:f.type}));this.modifyEntityField({id:n,type:"Collection"},"items",u);let d=this.getPaginationState(e);if(!d)throw Error("Pagination state not found");let h={...d,isFetching:!1,error:null,currentPage:l.id,next:((r=l.next)==null?void 0:r.id)||null,currentPageIndex:d.pages.length,currentLength:u.length,pages:[...d.pages,{id:l.id,type:"Collection",startIndex:c.items.length,pageLength:l.items.length,order:typeof d.currentPageIndex=="number"?d.currentPageIndex+1:0}],isFullyLoaded:!l.next,previous:o,page:d.pages.length+1};return this.setMetaValue([n,"@vault/pagination","state"],h),[h,l]}getResourceMeta(e,t){let r=this.getState().iiif.meta[e];if(r)return t?r[t]:r}getObject(e,t,r={}){let{reactive:n,...i}=r;return Lo(this.get(e,t,i),this,n)}async loadObject(e,t){return Lo(await this.load(e,t),this)}async loadManifestObject(e,t){return Lo(await this.loadManifest(e,t),this)}async loadCollectionObject(e,t){return Lo(await this.loadCollection(e,t),this)}wrapObject(e){return Lo(this.get(e,{skipSelfReturn:!1}),this)}isWrapped(e){return F8(e)}setMetaValue([e,t,r],n){this.dispatch(typeof n=="function"?rx.setMetaValueDynamic({id:e,meta:t,key:r,updateValue:n}):rx.setMetaValue({id:e,meta:t,key:r,value:n}))}},B8=e=>{let t=e.toString().split(":"),r=Math.ceil(parseInt(t[0])),n=Math.ceil(parseInt(t[1])),i=U8(Math.ceil(parseInt(t[2])),2),s=`${r!==0&&n<10?(n+"").padStart(2,"0"):n}:${i}`;return r!==0&&(s=`${r}:${s}`),s},tD=e=>{let t=new Date(e*1e3).toISOString().substr(11,8);return B8(t)},rD=(e,t)=>{if(typeof e!="object"||e===null)return t;for(let r in t)typeof t[r]=="object"&&t[r]!==null&&!Array.isArray(t[r])?(e[r]||(e[r]={}),e[r]=rD(e[r],t[r])):e[r]=t[r];return e},nD=e=>e.split("").reduce(function(t,r){return t=(t<<5)-t+r.charCodeAt(0),t&t},0),iD=(e,t)=>Object.hasOwn(e,t)?e[t].toString():void 0,U8=(e,t)=>String(e).padStart(t,"0"),ef,H8=new Uint8Array(16);function z8(){if(!ef&&(ef=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ef))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ef(H8)}var gr=[];for(let e=0;e<256;++e)gr.push((e+256).toString(16).slice(1));function $8(e,t=0){return gr[e[t+0]]+gr[e[t+1]]+gr[e[t+2]]+gr[e[t+3]]+"-"+gr[e[t+4]]+gr[e[t+5]]+"-"+gr[e[t+6]]+gr[e[t+7]]+"-"+gr[e[t+8]]+gr[e[t+9]]+"-"+gr[e[t+10]]+gr[e[t+11]]+gr[e[t+12]]+gr[e[t+13]]+gr[e[t+14]]+gr[e[t+15]]}var G8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),cx={randomUUID:G8};function _u(e,t,r){if(cx.randomUUID&&!e)return cx.randomUUID();e=e||{};let n=e.random||(e.rng||z8)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,$8(n)}var sD={behavior:"smooth",block:"center"},Uo={annotationOverlays:{backgroundColor:"#6666ff",borderColor:"#000099",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:2},background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"500px",contentSearch:{searchResultsLimit:20,overlays:{backgroundColor:"#ff6666",borderColor:"#990000",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:4}},crossOrigin:"anonymous",ignoreCaptionLabels:[],informationPanel:{vtt:{autoScroll:{enabled:!0,settings:sD}},open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0,renderAnnotation:!0,renderContentSearch:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showDownload:!0,showIIIFBadge:!0,showTitle:!0,withCredentials:!1};function oD(e){let t=(()=>{var n,i;return((i=(n=Uo?.informationPanel)==null?void 0:n.vtt)==null?void 0:i.autoScroll)||{enabled:!0,settings:sD}})();if(e==null)return{enabled:t.enabled,settings:{...t.settings}};if(typeof e=="boolean")return{enabled:e,settings:{...t.settings}};if("enabled"in e){let n=e;return{enabled:n.enabled,settings:{...n.settings}}}let r={enabled:!0,settings:{...e}};return j8(r.settings),r}function j8({behavior:e,block:t}){let r=["auto","instant","smooth"],n=["center","end","nearest","start"];if(!r.includes(e))throw TypeError(`'${e}' not in ${r.join(" | ")}`);if(!n.includes(t))throw TypeError(`'${t}' not in ${n.join(" | ")}`)}var ux,dx,V8=oD((dx=(ux=Uo?.informationPanel)==null?void 0:ux.vtt)==null?void 0:dx.autoScroll),hx,yg={activeCanvas:"",activeManifest:"",activePlayer:null,activeSelector:void 0,OSDImageLoaded:!1,collection:{},configOptions:Uo,customDisplays:[],plugins:[],isAutoScrollEnabled:V8.enabled,isAutoScrolling:!1,isInformationOpen:((hx=Uo?.informationPanel)==null?void 0:hx.open)??!0,isLoaded:!1,isUserScrolling:void 0,sequence:[[],[]],vault:new eD,openSeadragonViewer:null,viewerId:_u(),visibleCanvases:[],visibleAnnotations:[]},aD=I.createContext(yg),lD=I.createContext(yg);function W8(e,t){switch(t.type){case"updateActiveCanvas":return t.canvasId||(t.canvasId=""),{...e,activeCanvas:t.canvasId};case"updateActiveManifest":return{...e,activeManifest:t.manifestId};case"updateActivePlayer":return{...e,activePlayer:t.player};case"updateOSDImageLoaded":return{...e,OSDImageLoaded:t.OSDImageLoaded};case"updateAutoScrollAnnotationEnabled":return{...e,isAutoScrollEnabled:t.isAutoScrollEnabled};case"updateAutoScrolling":return{...e,isAutoScrolling:t.isAutoScrolling};case"updateCollection":return{...e,collection:t.collection};case"updateConfigOptions":return{...e,configOptions:rD(e.configOptions,t.configOptions)};case"updateContentStateAnnotation":return{...e,contentStateAnnotation:t.contentStateAnnotation};case"updateInformationOpen":return{...e,isInformationOpen:t.isInformationOpen};case"updateInformationPanelResource":return{...e,informationPanelResource:t.informationPanelResource};case"updateIsLoaded":return{...e,isLoaded:t.isLoaded};case"updateManifestSequence":return{...e,sequence:t.sequence};case"updateUserScrolling":return{...e,isUserScrolling:t.isUserScrolling};case"updateOpenSeadragonViewer":return{...e,openSeadragonViewer:t.openSeadragonViewer};case"updateViewerId":return{...e,viewerId:t.viewerId};case"updateActiveSelector":return{...e,activeSelector:t.selector};case"updateVisibleCanvases":return{...e,visibleCanvases:t.visibleCanvases};default:throw new Error(`Unhandled action type: ${t.type}`)}}var q8=({initialState:e=yg,children:t})=>{let[r,n]=(0,k.useReducer)(W8,e),{openSeadragonViewer:i}=r;return(0,k.useEffect)(()=>{if(i)return i.addHandler("update-viewport",()=>{let s=i.viewport,o=s.getBounds(),a=s.viewportToImageRectangle(o),l=`xywh=${[Math.round(a.x),Math.round(a.y),Math.round(a.width),Math.round(a.height)].join(",")}`;n({type:"updateActiveSelector",selector:{type:"FragmentSelector",value:l}})}),()=>{i.removeAllHandlers("update-viewport")}},[i]),I.createElement(aD.Provider,{value:r},I.createElement(lD.Provider,{value:n},t))};function It(){let e=I.useContext(aD);if(e===void 0)throw new Error("useViewerState must be used within a ViewerProvider");return e}function Zr(){let e=I.useContext(lD);if(e===void 0)throw new Error("useViewerDispatch must be used within a ViewerProvider");return e}var tf={},cd={get(e){return e},setMetaValue([e,t,r],n){let i=cd.getResourceMeta(e,t),s=i?i[r]:void 0,o=typeof n=="function"?n(s):n;tf[e]={...tf[e]||{},[t]:{...(tf[e]||{})[t]||{},[r]:o}}},getResourceMeta:(e,t)=>{let r=tf[e];if(r)return t?r[t]:r},async load(e){let t=typeof e=="string"?e:e.id;return fetch(t).then(r=>r.json())},requestStatus(e){}};function K8(e){try{if(e==="full")return{full:!0};if(e==="square")return{square:!0};let t=e.startsWith("pct:"),r=e.substr(t?4:0).split(","),n=r.map(i=>parseFloat(i));return{x:n[0],y:n[1],w:n[2],h:n[3],percent:t}}catch{throw Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+e)}}function Y8(e){let t={upscaled:!1,max:!1,confined:!1};if(e[0]==="^"&&(t.upscaled=!0,e=e.slice(1)),e==="max"||e==="full")return t.max=!0,t.serialiseAsFull=e==="full",t;if(e[0]==="!"&&(t.confined=!0,e=e.slice(1)),e[0]==="p")return t.percentScale=parseFloat(e.slice(4)),t;let r=e.split(",").map(n=>n.trim());return r.length&&(r[0]!==""&&(t.width=parseInt(r[0],10)),r[1]!==""&&(t.height=parseInt(r[1],10))),t}function X8(e){let t={angle:0};if(e[0]==="!"&&(t.mirror=!0,e=e.substr(1)),t.angle=parseFloat(e)%360,Number.isNaN(t.angle))throw Error(`Invalid rotation ${e}`);return t}function Q8(e,t=""){let r=e.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!r)throw Error(`Invalid or unknown input ${e}`);let n=r[2],i=r[3],s=r[4];if(s[0]==="/"&&(s=s.substring(1)),t.length>0){if(t[0]==="/"&&(t=t.substring(1)),t!==s.substring(0,t.length))throw Error(`Path does not start with prefix (path: ${s}, prefix: ${t})`);s=s.substring(t.length)}return{scheme:n,server:i,path:s,prefix:t}}function Z8(e,t=""){let{path:r,scheme:n,server:i,prefix:s}=Q8(e,t),o=r.split("/").reverse(),[a,l,c,u,...d]=o,h=d.reverse().filter(Boolean).join("/");if(o.length===1||a==="")return{type:"base",scheme:n,server:i,prefix:s,identifier:h};if(a==="info.json"){let[,...g]=o;return{type:"info",scheme:n,server:i,prefix:s,identifier:g.reverse().filter(Boolean).join("/")}}if(n===void 0||i===void 0||r===void 0||u===void 0||c===void 0||l===void 0||a===void 0)throw Error("Invalid image service URL");let[f="",p=""]=a.split(".");return{type:"image",scheme:n,server:i,prefix:s,identifier:h,originalPath:r,region:K8(u),size:Y8(c),rotation:X8(l),quality:f,format:p}}function J8(e){return mg.indexOf(e)!==-1?zG:t1.indexOf(e)!==-1?HG:UG}function ej(e){let t=e?Array.isArray(e.profile)?e.profile:[e.profile]:[],r={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let n of t)if(typeof n=="string"&&(n=J8(n)),!!n){if(n.formats)for(let i of n.formats)r.extraFormats.indexOf(i)===-1&&r.extraFormats.push(i);if(n.qualities)for(let i of n.qualities)r.extraQualities.indexOf(i)===-1&&r.extraQualities.push(i);if(n.supports)for(let i of n.supports)r.extraFeatures.indexOf(i)===-1&&r.extraFeatures.push(i);if(n.maxHeight&&(r.maxHeight=n.maxHeight),n.maxWidth&&(r.maxWidth=n.maxWidth),n.maxArea&&(r.maxArea=n.maxArea),n.extraFormats)for(let i of n.extraFormats)r.extraFormats.indexOf(i)===-1&&r.extraFormats.push(i);if(n.extraQualities)for(let i of n.extraQualities)r.extraQualities.indexOf(i)===-1&&r.extraQualities.push(i);if(n.extraFeatures)for(let i of n.extraFeatures)r.extraFeatures.indexOf(i)===-1&&r.extraFeatures.push(i);n.maxHeight&&(r.maxHeight=n.maxHeight),n.maxWidth&&(r.maxWidth=n.maxWidth),n.maxArea&&(r.maxArea=n.maxArea)}if(e.extraFormats)for(let n of e.extraFormats)r.extraFormats.indexOf(n)===-1&&r.extraFormats.push(n);if(e.extraFeatures)for(let n of e.extraFeatures)r.extraFeatures.indexOf(n)===-1&&r.extraFeatures.push(n);if(e.extraQualities)for(let n of e.extraQualities)r.extraQualities.indexOf(n)===-1&&r.extraQualities.push(n);return r}function fx(e){let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let r of t)if(typeof r=="string"&&vP.indexOf(r)!==-1)return!0;return!1}function Dt(e){if(e["@id"])return e["@id"];if(e.id)return e.id}function Eg(e){if(!e||!e.profile||!Dt(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let r of t)if(typeof r=="string"&&mP.indexOf(r)!==-1)return!0;return!1}function tj(e){if(!Eg(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let r of t)if(typeof r=="string"){if(t1.indexOf(r)!==-1)return!0}else{let n=[...r.supports||[],...r.extraFeatures||[]];if(n.indexOf("regionByPx")!==-1&&(n.indexOf("sizeByW")!==-1||n.indexOf("sizeByWh")!==-1))return!0}return!1}function rj({x:e=0,y:t=0,w:r,h:n,full:i,square:s,percent:o}){return"full"}function nj({max:e,percentScale:t,upscaled:r,confined:n,width:i,height:s,serialiseAsFull:o,version:a}){let l=[];return r&&l.push("^"),e?(l.push(o?"full":"max"),l.join("")):(n&&l.push("!"),t&&l.push(`pct:${t}`),i&&l.push(`${i}`),l.push(","),s&&a===3&&l.push(`${s}`),l.join(""))}function ij(e){return`${e.mirror?"!":""}${(e.angle||0)%360}`}function sj(e,t){let r=e.prefix.startsWith("/")?e.prefix.substring(1):e.prefix,n=`${e.scheme}://${e.server}/${r?`${r}/`:""}${e.identifier}`,{size:i}=e,{region:s,rotation:o,format:a,quality:l}=e;return[n,rj(s),nj(i),ij(o),`${l}.${a}`].filter(Boolean).join("/")}function Po(e){return e.endsWith("info.json")?e:e.endsWith("/")?`${e}info.json`:`${e}/info.json`}function oj(e){let t=Z8(Po(e.id));if(t.type!=="info")throw Error("Invalid service URL");let r=ej(e);return{identifier:t.identifier,originalPath:"",server:t.server,prefix:t.prefix,scheme:t.scheme,type:"image",quality:r.extraQualities.indexOf("default")===-1?r.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}function aj(e,t,r){let n=r.length,i=[];for(let s=0;s<n;s++){let o=r[s];if(!o)continue;let a=o.width;i.push(e/a)}return i}function lj(e,t,r){let n=r.length,i=[];for(let s=0;s<n;s++){let o=r[s];o&&i.push({width:Math.floor(e/o),height:Math.floor(t/o)})}return i}function By(e,t){if(t&&t.profile){let r=t.profile;if(r){let n=Array.isArray(r)?r:[r];if(n.includes(`level${e}`)||n.includes(`http://iiif.io/api/image/2/level${e}.json`)||n.includes(`http://iiif.io/api/image/1/level${e}.json`)||n.includes(`http://iiif.io/api/image/1/profiles/level${e}.json`))return!0;if(e===2){for(let i of n)if(mg.includes(i))return!0}if(e===1){for(let i of n)if(t1.includes(i))return!0}if(e===0){for(let i of n)if(vP.includes(i))return!0}}}return!1}function TE(e){return Eg(e)?By(2,e)?2:By(1,e)?1:By(0,e)?0:null:null}function cD(e){let t=e.service?Array.isArray(e.service)?e.service:[e.service]:[],r=t.length,n=[];for(let i=0;i<r;i++)Eg(t[i])&&n.push(t[i]);return n}function cj(e){if(e["@type"])return e["@type"];if(e.type)return e.type}function Ka(e){let t=e.replace(/(https?:\/\/)?(www.)?/i,"");return t.indexOf("/")===-1?t:t.split("/")[0]}function uj(e,t,r){let n=e>t?e:t,i=r.length,s=[];for(let o=0;o<i;o++){let a=r[o];if(!a||a.scaleFactors.length===0)continue;let l=a.scaleFactors[0];if(!l)continue;let c=n/l,u=[l];for(;c>=a.width;)l*=2,u.push(l),c/=2;s.push({...a,scaleFactors:u})}return s}function Uy(e,t,r){let n=oj({"@context":e.version===3?"http://iiif.io/api/image/3/context.json":"http://iiif.io/api/image/2/context.json",id:Po(Dt(e)),profile:e.level===null||e.level===void 0?"level0":`level${e.level}`,type:e.version===3?"ImageService3":"ImageService2"});return n.size.max=!1,n.size.width=t,n.size.height=r,{id:sj(n),type:"fixed",width:t,height:r||e.height/(e.width||1)*t,unsafe:e.width>t}}function dj(e,t,r){let n=e.width?e.width:e.maxWidth;return r.height<=e.maxHeight&&r.width<=e.maxWidth&&r.height>=e.minHeight&&r.width>=e.minWidth&&(!t||Math.abs(r.width-n)<Math.abs(t.width-n))}function hj(e,t){let r=[],n=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},e),i=(u,d=0)=>n.explain?r.push(Array(d).fill(0).map(h=>"    ").join("")+u().trim()):void 0,s=[],o=[],a=null;i(()=>`Using configuration: ${JSON.stringify(n,null,2)}`);let l=(u,d)=>{if(i(()=>"Swapping choice",3),dj(n,d,u)){if(n.preferFixedSize&&u.unsafe){i(()=>`We found an image that was marked as unsafe, but it was the best size. (${u.id})`,4),o.push(u);return}n.returnAllOptions&&d&&o.push(d),i(()=>`We found a new image that was the best size. (${u.id})`,4),a=u}else n.returnAllOptions&&o.push(u)};i(()=>`The input shows we have ${t.length} list(s) of candidates to choose from.`);let c=t.length;for(let u=0;u<c;u++){let d=t[u]();i(()=>`Candidate group ${u}: ${JSON.stringify(d,null,2)}`,1);let h=d.length;i(()=>`Checking candidate list number ${u} and found ${h} potential ways of creating image(s)`,1);for(let f=0;f<h;f++){let p=d[f];if(i(()=>`-> Checking candidate ${f}`,1),p.type==="unknown"&&n.atAnyCost&&(i(()=>`We've found an unknown image type, adding this to the "last resort" list`,2),s.push(p)),p.type==="fixed"&&(p.unsafe?(i(()=>`We've found an unsafe fixed image type, adding this to the "last resort" list`,2),s.push(p)):(i(()=>"We've found a fixed size image, checking if it matches the request",2),l(p,a))),p.type==="fixed-service")if(n.unsafeImageService){i(()=>"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)",2);let g=Uy(p,n.width,n.height);l(g,a)}else{i(()=>"Checking for an image from the tile source 3",2);let g=Uy(p,p.width,p.height);l(g,a)}if(p.type==="variable"&&p.maxWidth){let g=Uy({id:p.id,type:"fixed-service",width:p.maxWidth,height:p.maxWidth,level:p.level,version:p.version},p.maxWidth);l(g,a)}}if(a&&!n.returnAllOptions){if(a.unsafe||n.allowUnsafe)continue;i(()=>`We found a match in choice list number ${u}, no searching any more`);break}}return n.atAnyCost&&o.length===0?(i(()=>a?`We found an image! ${a.id} of type ${a.type}`:'We found no images, but "atAnyCost" is set, so returning that'),{best:a||s[0]||null,fallback:s.slice(1),log:r}):n.returnAllOptions?(i(()=>"Returning all options that we have found"),{best:(n.atAnyCost?a||o[0]||s[0]:a||o[0])||null,fallback:[...o,...s],log:r}):(i(()=>"Returning the best image that we found, and a fallback"),{best:a||o[0]||null,fallback:a?o:o.slice(1),log:r})}function uD(e){return(e["@context"]?Array.isArray(e["@context"])?e["@context"]:[e["@context"]]:[]).indexOf("http://iiif.io/api/image/3/context.json")!==-1}function fj(e){return Eg(e)?(e&&e.sizes?e.sizes:[]).map(t=>({id:Dt(e),type:"fixed-service",height:t.height,width:t.width,level:TE(e),version:uD(e)?3:2})):[]}function pj(e){if(!tj(e))return[];let t=[],r=Array.isArray(e.profile)?e.profile:[e.profile],n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s&&typeof s!="string"&&(s.maxHeight||s.maxWidth))return[{id:Dt(e),type:"variable",minWidth:0,minHeight:0,maxHeight:s.maxHeight||s.maxWidth,maxWidth:s.maxWidth||s.maxHeight,level:TE(e),version:e["@context"]==="http://iiif.io/api/image/3/context.json"?3:2}]}if(e.tiles){let i=e.tiles.length;for(let s=0;s<i;s++){let o=e.tiles[s];o&&(o.height||o.width)&&t.push({id:Dt(e),type:"variable",minHeight:0,minWidth:0,maxHeight:o.height||o.width,maxWidth:o.width,level:TE(e),version:uD(e)?3:2})}}return t}function px(e){let t=[],r=e.length;for(let n=0;n<r;n++){let i=e[n];if(!i)continue;let s=fj(i);s.length&&t.push(...s);let o=pj(i);o.length&&t.push(...o)}return t}function gx(e){let t=/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/,r=e.match(t);if(r&&r[4]&&r[5]){let n=r[1],i=parseInt(r[4],10),s=parseInt(r[5],10),o=r[7];if((n==="max"||n==="full")&&i&&s&&o)return{type:"fixed",id:e,height:s,width:i}}return{type:"unknown",id:e}}function SE(e){if(typeof e=="string")return gx(e);let t=cj(e);if(t!=="Image"&&t!=="sc:Image")return null;let r=e,n=Dt(r);return n?n&&r.width&&r.height?{id:n,type:"fixed",width:r.width,height:r.height,unsafe:!0}:gx(n):null}function gj(e,t=!0,r){let n=[],i=SE(e);if(i===null)return n;let s=e;if(n.push(i),t&&s&&s.width&&s.height){let o=[],a=cD(s);for(let l of a){let c={id:Dt(l),width:s.width,height:s.height};if(r.canLoadSync(c)){let u=r.loadServiceSync(c);u&&(u.height||(u.height=s.height),u.width||(u.width=s.width),o.push(...px([u])))}}if(o.length)return n.push(...o),n}return s.service&&n.push(...px(s.service)),n}function mj(e,t){if(e.length!==t.length)return!1;if(e.length===0&&t.length===0)return!0;let r=e.length,n=!0;for(let s=0;s<r;s++){let o=e[s],a=t[s];if(o.width!==a.width||o.height!==a.height){n=!1;break}}if(n)return!0;let i=0;for(let s=0;s<r;s++)for(let o=0;o<r;o++)if(e[s].width===t[o].width&&e[s].height===t[o].height){i++;break}return i===r}var dD=class{constructor(e={}){Rn(this,"config",{verificationsRequired:1,approximateServices:!1,enableFetching:!0,disableThrottling:!1}),Rn(this,"fetchingCount",0),Rn(this,"imageServices",{}),Rn(this,"knownImageServers",{}),this.config=Object.assign(this.config,e)}setConfig(e){Object.assign(this.config,e)}sample(e,t,r=!0){let n=Ka(Dt(e)),i=Po(Dt(e)),s=this.knownImageServers[n];return this.imageServices[i]=Object.assign(e,{real:!0}),!s&&e.tiles&&!fx(e)?(this.knownImageServers[n]={verifications:0,malformed:!1,root:n,preLoaded:r,sampledId:Dt(e),verified:!1,server:null,result:{context:e["@context"]||[],sampledProfile:e.profile,resourceServiceRatio:t&&e.height?t.height/e.height:1,sampledSizes:e.sizes||[],sizeRatios:aj(e.width,e.height,e.sizes||[]),sampledTiles:e.tiles||[]}},!0):this.verify(e)}preLoad(e,t=!0){this.knownImageServers[e.root]=e,t&&(this.knownImageServers[e.root].malformed=!1,this.knownImageServers[e.root].verifications=this.config.verificationsRequired)}predict(e,t=!1,r=!1){let n=e?.source,i=Ka(Dt(e)),s=this.knownImageServers[i],o=Po(Dt(e));return this.imageServices[o]?this.imageServices[o]||null:!this.config.approximateServices||!s||!s.result||!(n!=null&&n.height||e.height)||!(n!=null&&n.width||e.width)||!r&&(s.malformed||s.verifications<this.config.verificationsRequired)||e.source&&fx(e.source)?null:(this.imageServices[o]||(this.imageServices[o]={"@context":s.result.context,"@id":Dt(e),id:Dt(e),protocol:"http://iiif.io/api/image",tiles:n?.tiles||uj(e.width,e.height,s.result.sampledTiles),sizes:n?.sizes||lj(Math.round(e.width/s.result.resourceServiceRatio),Math.round(e.height/s.result.resourceServiceRatio),s.result.sizeRatios),profile:n?.profile||s.result.sampledProfile,height:n?.height||e.height,width:n?.width||e.width,real:!1}),this.imageServices[o]||null)}async getThumbnailFromResource(e,t,r=!0,n=[]){let i=e?await this.getImageCandidates(e,r):[];return hj(t,[()=>n,()=>i])}async getImageCandidates(e,t=!0){let r=e;if(t&&r&&r.height&&r.width){let n=cD(r);for(let i of n){let s={id:Dt(i),width:i.width?i.width:r.width,height:i.height?i.height:r.height,source:i};await this.loadService(s)}}return gj(e,t,this)}async verify(e){let t=this.predict(e,!1,!0),r=await this.fetchService(Dt(e));if(!t)return!1;let n=t.height===r.height&&t.width===r.width&&t["@context"]===r["@context"]&&mj(t.sizes||[],r.sizes||[]);if(n){let i=Ka(Dt(e)),s=this.knownImageServers[i];s&&(s.verifications+=1,s.verifications>=this.config.verificationsRequired&&(s.verified=!0))}return n}canLoadSync(e){let t=typeof e=="string"?e:Dt(e),r=Po(t);if(this.imageServices[r])return!0;let n=this.knownImageServers[Ka(t)];return!!(n&&!n.malformed&&n.verifications>=this.config.verificationsRequired)}async markAsMalformed(e){return this.knownImageServers[Ka(Dt(e))].malformed=!0,this.loadService(e,!0)}async fetchService(e,t=!1){let r=Po(e),n=this.imageServices[r];if(n&&(!t||n.real))return n;if(!this.config.enableFetching)throw Error("Fetching is not enabled");let i=await this.fetch(r).then(s=>s.json());return!i.id&&i["@id"]&&(i.id=i["@id"]),i.id!==e&&(i.id=e,i["@id"]&&(i["@id"]=e)),this.imageServices[r]=Object.assign(i,{real:!0}),this.imageServices[r]}async fetch(e,t){return fetch(e,t)}async loadService(e,t=!1){if(!this.config.disableThrottling){let i=!0;for(;i;)if(this.fetchingCount>=this.config.verificationsRequired)await new Promise(s=>setTimeout(s,500));else{i=!1;break}}let r=this.knownImageServers[Ka(Dt(e))];if(r&&!r.malformed&&!t){await r.result;let i=this.loadServiceSync(e);if(i)return i}this.fetchingCount++;let n=await this.fetchService(Dt(e),t);return this.fetchingCount--,n.real&&this.sample(n,e),n}loadServiceSync(e){let t=Po(Dt(e));return this.imageServices[t]?this.imageServices[t]:this.config.approximateServices?this.predict(e):null}};function vj(e={}){let t=e.events||BL(),r=e.loader||new dD;return{store:FL((n,i)=>({loaded:{},loadServiceSync:(s,o,a)=>{let l=s.id||s["@id"],c=i().loaded[l];if(c&&c.status==="done")return c.service;if(c&&c.status==="loading")return null;if(c&&c.status==="error")throw Error("Failed to load image service");let u={id:Dt(s),width:s.width||o?.width||0,height:s.height||o?.height||0,source:s},d=r.loadServiceSync(u);return d?(n(h=>({loaded:{...h.loaded,[l]:{status:"done",service:d,real:!0}}})),t.emit("image-service.loaded",{id:l,service:d})):a&&i().loadService(s,o).then(()=>{}),d},loadService:async(s,o)=>{let a=s.id||s["@id"],l=i().loaded[a];if(l&&l.status==="done")return l.service;if(l&&l.status==="loading")return new Promise((c,u)=>{let d=h=>{h.id===a&&(t.off("image-service.loaded",d),c(h.service||s))};t.on("image-service.loaded",d)});if(l&&l.status==="error"&&!(o!=null&&o.force))throw Error("Failed to load image service");t.emit("image-service.loading",{id:a});try{let c={id:Dt(s),width:s.width||0,height:s.height||0,source:s},u=await r.loadService(c,o?.force);return n(d=>({loaded:{...d.loaded,[a]:{status:"done",service:u,real:u.real}}})),t.emit("image-service.loaded",{id:a,service:u}),u}catch(c){throw t.emit("image-service.error",{id:a,error:c}),c}}})),events:t}}vj();var yj=new dD,mx=new Map;function Ej(e,{vault:t=cd,dereference:r=!1,...n}={}){let i=mx.get(t);return i||(i=Tj(t),mx.set(t,i)),i.getBestThumbnailAtSize(e,n,r)}function Tj(e=cd,t={}){let r=t.imageServiceLoader||yj;async function n(i,s,o=!1,a=[],l){let c=()=>r.getThumbnailFromResource(void 0,s,o,a);if(!i)return await r.getThumbnailFromResource(void 0,s,o,a);if(typeof i=="string"){let d=SE(i);return d&&a.push(d),await r.getThumbnailFromResource(void 0,s,o,a)}let u=e.get(i,{skipSelfReturn:!1});if(typeof u=="string")return{best:SE(u),fallback:[],log:[]};if(!u)return await c();switch(await(async d=>{if(d&&d.thumbnail&&d.thumbnail.length){let h=e.get(d.thumbnail[0]),f=await r.getImageCandidates(h,o);f&&f.length&&a.push(...f)}})(u),u.type){case"Annotation":{let d=Array.isArray(u.body)?u.body:[u.body],h=e.get(d[0]);return l&&!h.width&&(h.width=l.width,h.height=l.height),await r.getThumbnailFromResource(h,s,o,a)}case"Canvas":{let d=u;return n(d.items[0],s,o,a,{width:d.width,height:d.height})}case"AnnotationPage":return n(u.items[0],s,o,a,l);case"Choice":{let d=u;return!d.items||d.items[0]?await c():n(d.items[0],s,o,a,l)}case"Collection":{let d=u,h=d.items[0];return h?n(h,s,o,a,l):await c()}case"Manifest":{let d=u,h=d.items[0];return h?n(h,s,o,a,l):await c()}case"SpecificResource":case"Image":case"Dataset":case"Sound":case"Text":case"TextualBody":case"Video":return l&&!u.width&&(u.width=l.width,u.height=l.height),r.getThumbnailFromResource(u,s,o,a)}return await c()}return{getBestThumbnailAtSize:n}}function Sj(e){let t=encodeURIComponent(e);return(typeof btoa>"u"?Buffer.from(t,"utf-8").toString("base64"):btoa(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function bj(e){let t=wj(e),r=t.replace(/-/g,"+").replace(/_/g,"/"),n=typeof atob>"u"?Buffer.from(r,"base64").toString("utf-8"):atob(r);return decodeURIComponent(n).trim()}function wj(e){let t=e.length%4;if(t===1)throw Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");return e+(t?"====".slice(0,4-t):"")}function hD(e,t){var r;let n=[];for(let i of t.items)if(i.type==="SpecificResource"&&((r=i.source)==null?void 0:r.type)==="Canvas"&&(i.source.id.indexOf("#")===-1?n.push(i.source):n.push({id:i.source.id.split("#")[0],type:"Canvas"})),i.type==="Range"&&n.push(...hD(e,e.get(i))),i.type==="SpecificResource"){let s=typeof i.source=="string"?i.source:i.source.id;n.push({id:s,type:"Canvas"})}return n}function Aj(e=cd,t,r,n=!1){let i=t.behavior||[],s=r?e.get(r):null;if(!s)return[];let o=s.behavior||[],a=n?!1:i.includes("paged"),l=a?!1:i.includes("continuous"),c=a||l?!1:i.includes("individuals"),u=o.includes("facing-pages"),d=o.includes("non-paged");if(u||d||c||n)return[{id:s.id,type:"Canvas"}];let[h,f]=fD(e,t);if(l)return h;let p=h.findIndex(g=>g.id===r);if(p===-1)return[];for(let g of f)if(g.includes(p))return g.map(v=>h[v]);return[{id:s.id,type:"Canvas"}]}function fD(e=cd,t,{disablePaging:r,skipNonPaged:n}={}){let i=t.behavior||[],s=i.includes("paged"),o=s?!1:i.includes("continuous"),a=s||o?!1:i.includes("individuals"),l=t.type==="Manifest"?t.items:hD(e,t);if(o)return[l,[l.map((p,g)=>g)]];if(a||!s||r)return[l,l.map((p,g)=>[g])];let c=[],u=[],d=()=>{u.length&&(c.push([...u]),u=[])},h=0,f=!1;for(let p=0;p<l.length;p++){let g=e.get(l[p]),v=g.behavior||[];if(v.includes("non-paged")){p===h&&h++,n||(d(),c.push([p]),d());continue}if(p===h||v.includes("facing-pages")){u.length&&(f=!0),d(),c.push([p]),d();continue}if(u.push(p),f){d(),f=!1;continue}u.length>1&&d()}return u.length&&d(),[l,c]}function Je(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),r===!1||!n.defaultPrevented)return t?.(n)}}function Ci(e,t=[]){let r=[];function n(s,o){let a=k.createContext(o),l=r.length;r=[...r,o];let c=d=>{var h;let{scope:f,children:p,...g}=d,v=((h=f?.[e])==null?void 0:h[l])||a,m=k.useMemo(()=>g,Object.values(g));return(0,oe.jsx)(v.Provider,{value:m,children:p})};c.displayName=s+"Provider";function u(d,h){var f;let p=((f=h?.[e])==null?void 0:f[l])||a,g=k.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}let i=()=>{let s=r.map(o=>k.createContext(o));return function(o){let a=o?.[e]||s;return k.useMemo(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return i.scopeName=e,[n,kj(i,...t)]}function kj(...e){let t=e[0];if(e.length===1)return t;let r=()=>{let n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){let s=n.reduce((o,{useScope:a,scopeName:l})=>{let c=a(i)[`__scope${l}`];return{...o,...c}},{});return k.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}var yr=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},Cj=k[" useInsertionEffect ".trim().toString()]||yr;function Vs({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){let[i,s,o]=xj({defaultProp:t,onChange:r}),a=e!==void 0,l=a?e:i;{let u=k.useRef(e!==void 0);k.useEffect(()=>{let d=u.current;d!==a&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}let c=k.useCallback(u=>{var d;if(a){let h=Rj(u)?u(e):u;h!==e&&((d=o.current)==null||d.call(o,h))}else s(u)},[a,e,s,o]);return[l,c]}function xj({defaultProp:e,onChange:t}){let[r,n]=k.useState(e),i=k.useRef(r),s=k.useRef(t);return Cj(()=>{s.current=t},[t]),k.useEffect(()=>{var o;i.current!==r&&((o=s.current)==null||o.call(s,r),i.current=r)},[r,i]),[r,n,s]}function Rj(e){return typeof e=="function"}function vx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function pD(...e){return t=>{let r=!1,n=e.map(i=>{let s=vx(i,t);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let i=0;i<n.length;i++){let s=n[i];typeof s=="function"?s():vx(e[i],null)}}}}function yt(...e){return k.useCallback(pD(...e),e)}function Lu(e){let t=Ij(e),r=k.forwardRef((n,i)=>{let{children:s,...o}=n,a=k.Children.toArray(s),l=a.find(Lj);if(l){let c=l.props.children,u=a.map(d=>d===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:d);return(0,oe.jsx)(t,{...o,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return(0,oe.jsx)(t,{...o,ref:i,children:s})});return r.displayName=`${e}.Slot`,r}function Ij(e){let t=k.forwardRef((r,n)=>{let{children:i,...s}=r;if(k.isValidElement(i)){let o=Dj(i),a=Pj(s,i.props);return i.type!==k.Fragment&&(a.ref=n?pD(n,o):o),k.cloneElement(i,a)}return k.Children.count(i)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var _j=Symbol("radix.slottable");function Lj(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===_j}function Pj(e,t){let r={...t};for(let n in t){let i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...o)=>{let a=s(...o);return i(...o),a}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}function Dj(e){var t,r;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var Oj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rt=Oj.reduce((e,t)=>{let r=Lu(`Primitive.${t}`),n=k.forwardRef((i,s)=>{let{asChild:o,...a}=i,l=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,oe.jsx)(l,{...a,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Nj(e,t){e&&jr.flushSync(()=>e.dispatchEvent(t))}function Mj(e,t){return k.useReducer((r,n)=>t[r][n]??r,e)}var ud=e=>{let{present:t,children:r}=e,n=Fj(t),i=typeof r=="function"?r({present:n.isPresent}):k.Children.only(r),s=yt(n.ref,Bj(i));return typeof r=="function"||n.isPresent?k.cloneElement(i,{ref:s}):null};ud.displayName="Presence";function Fj(e){let[t,r]=k.useState(),n=k.useRef(null),i=k.useRef(e),s=k.useRef("none"),o=e?"mounted":"unmounted",[a,l]=Mj(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{let c=rf(n.current);s.current=a==="mounted"?c:"none"},[a]),yr(()=>{let c=n.current,u=i.current;if(u!==e){let d=s.current,h=rf(c);e?l("MOUNT"):h==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),yr(()=>{if(t){let c,u=t.ownerDocument.defaultView??window,d=f=>{let p=rf(n.current).includes(CSS.escape(f.animationName));if(f.target===t&&p&&(l("ANIMATION_END"),!i.current)){let g=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},h=f=>{f.target===t&&(s.current=rf(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:k.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function rf(e){return e?.animationName||"none"}function Bj(e){var t,r;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var Uj=k[" useId ".trim().toString()]||(()=>{}),Hj=0;function ea(e){let[t,r]=k.useState(Uj());return yr(()=>{r(n=>n??String(Hj++))},[e]),e||(t?`radix-${t}`:"")}var Tg="Collapsible",[zj]=Ci(Tg),[$j,s1]=zj(Tg),gD=k.forwardRef((e,t)=>{let{__scopeCollapsible:r,open:n,defaultOpen:i,disabled:s,onOpenChange:o,...a}=e,[l,c]=Vs({prop:n,defaultProp:i??!1,onChange:o,caller:Tg});return(0,oe.jsx)($j,{scope:r,disabled:s,contentId:ea(),open:l,onOpenToggle:k.useCallback(()=>c(u=>!u),[c]),children:(0,oe.jsx)(rt.div,{"data-state":a1(l),"data-disabled":s?"":void 0,...a,ref:t})})});gD.displayName=Tg;var mD="CollapsibleTrigger",Gj=k.forwardRef((e,t)=>{let{__scopeCollapsible:r,...n}=e,i=s1(mD,r);return(0,oe.jsx)(rt.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":a1(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...n,ref:t,onClick:Je(e.onClick,i.onOpenToggle)})});Gj.displayName=mD;var o1="CollapsibleContent",jj=k.forwardRef((e,t)=>{let{forceMount:r,...n}=e,i=s1(o1,e.__scopeCollapsible);return(0,oe.jsx)(ud,{present:r||i.open,children:({present:s})=>(0,oe.jsx)(Vj,{...n,ref:t,present:s})})});jj.displayName=o1;var Vj=k.forwardRef((e,t)=>{let{__scopeCollapsible:r,present:n,children:i,...s}=e,o=s1(o1,r),[a,l]=k.useState(n),c=k.useRef(null),u=yt(t,c),d=k.useRef(0),h=d.current,f=k.useRef(0),p=f.current,g=o.open||a,v=k.useRef(g),m=k.useRef(void 0);return k.useEffect(()=>{let y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),yr(()=>{let y=c.current;if(y){m.current=m.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";let E=y.getBoundingClientRect();d.current=E.height,f.current=E.width,v.current||(y.style.transitionDuration=m.current.transitionDuration,y.style.animationName=m.current.animationName),l(n)}},[o.open,n]),(0,oe.jsx)(rt.div,{"data-state":a1(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...s,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:g&&i})});function a1(e){return e?"open":"closed"}var Wj=gD,qj=async(e,t)=>{let r=e.get({id:t,type:"Canvas"});if(!(r!=null&&r.annotations)||!r.annotations[0])return[];let n=e.get(r.annotations).filter(s=>s.items?s:!1),i=[];for(let s of n)if(s.items.length>0){let o=s.label||{none:["Annotations"]};i.push({...s,label:o})}else{let o={};try{o=await e.load(s.id)}catch(a){console.log(a)}if(o.items&&o.items.length>0){let a=o.label||{none:["Annotations"]};i.push({...o,label:a})}}return i},vD=async(e,t,r)=>{try{if(r==null||r.q==null)return{};let n=r.q.trim(),i=new URL(t);return i.searchParams.set("q",n),await e.load(i.toString())}catch(n){return console.warn("Error in getContentSearchResources:",n),{}}},yD=(e,t,r,n)=>{var i,s;let o={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]},a=l=>{if(l){if(!l.body||!l.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",l);return}let c=l.body;Array.isArray(c)&&(c=c[0]);let u=e.get(c.id);if(!u)return;switch(r){case"painting":return l.target===t.id&&l.motivation&&l.motivation[0]==="painting"&&n.includes(u.type)&&(l.body=u),!!l;case"supplementing":return;default:throw new Error("Invalid annotation motivation.")}}};if(o.canvas=e.get(t),o.canvas&&(o.annotationPage=e.get(o.canvas.items[0]),o.accompanyingCanvas=(i=o.canvas)!=null&&i.accompanyingCanvas?e.get((s=o.canvas)==null?void 0:s.accompanyingCanvas):void 0),o.annotationPage){let l=e.get(o.annotationPage.items).map(u=>({body:e.get(u.body[0].id),motivation:u.motivation,type:"Annotation"})),c=[];l.forEach(u=>{u.body.type==="Choice"?u.body.items.forEach(d=>c.push({...u,id:d.id,body:e.get(d.id)})):c.push(u)}),o.annotations=c.filter(a)}return o},l1=(e,t="en")=>{if(!e)return"";if(!e[t]){let r=Object.getOwnPropertyNames(e);if(r.length>0)return e[r[0]]}return e[t]},Ws=(e,t)=>{let r=yD(e,{id:t,type:"Canvas"},"painting",["Image","Sound","Video"]);if(r.annotations.length!==0&&r.annotations&&r.annotations)return r.annotations.map(n=>n?.body)},Kj=(0,k.createContext)(null),Hy={didCatch:!1,error:null},Pu=class extends k.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Hy}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){let{error:t}=this.state;if(t!==null){for(var r,n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:s,reason:"imperative-api"}),this.setState(Hy)}}componentDidCatch(t,r){var n,i;(n=(i=this.props).onError)===null||n===void 0||n.call(i,t,r)}componentDidUpdate(t,r){let{didCatch:n}=this.state,{resetKeys:i}=this.props;if(n&&r.error!==null&&Yj(t.resetKeys,i)){var s,o;(s=(o=this.props).onReset)===null||s===void 0||s.call(o,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(Hy)}}render(){let{children:t,fallbackRender:r,FallbackComponent:n,fallback:i}=this.props,{didCatch:s,error:o}=this.state,a=t;if(s){let l={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")a=r(l);else if(n)a=(0,k.createElement)(n,l);else if(i!==void 0)a=i;else throw o}return(0,k.createElement)(Kj.Provider,{value:{didCatch:s,error:o,resetErrorBoundary:this.resetErrorBoundary}},a)}};function Yj(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}var ft="colors",Or="sizes",_e="space",Xj={gap:_e,gridGap:_e,columnGap:_e,gridColumnGap:_e,rowGap:_e,gridRowGap:_e,inset:_e,insetBlock:_e,insetBlockEnd:_e,insetBlockStart:_e,insetInline:_e,insetInlineEnd:_e,insetInlineStart:_e,margin:_e,marginTop:_e,marginRight:_e,marginBottom:_e,marginLeft:_e,marginBlock:_e,marginBlockEnd:_e,marginBlockStart:_e,marginInline:_e,marginInlineEnd:_e,marginInlineStart:_e,padding:_e,paddingTop:_e,paddingRight:_e,paddingBottom:_e,paddingLeft:_e,paddingBlock:_e,paddingBlockEnd:_e,paddingBlockStart:_e,paddingInline:_e,paddingInlineEnd:_e,paddingInlineStart:_e,top:_e,right:_e,bottom:_e,left:_e,scrollMargin:_e,scrollMarginTop:_e,scrollMarginRight:_e,scrollMarginBottom:_e,scrollMarginLeft:_e,scrollMarginX:_e,scrollMarginY:_e,scrollMarginBlock:_e,scrollMarginBlockEnd:_e,scrollMarginBlockStart:_e,scrollMarginInline:_e,scrollMarginInlineEnd:_e,scrollMarginInlineStart:_e,scrollPadding:_e,scrollPaddingTop:_e,scrollPaddingRight:_e,scrollPaddingBottom:_e,scrollPaddingLeft:_e,scrollPaddingX:_e,scrollPaddingY:_e,scrollPaddingBlock:_e,scrollPaddingBlockEnd:_e,scrollPaddingBlockStart:_e,scrollPaddingInline:_e,scrollPaddingInlineEnd:_e,scrollPaddingInlineStart:_e,fontSize:"fontSizes",background:ft,backgroundColor:ft,backgroundImage:ft,borderImage:ft,border:ft,borderBlock:ft,borderBlockEnd:ft,borderBlockStart:ft,borderBottom:ft,borderBottomColor:ft,borderColor:ft,borderInline:ft,borderInlineEnd:ft,borderInlineStart:ft,borderLeft:ft,borderLeftColor:ft,borderRight:ft,borderRightColor:ft,borderTop:ft,borderTopColor:ft,caretColor:ft,color:ft,columnRuleColor:ft,fill:ft,outline:ft,outlineColor:ft,stroke:ft,textDecorationColor:ft,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Or,minBlockSize:Or,maxBlockSize:Or,inlineSize:Or,minInlineSize:Or,maxInlineSize:Or,width:Or,minWidth:Or,maxWidth:Or,height:Or,minHeight:Or,maxHeight:Or,flexBasis:Or,gridTemplateColumns:Or,gridTemplateRows:Or,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},Qj=(e,t)=>typeof t=="function"?{"()":Function.prototype.toString.call(t)}:t,Ul=()=>{let e=Object.create(null);return(t,r,...n)=>{let i=(s=>JSON.stringify(s,Qj))(t);return i in e?e[i]:e[i]=r(t,...n)}},Ho=Symbol.for("sxs.internal"),c1=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),yx=e=>{for(let t in e)return!0;return!1},{hasOwnProperty:Zj}=Object.prototype,bE=e=>e.includes("-")?e:e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Jj=/\s+(?![^()]*\))/,Ya=e=>t=>e(...typeof t=="string"?String(t).split(Jj):[t]),Ex={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:Ya((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e})),marginInline:Ya((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e})),maxSize:Ya((e,t)=>({maxBlockSize:e,maxInlineSize:t||e})),minSize:Ya((e,t)=>({minBlockSize:e,minInlineSize:t||e})),paddingBlock:Ya((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e})),paddingInline:Ya((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e}))},zy=/([\d.]+)([^]*)/,eV=(e,t)=>e.length?e.reduce((r,n)=>(r.push(...t.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(i)?`:is(${n})`:n):n+" "+i)),r),[]):t,tV=(e,t)=>e in rV&&typeof t=="string"?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(r,n,i,s)=>n+(i==="stretch"?`-moz-available${s};${bE(e)}:${n}-webkit-fill-available`:`-moz-fit-content${s};${bE(e)}:${n}fit-content`)+s):String(t),rV={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Qi=e=>e?e+"-":"",ED=(e,t,r)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(n,i,s,o,a)=>o=="$"==!!s?n:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?Qi(t)+(a.includes("$")?"":Qi(r))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),nV=/\s*,\s*(?![^()]*\))/,iV=Object.prototype.toString,cl=(e,t,r,n,i)=>{let s,o,a,l=(c,u,d)=>{let h,f,p=g=>{for(h in g){let y=h.charCodeAt(0)===64,E=y&&Array.isArray(g[h])?g[h]:[g[h]];for(f of E){let S=/[A-Z]/.test(m=h)?m:m.replace(/-[^]/g,w=>w[1].toUpperCase()),b=typeof f=="object"&&f&&f.toString===iV&&(!n.utils[S]||!u.length);if(S in n.utils&&!b){let w=n.utils[S];if(w!==o){o=w,p(w(f)),o=null;continue}}else if(S in Ex){let w=Ex[S];if(w!==a){a=w,p(w(f)),a=null;continue}}if(y&&(v=h.slice(1)in n.media?"@media "+n.media[h.slice(1)]:h,h=v.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(w,x,D,N,C,P)=>{let U=zy.test(x),G=.0625*(U?-1:1),[K,B]=U?[N,x]:[x,N];return"("+(D[0]==="="?"":D[0]===">"===U?"max-":"min-")+K+":"+(D[0]!=="="&&D.length===1?B.replace(zy,(V,W,X)=>Number(W)+G*(D===">"?1:-1)+X):B)+(C?") and ("+(C[0]===">"?"min-":"max-")+K+":"+(C.length===1?P.replace(zy,(V,W,X)=>Number(W)+G*(C===">"?-1:1)+X):P):"")+")"})),b){let w=y?d.concat(h):[...d],x=y?[...u]:eV(u,h.split(nV));s!==void 0&&i(Tx(...s)),s=void 0,l(f,x,w)}else s===void 0&&(s=[[],u,d]),h=y||h.charCodeAt(0)!==36?h:`--${Qi(n.prefix)}${h.slice(1).replace(/\$/g,"-")}`,f=b?f:typeof f=="number"?f&&S in sV?String(f)+"px":String(f):ED(tV(S,f??""),n.prefix,n.themeMap[S]),s[0].push(`${y?`${h} `:`${bE(h)}:`}${f}`)}}var v,m};p(c),s!==void 0&&i(Tx(...s)),s=void 0};l(e,t,r)},Tx=(e,t,r)=>`${r.map(n=>`${n}{`).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(r.length?r.length+1:0).join("}")}`,sV={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Sx=e=>String.fromCharCode(e+(e>25?39:97)),zo=e=>(t=>{let r,n="";for(r=Math.abs(t);r>52;r=r/52|0)n=Sx(r%52)+n;return Sx(r%52)+n})(((t,r)=>{let n=r.length;for(;n;)t=33*t^r.charCodeAt(--n);return t})(5381,JSON.stringify(e))>>>0),ou=["themed","global","styled","onevar","resonevar","allvar","inline"],oV=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},aV=e=>{let t,r=()=>{let{cssRules:i}=t.sheet;return[].map.call(i,(s,o)=>{let{cssText:a}=s,l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(let c in t.rules)if(t.rules[c].group===s)return`--sxs{--sxs:${[...t.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},n=()=>{if(t){let{rules:a,sheet:l}=t;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(let c in a)delete a[c]}let i=Object(e).styleSheets||[];for(let a of i)if(oV(a)){for(let l=0,c=a.cssRules;c[l];++l){let u=Object(c[l]);if(u.type!==1)continue;let d=Object(c[l+1]);if(d.type!==4)continue;++l;let{cssText:h}=u;if(!h.startsWith("--sxs"))continue;let f=h.slice(14,-3).trim().split(/\s+/),p=ou[f[0]];p&&(t||(t={sheet:a,reset:n,rules:{},toString:r}),t.rules[p]={group:d,index:l,cache:new Set(f)})}if(t)break}if(!t){let a=(l,c)=>({type:c,cssRules:[],insertRule(u,d){this.cssRules.splice(d,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:n,toString:r}}let{sheet:s,rules:o}=t;for(let a=ou.length-1;a>=0;--a){let l=ou[a];if(!o[l]){let c=ou[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}lV(o[l])}};return n(),t},lV=e=>{let t=e.group,r=t.cssRules.length;e.apply=n=>{try{t.insertRule(n,r),++r}catch{}}},Kc=Symbol(),cV=Ul(),bx=(e,t)=>cV(e,()=>(...r)=>{let n={type:null,composers:new Set};for(let i of r)if(i!=null)if(i[Ho]){n.type==null&&(n.type=i[Ho].type);for(let s of i[Ho].composers)n.composers.add(s)}else i.constructor!==Object||i.$$typeof?n.type==null&&(n.type=i):n.composers.add(uV(i,e));return n.type==null&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),dV(e,n,t)}),uV=({variants:e,compoundVariants:t,defaultVariants:r,...n},i)=>{let s=`${Qi(i.prefix)}c-${zo(n)}`,o=[],a=[],l=Object.create(null),c=[];for(let h in r)l[h]=String(r[h]);if(typeof e=="object"&&e)for(let h in e){u=l,d=h,Zj.call(u,d)||(l[h]="undefined");let f=e[h];for(let p in f){let g={[h]:String(p)};String(p)==="undefined"&&c.push(h);let v=f[p],m=[g,v,!yx(v)];o.push(m)}}var u,d;if(typeof t=="object"&&t)for(let h of t){let{css:f,...p}=h;f=typeof f=="object"&&f||{};for(let v in p)p[v]=String(p[v]);let g=[p,f,!yx(f)];a.push(g)}return[s,n,o,a,l,c]},dV=(e,t,r)=>{let[n,i,s,o]=hV(t.composers),a=typeof t.type=="function"||t.type.$$typeof?(d=>{function h(){for(let f=0;f<h[Kc].length;f++){let[p,g]=h[Kc][f];d.rules[p].apply(g)}return h[Kc]=[],null}return h[Kc]=[],h.rules={},ou.forEach(f=>h.rules[f]={apply:p=>h[Kc].push([f,p])}),h})(r):null,l=(a||r).rules,c=`.${n}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=d=>{d=typeof d=="object"&&d||fV;let{css:h,...f}=d,p={};for(let m in s)if(delete f[m],m in d){let y=d[m];typeof y=="object"&&y?p[m]={"@initial":s[m],...y}:(y=String(y),p[m]=y!=="undefined"||o.has(m)?y:s[m])}else p[m]=s[m];let g=new Set([...i]);for(let[m,y,E,S]of t.composers){r.rules.styled.cache.has(m)||(r.rules.styled.cache.add(m),cl(y,[`.${m}`],[],e,x=>{l.styled.apply(x)}));let b=wx(E,p,e.media),w=wx(S,p,e.media,!0);for(let x of b)if(x!==void 0)for(let[D,N,C]of x){let P=`${m}-${zo(N)}-${D}`;g.add(P);let U=(C?r.rules.resonevar:r.rules.onevar).cache,G=C?l.resonevar:l.onevar;U.has(P)||(U.add(P),cl(N,[`.${P}`],[],e,K=>{G.apply(K)}))}for(let x of w)if(x!==void 0)for(let[D,N]of x){let C=`${m}-${zo(N)}-${D}`;g.add(C),r.rules.allvar.cache.has(C)||(r.rules.allvar.cache.add(C),cl(N,[`.${C}`],[],e,P=>{l.allvar.apply(P)}))}}if(typeof h=="object"&&h){let m=`${n}-i${zo(h)}-css`;g.add(m),r.rules.inline.cache.has(m)||(r.rules.inline.cache.add(m),cl(h,[`.${m}`],[],e,y=>{l.inline.apply(y)}))}for(let m of String(d.className||"").trim().split(/\s+/))m&&g.add(m);let v=f.className=[...g].join(" ");return{type:t.type,className:v,selector:c,props:f,toString:()=>v,deferredInjector:a}};return c1(u,{className:n,selector:c,[Ho]:t,toString:()=>(r.rules.styled.cache.has(n)||u(),n)})},hV=e=>{let t="",r=[],n={},i=[];for(let[s,,,,o,a]of e){t===""&&(t=s),r.push(s),i.push(...a);for(let l in o){let c=o[l];(n[l]===void 0||c!=="undefined"||a.includes(c))&&(n[l]=c)}}return[t,r,n,new Set(i)]},wx=(e,t,r,n)=>{let i=[];e:for(let[s,o,a]of e){if(a)continue;let l,c=0,u=!1;for(l in s){let d=s[l],h=t[l];if(h!==d){if(typeof h!="object"||!h)continue e;{let f,p,g=0;for(let v in h){if(d===String(h[v])){if(v!=="@initial"){let m=v.slice(1);(p=p||[]).push(m in r?r[m]:v.replace(/^@media ?/,"")),u=!0}c+=g,f=!0}++g}if(p&&p.length&&(o={["@media "+p.join(", ")]:o}),!f)continue e}}}(i[c]=i[c]||[]).push([n?"cv":`${l}-${s[l]}`,o,u])}return i},fV={},pV=Ul(),gV=(e,t)=>pV(e,()=>(...r)=>{let n=()=>{for(let i of r){i=typeof i=="object"&&i||{};let s=zo(i);if(!t.rules.global.cache.has(s)){if(t.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,t.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}cl(i,[],[],e,o=>{t.rules.global.apply(o)})}}return""};return c1(n,{toString:n})}),mV=Ul(),vV=(e,t)=>mV(e,()=>r=>{let n=`${Qi(e.prefix)}k-${zo(r)}`,i=()=>{if(!t.rules.global.cache.has(n)){t.rules.global.cache.add(n);let s=[];cl(r,[],[],e,a=>s.push(a));let o=`@keyframes ${n}{${s.join("")}}`;t.rules.global.apply(o)}return n};return c1(i,{get name(){return i()},toString:i})}),yV=class{constructor(e,t,r,n){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=r==null?"":String(r),this.prefix=n==null?"":String(n)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Qi(this.prefix)+Qi(this.scale)+this.token}toString(){return this.computedValue}},EV=Ul(),TV=(e,t)=>EV(e,()=>(r,n)=>{n=typeof r=="object"&&r||Object(n);let i=`.${r=(r=typeof r=="string"?r:"")||`${Qi(e.prefix)}t-${zo(n)}`}`,s={},o=[];for(let l in n){s[l]={};for(let c in n[l]){let u=`--${Qi(e.prefix)}${l}-${c}`,d=ED(String(n[l][c]),e.prefix,l);s[l][c]=new yV(c,d,l,e.prefix),o.push(`${u}:${d}`)}}let a=()=>{if(o.length&&!t.rules.themed.cache.has(r)){t.rules.themed.cache.add(r);let l=`${n===e.theme?":root,":""}.${r}{${o.join(";")}}`;t.rules.themed.apply(l)}return r};return{...s,get className(){return a()},selector:i,toString:a}}),SV=Ul(),Ax,bV=Ul(),TD=e=>{let t=(r=>{let n=!1,i=SV(r,s=>{n=!0;let o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...Xj},utils:typeof s.utils=="object"&&s.utils||{}},d=aV(l),h={css:bx(u,d),globalCss:gV(u,d),keyframes:vV(u,d),createTheme:TV(u,d),reset(){d.reset(),h.theme.toString()},theme:{},sheet:d,config:u,prefix:o,getCssText:d.toString,toString:d.toString};return String(h.theme=h.createTheme(c)),h});return n||i.reset(),i})(e);return t.styled=(({config:r,sheet:n})=>bV(r,()=>{let i=bx(r,n);return(...s)=>{let o=i(...s),a=o[Ho].type,l=I.forwardRef((c,u)=>{let d=c&&c.as||a,{props:h,deferredInjector:f}=o(c);return delete h.as,h.ref=u,f?I.createElement(I.Fragment,null,I.createElement(d,h),I.createElement(f,null)):I.createElement(d,h)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Ho]=o[Ho],l}}))(t),t},wV=()=>Ax||(Ax=TD()),AV=(...e)=>wV().createTheme(...e),$y=209,kV={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:`hsl(${$y} 100% 38.2%)`,accentMuted:`hsl(${$y} 80% 61.8%)`,accentAlt:`hsl(${$y} 80% 30%)`,secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 200ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},SD={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:be,css:lve,keyframes:bD,createTheme:cve}=TD({theme:kV,media:SD}),CV=be("div",{display:"flex",flexDirection:"column",alignItems:"center"}),xV=be("p",{fontWeight:"bold",fontSize:"x-large"}),RV=be("span",{fontSize:"medium"}),u1=({error:e})=>{let{message:t}=e;return I.createElement(CV,{role:"alert"},I.createElement(xV,{"data-testid":"headline"},"Something went wrong"),t&&I.createElement(RV,null,`Error message: ${t}`," "))},IV=be("div",{position:"relative",zIndex:"0"}),wD=be("div",{display:"flex",flexDirection:"row",flexGrow:"1",overflow:"hidden"}),AD=be("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"100%",height:"100%","&[data-aside-active='true']":{width:"61.8%","@sm":{width:"0",opacity:"0"}},"&[data-aside-toggle='false']":{"@sm":{width:"100% !important",opacity:"1 !important"}}}),_V=be("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"0",maxHeight:"100%","&[data-aside-active='true']":{width:"38.2%","@sm":{width:"100%"}},"&[data-aside-toggle='false']":{"@sm":{width:"0 !important"}}}),LV=be("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased",'&[data-absolute-position="true"]':{position:"absolute",width:"100%",height:"100%",zIndex:"0"},"> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start",height:"100%",maxHeight:"100%","@sm":{[`& ${wD}`]:{flexGrow:"1"},[`& ${AD}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{}}});function kD(e){let t=e+"CollectionProvider",[r,n]=Ci(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{let{scope:v,children:m}=g,y=I.useRef(null),E=I.useRef(new Map).current;return(0,oe.jsx)(i,{scope:v,itemMap:E,collectionRef:y,children:m})};o.displayName=t;let a=e+"CollectionSlot",l=Lu(a),c=I.forwardRef((g,v)=>{let{scope:m,children:y}=g,E=s(a,m),S=yt(v,E.collectionRef);return(0,oe.jsx)(l,{ref:S,children:y})});c.displayName=a;let u=e+"CollectionItemSlot",d="data-radix-collection-item",h=Lu(u),f=I.forwardRef((g,v)=>{let{scope:m,children:y,...E}=g,S=I.useRef(null),b=yt(v,S),w=s(u,m);return I.useEffect(()=>(w.itemMap.set(S,{ref:S,...E}),()=>{w.itemMap.delete(S)})),(0,oe.jsx)(h,{[d]:"",ref:b,children:y})});f.displayName=u;function p(g){let v=s(e+"CollectionConsumer",g);return I.useCallback(()=>{let m=v.collectionRef.current;if(!m)return[];let y=Array.from(m.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,S)=>y.indexOf(E.ref.current)-y.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},p,n]}function qs(e){let t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var PV=k.createContext(void 0);function Sg(e){let t=k.useContext(PV);return e||t||"ltr"}var Gy="rovingFocusGroup.onEntryFocus",DV={bubbles:!1,cancelable:!0},dd="RovingFocusGroup",[wE,CD,OV]=kD(dd),[NV,bg]=Ci(dd,[OV]),[MV,FV]=NV(dd),xD=k.forwardRef((e,t)=>(0,oe.jsx)(wE.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,oe.jsx)(wE.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,oe.jsx)(BV,{...e,ref:t})})}));xD.displayName=dd;var BV=k.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=k.useRef(null),f=yt(t,h),p=Sg(s),[g,v]=Vs({prop:o,defaultProp:a??null,onChange:l,caller:dd}),[m,y]=k.useState(!1),E=qs(c),S=CD(r),b=k.useRef(!1),[w,x]=k.useState(0);return k.useEffect(()=>{let D=h.current;if(D)return D.addEventListener(Gy,E),()=>D.removeEventListener(Gy,E)},[E]),(0,oe.jsx)(MV,{scope:r,orientation:n,dir:p,loop:i,currentTabStopId:g,onItemFocus:k.useCallback(D=>v(D),[v]),onItemShiftTab:k.useCallback(()=>y(!0),[]),onFocusableItemAdd:k.useCallback(()=>x(D=>D+1),[]),onFocusableItemRemove:k.useCallback(()=>x(D=>D-1),[]),children:(0,oe.jsx)(rt.div,{tabIndex:m||w===0?-1:0,"data-orientation":n,...d,ref:f,style:{outline:"none",...e.style},onMouseDown:Je(e.onMouseDown,()=>{b.current=!0}),onFocus:Je(e.onFocus,D=>{let N=!b.current;if(D.target===D.currentTarget&&N&&!m){let C=new CustomEvent(Gy,DV);if(D.currentTarget.dispatchEvent(C),!C.defaultPrevented){let P=S().filter(B=>B.focusable),U=P.find(B=>B.active),G=P.find(B=>B.id===g),K=[U,G,...P].filter(Boolean).map(B=>B.ref.current);_D(K,u)}}b.current=!1}),onBlur:Je(e.onBlur,()=>y(!1))})})}),RD="RovingFocusGroupItem",ID=k.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,children:o,...a}=e,l=ea(),c=s||l,u=FV(RD,r),d=u.currentTabStopId===c,h=CD(r),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:g}=u;return k.useEffect(()=>{if(n)return f(),()=>p()},[n,f,p]),(0,oe.jsx)(wE.ItemSlot,{scope:r,id:c,focusable:n,active:i,children:(0,oe.jsx)(rt.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Je(e.onMouseDown,v=>{n?u.onItemFocus(c):v.preventDefault()}),onFocus:Je(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Je(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;let m=zV(v,u.orientation,u.dir);if(m!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=h().filter(E=>E.focusable).map(E=>E.ref.current);if(m==="last")y.reverse();else if(m==="prev"||m==="next"){m==="prev"&&y.reverse();let E=y.indexOf(v.currentTarget);y=u.loop?$V(y,E+1):y.slice(E+1)}setTimeout(()=>_D(y))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:g!=null}):o})})});ID.displayName=RD;var UV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function HV(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zV(e,t,r){let n=HV(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return UV[n]}function _D(e,t=!1){let r=document.activeElement;for(let n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function $V(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var LD=xD,PD=ID,wg="Tabs",[GV]=Ci(wg,[bg]),DD=bg(),[jV,d1]=GV(wg),OD=k.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=Sg(a),[d,h]=Vs({prop:n,onChange:i,defaultProp:s??"",caller:wg});return(0,oe.jsx)(jV,{scope:r,baseId:ea(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:l,children:(0,oe.jsx)(rt.div,{dir:u,"data-orientation":o,...c,ref:t})})});OD.displayName=wg;var ND="TabsList",MD=k.forwardRef((e,t)=>{let{__scopeTabs:r,loop:n=!0,...i}=e,s=d1(ND,r),o=DD(r);return(0,oe.jsx)(LD,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:n,children:(0,oe.jsx)(rt.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});MD.displayName=ND;var FD="TabsTrigger",BD=k.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,disabled:i=!1,...s}=e,o=d1(FD,r),a=DD(r),l=zD(o.baseId,n),c=$D(o.baseId,n),u=n===o.value;return(0,oe.jsx)(PD,{asChild:!0,...a,focusable:!i,active:u,children:(0,oe.jsx)(rt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:t,onMouseDown:Je(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(n):d.preventDefault()}),onKeyDown:Je(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(n)}),onFocus:Je(e.onFocus,()=>{let d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(n)})})})});BD.displayName=FD;var UD="TabsContent",HD=k.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,forceMount:i,children:s,...o}=e,a=d1(UD,r),l=zD(a.baseId,n),c=$D(a.baseId,n),u=n===a.value,d=k.useRef(u);return k.useEffect(()=>{let h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),(0,oe.jsx)(ud,{present:i||u,children:({present:h})=>(0,oe.jsx)(rt.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});HD.displayName=UD;function zD(e,t){return`${e}-trigger-${t}`}function $D(e,t){return`${e}-content-${t}`}var VV=OD,WV=MD,qV=BD,KV=HD,YV=be(VV,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% -  2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),XV=be(WV,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"5px solid #6663","@sm":{margin:"0 1rem"}}),Yc=be(qV,{display:"flex",position:"relative",padding:"0.5rem 1.618rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&[data-value='manifest-back']":{display:"none;","@sm":{display:"block"}},"&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),nf=be(KV,{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),QV=({handleScroll:e,children:t,className:r})=>I.createElement("div",{className:r,onScroll:e},t),ZV=be(QV,{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),GD={position:"relative",display:"flex",margin:"0 1.618rem",padding:"0.5rem 0",fontFamily:"inherit",fontSize:"0.8333rem",lineHeight:"1.47rem",color:"inherit",background:"none",borderRadius:"3px",border:"none"},Ag=be("button",{textAlign:"left","&:hover":{color:"$accent"}}),h1=be("div",{display:"flex",flexDirection:"column",width:"100%",header:{margin:"0 1.618rem 0.5rem ",fontWeight:700,fontSize:"0.8333rem",em:{fontStyle:"normal",fontWeight:400,opacity:.7}},paddingBottom:"1rem",marginBottom:"1rem",borderBottom:"1px solid #0001"}),kg=be("div",{gap:"1rem",fontSize:"1rem",lineHeight:"1.47em",margin:"0","&[data-content-search=true]":{em:{fontWeight:700,display:"inline"}}}),JV=be("div",{...GD,display:"flex",flexDirection:"row",gap:"1rem","&[data-format='text/vtt']":{marginTop:"-1rem","> span":{display:"none"}},"> span":{display:"flex",width:"2rem",height:"2rem",backgroundColor:"#0001",flexShrink:"0",borderRadius:"3px",marginTop:"0.25rem"},[`&[dir=rtl] ${kg}`]:{textAlign:"right !important"}}),eW=({value:e,handleClick:t})=>I.createElement(Ag,{onClick:t},I.createElement(kg,{dangerouslySetInnerHTML:{__html:e}})),tW=({caption:e,handleClick:t,imageUri:r})=>I.createElement(Ag,{onClick:t},I.createElement("img",{src:r,alt:`A visual annotation for ${e}`}),I.createElement("span",null,e)),jD=-1,Cg=0,gu=1,Tp=2,f1=3,p1=4,g1=5,m1=6,VD=7,WD=8,kx=typeof self=="object"?self:globalThis,rW=(e,t)=>{let r=(i,s)=>(e.set(s,i),i),n=i=>{if(e.has(i))return e.get(i);let[s,o]=t[i];switch(s){case Cg:case jD:return r(o,i);case gu:{let a=r([],i);for(let l of o)a.push(n(l));return a}case Tp:{let a=r({},i);for(let[l,c]of o)a[n(l)]=n(c);return a}case f1:return r(new Date(o),i);case p1:{let{source:a,flags:l}=o;return r(new RegExp(a,l),i)}case g1:{let a=r(new Map,i);for(let[l,c]of o)a.set(n(l),n(c));return a}case m1:{let a=r(new Set,i);for(let l of o)a.add(n(l));return a}case VD:{let{name:a,message:l}=o;return r(new kx[a](l),i)}case WD:return r(BigInt(o),i);case"BigInt":return r(Object(BigInt(o)),i);case"ArrayBuffer":return r(new Uint8Array(o).buffer,o);case"DataView":{let{buffer:a}=new Uint8Array(o);return r(new DataView(a),o)}}return r(new kx[s](o),i)};return n},Cx=e=>rW(new Map,e)(0),Xa="",{toString:nW}={},{keys:iW}=Object,Xc=e=>{let t=typeof e;if(t!=="object"||!e)return[Cg,t];let r=nW.call(e).slice(8,-1);switch(r){case"Array":return[gu,Xa];case"Object":return[Tp,Xa];case"Date":return[f1,Xa];case"RegExp":return[p1,Xa];case"Map":return[g1,Xa];case"Set":return[m1,Xa];case"DataView":return[gu,r]}return r.includes("Array")?[gu,r]:r.includes("Error")?[VD,r]:[Tp,r]},sf=([e,t])=>e===Cg&&(t==="function"||t==="symbol"),sW=(e,t,r,n)=>{let i=(o,a)=>{let l=n.push(o)-1;return r.set(a,l),l},s=o=>{if(r.has(o))return r.get(o);let[a,l]=Xc(o);switch(a){case Cg:{let u=o;switch(l){case"bigint":a=WD,u=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([jD],o)}return i([a,u],o)}case gu:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),i([l,[...h]],o)}let u=[],d=i([a,u],o);for(let h of o)u.push(s(h));return d}case Tp:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());let u=[],d=i([a,u],o);for(let h of iW(o))(e||!sf(Xc(o[h])))&&u.push([s(h),s(o[h])]);return d}case f1:return i([a,o.toISOString()],o);case p1:{let{source:u,flags:d}=o;return i([a,{source:u,flags:d}],o)}case g1:{let u=[],d=i([a,u],o);for(let[h,f]of o)(e||!(sf(Xc(h))||sf(Xc(f))))&&u.push([s(h),s(f)]);return d}case m1:{let u=[],d=i([a,u],o);for(let h of o)(e||!sf(Xc(h)))&&u.push(s(h));return d}}let{message:c}=o;return i([a,{name:l,message:c}],o)};return s},xx=(e,{json:t,lossy:r}={})=>{let n=[];return sW(!(t||r),!!t,new Map,n)(e),n},xl=typeof structuredClone=="function"?((e,t)=>t&&("json"in t||"lossy"in t)?Cx(xx(e,t)):structuredClone(e)):(e,t)=>Cx(xx(e,t)),hd=class{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}};hd.prototype.normal={};hd.prototype.property={};hd.prototype.space=void 0;function qD(e,t){let r={},n={};for(let i of e)Object.assign(r,i.property),Object.assign(n,i.normal);return new hd(r,n,t)}function Du(e){return e.toLowerCase()}var en=class{constructor(e,t){this.attribute=t,this.property=e}};en.prototype.attribute="";en.prototype.booleanish=!1;en.prototype.boolean=!1;en.prototype.commaOrSpaceSeparated=!1;en.prototype.commaSeparated=!1;en.prototype.defined=!1;en.prototype.mustUseProperty=!1;en.prototype.number=!1;en.prototype.overloadedBoolean=!1;en.prototype.property="";en.prototype.spaceSeparated=!1;en.prototype.space=void 0;var oW=0,Ke=ta(),qt=ta(),AE=ta(),ve=ta(),St=ta(),gl=ta(),cn=ta();function ta(){return 2**++oW}var kE=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ke,booleanish:qt,commaOrSpaceSeparated:cn,commaSeparated:gl,number:ve,overloadedBoolean:AE,spaceSeparated:St},Symbol.toStringTag,{value:"Module"})),jy=Object.keys(kE),v1=class extends en{constructor(e,t,r,n){let i=-1;if(super(e,t),Rx(this,"space",n),typeof r=="number")for(;++i<jy.length;){let s=jy[i];Rx(this,jy[i],(r&kE[s])===kE[s])}}};v1.prototype.defined=!0;function Rx(e,t,r){r&&(e[t]=r)}function Hl(e){let t={},r={};for(let[n,i]of Object.entries(e.properties)){let s=new v1(n,e.transform(e.attributes||{},n),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(s.mustUseProperty=!0),t[n]=s,r[Du(n)]=n,r[Du(s.attribute)]=n}return new hd(t,r,e.space)}var KD=Hl({properties:{ariaActiveDescendant:null,ariaAtomic:qt,ariaAutoComplete:null,ariaBusy:qt,ariaChecked:qt,ariaColCount:ve,ariaColIndex:ve,ariaColSpan:ve,ariaControls:St,ariaCurrent:null,ariaDescribedBy:St,ariaDetails:null,ariaDisabled:qt,ariaDropEffect:St,ariaErrorMessage:null,ariaExpanded:qt,ariaFlowTo:St,ariaGrabbed:qt,ariaHasPopup:null,ariaHidden:qt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:St,ariaLevel:ve,ariaLive:null,ariaModal:qt,ariaMultiLine:qt,ariaMultiSelectable:qt,ariaOrientation:null,ariaOwns:St,ariaPlaceholder:null,ariaPosInSet:ve,ariaPressed:qt,ariaReadOnly:qt,ariaRelevant:null,ariaRequired:qt,ariaRoleDescription:St,ariaRowCount:ve,ariaRowIndex:ve,ariaRowSpan:ve,ariaSelected:qt,ariaSetSize:ve,ariaSort:null,ariaValueMax:ve,ariaValueMin:ve,ariaValueNow:ve,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function YD(e,t){return t in e?e[t]:t}function XD(e,t){return YD(e,t.toLowerCase())}var aW=Hl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:gl,acceptCharset:St,accessKey:St,action:null,allow:null,allowFullScreen:Ke,allowPaymentRequest:Ke,allowUserMedia:Ke,alt:null,as:null,async:Ke,autoCapitalize:null,autoComplete:St,autoFocus:Ke,autoPlay:Ke,blocking:St,capture:null,charSet:null,checked:Ke,cite:null,className:St,cols:ve,colSpan:null,content:null,contentEditable:qt,controls:Ke,controlsList:St,coords:ve|gl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ke,defer:Ke,dir:null,dirName:null,disabled:Ke,download:AE,draggable:qt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ke,formTarget:null,headers:St,height:ve,hidden:AE,high:ve,href:null,hrefLang:null,htmlFor:St,httpEquiv:St,id:null,imageSizes:null,imageSrcSet:null,inert:Ke,inputMode:null,integrity:null,is:null,isMap:Ke,itemId:null,itemProp:St,itemRef:St,itemScope:Ke,itemType:St,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ke,low:ve,manifest:null,max:null,maxLength:ve,media:null,method:null,min:null,minLength:ve,multiple:Ke,muted:Ke,name:null,nonce:null,noModule:Ke,noValidate:Ke,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ke,optimum:ve,pattern:null,ping:St,placeholder:null,playsInline:Ke,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ke,referrerPolicy:null,rel:St,required:Ke,reversed:Ke,rows:ve,rowSpan:ve,sandbox:St,scope:null,scoped:Ke,seamless:Ke,selected:Ke,shadowRootClonable:Ke,shadowRootDelegatesFocus:Ke,shadowRootMode:null,shape:null,size:ve,sizes:null,slot:null,span:ve,spellCheck:qt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ve,step:null,style:null,tabIndex:ve,target:null,title:null,translate:null,type:null,typeMustMatch:Ke,useMap:null,value:qt,width:ve,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:St,axis:null,background:null,bgColor:null,border:ve,borderColor:null,bottomMargin:ve,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ke,declare:Ke,event:null,face:null,frame:null,frameBorder:null,hSpace:ve,leftMargin:ve,link:null,longDesc:null,lowSrc:null,marginHeight:ve,marginWidth:ve,noResize:Ke,noHref:Ke,noShade:Ke,noWrap:Ke,object:null,profile:null,prompt:null,rev:null,rightMargin:ve,rules:null,scheme:null,scrolling:qt,standby:null,summary:null,text:null,topMargin:ve,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ve,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ke,disableRemotePlayback:Ke,prefix:null,property:null,results:ve,security:null,unselectable:null},space:"html",transform:XD}),lW=Hl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:cn,accentHeight:ve,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ve,amplitude:ve,arabicForm:null,ascent:ve,attributeName:null,attributeType:null,azimuth:ve,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ve,by:null,calcMode:null,capHeight:ve,className:St,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ve,diffuseConstant:ve,direction:null,display:null,dur:null,divisor:ve,dominantBaseline:null,download:Ke,dx:null,dy:null,edgeMode:null,editable:null,elevation:ve,enableBackground:null,end:null,event:null,exponent:ve,externalResourcesRequired:null,fill:null,fillOpacity:ve,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:gl,g2:gl,glyphName:gl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ve,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ve,horizOriginX:ve,horizOriginY:ve,id:null,ideographic:ve,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ve,k:ve,k1:ve,k2:ve,k3:ve,k4:ve,kernelMatrix:cn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ve,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ve,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ve,overlineThickness:ve,paintOrder:null,panose1:null,path:null,pathLength:ve,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:St,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ve,pointsAtY:ve,pointsAtZ:ve,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cn,rev:cn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cn,requiredFeatures:cn,requiredFonts:cn,requiredFormats:cn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ve,specularExponent:ve,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ve,strikethroughThickness:ve,string:null,stroke:null,strokeDashArray:cn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ve,strokeOpacity:ve,strokeWidth:null,style:null,surfaceScale:ve,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cn,tabIndex:ve,tableValues:null,target:null,targetX:ve,targetY:ve,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ve,underlineThickness:ve,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ve,values:null,vAlphabetic:ve,vMathematical:ve,vectorEffect:null,vHanging:ve,vIdeographic:ve,version:null,vertAdvY:ve,vertOriginX:ve,vertOriginY:ve,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ve,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:YD}),QD=Hl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),ZD=Hl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:XD}),JD=Hl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),cW=/[A-Z]/g,Ix=/-[a-z]/g,uW=/^data[-\w.:]+$/i;function dW(e,t){let r=Du(t),n=t,i=en;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&uW.test(t)){if(t.charAt(4)==="-"){let s=t.slice(5).replace(Ix,fW);n="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{let s=t.slice(4);if(!Ix.test(s)){let o=s.replace(cW,hW);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=v1}return new i(n,t)}function hW(e){return"-"+e.toLowerCase()}function fW(e){return e.charAt(1).toUpperCase()}var pW=qD([KD,aW,QD,ZD,JD],"html"),gW=qD([KD,lW,QD,ZD,JD],"svg");function _x(e){let t=[],r=String(e||""),n=r.indexOf(","),i=0,s=!1;for(;!s;){n===-1&&(n=r.length,s=!0);let o=r.slice(i,n).trim();(o||!s)&&t.push(o),i=n+1,n=r.indexOf(",",i)}return t}function eO(e,t){let r=t||{};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}var Lx=/[#.]/g;function mW(e,t){let r=e||"",n={},i=0,s,o;for(;i<r.length;){Lx.lastIndex=i;let a=Lx.exec(r),l=r.slice(i,a?a.index:r.length);l&&(s?s==="#"?n.id=l:Array.isArray(n.className)?n.className.push(l):n.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:n,children:[]}}function Px(e){let t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function tO(e){return e.join(" ").trim()}function rO(e,t,r){let n=r?TW(r):void 0;function i(s,o,...a){let l;if(s==null){l={type:"root",children:[]};let c=o;a.unshift(c)}else{l=mW(s,t);let c=l.tagName.toLowerCase(),u=n?n.get(c):void 0;if(l.tagName=u||c,vW(o))a.unshift(o);else for(let[d,h]of Object.entries(o))yW(e,l.properties,d,h)}for(let c of a)CE(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function vW(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;let t=e,r=Object.keys(e);for(let n of r){let i=t[n];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;let s=i;for(let o of s)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function yW(e,t,r,n){let i=dW(e,r),s;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;s=n}else typeof n=="boolean"?s=n:typeof n=="string"?i.spaceSeparated?s=Px(n):i.commaSeparated?s=_x(n):i.commaOrSpaceSeparated?s=Px(_x(n).join(" ")):s=Dx(i,i.property,n):Array.isArray(n)?s=[...n]:s=i.property==="style"?EW(n):String(n);if(Array.isArray(s)){let o=[];for(let a of s)o.push(Dx(i,i.property,a));s=o}i.property==="className"&&Array.isArray(t.className)&&(s=t.className.concat(s)),t[i.property]=s}}function CE(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(let r of t)CE(e,r);else if(typeof t=="object"&&"type"in t)t.type==="root"?CE(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Dx(e,t,r){if(typeof r=="string"){if(e.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((e.boolean||e.overloadedBoolean)&&(r===""||Du(r)===Du(t)))return!0}return r}function EW(e){let t=[];for(let[r,n]of Object.entries(e))t.push([r,n].join(": "));return t.join("; ")}function TW(e){let t=new Map;for(let r of e)t.set(r.toLowerCase(),r);return t}var SW=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],bW=rO(pW,"div"),wW=rO(gW,"g",SW),fd=class{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}};fd.prototype.normal={};fd.prototype.property={};fd.prototype.space=void 0;function nO(e,t){let r={},n={};for(let i of e)Object.assign(r,i.property),Object.assign(n,i.normal);return new fd(r,n,t)}function xE(e){return e.toLowerCase()}var tn=class{constructor(e,t){this.attribute=t,this.property=e}};tn.prototype.attribute="";tn.prototype.booleanish=!1;tn.prototype.boolean=!1;tn.prototype.commaOrSpaceSeparated=!1;tn.prototype.commaSeparated=!1;tn.prototype.defined=!1;tn.prototype.mustUseProperty=!1;tn.prototype.number=!1;tn.prototype.overloadedBoolean=!1;tn.prototype.property="";tn.prototype.spaceSeparated=!1;tn.prototype.space=void 0;var AW=0,Ye=ra(),Kt=ra(),RE=ra(),ye=ra(),bt=ra(),ml=ra(),un=ra();function ra(){return 2**++AW}var IE=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ye,booleanish:Kt,commaOrSpaceSeparated:un,commaSeparated:ml,number:ye,overloadedBoolean:RE,spaceSeparated:bt},Symbol.toStringTag,{value:"Module"})),Vy=Object.keys(IE),y1=class extends tn{constructor(e,t,r,n){let i=-1;if(super(e,t),Ox(this,"space",n),typeof r=="number")for(;++i<Vy.length;){let s=Vy[i];Ox(this,Vy[i],(r&IE[s])===IE[s])}}};y1.prototype.defined=!0;function Ox(e,t,r){r&&(e[t]=r)}function zl(e){let t={},r={};for(let[n,i]of Object.entries(e.properties)){let s=new y1(n,e.transform(e.attributes||{},n),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(s.mustUseProperty=!0),t[n]=s,r[xE(n)]=n,r[xE(s.attribute)]=n}return new fd(t,r,e.space)}var iO=zl({properties:{ariaActiveDescendant:null,ariaAtomic:Kt,ariaAutoComplete:null,ariaBusy:Kt,ariaChecked:Kt,ariaColCount:ye,ariaColIndex:ye,ariaColSpan:ye,ariaControls:bt,ariaCurrent:null,ariaDescribedBy:bt,ariaDetails:null,ariaDisabled:Kt,ariaDropEffect:bt,ariaErrorMessage:null,ariaExpanded:Kt,ariaFlowTo:bt,ariaGrabbed:Kt,ariaHasPopup:null,ariaHidden:Kt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:bt,ariaLevel:ye,ariaLive:null,ariaModal:Kt,ariaMultiLine:Kt,ariaMultiSelectable:Kt,ariaOrientation:null,ariaOwns:bt,ariaPlaceholder:null,ariaPosInSet:ye,ariaPressed:Kt,ariaReadOnly:Kt,ariaRelevant:null,ariaRequired:Kt,ariaRoleDescription:bt,ariaRowCount:ye,ariaRowIndex:ye,ariaRowSpan:ye,ariaSelected:Kt,ariaSetSize:ye,ariaSort:null,ariaValueMax:ye,ariaValueMin:ye,ariaValueNow:ye,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function sO(e,t){return t in e?e[t]:t}function oO(e,t){return sO(e,t.toLowerCase())}var kW=zl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ml,acceptCharset:bt,accessKey:bt,action:null,allow:null,allowFullScreen:Ye,allowPaymentRequest:Ye,allowUserMedia:Ye,alt:null,as:null,async:Ye,autoCapitalize:null,autoComplete:bt,autoFocus:Ye,autoPlay:Ye,blocking:bt,capture:null,charSet:null,checked:Ye,cite:null,className:bt,cols:ye,colSpan:null,content:null,contentEditable:Kt,controls:Ye,controlsList:bt,coords:ye|ml,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ye,defer:Ye,dir:null,dirName:null,disabled:Ye,download:RE,draggable:Kt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ye,formTarget:null,headers:bt,height:ye,hidden:RE,high:ye,href:null,hrefLang:null,htmlFor:bt,httpEquiv:bt,id:null,imageSizes:null,imageSrcSet:null,inert:Ye,inputMode:null,integrity:null,is:null,isMap:Ye,itemId:null,itemProp:bt,itemRef:bt,itemScope:Ye,itemType:bt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ye,low:ye,manifest:null,max:null,maxLength:ye,media:null,method:null,min:null,minLength:ye,multiple:Ye,muted:Ye,name:null,nonce:null,noModule:Ye,noValidate:Ye,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ye,optimum:ye,pattern:null,ping:bt,placeholder:null,playsInline:Ye,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ye,referrerPolicy:null,rel:bt,required:Ye,reversed:Ye,rows:ye,rowSpan:ye,sandbox:bt,scope:null,scoped:Ye,seamless:Ye,selected:Ye,shadowRootClonable:Ye,shadowRootDelegatesFocus:Ye,shadowRootMode:null,shape:null,size:ye,sizes:null,slot:null,span:ye,spellCheck:Kt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ye,step:null,style:null,tabIndex:ye,target:null,title:null,translate:null,type:null,typeMustMatch:Ye,useMap:null,value:Kt,width:ye,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:bt,axis:null,background:null,bgColor:null,border:ye,borderColor:null,bottomMargin:ye,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ye,declare:Ye,event:null,face:null,frame:null,frameBorder:null,hSpace:ye,leftMargin:ye,link:null,longDesc:null,lowSrc:null,marginHeight:ye,marginWidth:ye,noResize:Ye,noHref:Ye,noShade:Ye,noWrap:Ye,object:null,profile:null,prompt:null,rev:null,rightMargin:ye,rules:null,scheme:null,scrolling:Kt,standby:null,summary:null,text:null,topMargin:ye,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ye,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ye,disableRemotePlayback:Ye,prefix:null,property:null,results:ye,security:null,unselectable:null},space:"html",transform:oO}),CW=zl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:un,accentHeight:ye,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ye,amplitude:ye,arabicForm:null,ascent:ye,attributeName:null,attributeType:null,azimuth:ye,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ye,by:null,calcMode:null,capHeight:ye,className:bt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ye,diffuseConstant:ye,direction:null,display:null,dur:null,divisor:ye,dominantBaseline:null,download:Ye,dx:null,dy:null,edgeMode:null,editable:null,elevation:ye,enableBackground:null,end:null,event:null,exponent:ye,externalResourcesRequired:null,fill:null,fillOpacity:ye,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ml,g2:ml,glyphName:ml,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ye,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ye,horizOriginX:ye,horizOriginY:ye,id:null,ideographic:ye,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ye,k:ye,k1:ye,k2:ye,k3:ye,k4:ye,kernelMatrix:un,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ye,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ye,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ye,overlineThickness:ye,paintOrder:null,panose1:null,path:null,pathLength:ye,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:bt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ye,pointsAtY:ye,pointsAtZ:ye,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:un,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:un,rev:un,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:un,requiredFeatures:un,requiredFonts:un,requiredFormats:un,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ye,specularExponent:ye,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ye,strikethroughThickness:ye,string:null,stroke:null,strokeDashArray:un,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ye,strokeOpacity:ye,strokeWidth:null,style:null,surfaceScale:ye,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:un,tabIndex:ye,tableValues:null,target:null,targetX:ye,targetY:ye,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:un,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ye,underlineThickness:ye,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ye,values:null,vAlphabetic:ye,vMathematical:ye,vectorEffect:null,vHanging:ye,vIdeographic:ye,version:null,vertAdvY:ye,vertOriginX:ye,vertOriginY:ye,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ye,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:sO}),aO=zl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),lO=zl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:oO}),cO=zl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),xW=/[A-Z]/g,Nx=/-[a-z]/g,RW=/^data[-\w.:]+$/i;function IW(e,t){let r=xE(t),n=t,i=tn;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&RW.test(t)){if(t.charAt(4)==="-"){let s=t.slice(5).replace(Nx,LW);n="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{let s=t.slice(4);if(!Nx.test(s)){let o=s.replace(xW,_W);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=y1}return new i(n,t)}function _W(e){return"-"+e.toLowerCase()}function LW(e){return e.charAt(1).toUpperCase()}var uO=nO([iO,kW,aO,lO,cO],"html"),dO=nO([iO,CW,aO,lO,cO],"svg");function PW(e){let t=String(e),r=[];return{toOffset:i,toPoint:n};function n(s){if(typeof s=="number"&&s>-1&&s<=t.length){let o=0;for(;;){let a=r[o];if(a===void 0){let l=Mx(t,r[o-1]);a=l===-1?t.length+1:l+1,r[o]=a}if(a>s)return{line:o+1,column:s-(o>0?r[o-1]:0)+1,offset:s};o++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;r.length<s.line;){let a=r[r.length-1],l=Mx(t,a),c=l===-1?t.length+1:l+1;if(a===c)break;r.push(c)}let o=(s.line>1?r[s.line-2]:0)+s.column-1;if(o<r[s.line-1])return o}}}function Mx(e,t){let r=e.indexOf("\r",t),n=e.indexOf(`
`,t);return n===-1?r:r===-1||r+1===n?n:r<n?r:n}var Mo={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},hO={}.hasOwnProperty,DW=Object.prototype;function OW(e,t){let r=t||{};return E1({file:r.file||void 0,location:!1,schema:r.space==="svg"?dO:uO,verbose:r.verbose||!1},e)}function E1(e,t){let r;switch(t.nodeName){case"#comment":{let n=t;return r={type:"comment",value:n.data},Wf(e,n,r),r}case"#document":case"#document-fragment":{let n=t,i="mode"in n?n.mode==="quirks"||n.mode==="limited-quirks":!1;if(r={type:"root",children:fO(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){let s=String(e.file),o=PW(s),a=o.toPoint(0),l=o.toPoint(s.length);r.position={start:a,end:l}}return r}case"#documentType":{let n=t;return r={type:"doctype"},Wf(e,n,r),r}case"#text":{let n=t;return r={type:"text",value:n.value},Wf(e,n,r),r}default:return r=NW(e,t),r}}function fO(e,t){let r=-1,n=[];for(;++r<t.length;){let i=E1(e,t[r]);n.push(i)}return n}function NW(e,t){let r=e.schema;e.schema=t.namespaceURI===Mo.svg?dO:uO;let n=-1,i={};for(;++n<t.attrs.length;){let o=t.attrs[n],a=(o.prefix?o.prefix+":":"")+o.name;hO.call(DW,a)||(i[a]=o.value)}let s=(e.schema.space==="svg"?wW:bW)(t.tagName,i,fO(e,t.childNodes));if(Wf(e,t,s),s.tagName==="template"){let o=t,a=o.sourceCodeLocation,l=a&&a.startTag&&ul(a.startTag),c=a&&a.endTag&&ul(a.endTag),u=E1(e,o.content);l&&c&&e.file&&(u.position={start:l.end,end:c.start}),s.content=u}return e.schema=r,s}function Wf(e,t,r){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){let n=MW(e,r,t.sourceCodeLocation);n&&(e.location=!0,r.position=n)}}function MW(e,t,r){let n=ul(r);if(t.type==="element"){let i=t.children[t.children.length-1];if(n&&!r.endTag&&i&&i.position&&i.position.end&&(n.end=Object.assign({},i.position.end)),e.verbose){let s={},o;if(r.attrs)for(o in r.attrs)hO.call(r.attrs,o)&&(s[IW(e.schema,o).property]=ul(r.attrs[o]));r.startTag;let a=ul(r.startTag),l=r.endTag?ul(r.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=s,t.data={position:c}}}return n}function ul(e){let t=Fx({line:e.startLine,column:e.startCol,offset:e.startOffset}),r=Fx({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||r?{start:t,end:r}:void 0}function Fx(e){return e.line&&e.column?e:void 0}var pd=class{constructor(e,t,r){this.property=e,this.normal=t,r&&(this.space=r)}};pd.prototype.property={};pd.prototype.normal={};pd.prototype.space=null;function pO(e,t){let r={},n={},i=-1;for(;++i<e.length;)Object.assign(r,e[i].property),Object.assign(n,e[i].normal);return new pd(r,n,t)}function _E(e){return e.toLowerCase()}var Dn=class{constructor(e,t){this.property=e,this.attribute=t}};Dn.prototype.space=null;Dn.prototype.boolean=!1;Dn.prototype.booleanish=!1;Dn.prototype.overloadedBoolean=!1;Dn.prototype.number=!1;Dn.prototype.commaSeparated=!1;Dn.prototype.spaceSeparated=!1;Dn.prototype.commaOrSpaceSeparated=!1;Dn.prototype.mustUseProperty=!1;Dn.prototype.defined=!1;var FW=0,We=na(),Yt=na(),gO=na(),Ee=na(),wt=na(),vl=na(),dn=na();function na(){return 2**++FW}var LE=Object.freeze(Object.defineProperty({__proto__:null,boolean:We,booleanish:Yt,commaOrSpaceSeparated:dn,commaSeparated:vl,number:Ee,overloadedBoolean:gO,spaceSeparated:wt},Symbol.toStringTag,{value:"Module"})),Wy=Object.keys(LE),T1=class extends Dn{constructor(e,t,r,n){let i=-1;if(super(e,t),Bx(this,"space",n),typeof r=="number")for(;++i<Wy.length;){let s=Wy[i];Bx(this,Wy[i],(r&LE[s])===LE[s])}}};T1.prototype.defined=!0;function Bx(e,t,r){r&&(e[t]=r)}var BW={}.hasOwnProperty;function $l(e){let t={},r={},n;for(n in e.properties)if(BW.call(e.properties,n)){let i=e.properties[n],s=new T1(n,e.transform(e.attributes||{},n),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(s.mustUseProperty=!0),t[n]=s,r[_E(n)]=n,r[_E(s.attribute)]=n}return new pd(t,r,e.space)}var mO=$l({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),vO=$l({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function yO(e,t){return t in e?e[t]:t}function EO(e,t){return yO(e,t.toLowerCase())}var TO=$l({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:EO,properties:{xmlns:null,xmlnsXLink:null}}),SO=$l({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Yt,ariaAutoComplete:null,ariaBusy:Yt,ariaChecked:Yt,ariaColCount:Ee,ariaColIndex:Ee,ariaColSpan:Ee,ariaControls:wt,ariaCurrent:null,ariaDescribedBy:wt,ariaDetails:null,ariaDisabled:Yt,ariaDropEffect:wt,ariaErrorMessage:null,ariaExpanded:Yt,ariaFlowTo:wt,ariaGrabbed:Yt,ariaHasPopup:null,ariaHidden:Yt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:wt,ariaLevel:Ee,ariaLive:null,ariaModal:Yt,ariaMultiLine:Yt,ariaMultiSelectable:Yt,ariaOrientation:null,ariaOwns:wt,ariaPlaceholder:null,ariaPosInSet:Ee,ariaPressed:Yt,ariaReadOnly:Yt,ariaRelevant:null,ariaRequired:Yt,ariaRoleDescription:wt,ariaRowCount:Ee,ariaRowIndex:Ee,ariaRowSpan:Ee,ariaSelected:Yt,ariaSetSize:Ee,ariaSort:null,ariaValueMax:Ee,ariaValueMin:Ee,ariaValueNow:Ee,ariaValueText:null,role:null}}),UW=$l({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:EO,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:vl,acceptCharset:wt,accessKey:wt,action:null,allow:null,allowFullScreen:We,allowPaymentRequest:We,allowUserMedia:We,alt:null,as:null,async:We,autoCapitalize:null,autoComplete:wt,autoFocus:We,autoPlay:We,blocking:wt,capture:null,charSet:null,checked:We,cite:null,className:wt,cols:Ee,colSpan:null,content:null,contentEditable:Yt,controls:We,controlsList:wt,coords:Ee|vl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:We,defer:We,dir:null,dirName:null,disabled:We,download:gO,draggable:Yt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:We,formTarget:null,headers:wt,height:Ee,hidden:We,high:Ee,href:null,hrefLang:null,htmlFor:wt,httpEquiv:wt,id:null,imageSizes:null,imageSrcSet:null,inert:We,inputMode:null,integrity:null,is:null,isMap:We,itemId:null,itemProp:wt,itemRef:wt,itemScope:We,itemType:wt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:We,low:Ee,manifest:null,max:null,maxLength:Ee,media:null,method:null,min:null,minLength:Ee,multiple:We,muted:We,name:null,nonce:null,noModule:We,noValidate:We,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:We,optimum:Ee,pattern:null,ping:wt,placeholder:null,playsInline:We,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:We,referrerPolicy:null,rel:wt,required:We,reversed:We,rows:Ee,rowSpan:Ee,sandbox:wt,scope:null,scoped:We,seamless:We,selected:We,shadowRootClonable:We,shadowRootDelegatesFocus:We,shadowRootMode:null,shape:null,size:Ee,sizes:null,slot:null,span:Ee,spellCheck:Yt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ee,step:null,style:null,tabIndex:Ee,target:null,title:null,translate:null,type:null,typeMustMatch:We,useMap:null,value:Yt,width:Ee,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:wt,axis:null,background:null,bgColor:null,border:Ee,borderColor:null,bottomMargin:Ee,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:We,declare:We,event:null,face:null,frame:null,frameBorder:null,hSpace:Ee,leftMargin:Ee,link:null,longDesc:null,lowSrc:null,marginHeight:Ee,marginWidth:Ee,noResize:We,noHref:We,noShade:We,noWrap:We,object:null,profile:null,prompt:null,rev:null,rightMargin:Ee,rules:null,scheme:null,scrolling:Yt,standby:null,summary:null,text:null,topMargin:Ee,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ee,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:We,disableRemotePlayback:We,prefix:null,property:null,results:Ee,security:null,unselectable:null}}),HW=$l({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:yO,properties:{about:dn,accentHeight:Ee,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ee,amplitude:Ee,arabicForm:null,ascent:Ee,attributeName:null,attributeType:null,azimuth:Ee,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ee,by:null,calcMode:null,capHeight:Ee,className:wt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ee,diffuseConstant:Ee,direction:null,display:null,dur:null,divisor:Ee,dominantBaseline:null,download:We,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ee,enableBackground:null,end:null,event:null,exponent:Ee,externalResourcesRequired:null,fill:null,fillOpacity:Ee,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:vl,g2:vl,glyphName:vl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ee,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ee,horizOriginX:Ee,horizOriginY:Ee,id:null,ideographic:Ee,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ee,k:Ee,k1:Ee,k2:Ee,k3:Ee,k4:Ee,kernelMatrix:dn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ee,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ee,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ee,overlineThickness:Ee,paintOrder:null,panose1:null,path:null,pathLength:Ee,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:wt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ee,pointsAtY:Ee,pointsAtZ:Ee,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:dn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:dn,rev:dn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:dn,requiredFeatures:dn,requiredFonts:dn,requiredFormats:dn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ee,specularExponent:Ee,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ee,strikethroughThickness:Ee,string:null,stroke:null,strokeDashArray:dn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ee,strokeOpacity:Ee,strokeWidth:null,style:null,surfaceScale:Ee,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:dn,tabIndex:Ee,tableValues:null,target:null,targetX:Ee,targetY:Ee,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:dn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ee,underlineThickness:Ee,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ee,values:null,vAlphabetic:Ee,vMathematical:Ee,vectorEffect:null,vHanging:Ee,vIdeographic:Ee,version:null,vertAdvY:Ee,vertOriginX:Ee,vertOriginY:Ee,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ee,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),zW=/^data[-\w.:]+$/i,Ux=/-[a-z]/g,$W=/[A-Z]/g;function GW(e,t){let r=_E(t),n=t,i=Dn;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&zW.test(t)){if(t.charAt(4)==="-"){let s=t.slice(5).replace(Ux,VW);n="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{let s=t.slice(4);if(!Ux.test(s)){let o=s.replace($W,jW);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=T1}return new i(n,t)}function jW(e){return"-"+e.toLowerCase()}function VW(e){return e.charAt(1).toUpperCase()}var WW=pO([vO,mO,TO,SO,UW],"html"),bO=pO([vO,mO,TO,SO,HW],"svg"),Hx={}.hasOwnProperty;function S1(e,t){let r=t||{};function n(i,...s){let o=n.invalid,a=n.handlers;if(i&&Hx.call(i,e)){let l=String(i[e]);o=Hx.call(a,l)?a[l]:n.unknown}if(o)return o.call(this,i,...s)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}var qW={},KW={}.hasOwnProperty,wO=S1("type",{handlers:{root:XW,element:t9,text:JW,comment:e9,doctype:ZW}});function YW(e,t){let r=(t||qW).space;return wO(e,r==="svg"?bO:WW)}function XW(e,t){let r={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return r.childNodes=b1(e.children,r,t),Gl(e,r),r}function QW(e,t){let r={nodeName:"#document-fragment",childNodes:[]};return r.childNodes=b1(e.children,r,t),Gl(e,r),r}function ZW(e){let t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Gl(e,t),t}function JW(e){let t={nodeName:"#text",value:e.value,parentNode:null};return Gl(e,t),t}function e9(e){let t={nodeName:"#comment",data:e.value,parentNode:null};return Gl(e,t),t}function t9(e,t){let r=t,n=r;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(n=bO);let i=[],s;if(e.properties){for(s in e.properties)if(s!=="children"&&KW.call(e.properties,s)){let l=r9(n,s,e.properties[s]);l&&i.push(l)}}let o=n.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Mo[o],childNodes:[],parentNode:null};return a.childNodes=b1(e.children,a,n),Gl(e,a),e.tagName==="template"&&e.content&&(a.content=QW(e.content,n)),a}function r9(e,t,r){let n=GW(e,t);if(r===!1||r===null||r===void 0||typeof r=="number"&&Number.isNaN(r)||!r&&n.boolean)return;Array.isArray(r)&&(r=n.commaSeparated?eO(r):tO(r));let i={name:n.attribute,value:r===!0?"":String(r)};if(n.space&&n.space!=="html"&&n.space!=="svg"){let s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=n.attribute.slice(0,s)),i.namespace=Mo[n.space]}return i}function b1(e,t,r){let n=-1,i=[];if(e)for(;++n<e.length;){let s=wO(e[n],r);s.parentNode=t,i.push(s)}return i}function Gl(e,t){let r=e.position;r&&r.start&&r.end&&(r.start.offset,r.end.offset,t.sourceCodeLocation={startLine:r.start.line,startCol:r.start.column,startOffset:r.start.offset,endLine:r.end.line,endCol:r.end.column,endOffset:r.end.offset})}var AO=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],n9=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Pt="\uFFFD",z;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(z||(z={}));var Vr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function kO(e){return e>=55296&&e<=57343}function i9(e){return e>=56320&&e<=57343}function s9(e,t){return(e-55296)*1024+9216+t}function CO(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function xO(e){return e>=64976&&e<=65007||n9.has(e)}var ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ne||(ne={}));var o9=65536,PE=class{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=o9,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,r){let{line:n,col:i,offset:s}=this,o=i+r,a=s+r;return{code:t,startLine:n,endLine:n,startCol:o,endCol:o,startOffset:a,endOffset:a}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){let r=this.html.charCodeAt(this.pos+1);if(i9(r))return this.pos++,this._addGap(),s9(t,r)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,z.EOF;return this._err(ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,r){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=r}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,r){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(r)return this.html.startsWith(t,this.pos);for(let n=0;n<t.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==t.charCodeAt(n))return!1;return!0}peek(t){let r=this.pos+t;if(r>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,z.EOF;let n=this.html.charCodeAt(r);return n===z.CARRIAGE_RETURN?z.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,z.EOF;let t=this.html.charCodeAt(this.pos);return t===z.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,z.LINE_FEED):t===z.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,kO(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===z.LINE_FEED||t===z.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){CO(t)?this._err(ne.controlCharacterInInputStream):xO(t)&&this._err(ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}},tt;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(tt||(tt={}));function RO(e,t){for(let r=e.attrs.length-1;r>=0;r--)if(e.attrs[r].name===t)return e.attrs[r].value;return null}var a9=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(e=>e.charCodeAt(0))),l9=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function c9(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=l9.get(e))!==null&&t!==void 0?t:e}var dr;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(dr||(dr={}));var u9=32,$s;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})($s||($s={}));function DE(e){return e>=dr.ZERO&&e<=dr.NINE}function d9(e){return e>=dr.UPPER_A&&e<=dr.UPPER_F||e>=dr.LOWER_A&&e<=dr.LOWER_F}function h9(e){return e>=dr.UPPER_A&&e<=dr.UPPER_Z||e>=dr.LOWER_A&&e<=dr.LOWER_Z||DE(e)}function f9(e){return e===dr.EQUALS||h9(e)}var ur;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ur||(ur={}));var Ki;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Ki||(Ki={}));var OE=class{constructor(t,r,n){this.decodeTree=t,this.emitCodePoint=r,this.errors=n,this.state=ur.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ki.Strict}startEntity(t){this.decodeMode=t,this.state=ur.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,r){switch(this.state){case ur.EntityStart:return t.charCodeAt(r)===dr.NUM?(this.state=ur.NumericStart,this.consumed+=1,this.stateNumericStart(t,r+1)):(this.state=ur.NamedEntity,this.stateNamedEntity(t,r));case ur.NumericStart:return this.stateNumericStart(t,r);case ur.NumericDecimal:return this.stateNumericDecimal(t,r);case ur.NumericHex:return this.stateNumericHex(t,r);case ur.NamedEntity:return this.stateNamedEntity(t,r)}}stateNumericStart(t,r){return r>=t.length?-1:(t.charCodeAt(r)|u9)===dr.LOWER_X?(this.state=ur.NumericHex,this.consumed+=1,this.stateNumericHex(t,r+1)):(this.state=ur.NumericDecimal,this.stateNumericDecimal(t,r))}addToNumericResult(t,r,n,i){if(r!==n){let s=n-r;this.result=this.result*Math.pow(i,s)+Number.parseInt(t.substr(r,s),i),this.consumed+=s}}stateNumericHex(t,r){let n=r;for(;r<t.length;){let i=t.charCodeAt(r);if(DE(i)||d9(i))r+=1;else return this.addToNumericResult(t,n,r,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,n,r,16),-1}stateNumericDecimal(t,r){let n=r;for(;r<t.length;){let i=t.charCodeAt(r);if(DE(i))r+=1;else return this.addToNumericResult(t,n,r,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,n,r,10),-1}emitNumericEntity(t,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===dr.SEMI)this.consumed+=1;else if(this.decodeMode===Ki.Strict)return 0;return this.emitCodePoint(c9(this.result),this.consumed),this.errors&&(t!==dr.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,r){let{decodeTree:n}=this,i=n[this.treeIndex],s=(i&$s.VALUE_LENGTH)>>14;for(;r<t.length;r++,this.excess++){let o=t.charCodeAt(r);if(this.treeIndex=p9(n,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Ki.Attribute&&(s===0||f9(o))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],s=(i&$s.VALUE_LENGTH)>>14,s!==0){if(o===dr.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Ki.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;let{result:r,decodeTree:n}=this,i=(n[r]&$s.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,r,n){let{decodeTree:i}=this;return this.emitCodePoint(r===1?i[t]&~$s.VALUE_LENGTH:i[t+1],n),r===3&&this.emitCodePoint(i[t+2],n),n}end(){var t;switch(this.state){case ur.NamedEntity:return this.result!==0&&(this.decodeMode!==Ki.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ur.NumericDecimal:return this.emitNumericEntity(0,2);case ur.NumericHex:return this.emitNumericEntity(0,3);case ur.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ur.EntityStart:return 0}}};function p9(e,t,r,n){let i=(t&$s.BRANCH_LENGTH)>>7,s=t&$s.JUMP_TABLE;if(i===0)return s!==0&&n===s?r:-1;if(s){let l=n-s;return l<0||l>=i?-1:e[r+l]-1}let o=r,a=o+i-1;for(;o<=a;){let l=o+a>>>1,c=e[l];if(c<n)o=l+1;else if(c>n)a=l-1;else return e[l+i]}return-1}var ce;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ce||(ce={}));var $o;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})($o||($o={}));var _n;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(_n||(_n={}));var Z;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Z||(Z={}));var T;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(T||(T={}));var g9=new Map([[Z.A,T.A],[Z.ADDRESS,T.ADDRESS],[Z.ANNOTATION_XML,T.ANNOTATION_XML],[Z.APPLET,T.APPLET],[Z.AREA,T.AREA],[Z.ARTICLE,T.ARTICLE],[Z.ASIDE,T.ASIDE],[Z.B,T.B],[Z.BASE,T.BASE],[Z.BASEFONT,T.BASEFONT],[Z.BGSOUND,T.BGSOUND],[Z.BIG,T.BIG],[Z.BLOCKQUOTE,T.BLOCKQUOTE],[Z.BODY,T.BODY],[Z.BR,T.BR],[Z.BUTTON,T.BUTTON],[Z.CAPTION,T.CAPTION],[Z.CENTER,T.CENTER],[Z.CODE,T.CODE],[Z.COL,T.COL],[Z.COLGROUP,T.COLGROUP],[Z.DD,T.DD],[Z.DESC,T.DESC],[Z.DETAILS,T.DETAILS],[Z.DIALOG,T.DIALOG],[Z.DIR,T.DIR],[Z.DIV,T.DIV],[Z.DL,T.DL],[Z.DT,T.DT],[Z.EM,T.EM],[Z.EMBED,T.EMBED],[Z.FIELDSET,T.FIELDSET],[Z.FIGCAPTION,T.FIGCAPTION],[Z.FIGURE,T.FIGURE],[Z.FONT,T.FONT],[Z.FOOTER,T.FOOTER],[Z.FOREIGN_OBJECT,T.FOREIGN_OBJECT],[Z.FORM,T.FORM],[Z.FRAME,T.FRAME],[Z.FRAMESET,T.FRAMESET],[Z.H1,T.H1],[Z.H2,T.H2],[Z.H3,T.H3],[Z.H4,T.H4],[Z.H5,T.H5],[Z.H6,T.H6],[Z.HEAD,T.HEAD],[Z.HEADER,T.HEADER],[Z.HGROUP,T.HGROUP],[Z.HR,T.HR],[Z.HTML,T.HTML],[Z.I,T.I],[Z.IMG,T.IMG],[Z.IMAGE,T.IMAGE],[Z.INPUT,T.INPUT],[Z.IFRAME,T.IFRAME],[Z.KEYGEN,T.KEYGEN],[Z.LABEL,T.LABEL],[Z.LI,T.LI],[Z.LINK,T.LINK],[Z.LISTING,T.LISTING],[Z.MAIN,T.MAIN],[Z.MALIGNMARK,T.MALIGNMARK],[Z.MARQUEE,T.MARQUEE],[Z.MATH,T.MATH],[Z.MENU,T.MENU],[Z.META,T.META],[Z.MGLYPH,T.MGLYPH],[Z.MI,T.MI],[Z.MO,T.MO],[Z.MN,T.MN],[Z.MS,T.MS],[Z.MTEXT,T.MTEXT],[Z.NAV,T.NAV],[Z.NOBR,T.NOBR],[Z.NOFRAMES,T.NOFRAMES],[Z.NOEMBED,T.NOEMBED],[Z.NOSCRIPT,T.NOSCRIPT],[Z.OBJECT,T.OBJECT],[Z.OL,T.OL],[Z.OPTGROUP,T.OPTGROUP],[Z.OPTION,T.OPTION],[Z.P,T.P],[Z.PARAM,T.PARAM],[Z.PLAINTEXT,T.PLAINTEXT],[Z.PRE,T.PRE],[Z.RB,T.RB],[Z.RP,T.RP],[Z.RT,T.RT],[Z.RTC,T.RTC],[Z.RUBY,T.RUBY],[Z.S,T.S],[Z.SCRIPT,T.SCRIPT],[Z.SEARCH,T.SEARCH],[Z.SECTION,T.SECTION],[Z.SELECT,T.SELECT],[Z.SOURCE,T.SOURCE],[Z.SMALL,T.SMALL],[Z.SPAN,T.SPAN],[Z.STRIKE,T.STRIKE],[Z.STRONG,T.STRONG],[Z.STYLE,T.STYLE],[Z.SUB,T.SUB],[Z.SUMMARY,T.SUMMARY],[Z.SUP,T.SUP],[Z.TABLE,T.TABLE],[Z.TBODY,T.TBODY],[Z.TEMPLATE,T.TEMPLATE],[Z.TEXTAREA,T.TEXTAREA],[Z.TFOOT,T.TFOOT],[Z.TD,T.TD],[Z.TH,T.TH],[Z.THEAD,T.THEAD],[Z.TITLE,T.TITLE],[Z.TR,T.TR],[Z.TRACK,T.TRACK],[Z.TT,T.TT],[Z.U,T.U],[Z.UL,T.UL],[Z.SVG,T.SVG],[Z.VAR,T.VAR],[Z.WBR,T.WBR],[Z.XMP,T.XMP]]);function jl(e){var t;return(t=g9.get(e))!==null&&t!==void 0?t:T.UNKNOWN}var fe=T,m9={[ce.HTML]:new Set([fe.ADDRESS,fe.APPLET,fe.AREA,fe.ARTICLE,fe.ASIDE,fe.BASE,fe.BASEFONT,fe.BGSOUND,fe.BLOCKQUOTE,fe.BODY,fe.BR,fe.BUTTON,fe.CAPTION,fe.CENTER,fe.COL,fe.COLGROUP,fe.DD,fe.DETAILS,fe.DIR,fe.DIV,fe.DL,fe.DT,fe.EMBED,fe.FIELDSET,fe.FIGCAPTION,fe.FIGURE,fe.FOOTER,fe.FORM,fe.FRAME,fe.FRAMESET,fe.H1,fe.H2,fe.H3,fe.H4,fe.H5,fe.H6,fe.HEAD,fe.HEADER,fe.HGROUP,fe.HR,fe.HTML,fe.IFRAME,fe.IMG,fe.INPUT,fe.LI,fe.LINK,fe.LISTING,fe.MAIN,fe.MARQUEE,fe.MENU,fe.META,fe.NAV,fe.NOEMBED,fe.NOFRAMES,fe.NOSCRIPT,fe.OBJECT,fe.OL,fe.P,fe.PARAM,fe.PLAINTEXT,fe.PRE,fe.SCRIPT,fe.SECTION,fe.SELECT,fe.SOURCE,fe.STYLE,fe.SUMMARY,fe.TABLE,fe.TBODY,fe.TD,fe.TEMPLATE,fe.TEXTAREA,fe.TFOOT,fe.TH,fe.THEAD,fe.TITLE,fe.TR,fe.TRACK,fe.UL,fe.WBR,fe.XMP]),[ce.MATHML]:new Set([fe.MI,fe.MO,fe.MN,fe.MS,fe.MTEXT,fe.ANNOTATION_XML]),[ce.SVG]:new Set([fe.TITLE,fe.FOREIGN_OBJECT,fe.DESC]),[ce.XLINK]:new Set,[ce.XML]:new Set,[ce.XMLNS]:new Set},NE=new Set([fe.H1,fe.H2,fe.H3,fe.H4,fe.H5,fe.H6]);Z.STYLE,Z.SCRIPT,Z.XMP,Z.IFRAME,Z.NOEMBED,Z.NOFRAMES,Z.PLAINTEXT;var j;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(j||(j={}));var Vt={DATA:j.DATA,RCDATA:j.RCDATA,RAWTEXT:j.RAWTEXT,SCRIPT_DATA:j.SCRIPT_DATA,PLAINTEXT:j.PLAINTEXT,CDATA_SECTION:j.CDATA_SECTION};function v9(e){return e>=z.DIGIT_0&&e<=z.DIGIT_9}function au(e){return e>=z.LATIN_CAPITAL_A&&e<=z.LATIN_CAPITAL_Z}function y9(e){return e>=z.LATIN_SMALL_A&&e<=z.LATIN_SMALL_Z}function Ms(e){return y9(e)||au(e)}function zx(e){return Ms(e)||v9(e)}function of(e){return e+32}function IO(e){return e===z.SPACE||e===z.LINE_FEED||e===z.TABULATION||e===z.FORM_FEED}function $x(e){return IO(e)||e===z.SOLIDUS||e===z.GREATER_THAN_SIGN}function E9(e){return e===z.NULL?ne.nullCharacterReference:e>1114111?ne.characterReferenceOutsideUnicodeRange:kO(e)?ne.surrogateCharacterReference:xO(e)?ne.noncharacterCharacterReference:CO(e)||e===z.CARRIAGE_RETURN?ne.controlCharacterReference:null}var T9=class{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=j.DATA,this.returnState=j.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new PE(t),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new OE(a9,(r,n)=>{this.preprocessor.pos=this.entityStartPos+n-1,this._flushCodePointConsumedAsCharacterReference(r)},t.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ne.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(ne.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{let n=E9(r);n&&this._err(n,1)}}:void 0)}_err(e,t=0){var r,n;(n=(r=this.handler).onParseError)===null||n===void 0||n.call(r,this.preprocessor.getError(e,t))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;let e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e==null||e())}write(e,t,r){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return this.preprocessor.startsWith(e,t)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:tt.START_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:tt.END_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:tt.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:tt.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;let r=this.currentToken;if(RO(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){let n=(e=(t=r.location).attrs)!==null&&e!==void 0?e:t.attrs=Object.create(null);n[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){let e=this.currentToken;this.prepareToken(e),e.tagID=jl(e.tagName),e.type===tt.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(ne.endTagWithAttributes),e.selfClosing&&this._err(ne.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case tt.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case tt.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case tt.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){let e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:tt.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=t;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,t)}_emitCodePoint(e){let t=IO(e)?tt.WHITESPACE_CHARACTER:e===z.NULL?tt.NULL_CHARACTER:tt.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(tt.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=j.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Ki.Attribute:Ki.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===j.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===j.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===j.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case j.DATA:{this._stateData(e);break}case j.RCDATA:{this._stateRcdata(e);break}case j.RAWTEXT:{this._stateRawtext(e);break}case j.SCRIPT_DATA:{this._stateScriptData(e);break}case j.PLAINTEXT:{this._statePlaintext(e);break}case j.TAG_OPEN:{this._stateTagOpen(e);break}case j.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case j.TAG_NAME:{this._stateTagName(e);break}case j.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case j.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case j.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case j.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case j.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case j.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case j.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case j.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case j.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case j.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case j.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case j.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case j.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case j.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case j.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case j.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case j.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case j.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case j.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case j.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case j.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case j.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case j.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case j.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case j.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case j.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case j.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case j.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case j.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case j.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case j.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case j.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case j.BOGUS_COMMENT:{this._stateBogusComment(e);break}case j.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case j.COMMENT_START:{this._stateCommentStart(e);break}case j.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case j.COMMENT:{this._stateComment(e);break}case j.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case j.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case j.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case j.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case j.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case j.COMMENT_END:{this._stateCommentEnd(e);break}case j.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case j.DOCTYPE:{this._stateDoctype(e);break}case j.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case j.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case j.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case j.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case j.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case j.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case j.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case j.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case j.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case j.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case j.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case j.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case j.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case j.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case j.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case j.CDATA_SECTION:{this._stateCdataSection(e);break}case j.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case j.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case j.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case j.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case z.LESS_THAN_SIGN:{this.state=j.TAG_OPEN;break}case z.AMPERSAND:{this._startCharacterReference();break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this._emitCodePoint(e);break}case z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case z.AMPERSAND:{this._startCharacterReference();break}case z.LESS_THAN_SIGN:{this.state=j.RCDATA_LESS_THAN_SIGN;break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this._emitChars(Pt);break}case z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case z.LESS_THAN_SIGN:{this.state=j.RAWTEXT_LESS_THAN_SIGN;break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this._emitChars(Pt);break}case z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case z.LESS_THAN_SIGN:{this.state=j.SCRIPT_DATA_LESS_THAN_SIGN;break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this._emitChars(Pt);break}case z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case z.NULL:{this._err(ne.unexpectedNullCharacter),this._emitChars(Pt);break}case z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Ms(e))this._createStartTagToken(),this.state=j.TAG_NAME,this._stateTagName(e);else switch(e){case z.EXCLAMATION_MARK:{this.state=j.MARKUP_DECLARATION_OPEN;break}case z.SOLIDUS:{this.state=j.END_TAG_OPEN;break}case z.QUESTION_MARK:{this._err(ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=j.BOGUS_COMMENT,this._stateBogusComment(e);break}case z.EOF:{this._err(ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=j.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Ms(e))this._createEndTagToken(),this.state=j.TAG_NAME,this._stateTagName(e);else switch(e){case z.GREATER_THAN_SIGN:{this._err(ne.missingEndTagName),this.state=j.DATA;break}case z.EOF:{this._err(ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=j.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){let t=this.currentToken;switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=j.BEFORE_ATTRIBUTE_NAME;break}case z.SOLIDUS:{this.state=j.SELF_CLOSING_START_TAG;break}case z.GREATER_THAN_SIGN:{this.state=j.DATA,this.emitCurrentTagToken();break}case z.NULL:{this._err(ne.unexpectedNullCharacter),t.tagName+=Pt;break}case z.EOF:{this._err(ne.eofInTag),this._emitEOFToken();break}default:t.tagName+=String.fromCodePoint(au(e)?of(e):e)}}_stateRcdataLessThanSign(e){e===z.SOLIDUS?this.state=j.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=j.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Ms(e)?(this.state=j.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=j.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();let t=this.currentToken;switch(t.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=j.BEFORE_ATTRIBUTE_NAME,!1;case z.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=j.SELF_CLOSING_START_TAG,!1;case z.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=j.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=j.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===z.SOLIDUS?this.state=j.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=j.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Ms(e)?(this.state=j.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=j.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=j.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case z.SOLIDUS:{this.state=j.SCRIPT_DATA_END_TAG_OPEN;break}case z.EXCLAMATION_MARK:{this.state=j.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=j.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Ms(e)?(this.state=j.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=j.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=j.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===z.HYPHEN_MINUS?(this.state=j.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=j.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===z.HYPHEN_MINUS?(this.state=j.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=j.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case z.HYPHEN_MINUS:{this.state=j.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=j.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this._emitChars(Pt);break}case z.EOF:{this._err(ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case z.HYPHEN_MINUS:{this.state=j.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=j.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this.state=j.SCRIPT_DATA_ESCAPED,this._emitChars(Pt);break}case z.EOF:{this._err(ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=j.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case z.HYPHEN_MINUS:{this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=j.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case z.GREATER_THAN_SIGN:{this.state=j.SCRIPT_DATA,this._emitChars(">");break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this.state=j.SCRIPT_DATA_ESCAPED,this._emitChars(Pt);break}case z.EOF:{this._err(ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=j.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===z.SOLIDUS?this.state=j.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ms(e)?(this._emitChars("<"),this.state=j.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=j.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Ms(e)?(this.state=j.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=j.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=j.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Vr.SCRIPT,!1)&&$x(this.preprocessor.peek(Vr.SCRIPT.length))){this._emitCodePoint(e);for(let t=0;t<Vr.SCRIPT.length;t++)this._emitCodePoint(this._consume());this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=j.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case z.HYPHEN_MINUS:{this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this._emitChars(Pt);break}case z.EOF:{this._err(ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case z.HYPHEN_MINUS:{this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Pt);break}case z.EOF:{this._err(ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case z.HYPHEN_MINUS:{this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case z.GREATER_THAN_SIGN:{this.state=j.SCRIPT_DATA,this._emitChars(">");break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Pt);break}case z.EOF:{this._err(ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===z.SOLIDUS?(this.state=j.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Vr.SCRIPT,!1)&&$x(this.preprocessor.peek(Vr.SCRIPT.length))){this._emitCodePoint(e);for(let t=0;t<Vr.SCRIPT.length;t++)this._emitCodePoint(this._consume());this.state=j.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=j.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.SOLIDUS:case z.GREATER_THAN_SIGN:case z.EOF:{this.state=j.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case z.EQUALS_SIGN:{this._err(ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=j.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=j.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:case z.SOLIDUS:case z.GREATER_THAN_SIGN:case z.EOF:{this._leaveAttrName(),this.state=j.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case z.EQUALS_SIGN:{this._leaveAttrName(),this.state=j.BEFORE_ATTRIBUTE_VALUE;break}case z.QUOTATION_MARK:case z.APOSTROPHE:case z.LESS_THAN_SIGN:{this._err(ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this.currentAttr.name+=Pt;break}default:this.currentAttr.name+=String.fromCodePoint(au(e)?of(e):e)}}_stateAfterAttributeName(e){switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.SOLIDUS:{this.state=j.SELF_CLOSING_START_TAG;break}case z.EQUALS_SIGN:{this.state=j.BEFORE_ATTRIBUTE_VALUE;break}case z.GREATER_THAN_SIGN:{this.state=j.DATA,this.emitCurrentTagToken();break}case z.EOF:{this._err(ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=j.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.QUOTATION_MARK:{this.state=j.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case z.APOSTROPHE:{this.state=j.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case z.GREATER_THAN_SIGN:{this._err(ne.missingAttributeValue),this.state=j.DATA,this.emitCurrentTagToken();break}default:this.state=j.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case z.QUOTATION_MARK:{this.state=j.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case z.AMPERSAND:{this._startCharacterReference();break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this.currentAttr.value+=Pt;break}case z.EOF:{this._err(ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case z.APOSTROPHE:{this.state=j.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case z.AMPERSAND:{this._startCharacterReference();break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this.currentAttr.value+=Pt;break}case z.EOF:{this._err(ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this._leaveAttrValue(),this.state=j.BEFORE_ATTRIBUTE_NAME;break}case z.AMPERSAND:{this._startCharacterReference();break}case z.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=j.DATA,this.emitCurrentTagToken();break}case z.NULL:{this._err(ne.unexpectedNullCharacter),this.currentAttr.value+=Pt;break}case z.QUOTATION_MARK:case z.APOSTROPHE:case z.LESS_THAN_SIGN:case z.EQUALS_SIGN:case z.GRAVE_ACCENT:{this._err(ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case z.EOF:{this._err(ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this._leaveAttrValue(),this.state=j.BEFORE_ATTRIBUTE_NAME;break}case z.SOLIDUS:{this._leaveAttrValue(),this.state=j.SELF_CLOSING_START_TAG;break}case z.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=j.DATA,this.emitCurrentTagToken();break}case z.EOF:{this._err(ne.eofInTag),this._emitEOFToken();break}default:this._err(ne.missingWhitespaceBetweenAttributes),this.state=j.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case z.GREATER_THAN_SIGN:{let t=this.currentToken;t.selfClosing=!0,this.state=j.DATA,this.emitCurrentTagToken();break}case z.EOF:{this._err(ne.eofInTag),this._emitEOFToken();break}default:this._err(ne.unexpectedSolidusInTag),this.state=j.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){let t=this.currentToken;switch(e){case z.GREATER_THAN_SIGN:{this.state=j.DATA,this.emitCurrentComment(t);break}case z.EOF:{this.emitCurrentComment(t),this._emitEOFToken();break}case z.NULL:{this._err(ne.unexpectedNullCharacter),t.data+=Pt;break}default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Vr.DASH_DASH,!0)?(this._createCommentToken(Vr.DASH_DASH.length+1),this.state=j.COMMENT_START):this._consumeSequenceIfMatch(Vr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Vr.DOCTYPE.length+1),this.state=j.DOCTYPE):this._consumeSequenceIfMatch(Vr.CDATA_START,!0)?this.inForeignNode?this.state=j.CDATA_SECTION:(this._err(ne.cdataInHtmlContent),this._createCommentToken(Vr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=j.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=j.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case z.HYPHEN_MINUS:{this.state=j.COMMENT_START_DASH;break}case z.GREATER_THAN_SIGN:{this._err(ne.abruptClosingOfEmptyComment),this.state=j.DATA;let t=this.currentToken;this.emitCurrentComment(t);break}default:this.state=j.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){let t=this.currentToken;switch(e){case z.HYPHEN_MINUS:{this.state=j.COMMENT_END;break}case z.GREATER_THAN_SIGN:{this._err(ne.abruptClosingOfEmptyComment),this.state=j.DATA,this.emitCurrentComment(t);break}case z.EOF:{this._err(ne.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break}default:t.data+="-",this.state=j.COMMENT,this._stateComment(e)}}_stateComment(e){let t=this.currentToken;switch(e){case z.HYPHEN_MINUS:{this.state=j.COMMENT_END_DASH;break}case z.LESS_THAN_SIGN:{t.data+="<",this.state=j.COMMENT_LESS_THAN_SIGN;break}case z.NULL:{this._err(ne.unexpectedNullCharacter),t.data+=Pt;break}case z.EOF:{this._err(ne.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break}default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){let t=this.currentToken;switch(e){case z.EXCLAMATION_MARK:{t.data+="!",this.state=j.COMMENT_LESS_THAN_SIGN_BANG;break}case z.LESS_THAN_SIGN:{t.data+="<";break}default:this.state=j.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===z.HYPHEN_MINUS?this.state=j.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=j.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===z.HYPHEN_MINUS?this.state=j.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=j.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==z.GREATER_THAN_SIGN&&e!==z.EOF&&this._err(ne.nestedComment),this.state=j.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){let t=this.currentToken;switch(e){case z.HYPHEN_MINUS:{this.state=j.COMMENT_END;break}case z.EOF:{this._err(ne.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break}default:t.data+="-",this.state=j.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){let t=this.currentToken;switch(e){case z.GREATER_THAN_SIGN:{this.state=j.DATA,this.emitCurrentComment(t);break}case z.EXCLAMATION_MARK:{this.state=j.COMMENT_END_BANG;break}case z.HYPHEN_MINUS:{t.data+="-";break}case z.EOF:{this._err(ne.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break}default:t.data+="--",this.state=j.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){let t=this.currentToken;switch(e){case z.HYPHEN_MINUS:{t.data+="--!",this.state=j.COMMENT_END_DASH;break}case z.GREATER_THAN_SIGN:{this._err(ne.incorrectlyClosedComment),this.state=j.DATA,this.emitCurrentComment(t);break}case z.EOF:{this._err(ne.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break}default:t.data+="--!",this.state=j.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=j.BEFORE_DOCTYPE_NAME;break}case z.GREATER_THAN_SIGN:{this.state=j.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case z.EOF:{this._err(ne.eofInDoctype),this._createDoctypeToken(null);let t=this.currentToken;t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ne.missingWhitespaceBeforeDoctypeName),this.state=j.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(au(e))this._createDoctypeToken(String.fromCharCode(of(e))),this.state=j.DOCTYPE_NAME;else switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.NULL:{this._err(ne.unexpectedNullCharacter),this._createDoctypeToken(Pt),this.state=j.DOCTYPE_NAME;break}case z.GREATER_THAN_SIGN:{this._err(ne.missingDoctypeName),this._createDoctypeToken(null);let t=this.currentToken;t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=j.DATA;break}case z.EOF:{this._err(ne.eofInDoctype),this._createDoctypeToken(null);let t=this.currentToken;t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=j.DOCTYPE_NAME}}_stateDoctypeName(e){let t=this.currentToken;switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=j.AFTER_DOCTYPE_NAME;break}case z.GREATER_THAN_SIGN:{this.state=j.DATA,this.emitCurrentDoctype(t);break}case z.NULL:{this._err(ne.unexpectedNullCharacter),t.name+=Pt;break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:t.name+=String.fromCodePoint(au(e)?of(e):e)}}_stateAfterDoctypeName(e){let t=this.currentToken;switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.GREATER_THAN_SIGN:{this.state=j.DATA,this.emitCurrentDoctype(t);break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Vr.PUBLIC,!1)?this.state=j.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Vr.SYSTEM,!1)?this.state=j.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ne.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=j.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){let t=this.currentToken;switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=j.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case z.QUOTATION_MARK:{this._err(ne.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=j.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{this._err(ne.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=j.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case z.GREATER_THAN_SIGN:{this._err(ne.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=j.DATA,this.emitCurrentDoctype(t);break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ne.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=j.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){let t=this.currentToken;switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.QUOTATION_MARK:{t.publicId="",this.state=j.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{t.publicId="",this.state=j.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case z.GREATER_THAN_SIGN:{this._err(ne.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=j.DATA,this.emitCurrentDoctype(t);break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ne.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=j.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){let t=this.currentToken;switch(e){case z.QUOTATION_MARK:{this.state=j.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case z.NULL:{this._err(ne.unexpectedNullCharacter),t.publicId+=Pt;break}case z.GREATER_THAN_SIGN:{this._err(ne.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=j.DATA;break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){let t=this.currentToken;switch(e){case z.APOSTROPHE:{this.state=j.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case z.NULL:{this._err(ne.unexpectedNullCharacter),t.publicId+=Pt;break}case z.GREATER_THAN_SIGN:{this._err(ne.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=j.DATA;break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){let t=this.currentToken;switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=j.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case z.GREATER_THAN_SIGN:{this.state=j.DATA,this.emitCurrentDoctype(t);break}case z.QUOTATION_MARK:{this._err(ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=j.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{this._err(ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=j.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ne.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=j.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){let t=this.currentToken;switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.GREATER_THAN_SIGN:{this.emitCurrentDoctype(t),this.state=j.DATA;break}case z.QUOTATION_MARK:{t.systemId="",this.state=j.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{t.systemId="",this.state=j.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ne.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=j.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){let t=this.currentToken;switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=j.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case z.QUOTATION_MARK:{this._err(ne.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=j.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{this._err(ne.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=j.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.GREATER_THAN_SIGN:{this._err(ne.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=j.DATA,this.emitCurrentDoctype(t);break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ne.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=j.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){let t=this.currentToken;switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.QUOTATION_MARK:{t.systemId="",this.state=j.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{t.systemId="",this.state=j.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.GREATER_THAN_SIGN:{this._err(ne.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=j.DATA,this.emitCurrentDoctype(t);break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ne.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=j.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){let t=this.currentToken;switch(e){case z.QUOTATION_MARK:{this.state=j.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case z.NULL:{this._err(ne.unexpectedNullCharacter),t.systemId+=Pt;break}case z.GREATER_THAN_SIGN:{this._err(ne.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=j.DATA;break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){let t=this.currentToken;switch(e){case z.APOSTROPHE:{this.state=j.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case z.NULL:{this._err(ne.unexpectedNullCharacter),t.systemId+=Pt;break}case z.GREATER_THAN_SIGN:{this._err(ne.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=j.DATA;break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){let t=this.currentToken;switch(e){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.GREATER_THAN_SIGN:{this.emitCurrentDoctype(t),this.state=j.DATA;break}case z.EOF:{this._err(ne.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=j.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){let t=this.currentToken;switch(e){case z.GREATER_THAN_SIGN:{this.emitCurrentDoctype(t),this.state=j.DATA;break}case z.NULL:{this._err(ne.unexpectedNullCharacter);break}case z.EOF:{this.emitCurrentDoctype(t),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case z.RIGHT_SQUARE_BRACKET:{this.state=j.CDATA_SECTION_BRACKET;break}case z.EOF:{this._err(ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===z.RIGHT_SQUARE_BRACKET?this.state=j.CDATA_SECTION_END:(this._emitChars("]"),this.state=j.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case z.GREATER_THAN_SIGN:{this.state=j.DATA;break}case z.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=j.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(z.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&zx(this.preprocessor.peek(1))?j.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){zx(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===z.SEMICOLON&&this._err(ne.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}},_O=new Set([T.DD,T.DT,T.LI,T.OPTGROUP,T.OPTION,T.P,T.RB,T.RP,T.RT,T.RTC]),Gx=new Set([..._O,T.CAPTION,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]),Sp=new Set([T.APPLET,T.CAPTION,T.HTML,T.MARQUEE,T.OBJECT,T.TABLE,T.TD,T.TEMPLATE,T.TH]),S9=new Set([...Sp,T.OL,T.UL]),b9=new Set([...Sp,T.BUTTON]),jx=new Set([T.ANNOTATION_XML,T.MI,T.MN,T.MO,T.MS,T.MTEXT]),Vx=new Set([T.DESC,T.FOREIGN_OBJECT,T.TITLE]),w9=new Set([T.TR,T.TEMPLATE,T.HTML]),A9=new Set([T.TBODY,T.TFOOT,T.THEAD,T.TEMPLATE,T.HTML]),k9=new Set([T.TABLE,T.TEMPLATE,T.HTML]),C9=new Set([T.TD,T.TH]),ME=class{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,r,n){this.treeAdapter=r,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=T.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===T.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ce.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,r){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=r,this.currentTagId=r,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,r,!0)}pop(){let t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,r){let n=this._indexOf(t);this.items[n]=r,n===this.stackTop&&(this.current=r)}insertAfter(t,r,n){let i=this._indexOf(t)+1;this.items.splice(i,0,r),this.tagIDs.splice(i,0,n),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let r=this.stackTop+1;do r=this.tagIDs.lastIndexOf(t,r-1);while(r>0&&this.treeAdapter.getNamespaceURI(this.items[r])!==ce.HTML);this.shortenToLength(Math.max(r,0))}shortenToLength(t){for(;this.stackTop>=t;){let r=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,this.stackTop<t)}}popUntilElementPopped(t){let r=this._indexOf(t);this.shortenToLength(Math.max(r,0))}popUntilPopped(t,r){let n=this._indexOfTagNames(t,r);this.shortenToLength(Math.max(n,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(NE,ce.HTML)}popUntilTableCellPopped(){this.popUntilPopped(C9,ce.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,r){for(let n=this.stackTop;n>=0;n--)if(t.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===r)return n;return-1}clearBackTo(t,r){let n=this._indexOfTagNames(t,r);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(k9,ce.HTML)}clearBackToTableBodyContext(){this.clearBackTo(A9,ce.HTML)}clearBackToTableRowContext(){this.clearBackTo(w9,ce.HTML)}remove(t){let r=this._indexOf(t);r>=0&&(r===this.stackTop?this.pop():(this.items.splice(r,1),this.tagIDs.splice(r,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===T.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){let r=this._indexOf(t)-1;return r>=0?this.items[r]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===T.HTML}hasInDynamicScope(t,r){for(let n=this.stackTop;n>=0;n--){let i=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case ce.HTML:{if(i===t)return!0;if(r.has(i))return!1;break}case ce.SVG:{if(Vx.has(i))return!1;break}case ce.MATHML:{if(jx.has(i))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,Sp)}hasInListItemScope(t){return this.hasInDynamicScope(t,S9)}hasInButtonScope(t){return this.hasInDynamicScope(t,b9)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){let r=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case ce.HTML:{if(NE.has(r))return!0;if(Sp.has(r))return!1;break}case ce.SVG:{if(Vx.has(r))return!1;break}case ce.MATHML:{if(jx.has(r))return!1;break}}}return!0}hasInTableScope(t){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===ce.HTML)switch(this.tagIDs[r]){case t:return!0;case T.TABLE:case T.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===ce.HTML)switch(this.tagIDs[t]){case T.TBODY:case T.THEAD:case T.TFOOT:return!0;case T.TABLE:case T.HTML:return!1}return!0}hasInSelectScope(t){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===ce.HTML)switch(this.tagIDs[r]){case t:return!0;case T.OPTION:case T.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&_O.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&Gx.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&Gx.has(this.currentTagId);)this.pop()}},qy=3,hi;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(hi||(hi={}));var Wx={type:hi.Marker},FE=class{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,r){let n=[],i=r.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){let l=this.entries[a];if(l.type===hi.Marker)break;let{element:c}=l;if(this.treeAdapter.getTagName(c)===s&&this.treeAdapter.getNamespaceURI(c)===o){let u=this.treeAdapter.getAttrList(c);u.length===i&&n.push({idx:a,attrs:u})}}return n}_ensureNoahArkCondition(t){if(this.entries.length<qy)return;let r=this.treeAdapter.getAttrList(t),n=this._getNoahArkConditionCandidates(t,r);if(n.length<qy)return;let i=new Map(r.map(o=>[o.name,o.value])),s=0;for(let o=0;o<n.length;o++){let a=n[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=qy&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Wx)}pushElement(t,r){this._ensureNoahArkCondition(t),this.entries.unshift({type:hi.Element,element:t,token:r})}insertElementAfterBookmark(t,r){let n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:hi.Element,element:t,token:r})}removeEntry(t){let r=this.entries.indexOf(t);r!==-1&&this.entries.splice(r,1)}clearToLastMarker(){let t=this.entries.indexOf(Wx);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){let r=this.entries.find(n=>n.type===hi.Marker||this.treeAdapter.getTagName(n.element)===t);return r&&r.type===hi.Element?r:null}getElementEntry(t){return this.entries.find(r=>r.type===hi.Element&&r.element===t)}},Fs={createDocument(){return{nodeName:"#document",mode:_n.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,r){return{nodeName:e,tagName:e,attrs:r,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,r){let n=e.childNodes.indexOf(r);e.childNodes.splice(n,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,r,n){let i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=r,i.systemId=n;else{let s={nodeName:"#documentType",name:t,publicId:r,systemId:n,parentNode:null};Fs.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){let t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){let r=e.childNodes[e.childNodes.length-1];if(Fs.isTextNode(r)){r.value+=t;return}}Fs.appendChild(e,Fs.createTextNode(t))},insertTextBefore(e,t,r){let n=e.childNodes[e.childNodes.indexOf(r)-1];n&&Fs.isTextNode(n)?n.value+=t:Fs.insertBefore(e,Fs.createTextNode(t),r)},adoptAttributes(e,t){let r=new Set(e.attrs.map(n=>n.name));for(let n=0;n<t.length;n++)r.has(t[n].name)||e.attrs.push(t[n])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},LO="html",x9="about:legacy-compat",R9="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",PO=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],I9=[...PO,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],_9=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),DO=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],L9=[...DO,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function qx(e,t){return t.some(r=>e.startsWith(r))}function P9(e){return e.name===LO&&e.publicId===null&&(e.systemId===null||e.systemId===x9)}function D9(e){if(e.name!==LO)return _n.QUIRKS;let{systemId:t}=e;if(t&&t.toLowerCase()===R9)return _n.QUIRKS;let{publicId:r}=e;if(r!==null){if(r=r.toLowerCase(),_9.has(r))return _n.QUIRKS;let n=t===null?I9:PO;if(qx(r,n))return _n.QUIRKS;if(n=t===null?DO:L9,qx(r,n))return _n.LIMITED_QUIRKS}return _n.NO_QUIRKS}var Kx={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},O9="definitionurl",N9="definitionURL",M9=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),F9=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ce.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ce.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ce.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ce.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ce.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ce.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ce.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:ce.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ce.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ce.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ce.XMLNS}]]),B9=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),U9=new Set([T.B,T.BIG,T.BLOCKQUOTE,T.BODY,T.BR,T.CENTER,T.CODE,T.DD,T.DIV,T.DL,T.DT,T.EM,T.EMBED,T.H1,T.H2,T.H3,T.H4,T.H5,T.H6,T.HEAD,T.HR,T.I,T.IMG,T.LI,T.LISTING,T.MENU,T.META,T.NOBR,T.OL,T.P,T.PRE,T.RUBY,T.S,T.SMALL,T.SPAN,T.STRONG,T.STRIKE,T.SUB,T.SUP,T.TABLE,T.TT,T.U,T.UL,T.VAR]);function H9(e){let t=e.tagID;return t===T.FONT&&e.attrs.some(({name:r})=>r===$o.COLOR||r===$o.SIZE||r===$o.FACE)||U9.has(t)}function OO(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===O9){e.attrs[t].name=N9;break}}function NO(e){for(let t=0;t<e.attrs.length;t++){let r=M9.get(e.attrs[t].name);r!=null&&(e.attrs[t].name=r)}}function w1(e){for(let t=0;t<e.attrs.length;t++){let r=F9.get(e.attrs[t].name);r&&(e.attrs[t].prefix=r.prefix,e.attrs[t].name=r.name,e.attrs[t].namespace=r.namespace)}}function z9(e){let t=B9.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=jl(e.tagName))}function $9(e,t){return t===ce.MATHML&&(e===T.MI||e===T.MO||e===T.MN||e===T.MS||e===T.MTEXT)}function G9(e,t,r){if(t===ce.MATHML&&e===T.ANNOTATION_XML){for(let n=0;n<r.length;n++)if(r[n].name===$o.ENCODING){let i=r[n].value.toLowerCase();return i===Kx.TEXT_HTML||i===Kx.APPLICATION_XML}}return t===ce.SVG&&(e===T.FOREIGN_OBJECT||e===T.DESC||e===T.TITLE)}function j9(e,t,r,n){return(!n||n===ce.HTML)&&G9(e,t,r)||(!n||n===ce.MATHML)&&$9(e,t)}var V9="hidden",W9=8,q9=3,q;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(q||(q={}));var K9={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},MO=new Set([T.TABLE,T.TBODY,T.TFOOT,T.THEAD,T.TR]),Yx={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Fs,onParseError:null},Xx=class{constructor(e,t,r=null,n=null){this.fragmentContext=r,this.scriptHandler=n,this.currentToken=null,this.stopped=!1,this.insertionMode=q.INITIAL,this.originalInsertionMode=q.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Yx,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=t??this.treeAdapter.createDocument(),this.tokenizer=new T9(this.options,this),this.activeFormattingElements=new FE(this.treeAdapter),this.fragmentContextID=r?jl(this.treeAdapter.getTagName(r)):T.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new ME(this.document,this.treeAdapter,this)}static parse(e,t){let r=new this(t);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,t){let r={...Yx,...t};e??(e=r.treeAdapter.createElement(Z.TEMPLATE,ce.HTML,[]));let n=r.treeAdapter.createElement("documentmock",ce.HTML,[]),i=new this(r,n,e);return i.fragmentContextID===T.TEMPLATE&&i.tmplInsertionModeStack.unshift(q.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){let e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,r){var n;if(!this.onParseError)return;let i=(n=e.location)!==null&&n!==void 0?n:K9,s={code:t,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:r?i.startLine:i.endLine,endCol:r?i.startCol:i.endCol,endOffset:r?i.startOffset:i.endOffset};this.onParseError(s)}onItemPush(e,t,r){var n,i;(i=(n=this.treeAdapter).onItemPush)===null||i===void 0||i.call(n,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var r,n;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(n=(r=this.treeAdapter).onItemPop)===null||n===void 0||n.call(r,e,this.openElements.current),t){let i,s;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,s=this.fragmentContextID):{current:i,currentTagId:s}=this.openElements,this._setContextModes(i,s)}}_setContextModes(e,t){let r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===ce.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&t!==void 0&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,ce.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=q.TEXT}switchToPlaintextParsing(){this.insertionMode=q.TEXT,this.originalInsertionMode=q.IN_BODY,this.tokenizer.state=Vt.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===Z.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ce.HTML))switch(this.fragmentContextID){case T.TITLE:case T.TEXTAREA:{this.tokenizer.state=Vt.RCDATA;break}case T.STYLE:case T.XMP:case T.IFRAME:case T.NOEMBED:case T.NOFRAMES:case T.NOSCRIPT:{this.tokenizer.state=Vt.RAWTEXT;break}case T.SCRIPT:{this.tokenizer.state=Vt.SCRIPT_DATA;break}case T.PLAINTEXT:{this.tokenizer.state=Vt.PLAINTEXT;break}}}_setDocumentType(e){let t=e.name||"",r=e.publicId||"",n=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,r,n),e.location){let i=this.treeAdapter.getChildNodes(this.document).find(s=>this.treeAdapter.isDocumentTypeNode(s));i&&this.treeAdapter.setNodeSourceCodeLocation(i,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){let r=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{let r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,t){let r=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,t){let r=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,t){let r=this.treeAdapter.createElement(e,ce.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,t)}_insertTemplate(e){let t=this.treeAdapter.createElement(e.tagName,ce.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,r),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){let e=this.treeAdapter.createElement(Z.HTML,ce.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,T.HTML)}_appendCommentNode(e,t){let r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let t,r;if(this._shouldFosterParentOnInsertion()?({parent:t,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(t,e.chars,r):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;let n=this.treeAdapter.getChildNodes(t),i=r?n.lastIndexOf(r):n.length,s=n[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){let{endLine:o,endCol:a,endOffset:l}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:o,endCol:a,endOffset:l})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}_adoptNodes(e,t){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(t,r)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){let r=t.location,n=this.treeAdapter.getTagName(e),i=t.type===tt.END_TAG&&n===t.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,r;return this.openElements.stackTop===0&&this.fragmentContext?(t=this.fragmentContext,r=this.fragmentContextID):{current:t,currentTagId:r}=this.openElements,e.tagID===T.SVG&&this.treeAdapter.getTagName(t)===Z.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(t)===ce.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===T.MGLYPH||e.tagID===T.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,t,ce.HTML)}_processToken(e){switch(e.type){case tt.CHARACTER:{this.onCharacter(e);break}case tt.NULL_CHARACTER:{this.onNullCharacter(e);break}case tt.COMMENT:{this.onComment(e);break}case tt.DOCTYPE:{this.onDoctype(e);break}case tt.START_TAG:{this._processStartTag(e);break}case tt.END_TAG:{this.onEndTag(e);break}case tt.EOF:{this.onEof(e);break}case tt.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,t,r){let n=this.treeAdapter.getNamespaceURI(t),i=this.treeAdapter.getAttrList(t);return j9(e,n,i,r)}_reconstructActiveFormattingElements(){let e=this.activeFormattingElements.entries.length;if(e){let t=this.activeFormattingElements.entries.findIndex(n=>n.type===hi.Marker||this.openElements.contains(n.element)),r=t===-1?e-1:t-1;for(let n=r;n>=0;n--){let i=this.activeFormattingElements.entries[n];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=q.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(T.P),this.openElements.popUntilTagNamePopped(T.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case T.TR:{this.insertionMode=q.IN_ROW;return}case T.TBODY:case T.THEAD:case T.TFOOT:{this.insertionMode=q.IN_TABLE_BODY;return}case T.CAPTION:{this.insertionMode=q.IN_CAPTION;return}case T.COLGROUP:{this.insertionMode=q.IN_COLUMN_GROUP;return}case T.TABLE:{this.insertionMode=q.IN_TABLE;return}case T.BODY:{this.insertionMode=q.IN_BODY;return}case T.FRAMESET:{this.insertionMode=q.IN_FRAMESET;return}case T.SELECT:{this._resetInsertionModeForSelect(e);return}case T.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case T.HTML:{this.insertionMode=this.headElement?q.AFTER_HEAD:q.BEFORE_HEAD;return}case T.TD:case T.TH:{if(e>0){this.insertionMode=q.IN_CELL;return}break}case T.HEAD:{if(e>0){this.insertionMode=q.IN_HEAD;return}break}}this.insertionMode=q.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){let r=this.openElements.tagIDs[t];if(r===T.TEMPLATE)break;if(r===T.TABLE){this.insertionMode=q.IN_SELECT_IN_TABLE;return}}this.insertionMode=q.IN_SELECT}_isElementCausesFosterParenting(e){return MO.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){let t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case T.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(t)===ce.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break}case T.TABLE:{let r=this.treeAdapter.getParentNode(t);return r?{parent:r,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){let t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){let r=this.treeAdapter.getNamespaceURI(e);return m9[r].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){AK(this,e);return}switch(this.insertionMode){case q.INITIAL:{Qc(this,e);break}case q.BEFORE_HTML:{mu(this,e);break}case q.BEFORE_HEAD:{vu(this,e);break}case q.IN_HEAD:{yu(this,e);break}case q.IN_HEAD_NO_SCRIPT:{Eu(this,e);break}case q.AFTER_HEAD:{Tu(this,e);break}case q.IN_BODY:case q.IN_CAPTION:case q.IN_CELL:case q.IN_TEMPLATE:{BO(this,e);break}case q.TEXT:case q.IN_SELECT:case q.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case q.IN_TABLE:case q.IN_TABLE_BODY:case q.IN_ROW:{Ky(this,e);break}case q.IN_TABLE_TEXT:{jO(this,e);break}case q.IN_COLUMN_GROUP:{bp(this,e);break}case q.AFTER_BODY:{wp(this,e);break}case q.AFTER_AFTER_BODY:{qf(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){wK(this,e);return}switch(this.insertionMode){case q.INITIAL:{Qc(this,e);break}case q.BEFORE_HTML:{mu(this,e);break}case q.BEFORE_HEAD:{vu(this,e);break}case q.IN_HEAD:{yu(this,e);break}case q.IN_HEAD_NO_SCRIPT:{Eu(this,e);break}case q.AFTER_HEAD:{Tu(this,e);break}case q.TEXT:{this._insertCharacters(e);break}case q.IN_TABLE:case q.IN_TABLE_BODY:case q.IN_ROW:{Ky(this,e);break}case q.IN_COLUMN_GROUP:{bp(this,e);break}case q.AFTER_BODY:{wp(this,e);break}case q.AFTER_AFTER_BODY:{qf(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){BE(this,e);return}switch(this.insertionMode){case q.INITIAL:case q.BEFORE_HTML:case q.BEFORE_HEAD:case q.IN_HEAD:case q.IN_HEAD_NO_SCRIPT:case q.AFTER_HEAD:case q.IN_BODY:case q.IN_TABLE:case q.IN_CAPTION:case q.IN_COLUMN_GROUP:case q.IN_TABLE_BODY:case q.IN_ROW:case q.IN_CELL:case q.IN_SELECT:case q.IN_SELECT_IN_TABLE:case q.IN_TEMPLATE:case q.IN_FRAMESET:case q.AFTER_FRAMESET:{BE(this,e);break}case q.IN_TABLE_TEXT:{Zc(this,e);break}case q.AFTER_BODY:{tq(this,e);break}case q.AFTER_AFTER_BODY:case q.AFTER_AFTER_FRAMESET:{rq(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case q.INITIAL:{nq(this,e);break}case q.BEFORE_HEAD:case q.IN_HEAD:case q.IN_HEAD_NO_SCRIPT:case q.AFTER_HEAD:{this._err(e,ne.misplacedDoctype);break}case q.IN_TABLE_TEXT:{Zc(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?kK(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case q.INITIAL:{Qc(this,e);break}case q.BEFORE_HTML:{iq(this,e);break}case q.BEFORE_HEAD:{oq(this,e);break}case q.IN_HEAD:{Zn(this,e);break}case q.IN_HEAD_NO_SCRIPT:{cq(this,e);break}case q.AFTER_HEAD:{dq(this,e);break}case q.IN_BODY:{Rr(this,e);break}case q.IN_TABLE:{Rl(this,e);break}case q.IN_TABLE_TEXT:{Zc(this,e);break}case q.IN_CAPTION:{aK(this,e);break}case q.IN_COLUMN_GROUP:{C1(this,e);break}case q.IN_TABLE_BODY:{Ig(this,e);break}case q.IN_ROW:{_g(this,e);break}case q.IN_CELL:{uK(this,e);break}case q.IN_SELECT:{qO(this,e);break}case q.IN_SELECT_IN_TABLE:{hK(this,e);break}case q.IN_TEMPLATE:{pK(this,e);break}case q.AFTER_BODY:{mK(this,e);break}case q.IN_FRAMESET:{vK(this,e);break}case q.AFTER_FRAMESET:{EK(this,e);break}case q.AFTER_AFTER_BODY:{SK(this,e);break}case q.AFTER_AFTER_FRAMESET:{bK(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?CK(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case q.INITIAL:{Qc(this,e);break}case q.BEFORE_HTML:{sq(this,e);break}case q.BEFORE_HEAD:{aq(this,e);break}case q.IN_HEAD:{lq(this,e);break}case q.IN_HEAD_NO_SCRIPT:{uq(this,e);break}case q.AFTER_HEAD:{hq(this,e);break}case q.IN_BODY:{Rg(this,e);break}case q.TEXT:{Qq(this,e);break}case q.IN_TABLE:{Ou(this,e);break}case q.IN_TABLE_TEXT:{Zc(this,e);break}case q.IN_CAPTION:{lK(this,e);break}case q.IN_COLUMN_GROUP:{cK(this,e);break}case q.IN_TABLE_BODY:{UE(this,e);break}case q.IN_ROW:{WO(this,e);break}case q.IN_CELL:{dK(this,e);break}case q.IN_SELECT:{KO(this,e);break}case q.IN_SELECT_IN_TABLE:{fK(this,e);break}case q.IN_TEMPLATE:{gK(this,e);break}case q.AFTER_BODY:{XO(this,e);break}case q.IN_FRAMESET:{yK(this,e);break}case q.AFTER_FRAMESET:{TK(this,e);break}case q.AFTER_AFTER_BODY:{qf(this,e);break}}}onEof(e){switch(this.insertionMode){case q.INITIAL:{Qc(this,e);break}case q.BEFORE_HTML:{mu(this,e);break}case q.BEFORE_HEAD:{vu(this,e);break}case q.IN_HEAD:{yu(this,e);break}case q.IN_HEAD_NO_SCRIPT:{Eu(this,e);break}case q.AFTER_HEAD:{Tu(this,e);break}case q.IN_BODY:case q.IN_TABLE:case q.IN_CAPTION:case q.IN_COLUMN_GROUP:case q.IN_TABLE_BODY:case q.IN_ROW:case q.IN_CELL:case q.IN_SELECT:case q.IN_SELECT_IN_TABLE:{$O(this,e);break}case q.TEXT:{Zq(this,e);break}case q.IN_TABLE_TEXT:{Zc(this,e);break}case q.IN_TEMPLATE:{YO(this,e);break}case q.AFTER_BODY:case q.IN_FRAMESET:case q.AFTER_FRAMESET:case q.AFTER_AFTER_BODY:case q.AFTER_AFTER_FRAMESET:{k1(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===z.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case q.IN_HEAD:case q.IN_HEAD_NO_SCRIPT:case q.AFTER_HEAD:case q.TEXT:case q.IN_COLUMN_GROUP:case q.IN_SELECT:case q.IN_SELECT_IN_TABLE:case q.IN_FRAMESET:case q.AFTER_FRAMESET:{this._insertCharacters(e);break}case q.IN_BODY:case q.IN_CAPTION:case q.IN_CELL:case q.IN_TEMPLATE:case q.AFTER_BODY:case q.AFTER_AFTER_BODY:case q.AFTER_AFTER_FRAMESET:{FO(this,e);break}case q.IN_TABLE:case q.IN_TABLE_BODY:case q.IN_ROW:{Ky(this,e);break}case q.IN_TABLE_TEXT:{GO(this,e);break}}}};function Y9(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return r?e.openElements.contains(r.element)?e.openElements.hasInScope(t.tagID)||(r=null):(e.activeFormattingElements.removeEntry(r),r=null):zO(e,t),r}function X9(e,t){let r=null,n=e.openElements.stackTop;for(;n>=0;n--){let i=e.openElements.items[n];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[n])&&(r=i)}return r||(e.openElements.shortenToLength(Math.max(n,0)),e.activeFormattingElements.removeEntry(t)),r}function Q9(e,t,r){let n=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==r;s++,o=i){i=e.openElements.getCommonAncestor(o);let a=e.activeFormattingElements.getElementEntry(o),l=a&&s>=q9;!a||l?(l&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Z9(e,a),n===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(n),e.treeAdapter.appendChild(o,n),n=o)}return n}function Z9(e,t){let r=e.treeAdapter.getNamespaceURI(t.element),n=e.treeAdapter.createElement(t.token.tagName,r,t.token.attrs);return e.openElements.replace(t.element,n),t.element=n,n}function J9(e,t,r){let n=e.treeAdapter.getTagName(t),i=jl(n);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(r);else{let s=e.treeAdapter.getNamespaceURI(t);i===T.TEMPLATE&&s===ce.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,r)}}function eq(e,t,r){let n=e.treeAdapter.getNamespaceURI(r.element),{token:i}=r,s=e.treeAdapter.createElement(i.tagName,n,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(r),e.openElements.remove(r.element),e.openElements.insertAfter(t,s,i.tagID)}function A1(e,t){for(let r=0;r<W9;r++){let n=Y9(e,t);if(!n)break;let i=X9(e,n);if(!i)break;e.activeFormattingElements.bookmark=n;let s=Q9(e,i,n.element),o=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(s),o&&J9(e,o,s),eq(e,i,n)}}function BE(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function tq(e,t){e._appendCommentNode(t,e.openElements.items[0])}function rq(e,t){e._appendCommentNode(t,e.document)}function k1(e,t){if(e.stopped=!0,t.location){let r=e.fragmentContext?0:2;for(let n=e.openElements.stackTop;n>=r;n--)e._setEndLocation(e.openElements.items[n],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){let n=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(n);if(i&&!i.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){let s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function nq(e,t){e._setDocumentType(t);let r=t.forceQuirks?_n.QUIRKS:D9(t);P9(t)||e._err(t,ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,r),e.insertionMode=q.BEFORE_HTML}function Qc(e,t){e._err(t,ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,_n.QUIRKS),e.insertionMode=q.BEFORE_HTML,e._processToken(t)}function iq(e,t){t.tagID===T.HTML?(e._insertElement(t,ce.HTML),e.insertionMode=q.BEFORE_HEAD):mu(e,t)}function sq(e,t){let r=t.tagID;(r===T.HTML||r===T.HEAD||r===T.BODY||r===T.BR)&&mu(e,t)}function mu(e,t){e._insertFakeRootElement(),e.insertionMode=q.BEFORE_HEAD,e._processToken(t)}function oq(e,t){switch(t.tagID){case T.HTML:{Rr(e,t);break}case T.HEAD:{e._insertElement(t,ce.HTML),e.headElement=e.openElements.current,e.insertionMode=q.IN_HEAD;break}default:vu(e,t)}}function aq(e,t){let r=t.tagID;r===T.HEAD||r===T.BODY||r===T.HTML||r===T.BR?vu(e,t):e._err(t,ne.endTagWithoutMatchingOpenElement)}function vu(e,t){e._insertFakeElement(Z.HEAD,T.HEAD),e.headElement=e.openElements.current,e.insertionMode=q.IN_HEAD,e._processToken(t)}function Zn(e,t){switch(t.tagID){case T.HTML:{Rr(e,t);break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:{e._appendElement(t,ce.HTML),t.ackSelfClosing=!0;break}case T.TITLE:{e._switchToTextParsing(t,Vt.RCDATA);break}case T.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Vt.RAWTEXT):(e._insertElement(t,ce.HTML),e.insertionMode=q.IN_HEAD_NO_SCRIPT);break}case T.NOFRAMES:case T.STYLE:{e._switchToTextParsing(t,Vt.RAWTEXT);break}case T.SCRIPT:{e._switchToTextParsing(t,Vt.SCRIPT_DATA);break}case T.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=q.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(q.IN_TEMPLATE);break}case T.HEAD:{e._err(t,ne.misplacedStartTagForHeadElement);break}default:yu(e,t)}}function lq(e,t){switch(t.tagID){case T.HEAD:{e.openElements.pop(),e.insertionMode=q.AFTER_HEAD;break}case T.BODY:case T.BR:case T.HTML:{yu(e,t);break}case T.TEMPLATE:{ia(e,t);break}default:e._err(t,ne.endTagWithoutMatchingOpenElement)}}function ia(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==T.TEMPLATE&&e._err(t,ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ne.endTagWithoutMatchingOpenElement)}function yu(e,t){e.openElements.pop(),e.insertionMode=q.AFTER_HEAD,e._processToken(t)}function cq(e,t){switch(t.tagID){case T.HTML:{Rr(e,t);break}case T.BASEFONT:case T.BGSOUND:case T.HEAD:case T.LINK:case T.META:case T.NOFRAMES:case T.STYLE:{Zn(e,t);break}case T.NOSCRIPT:{e._err(t,ne.nestedNoscriptInHead);break}default:Eu(e,t)}}function uq(e,t){switch(t.tagID){case T.NOSCRIPT:{e.openElements.pop(),e.insertionMode=q.IN_HEAD;break}case T.BR:{Eu(e,t);break}default:e._err(t,ne.endTagWithoutMatchingOpenElement)}}function Eu(e,t){let r=t.type===tt.EOF?ne.openElementsLeftAfterEof:ne.disallowedContentInNoscriptInHead;e._err(t,r),e.openElements.pop(),e.insertionMode=q.IN_HEAD,e._processToken(t)}function dq(e,t){switch(t.tagID){case T.HTML:{Rr(e,t);break}case T.BODY:{e._insertElement(t,ce.HTML),e.framesetOk=!1,e.insertionMode=q.IN_BODY;break}case T.FRAMESET:{e._insertElement(t,ce.HTML),e.insertionMode=q.IN_FRAMESET;break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{e._err(t,ne.abandonedHeadElementChild),e.openElements.push(e.headElement,T.HEAD),Zn(e,t),e.openElements.remove(e.headElement);break}case T.HEAD:{e._err(t,ne.misplacedStartTagForHeadElement);break}default:Tu(e,t)}}function hq(e,t){switch(t.tagID){case T.BODY:case T.HTML:case T.BR:{Tu(e,t);break}case T.TEMPLATE:{ia(e,t);break}default:e._err(t,ne.endTagWithoutMatchingOpenElement)}}function Tu(e,t){e._insertFakeElement(Z.BODY,T.BODY),e.insertionMode=q.IN_BODY,xg(e,t)}function xg(e,t){switch(t.type){case tt.CHARACTER:{BO(e,t);break}case tt.WHITESPACE_CHARACTER:{FO(e,t);break}case tt.COMMENT:{BE(e,t);break}case tt.START_TAG:{Rr(e,t);break}case tt.END_TAG:{Rg(e,t);break}case tt.EOF:{$O(e,t);break}}}function FO(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function BO(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function fq(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function pq(e,t){let r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,t.attrs))}function gq(e,t){let r=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&r&&(e.treeAdapter.detachNode(r),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ce.HTML),e.insertionMode=q.IN_FRAMESET)}function mq(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,ce.HTML)}function vq(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&NE.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ce.HTML)}function yq(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,ce.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Eq(e,t){let r=e.openElements.tmplCount>0;(!e.formElement||r)&&(e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,ce.HTML),r||(e.formElement=e.openElements.current))}function Tq(e,t){e.framesetOk=!1;let r=t.tagID;for(let n=e.openElements.stackTop;n>=0;n--){let i=e.openElements.tagIDs[n];if(r===T.LI&&i===T.LI||(r===T.DD||r===T.DT)&&(i===T.DD||i===T.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==T.ADDRESS&&i!==T.DIV&&i!==T.P&&e._isSpecialElement(e.openElements.items[n],i))break}e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,ce.HTML)}function Sq(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,ce.HTML),e.tokenizer.state=Vt.PLAINTEXT}function bq(e,t){e.openElements.hasInScope(T.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ce.HTML),e.framesetOk=!1}function wq(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(Z.A);r&&(A1(e,t),e.openElements.remove(r.element),e.activeFormattingElements.removeEntry(r)),e._reconstructActiveFormattingElements(),e._insertElement(t,ce.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Aq(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ce.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function kq(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(T.NOBR)&&(A1(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ce.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Cq(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ce.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function xq(e,t){e.treeAdapter.getDocumentMode(e.document)!==_n.QUIRKS&&e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,ce.HTML),e.framesetOk=!1,e.insertionMode=q.IN_TABLE}function UO(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ce.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function HO(e){let t=RO(e,$o.TYPE);return t!=null&&t.toLowerCase()===V9}function Rq(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ce.HTML),HO(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Iq(e,t){e._appendElement(t,ce.HTML),t.ackSelfClosing=!0}function _q(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._appendElement(t,ce.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Lq(e,t){t.tagName=Z.IMG,t.tagID=T.IMG,UO(e,t)}function Pq(e,t){e._insertElement(t,ce.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Vt.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=q.TEXT}function Dq(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Vt.RAWTEXT)}function Oq(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Vt.RAWTEXT)}function Qx(e,t){e._switchToTextParsing(t,Vt.RAWTEXT)}function Nq(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ce.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===q.IN_TABLE||e.insertionMode===q.IN_CAPTION||e.insertionMode===q.IN_TABLE_BODY||e.insertionMode===q.IN_ROW||e.insertionMode===q.IN_CELL?q.IN_SELECT_IN_TABLE:q.IN_SELECT}function Mq(e,t){e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ce.HTML)}function Fq(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ce.HTML)}function Bq(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(T.RTC),e._insertElement(t,ce.HTML)}function Uq(e,t){e._reconstructActiveFormattingElements(),OO(t),w1(t),t.selfClosing?e._appendElement(t,ce.MATHML):e._insertElement(t,ce.MATHML),t.ackSelfClosing=!0}function Hq(e,t){e._reconstructActiveFormattingElements(),NO(t),w1(t),t.selfClosing?e._appendElement(t,ce.SVG):e._insertElement(t,ce.SVG),t.ackSelfClosing=!0}function Zx(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ce.HTML)}function Rr(e,t){switch(t.tagID){case T.I:case T.S:case T.B:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.SMALL:case T.STRIKE:case T.STRONG:{Aq(e,t);break}case T.A:{wq(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{vq(e,t);break}case T.P:case T.DL:case T.OL:case T.UL:case T.DIV:case T.DIR:case T.NAV:case T.MAIN:case T.MENU:case T.ASIDE:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.DETAILS:case T.ADDRESS:case T.ARTICLE:case T.SEARCH:case T.SECTION:case T.SUMMARY:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{mq(e,t);break}case T.LI:case T.DD:case T.DT:{Tq(e,t);break}case T.BR:case T.IMG:case T.WBR:case T.AREA:case T.EMBED:case T.KEYGEN:{UO(e,t);break}case T.HR:{_q(e,t);break}case T.RB:case T.RTC:{Fq(e,t);break}case T.RT:case T.RP:{Bq(e,t);break}case T.PRE:case T.LISTING:{yq(e,t);break}case T.XMP:{Dq(e,t);break}case T.SVG:{Hq(e,t);break}case T.HTML:{fq(e,t);break}case T.BASE:case T.LINK:case T.META:case T.STYLE:case T.TITLE:case T.SCRIPT:case T.BGSOUND:case T.BASEFONT:case T.TEMPLATE:{Zn(e,t);break}case T.BODY:{pq(e,t);break}case T.FORM:{Eq(e,t);break}case T.NOBR:{kq(e,t);break}case T.MATH:{Uq(e,t);break}case T.TABLE:{xq(e,t);break}case T.INPUT:{Rq(e,t);break}case T.PARAM:case T.TRACK:case T.SOURCE:{Iq(e,t);break}case T.IMAGE:{Lq(e,t);break}case T.BUTTON:{bq(e,t);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{Cq(e,t);break}case T.IFRAME:{Oq(e,t);break}case T.SELECT:{Nq(e,t);break}case T.OPTION:case T.OPTGROUP:{Mq(e,t);break}case T.NOEMBED:case T.NOFRAMES:{Qx(e,t);break}case T.FRAMESET:{gq(e,t);break}case T.TEXTAREA:{Pq(e,t);break}case T.NOSCRIPT:{e.options.scriptingEnabled?Qx(e,t):Zx(e,t);break}case T.PLAINTEXT:{Sq(e,t);break}case T.COL:case T.TH:case T.TD:case T.TR:case T.HEAD:case T.FRAME:case T.TBODY:case T.TFOOT:case T.THEAD:case T.CAPTION:case T.COLGROUP:break;default:Zx(e,t)}}function zq(e,t){if(e.openElements.hasInScope(T.BODY)&&(e.insertionMode=q.AFTER_BODY,e.options.sourceCodeLocationInfo)){let r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e._setEndLocation(r,t)}}function $q(e,t){e.openElements.hasInScope(T.BODY)&&(e.insertionMode=q.AFTER_BODY,XO(e,t))}function Gq(e,t){let r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r))}function jq(e){let t=e.openElements.tmplCount>0,{formElement:r}=e;t||(e.formElement=null),(r||t)&&e.openElements.hasInScope(T.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(T.FORM):r&&e.openElements.remove(r))}function Vq(e){e.openElements.hasInButtonScope(T.P)||e._insertFakeElement(Z.P,T.P),e._closePElement()}function Wq(e){e.openElements.hasInListItemScope(T.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(T.LI),e.openElements.popUntilTagNamePopped(T.LI))}function qq(e,t){let r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r))}function Kq(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Yq(e,t){let r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker())}function Xq(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Z.BR,T.BR),e.openElements.pop(),e.framesetOk=!1}function zO(e,t){let r=t.tagName,n=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){let s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(n===o&&(n!==T.UNKNOWN||e.treeAdapter.getTagName(s)===r)){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function Rg(e,t){switch(t.tagID){case T.A:case T.B:case T.I:case T.S:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.NOBR:case T.SMALL:case T.STRIKE:case T.STRONG:{A1(e,t);break}case T.P:{Vq(e);break}case T.DL:case T.UL:case T.OL:case T.DIR:case T.DIV:case T.NAV:case T.PRE:case T.MAIN:case T.MENU:case T.ASIDE:case T.BUTTON:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.ADDRESS:case T.ARTICLE:case T.DETAILS:case T.SEARCH:case T.SECTION:case T.SUMMARY:case T.LISTING:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{Gq(e,t);break}case T.LI:{Wq(e);break}case T.DD:case T.DT:{qq(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{Kq(e);break}case T.BR:{Xq(e);break}case T.BODY:{zq(e,t);break}case T.HTML:{$q(e,t);break}case T.FORM:{jq(e);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{Yq(e,t);break}case T.TEMPLATE:{ia(e,t);break}default:zO(e,t)}}function $O(e,t){e.tmplInsertionModeStack.length>0?YO(e,t):k1(e,t)}function Qq(e,t){var r;t.tagID===T.SCRIPT&&((r=e.scriptHandler)===null||r===void 0||r.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Zq(e,t){e._err(t,ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Ky(e,t){if(e.openElements.currentTagId!==void 0&&MO.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=q.IN_TABLE_TEXT,t.type){case tt.CHARACTER:{jO(e,t);break}case tt.WHITESPACE_CHARACTER:{GO(e,t);break}}else gd(e,t)}function Jq(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ce.HTML),e.insertionMode=q.IN_CAPTION}function eK(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ce.HTML),e.insertionMode=q.IN_COLUMN_GROUP}function tK(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Z.COLGROUP,T.COLGROUP),e.insertionMode=q.IN_COLUMN_GROUP,C1(e,t)}function rK(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ce.HTML),e.insertionMode=q.IN_TABLE_BODY}function nK(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Z.TBODY,T.TBODY),e.insertionMode=q.IN_TABLE_BODY,Ig(e,t)}function iK(e,t){e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function sK(e,t){HO(t)?e._appendElement(t,ce.HTML):gd(e,t),t.ackSelfClosing=!0}function oK(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ce.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Rl(e,t){switch(t.tagID){case T.TD:case T.TH:case T.TR:{nK(e,t);break}case T.STYLE:case T.SCRIPT:case T.TEMPLATE:{Zn(e,t);break}case T.COL:{tK(e,t);break}case T.FORM:{oK(e,t);break}case T.TABLE:{iK(e,t);break}case T.TBODY:case T.TFOOT:case T.THEAD:{rK(e,t);break}case T.INPUT:{sK(e,t);break}case T.CAPTION:{Jq(e,t);break}case T.COLGROUP:{eK(e,t);break}default:gd(e,t)}}function Ou(e,t){switch(t.tagID){case T.TABLE:{e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode());break}case T.TEMPLATE:{ia(e,t);break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:gd(e,t)}}function gd(e,t){let r=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,xg(e,t),e.fosterParentingEnabled=r}function GO(e,t){e.pendingCharacterTokens.push(t)}function jO(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Zc(e,t){let r=0;if(e.hasNonWhitespacePendingCharacterToken)for(;r<e.pendingCharacterTokens.length;r++)gd(e,e.pendingCharacterTokens[r]);else for(;r<e.pendingCharacterTokens.length;r++)e._insertCharacters(e.pendingCharacterTokens[r]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}var VO=new Set([T.CAPTION,T.COL,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]);function aK(e,t){let r=t.tagID;VO.has(r)?e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=q.IN_TABLE,Rl(e,t)):Rr(e,t)}function lK(e,t){let r=t.tagID;switch(r){case T.CAPTION:case T.TABLE:{e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=q.IN_TABLE,r===T.TABLE&&Ou(e,t));break}case T.BODY:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:Rg(e,t)}}function C1(e,t){switch(t.tagID){case T.HTML:{Rr(e,t);break}case T.COL:{e._appendElement(t,ce.HTML),t.ackSelfClosing=!0;break}case T.TEMPLATE:{Zn(e,t);break}default:bp(e,t)}}function cK(e,t){switch(t.tagID){case T.COLGROUP:{e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=q.IN_TABLE);break}case T.TEMPLATE:{ia(e,t);break}case T.COL:break;default:bp(e,t)}}function bp(e,t){e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=q.IN_TABLE,e._processToken(t))}function Ig(e,t){switch(t.tagID){case T.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ce.HTML),e.insertionMode=q.IN_ROW;break}case T.TH:case T.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Z.TR,T.TR),e.insertionMode=q.IN_ROW,_g(e,t);break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=q.IN_TABLE,Rl(e,t));break}default:Rl(e,t)}}function UE(e,t){let r=t.tagID;switch(t.tagID){case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasInTableScope(r)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=q.IN_TABLE);break}case T.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=q.IN_TABLE,Ou(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:case T.TR:break;default:Ou(e,t)}}function _g(e,t){switch(t.tagID){case T.TH:case T.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ce.HTML),e.insertionMode=q.IN_CELL,e.activeFormattingElements.insertMarker();break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=q.IN_TABLE_BODY,Ig(e,t));break}default:Rl(e,t)}}function WO(e,t){switch(t.tagID){case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=q.IN_TABLE_BODY);break}case T.TABLE:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=q.IN_TABLE_BODY,UE(e,t));break}case T.TBODY:case T.TFOOT:case T.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(T.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=q.IN_TABLE_BODY,UE(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:break;default:Ou(e,t)}}function uK(e,t){let r=t.tagID;VO.has(r)?(e.openElements.hasInTableScope(T.TD)||e.openElements.hasInTableScope(T.TH))&&(e._closeTableCell(),_g(e,t)):Rr(e,t)}function dK(e,t){let r=t.tagID;switch(r){case T.TD:case T.TH:{e.openElements.hasInTableScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=q.IN_ROW);break}case T.TABLE:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(r)&&(e._closeTableCell(),WO(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:break;default:Rg(e,t)}}function qO(e,t){switch(t.tagID){case T.HTML:{Rr(e,t);break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._insertElement(t,ce.HTML);break}case T.OPTGROUP:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ce.HTML);break}case T.HR:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop(),e._appendElement(t,ce.HTML),t.ackSelfClosing=!0;break}case T.INPUT:case T.KEYGEN:case T.TEXTAREA:case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),t.tagID!==T.SELECT&&e._processStartTag(t));break}case T.SCRIPT:case T.TEMPLATE:{Zn(e,t);break}}}function KO(e,t){switch(t.tagID){case T.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===T.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===T.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop();break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop();break}case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode());break}case T.TEMPLATE:{ia(e,t);break}}}function hK(e,t){let r=t.tagID;r===T.CAPTION||r===T.TABLE||r===T.TBODY||r===T.TFOOT||r===T.THEAD||r===T.TR||r===T.TD||r===T.TH?(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e._processStartTag(t)):qO(e,t)}function fK(e,t){let r=t.tagID;r===T.CAPTION||r===T.TABLE||r===T.TBODY||r===T.TFOOT||r===T.THEAD||r===T.TR||r===T.TD||r===T.TH?e.openElements.hasInTableScope(r)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e.onEndTag(t)):KO(e,t)}function pK(e,t){switch(t.tagID){case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{Zn(e,t);break}case T.CAPTION:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.tmplInsertionModeStack[0]=q.IN_TABLE,e.insertionMode=q.IN_TABLE,Rl(e,t);break}case T.COL:{e.tmplInsertionModeStack[0]=q.IN_COLUMN_GROUP,e.insertionMode=q.IN_COLUMN_GROUP,C1(e,t);break}case T.TR:{e.tmplInsertionModeStack[0]=q.IN_TABLE_BODY,e.insertionMode=q.IN_TABLE_BODY,Ig(e,t);break}case T.TD:case T.TH:{e.tmplInsertionModeStack[0]=q.IN_ROW,e.insertionMode=q.IN_ROW,_g(e,t);break}default:e.tmplInsertionModeStack[0]=q.IN_BODY,e.insertionMode=q.IN_BODY,Rr(e,t)}}function gK(e,t){t.tagID===T.TEMPLATE&&ia(e,t)}function YO(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):k1(e,t)}function mK(e,t){t.tagID===T.HTML?Rr(e,t):wp(e,t)}function XO(e,t){var r;if(t.tagID===T.HTML){if(e.fragmentContext||(e.insertionMode=q.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===T.HTML){e._setEndLocation(e.openElements.items[0],t);let n=e.openElements.items[1];n&&!(!((r=e.treeAdapter.getNodeSourceCodeLocation(n))===null||r===void 0)&&r.endTag)&&e._setEndLocation(n,t)}}else wp(e,t)}function wp(e,t){e.insertionMode=q.IN_BODY,xg(e,t)}function vK(e,t){switch(t.tagID){case T.HTML:{Rr(e,t);break}case T.FRAMESET:{e._insertElement(t,ce.HTML);break}case T.FRAME:{e._appendElement(t,ce.HTML),t.ackSelfClosing=!0;break}case T.NOFRAMES:{Zn(e,t);break}}}function yK(e,t){t.tagID===T.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==T.FRAMESET&&(e.insertionMode=q.AFTER_FRAMESET))}function EK(e,t){switch(t.tagID){case T.HTML:{Rr(e,t);break}case T.NOFRAMES:{Zn(e,t);break}}}function TK(e,t){t.tagID===T.HTML&&(e.insertionMode=q.AFTER_AFTER_FRAMESET)}function SK(e,t){t.tagID===T.HTML?Rr(e,t):qf(e,t)}function qf(e,t){e.insertionMode=q.IN_BODY,xg(e,t)}function bK(e,t){switch(t.tagID){case T.HTML:{Rr(e,t);break}case T.NOFRAMES:{Zn(e,t);break}}}function wK(e,t){t.chars=Pt,e._insertCharacters(t)}function AK(e,t){e._insertCharacters(t),e.framesetOk=!1}function QO(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ce.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function kK(e,t){if(H9(t))QO(e),e._startTagOutsideForeignContent(t);else{let r=e._getAdjustedCurrentElement(),n=e.treeAdapter.getNamespaceURI(r);n===ce.MATHML?OO(t):n===ce.SVG&&(z9(t),NO(t)),w1(t),t.selfClosing?e._appendElement(t,n):e._insertElement(t,n),t.ackSelfClosing=!0}}function CK(e,t){if(t.tagID===T.P||t.tagID===T.BR){QO(e),e._endTagOutsideForeignContent(t);return}for(let r=e.openElements.stackTop;r>0;r--){let n=e.openElements.items[r];if(e.treeAdapter.getNamespaceURI(n)===ce.HTML){e._endTagOutsideForeignContent(t);break}let i=e.treeAdapter.getTagName(n);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(r);break}}}Z.AREA,Z.BASE,Z.BASEFONT,Z.BGSOUND,Z.BR,Z.COL,Z.EMBED,Z.FRAME,Z.HR,Z.IMG,Z.INPUT,Z.KEYGEN,Z.LINK,Z.META,Z.PARAM,Z.SOURCE,Z.TRACK,Z.WBR;var ZO=JO("end"),sa=JO("start");function JO(e){return t;function t(r){let n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}var eN=(function(e){if(e==null)return _K;if(typeof e=="function")return Lg(e);if(typeof e=="object")return Array.isArray(e)?xK(e):RK(e);if(typeof e=="string")return IK(e);throw new Error("Expected function, string, or object as test")});function xK(e){let t=[],r=-1;for(;++r<e.length;)t[r]=eN(e[r]);return Lg(n);function n(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function RK(e){let t=e;return Lg(r);function r(n){let i=n,s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function IK(e){return Lg(t);function t(r){return r&&r.type===e}}function Lg(e){return t;function t(r,n,i){return!!(LK(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function _K(){return!0}function LK(e){return e!==null&&typeof e=="object"&&"type"in e}var tN=[],PK=!0,Ap=!1,DK="skip";function rN(e,t,r,n){let i;typeof t=="function"&&typeof r!="function"?(n=r,r=t):i=t;let s=eN(i),o=n?-1:1;a(e,void 0,[])();function a(l,c,u){let d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){let f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=tN,p,g,v;if((!t||s(l,c,u[u.length-1]||void 0))&&(f=OK(r(l,u)),f[0]===Ap))return f;if("children"in l&&l.children){let m=l;if(m.children&&f[0]!==DK)for(g=(n?m.children.length:-1)+o,v=u.concat(m);g>-1&&g<m.children.length;){let y=m.children[g];if(p=a(y,g,v)(),p[0]===Ap)return p;g=typeof p[1]=="number"?p[1]:g+o}}return f}}}function OK(e){return Array.isArray(e)?e:typeof e=="number"?[PK,e]:e==null?tN:[e]}function Pg(e,t,r,n){let i,s,o;typeof t=="function"&&typeof r!="function"?(s=void 0,o=t,i=r):(s=t,o=r,i=n),rN(e,s,a,i);function a(l,c){let u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return o(l,d,u)}}var NK=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,MK=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Jx={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function nN(e,t){let r=WK(e),n=S1("type",{handlers:{root:FK,element:BK,text:UK,comment:sN,doctype:HK,raw:$K},unknown:GK}),i={parser:r?new Xx(Jx):Xx.getFragmentParser(void 0,Jx),handle(a){n(a,i)},stitches:!1,options:t||{}};n(e,i),Vl(i,sa());let s=r?i.parser.document:i.parser.getFragment(),o=OW(s,{file:i.options.file});return i.stitches&&Pg(o,"comment",function(a,l,c){let u=a;if(u.value.stitch&&c&&l!==void 0){let d=c.children;return d[l]=u.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function iN(e,t){let r=-1;if(e)for(;++r<e.length;)t.handle(e[r])}function FK(e,t){iN(e.children,t)}function BK(e,t){jK(e,t),iN(e.children,t),VK(e,t)}function UK(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);let r={type:tt.CHARACTER,chars:e.value,location:md(e)};Vl(t,sa(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function HK(e,t){let r={type:tt.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:md(e)};Vl(t,sa(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function zK(e,t){t.stitches=!0;let r=qK(e);if("children"in e&&"children"in r){let n=nN({type:"root",children:e.children},t.options);r.children=n.children}sN({type:"comment",value:{stitch:r}},t)}function sN(e,t){let r=e.value,n={type:tt.COMMENT,data:r,location:md(e)};Vl(t,sa(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function $K(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,oN(t,sa(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(NK,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;let r=t.parser.tokenizer._consume();t.parser.tokenizer._callState(r)}}function GK(e,t){let r=e;if(t.options.passThrough&&t.options.passThrough.includes(r.type))zK(r,t);else{let n="";throw MK.has(r.type)&&(n=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+r.type+"` node"+n)}}function Vl(e,t){oN(e,t);let r=e.parser.tokenizer.currentCharacterToken;r&&r.location&&(r.location.endLine=e.parser.tokenizer.preprocessor.line,r.location.endCol=e.parser.tokenizer.preprocessor.col+1,r.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Vt.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function oN(e,t){if(t&&t.offset!==void 0){let r={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=r}}function jK(e,t){let r=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Vt.PLAINTEXT)return;Vl(t,sa(e));let n=t.parser.openElements.current,i="namespaceURI"in n?n.namespaceURI:Mo.html;i===Mo.html&&r==="svg"&&(i=Mo.svg);let s=YW({...e,children:[]},{space:i===Mo.svg?"svg":"html"}),o={type:tt.START_TAG,tagName:r,tagID:jl(r),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:md(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=r}function VK(e,t){let r=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&AO.includes(r)||t.parser.tokenizer.state===Vt.PLAINTEXT)return;Vl(t,ZO(e));let n={type:tt.END_TAG,tagName:r,tagID:jl(r),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:md(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),r===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Vt.RCDATA||t.parser.tokenizer.state===Vt.RAWTEXT||t.parser.tokenizer.state===Vt.SCRIPT_DATA)&&(t.parser.tokenizer.state=Vt.DATA)}function WK(e){let t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function md(e){let t=sa(e)||{line:void 0,column:void 0,offset:void 0},r=ZO(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:r.line,endCol:r.column,endOffset:r.offset}}function qK(e){return"children"in e?xl({...e,children:[]}):xl(e)}function KK(e){return function(t,r){return nN(t,{...e,file:r})}}var Wo=class{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}};Wo.prototype.normal={};Wo.prototype.property={};Wo.prototype.space=void 0;function aN(e,t){let r={},n={};for(let i of e)Object.assign(r,i.property),Object.assign(n,i.normal);return new Wo(r,n,t)}function HE(e){return e.toLowerCase()}var kr=class{constructor(t,r){this.attribute=r,this.property=t}};kr.prototype.attribute="";kr.prototype.booleanish=!1;kr.prototype.boolean=!1;kr.prototype.commaOrSpaceSeparated=!1;kr.prototype.commaSeparated=!1;kr.prototype.defined=!1;kr.prototype.mustUseProperty=!1;kr.prototype.number=!1;kr.prototype.overloadedBoolean=!1;kr.prototype.property="";kr.prototype.spaceSeparated=!1;kr.prototype.space=void 0;var YK=0,Xe=oa(),Xt=oa(),zE=oa(),Te=oa(),At=oa(),yl=oa(),hn=oa();function oa(){return 2**++YK}var $E=Object.freeze(Object.defineProperty({__proto__:null,boolean:Xe,booleanish:Xt,commaOrSpaceSeparated:hn,commaSeparated:yl,number:Te,overloadedBoolean:zE,spaceSeparated:At},Symbol.toStringTag,{value:"Module"})),Yy=Object.keys($E),Nu=class extends kr{constructor(t,r,n,i){let s=-1;if(super(t,r),eR(this,"space",i),typeof n=="number")for(;++s<Yy.length;){let o=Yy[s];eR(this,Yy[s],(n&$E[o])===$E[o])}}};Nu.prototype.defined=!0;function eR(e,t,r){r&&(e[t]=r)}function Wl(e){let t={},r={};for(let[n,i]of Object.entries(e.properties)){let s=new Nu(n,e.transform(e.attributes||{},n),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(s.mustUseProperty=!0),t[n]=s,r[HE(n)]=n,r[HE(s.attribute)]=n}return new Wo(t,r,e.space)}var lN=Wl({properties:{ariaActiveDescendant:null,ariaAtomic:Xt,ariaAutoComplete:null,ariaBusy:Xt,ariaChecked:Xt,ariaColCount:Te,ariaColIndex:Te,ariaColSpan:Te,ariaControls:At,ariaCurrent:null,ariaDescribedBy:At,ariaDetails:null,ariaDisabled:Xt,ariaDropEffect:At,ariaErrorMessage:null,ariaExpanded:Xt,ariaFlowTo:At,ariaGrabbed:Xt,ariaHasPopup:null,ariaHidden:Xt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:At,ariaLevel:Te,ariaLive:null,ariaModal:Xt,ariaMultiLine:Xt,ariaMultiSelectable:Xt,ariaOrientation:null,ariaOwns:At,ariaPlaceholder:null,ariaPosInSet:Te,ariaPressed:Xt,ariaReadOnly:Xt,ariaRelevant:null,ariaRequired:Xt,ariaRoleDescription:At,ariaRowCount:Te,ariaRowIndex:Te,ariaRowSpan:Te,ariaSelected:Xt,ariaSetSize:Te,ariaSort:null,ariaValueMax:Te,ariaValueMin:Te,ariaValueNow:Te,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function cN(e,t){return t in e?e[t]:t}function uN(e,t){return cN(e,t.toLowerCase())}var XK=Wl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yl,acceptCharset:At,accessKey:At,action:null,allow:null,allowFullScreen:Xe,allowPaymentRequest:Xe,allowUserMedia:Xe,alt:null,as:null,async:Xe,autoCapitalize:null,autoComplete:At,autoFocus:Xe,autoPlay:Xe,blocking:At,capture:null,charSet:null,checked:Xe,cite:null,className:At,cols:Te,colSpan:null,content:null,contentEditable:Xt,controls:Xe,controlsList:At,coords:Te|yl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Xe,defer:Xe,dir:null,dirName:null,disabled:Xe,download:zE,draggable:Xt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Xe,formTarget:null,headers:At,height:Te,hidden:zE,high:Te,href:null,hrefLang:null,htmlFor:At,httpEquiv:At,id:null,imageSizes:null,imageSrcSet:null,inert:Xe,inputMode:null,integrity:null,is:null,isMap:Xe,itemId:null,itemProp:At,itemRef:At,itemScope:Xe,itemType:At,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Xe,low:Te,manifest:null,max:null,maxLength:Te,media:null,method:null,min:null,minLength:Te,multiple:Xe,muted:Xe,name:null,nonce:null,noModule:Xe,noValidate:Xe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Xe,optimum:Te,pattern:null,ping:At,placeholder:null,playsInline:Xe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Xe,referrerPolicy:null,rel:At,required:Xe,reversed:Xe,rows:Te,rowSpan:Te,sandbox:At,scope:null,scoped:Xe,seamless:Xe,selected:Xe,shadowRootClonable:Xe,shadowRootDelegatesFocus:Xe,shadowRootMode:null,shape:null,size:Te,sizes:null,slot:null,span:Te,spellCheck:Xt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Te,step:null,style:null,tabIndex:Te,target:null,title:null,translate:null,type:null,typeMustMatch:Xe,useMap:null,value:Xt,width:Te,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:At,axis:null,background:null,bgColor:null,border:Te,borderColor:null,bottomMargin:Te,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Xe,declare:Xe,event:null,face:null,frame:null,frameBorder:null,hSpace:Te,leftMargin:Te,link:null,longDesc:null,lowSrc:null,marginHeight:Te,marginWidth:Te,noResize:Xe,noHref:Xe,noShade:Xe,noWrap:Xe,object:null,profile:null,prompt:null,rev:null,rightMargin:Te,rules:null,scheme:null,scrolling:Xt,standby:null,summary:null,text:null,topMargin:Te,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Te,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Xe,disableRemotePlayback:Xe,prefix:null,property:null,results:Te,security:null,unselectable:null},space:"html",transform:uN}),QK=Wl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:hn,accentHeight:Te,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Te,amplitude:Te,arabicForm:null,ascent:Te,attributeName:null,attributeType:null,azimuth:Te,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Te,by:null,calcMode:null,capHeight:Te,className:At,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Te,diffuseConstant:Te,direction:null,display:null,dur:null,divisor:Te,dominantBaseline:null,download:Xe,dx:null,dy:null,edgeMode:null,editable:null,elevation:Te,enableBackground:null,end:null,event:null,exponent:Te,externalResourcesRequired:null,fill:null,fillOpacity:Te,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yl,g2:yl,glyphName:yl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Te,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Te,horizOriginX:Te,horizOriginY:Te,id:null,ideographic:Te,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Te,k:Te,k1:Te,k2:Te,k3:Te,k4:Te,kernelMatrix:hn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Te,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Te,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Te,overlineThickness:Te,paintOrder:null,panose1:null,path:null,pathLength:Te,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:At,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Te,pointsAtY:Te,pointsAtZ:Te,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:hn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:hn,rev:hn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:hn,requiredFeatures:hn,requiredFonts:hn,requiredFormats:hn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Te,specularExponent:Te,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Te,strikethroughThickness:Te,string:null,stroke:null,strokeDashArray:hn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Te,strokeOpacity:Te,strokeWidth:null,style:null,surfaceScale:Te,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:hn,tabIndex:Te,tableValues:null,target:null,targetX:Te,targetY:Te,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:hn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Te,underlineThickness:Te,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Te,values:null,vAlphabetic:Te,vMathematical:Te,vectorEffect:null,vHanging:Te,vIdeographic:Te,version:null,vertAdvY:Te,vertOriginX:Te,vertOriginY:Te,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Te,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:cN}),dN=Wl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),hN=Wl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:uN}),fN=Wl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),ZK=/[A-Z]/g,tR=/-[a-z]/g,JK=/^data[-\w.:]+$/i;function e7(e,t){let r=HE(t),n=t,i=kr;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&JK.test(t)){if(t.charAt(4)==="-"){let s=t.slice(5).replace(tR,r7);n="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{let s=t.slice(4);if(!tR.test(s)){let o=s.replace(ZK,t7);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=Nu}return new i(n,t)}function t7(e){return"-"+e.toLowerCase()}function r7(e){return e.charAt(1).toUpperCase()}var n7=aN([lN,XK,dN,hN,fN],"html"),pN=aN([lN,QK,dN,hN,fN],"svg"),i7=/["&'<>`]/g,s7=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o7=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,a7=/[|\\{}()[\]^$+*?.]/g,rR=new WeakMap;function l7(e,t){if(e=e.replace(t.subset?c7(t.subset):i7,n),t.subset||t.escapeOnly)return e;return e.replace(s7,r).replace(o7,n);function r(i,s,o){return t.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),t)}function n(i,s,o){return t.format(i.charCodeAt(0),o.charCodeAt(s+1),t)}}function c7(e){let t=rR.get(e);return t||(t=u7(e),rR.set(e,t)),t}function u7(e){let t=[],r=-1;for(;++r<e.length;)t.push(e[r].replace(a7,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}var d7=/[\dA-Fa-f]/;function h7(e,t,r){let n="&#x"+e.toString(16).toUpperCase();return r&&t&&!d7.test(String.fromCharCode(t))?n:n+";"}var f7=/\d/;function p7(e,t,r){let n="&#"+String(e);return r&&t&&!f7.test(String.fromCharCode(t))?n:n+";"}var g7=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Xy={nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203E",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",quot:'"',amp:"&",lt:"<",gt:">",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203A",euro:"\u20AC"},m7=["cent","copy","divide","gt","lt","not","para","times"],gN={}.hasOwnProperty,GE={},af;for(af in Xy)gN.call(Xy,af)&&(GE[Xy[af]]=af);var v7=/[^\dA-Za-z]/;function y7(e,t,r,n){let i=String.fromCharCode(e);if(gN.call(GE,i)){let s=GE[i],o="&"+s;return r&&g7.includes(s)&&!m7.includes(s)&&(!n||t&&t!==61&&v7.test(String.fromCharCode(t)))?o:o+";"}return""}function E7(e,t,r){let n=h7(e,t,r.omitOptionalSemicolons),i;if((r.useNamedReferences||r.useShortestReferences)&&(i=y7(e,t,r.omitOptionalSemicolons,r.attribute)),(r.useShortestReferences||!i)&&r.useShortestReferences){let s=p7(e,t,r.omitOptionalSemicolons);s.length<n.length&&(n=s)}return i&&(!r.useShortestReferences||i.length<n.length)?i:n}function El(e,t){return l7(e,Object.assign({format:E7},t))}var T7=/^>|^->|<!--|-->|--!>|<!-$/g,S7=[">"],b7=["<",">"];function w7(e,t,r,n){return n.settings.bogusComments?"<?"+El(e.value,Object.assign({},n.settings.characterReferences,{subset:S7}))+">":"<!--"+e.value.replace(T7,i)+"-->";function i(s){return El(s,Object.assign({},n.settings.characterReferences,{subset:b7}))}}function A7(e,t,r,n){return"<!"+(n.settings.upperDoctype?"DOCTYPE":"doctype")+(n.settings.tightDoctype?"":" ")+"html>"}function kp(e,t){let r=String(e);if(typeof t!="string")throw new TypeError("Expected character");let n=0,i=r.indexOf(t);for(;i!==-1;)n++,i=r.indexOf(t,i+t.length);return n}var k7=/[ \t\n\f\r]/g;function x1(e){return typeof e=="object"?e.type==="text"?nR(e.value):!1:nR(e)}function nR(e){return e.replace(k7,"")===""}var sr=vN(1),mN=vN(-1),C7=[];function vN(e){return t;function t(r,n,i){let s=r?r.children:C7,o=(n||0)+e,a=s[o];if(!i)for(;a&&x1(a);)o+=e,a=s[o];return a}}var x7={}.hasOwnProperty;function yN(e){return t;function t(r,n,i){return x7.call(e,r.tagName)&&e[r.tagName](r,n,i)}}var R1=yN({body:I7,caption:Qy,colgroup:Qy,dd:D7,dt:P7,head:Qy,html:R7,li:L7,optgroup:O7,option:N7,p:_7,rp:iR,rt:iR,tbody:F7,td:sR,tfoot:B7,th:sR,thead:M7,tr:U7});function Qy(e,t,r){let n=sr(r,t,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&x1(n.value.charAt(0)))}function R7(e,t,r){let n=sr(r,t);return!n||n.type!=="comment"}function I7(e,t,r){let n=sr(r,t);return!n||n.type!=="comment"}function _7(e,t,r){let n=sr(r,t);return n?n.type==="element"&&(n.tagName==="address"||n.tagName==="article"||n.tagName==="aside"||n.tagName==="blockquote"||n.tagName==="details"||n.tagName==="div"||n.tagName==="dl"||n.tagName==="fieldset"||n.tagName==="figcaption"||n.tagName==="figure"||n.tagName==="footer"||n.tagName==="form"||n.tagName==="h1"||n.tagName==="h2"||n.tagName==="h3"||n.tagName==="h4"||n.tagName==="h5"||n.tagName==="h6"||n.tagName==="header"||n.tagName==="hgroup"||n.tagName==="hr"||n.tagName==="main"||n.tagName==="menu"||n.tagName==="nav"||n.tagName==="ol"||n.tagName==="p"||n.tagName==="pre"||n.tagName==="section"||n.tagName==="table"||n.tagName==="ul"):!r||!(r.type==="element"&&(r.tagName==="a"||r.tagName==="audio"||r.tagName==="del"||r.tagName==="ins"||r.tagName==="map"||r.tagName==="noscript"||r.tagName==="video"))}function L7(e,t,r){let n=sr(r,t);return!n||n.type==="element"&&n.tagName==="li"}function P7(e,t,r){let n=sr(r,t);return!!(n&&n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd"))}function D7(e,t,r){let n=sr(r,t);return!n||n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd")}function iR(e,t,r){let n=sr(r,t);return!n||n.type==="element"&&(n.tagName==="rp"||n.tagName==="rt")}function O7(e,t,r){let n=sr(r,t);return!n||n.type==="element"&&n.tagName==="optgroup"}function N7(e,t,r){let n=sr(r,t);return!n||n.type==="element"&&(n.tagName==="option"||n.tagName==="optgroup")}function M7(e,t,r){let n=sr(r,t);return!!(n&&n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot"))}function F7(e,t,r){let n=sr(r,t);return!n||n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot")}function B7(e,t,r){return!sr(r,t)}function U7(e,t,r){let n=sr(r,t);return!n||n.type==="element"&&n.tagName==="tr"}function sR(e,t,r){let n=sr(r,t);return!n||n.type==="element"&&(n.tagName==="td"||n.tagName==="th")}var H7=yN({body:G7,colgroup:j7,head:$7,html:z7,tbody:V7});function z7(e){let t=sr(e,-1);return!t||t.type!=="comment"}function $7(e){let t=new Set;for(let n of e.children)if(n.type==="element"&&(n.tagName==="base"||n.tagName==="title")){if(t.has(n.tagName))return!1;t.add(n.tagName)}let r=e.children[0];return!r||r.type==="element"}function G7(e){let t=sr(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&x1(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function j7(e,t,r){let n=mN(r,t),i=sr(e,-1,!0);return r&&n&&n.type==="element"&&n.tagName==="colgroup"&&R1(n,r.children.indexOf(n),r)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function V7(e,t,r){let n=mN(r,t),i=sr(e,-1);return r&&n&&n.type==="element"&&(n.tagName==="thead"||n.tagName==="tbody")&&R1(n,r.children.indexOf(n),r)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}var lf={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function W7(e,t,r,n){let i=n.schema,s=i.space==="svg"?!1:n.settings.omitOptionalTags,o=i.space==="svg"?n.settings.closeEmptyElements:n.settings.voids.includes(e.tagName.toLowerCase()),a=[],l;i.space==="html"&&e.tagName==="svg"&&(n.schema=pN);let c=q7(n,e.properties),u=n.all(i.space==="html"&&e.tagName==="template"?e.content:e);return n.schema=i,u&&(o=!1),(c||!s||!H7(e,t,r))&&(a.push("<",e.tagName,c?" "+c:""),o&&(i.space==="svg"||n.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!n.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!o&&(!s||!R1(e,t,r))&&a.push("</"+e.tagName+">"),a.join("")}function q7(e,t){let r=[],n=-1,i;if(t){for(i in t)if(t[i]!==null&&t[i]!==void 0){let s=K7(e,i,t[i]);s&&r.push(s)}}for(;++n<r.length;){let s=e.settings.tightAttributes?r[n].charAt(r[n].length-1):void 0;n!==r.length-1&&s!=='"'&&s!=="'"&&(r[n]+=" ")}return r.join("")}function K7(e,t,r){let n=e7(e.schema,t),i=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,s=e.settings.allowDangerousCharacters?0:1,o=e.quote,a;if(n.overloadedBoolean&&(r===n.attribute||r==="")?r=!0:(n.boolean||n.overloadedBoolean)&&(typeof r!="string"||r===n.attribute||r==="")&&(r=!!r),r==null||r===!1||typeof r=="number"&&Number.isNaN(r))return"";let l=El(n.attribute,Object.assign({},e.settings.characterReferences,{subset:lf.name[i][s]}));return r===!0||(r=Array.isArray(r)?(n.commaSeparated?eO:tO)(r,{padLeft:!e.settings.tightCommaSeparatedLists}):String(r),e.settings.collapseEmptyAttributes&&!r)?l:(e.settings.preferUnquoted&&(a=El(r,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:lf.unquoted[i][s]}))),a!==r&&(e.settings.quoteSmart&&kp(r,o)>kp(r,e.alternative)&&(o=e.alternative),a=o+El(r,Object.assign({},e.settings.characterReferences,{subset:(o==="'"?lf.single:lf.double)[i][s],attribute:!0}))+o),l+(a&&"="+a))}var Y7=["<","&"];function EN(e,t,r,n){return r&&r.type==="element"&&(r.tagName==="script"||r.tagName==="style")?e.value:El(e.value,Object.assign({},n.settings.characterReferences,{subset:Y7}))}function X7(e,t,r,n){return n.settings.allowDangerousHtml?e.value:EN(e,t,r,n)}function Q7(e,t,r,n){return n.all(e)}var Z7=S1("type",{invalid:J7,unknown:eY,handlers:{comment:w7,doctype:A7,element:W7,raw:X7,root:Q7,text:EN}});function J7(e){throw new Error("Expected node, not `"+e+"`")}function eY(e){let t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}var tY={},rY={},nY=[];function iY(e,t){let r=t||tY,n=r.quote||'"',i=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:sY,all:oY,settings:{omitOptionalTags:r.omitOptionalTags||!1,allowParseErrors:r.allowParseErrors||!1,allowDangerousCharacters:r.allowDangerousCharacters||!1,quoteSmart:r.quoteSmart||!1,preferUnquoted:r.preferUnquoted||!1,tightAttributes:r.tightAttributes||!1,upperDoctype:r.upperDoctype||!1,tightDoctype:r.tightDoctype||!1,bogusComments:r.bogusComments||!1,tightCommaSeparatedLists:r.tightCommaSeparatedLists||!1,tightSelfClosing:r.tightSelfClosing||!1,collapseEmptyAttributes:r.collapseEmptyAttributes||!1,allowDangerousHtml:r.allowDangerousHtml||!1,voids:r.voids||AO,characterReferences:r.characterReferences||rY,closeSelfClosing:r.closeSelfClosing||!1,closeEmptyElements:r.closeEmptyElements||!1},schema:r.space==="svg"?pN:n7,quote:n,alternative:i}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function sY(e,t,r){return Z7(e,t,r,this)}function oY(e){let t=[],r=e&&e.children||nY,n=-1;for(;++n<r.length;)t[n]=this.one(r[n],n,e);return t.join("")}function aY(e){let t=this,r={...t.data("settings"),...e};t.compiler=n;function n(i){return iY(i,r)}}var lY=TN(new RegExp("\\p{P}|\\p{S}","u")),cY=TN(/\s/);function TN(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function uY(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}var SN=(function(e){if(e==null)return pY;if(typeof e=="function")return Dg(e);if(typeof e=="object")return Array.isArray(e)?dY(e):hY(e);if(typeof e=="string")return fY(e);throw new Error("Expected function, string, or object as test")});function dY(e){let t=[],r=-1;for(;++r<e.length;)t[r]=SN(e[r]);return Dg(n);function n(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function hY(e){let t=e;return Dg(r);function r(n){let i=n,s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function fY(e){return Dg(t);function t(r){return r&&r.type===e}}function Dg(e){return t;function t(r,n,i){return!!(gY(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function pY(){return!0}function gY(e){return e!==null&&typeof e=="object"&&"type"in e}function mY(e,t,r){let n=SN((r||{}).ignore||[]),i=vY(t),s=-1;for(;++s<i.length;)rN(e,"text",o);function o(l,c){let u=-1,d;for(;++u<c.length;){let h=c[u],f=d?d.children:void 0;if(n(h,f?f.indexOf(h):void 0,d))return;d=h}if(d)return a(l,c)}function a(l,c){let u=c[c.length-1],d=i[s][0],h=i[s][1],f=0,p=u.children.indexOf(l),g=!1,v=[];d.lastIndex=0;let m=d.exec(l.value);for(;m;){let y=m.index,E={index:m.index,input:m.input,stack:[...c,l]},S=h(...m,E);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?d.lastIndex=y+1:(f!==y&&v.push({type:"text",value:l.value.slice(f,y)}),Array.isArray(S)?v.push(...S):S&&v.push(S),f=y+m[0].length,g=!0),!d.global)break;m=d.exec(l.value)}return g?(f<l.value.length&&v.push({type:"text",value:l.value.slice(f)}),u.children.splice(p,1,...v)):v=[l],p+v.length}}function vY(e){let t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");let r=!e[0]||Array.isArray(e[0])?e:[e],n=-1;for(;++n<r.length;){let i=r[n];t.push([yY(i[0]),EY(i[1])])}return t}function yY(e){return typeof e=="string"?new RegExp(uY(e),"g"):e}function EY(e){return typeof e=="function"?e:function(){return e}}var Zy="phrasing",Jy=["autolink","link","image","label"];function TY(){return{transforms:[xY],enter:{literalAutolink:bY,literalAutolinkEmail:e0,literalAutolinkHttp:e0,literalAutolinkWww:e0},exit:{literalAutolink:CY,literalAutolinkEmail:kY,literalAutolinkHttp:wY,literalAutolinkWww:AY}}}function SY(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Zy,notInConstruct:Jy},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Zy,notInConstruct:Jy},{character:":",before:"[ps]",after:"\\/",inConstruct:Zy,notInConstruct:Jy}]}}function bY(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function e0(e){this.config.enter.autolinkProtocol.call(this,e)}function wY(e){this.config.exit.autolinkProtocol.call(this,e)}function AY(e){this.config.exit.data.call(this,e);let t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function kY(e){this.config.exit.autolinkEmail.call(this,e)}function CY(e){this.exit(e)}function xY(e){mY(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,RY],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),IY]],{ignore:["link","linkReference"]})}function RY(e,t,r,n,i){let s="";if(!bN(i)||(/^w/i.test(t)&&(r=t+r,t="",s="http://"),!_Y(r)))return!1;let o=LY(r+n);if(!o[0])return!1;let a={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function IY(e,t,r,n){return!bN(n,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function _Y(e){let t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function LY(e){let t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],n=r.indexOf(")"),i=kp(e,"("),s=kp(e,")");for(;n!==-1&&i>s;)e+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),s++;return[e,r]}function bN(e,t){let r=e.input.charCodeAt(e.index-1);return(e.index===0||cY(r)||lY(r))&&(!t||r!==47)}function wN(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}AN.peek=HY;function PY(){this.buffer()}function DY(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function OY(){this.buffer()}function NY(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function MY(e){let t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=wN(this.sliceSerialize(e)).toLowerCase(),r.label=t}function FY(e){this.exit(e)}function BY(e){let t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=wN(this.sliceSerialize(e)).toLowerCase(),r.label=t}function UY(e){this.exit(e)}function HY(){return"["}function AN(e,t,r,n){let i=r.createTracker(n),s=i.move("[^"),o=r.enter("footnoteReference"),a=r.enter("reference");return s+=i.move(r.safe(r.associationId(e),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function zY(){return{enter:{gfmFootnoteCallString:PY,gfmFootnoteCall:DY,gfmFootnoteDefinitionLabelString:OY,gfmFootnoteDefinition:NY},exit:{gfmFootnoteCallString:MY,gfmFootnoteCall:FY,gfmFootnoteDefinitionLabelString:BY,gfmFootnoteDefinition:UY}}}function $Y(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:r,footnoteReference:AN},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(n,i,s,o){let a=s.createTracker(o),l=a.move("[^"),c=s.enter("footnoteDefinition"),u=s.enter("label");return l+=a.move(s.safe(s.associationId(n),{before:l,after:"]"})),u(),l+=a.move("]:"),n.children&&n.children.length>0&&(a.shift(4),l+=a.move((t?`
`:" ")+s.indentLines(s.containerFlow(n,a.current()),t?kN:GY))),c(),l}}function GY(e,t,r){return t===0?e:kN(e,t,r)}function kN(e,t,r){return(r?"":"    ")+e}var jY=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];CN.peek=YY;function VY(){return{canContainEols:["delete"],enter:{strikethrough:qY},exit:{strikethrough:KY}}}function WY(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:jY}],handlers:{delete:CN}}}function qY(e){this.enter({type:"delete",children:[]},e)}function KY(e){this.exit(e)}function CN(e,t,r,n){let i=r.createTracker(n),s=r.enter("strikethrough"),o=i.move("~~");return o+=r.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function YY(){return"~"}function XY(e){return e.length}function QY(e,t){let r=t||{},n=(r.align||[]).concat(),i=r.stringLength||XY,s=[],o=[],a=[],l=[],c=0,u=-1;for(;++u<e.length;){let g=[],v=[],m=-1;for(e[u].length>c&&(c=e[u].length);++m<e[u].length;){let y=ZY(e[u][m]);if(r.alignDelimiters!==!1){let E=i(y);v[m]=E,(l[m]===void 0||E>l[m])&&(l[m]=E)}g.push(y)}o[u]=g,a[u]=v}let d=-1;if(typeof n=="object"&&"length"in n)for(;++d<c;)s[d]=oR(n[d]);else{let g=oR(n);for(;++d<c;)s[d]=g}d=-1;let h=[],f=[];for(;++d<c;){let g=s[d],v="",m="";g===99?(v=":",m=":"):g===108?v=":":g===114&&(m=":");let y=r.alignDelimiters===!1?1:Math.max(1,l[d]-v.length-m.length),E=v+"-".repeat(y)+m;r.alignDelimiters!==!1&&(y=v.length+y+m.length,y>l[d]&&(l[d]=y),f[d]=y),h[d]=E}o.splice(1,0,h),a.splice(1,0,f),u=-1;let p=[];for(;++u<o.length;){let g=o[u],v=a[u];d=-1;let m=[];for(;++d<c;){let y=g[d]||"",E="",S="";if(r.alignDelimiters!==!1){let b=l[d]-(v[d]||0),w=s[d];w===114?E=" ".repeat(b):w===99?b%2?(E=" ".repeat(b/2+.5),S=" ".repeat(b/2-.5)):(E=" ".repeat(b/2),S=E):S=" ".repeat(b)}r.delimiterStart!==!1&&!d&&m.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&y==="")&&(r.delimiterStart!==!1||d)&&m.push(" "),r.alignDelimiters!==!1&&m.push(E),m.push(y),r.alignDelimiters!==!1&&m.push(S),r.padding!==!1&&m.push(" "),(r.delimiterEnd!==!1||d!==c-1)&&m.push("|")}p.push(r.delimiterEnd===!1?m.join("").replace(/ +$/,""):m.join(""))}return p.join(`
`)}function ZY(e){return e==null?"":String(e)}function oR(e){let t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function JY(e,t,r,n){let i=r.enter("blockquote"),s=r.createTracker(n);s.move("> "),s.shift(2);let o=r.indentLines(r.containerFlow(e,s.current()),eX);return i(),o}function eX(e,t,r){return">"+(r?"":" ")+e}function tX(e,t){return aR(e,t.inConstruct,!0)&&!aR(e,t.notInConstruct,!1)}function aR(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let n=-1;for(;++n<t.length;)if(e.includes(t[n]))return!0;return!1}function lR(e,t,r,n){let i=-1;for(;++i<r.unsafe.length;)if(r.unsafe[i].character===`
`&&tX(r.stack,r.unsafe[i]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function xN(e,t){let r=String(e),n=r.indexOf(t),i=n,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===i?++s>o&&(o=s):s=1,i=n+t.length,n=r.indexOf(t,i);return o}function rX(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function nX(e){let t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function iX(e,t,r,n){let i=nX(r),s=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(rX(e,r)){let d=r.enter("codeIndented"),h=r.indentLines(s,sX);return d(),h}let a=r.createTracker(n),l=i.repeat(Math.max(xN(s,i)+1,3)),c=r.enter("codeFenced"),u=a.move(l);if(e.lang){let d=r.enter(`codeFencedLang${o}`);u+=a.move(r.safe(e.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(e.lang&&e.meta){let d=r.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(r.safe(e.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function sX(e,t,r){return(r?"":"    ")+e}function I1(e){let t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function oX(e,t,r,n){let i=I1(r),s=i==='"'?"Quote":"Apostrophe",o=r.enter("definition"),a=r.enter("label"),l=r.createTracker(n),c=l.move("[");return c+=l.move(r.safe(r.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(e.url,{before:c,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=r.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(r.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function aX(e){let t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Mu(e){return"&#x"+e.toString(16).toUpperCase()+";"}function lX(e){return e!==null&&(e<0||e===32)}var cX=RN(new RegExp("\\p{P}|\\p{S}","u")),uX=RN(/\s/);function RN(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function cR(e){if(e===null||lX(e)||uX(e))return 1;if(cX(e))return 2}function Cp(e,t,r){let n=cR(e),i=cR(t);return n===void 0?i===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}IN.peek=dX;function IN(e,t,r,n){let i=aX(r),s=r.enter("emphasis"),o=r.createTracker(n),a=o.move(i),l=o.move(r.containerPhrasing(e,{after:i,before:a,...o.current()})),c=l.charCodeAt(0),u=Cp(n.before.charCodeAt(n.before.length-1),c,i);u.inside&&(l=Mu(c)+l.slice(1));let d=l.charCodeAt(l.length-1),h=Cp(n.after.charCodeAt(0),d,i);h.inside&&(l=l.slice(0,-1)+Mu(d));let f=o.move(i);return s(),r.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function dX(e,t,r){return r.options.emphasis||"*"}var hX={};function _N(e,t){let r=hX,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,i=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return LN(e,n,i)}function LN(e,t,r){if(fX(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return uR(e.children,t,r)}return Array.isArray(e)?uR(e,t,r):""}function uR(e,t,r){let n=[],i=-1;for(;++i<e.length;)n[i]=LN(e[i],t,r);return n.join("")}function fX(e){return!!(e&&typeof e=="object")}function pX(e,t){let r=!1;return Pg(e,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,Ap}),!!((!e.depth||e.depth<3)&&_N(e)&&(t.options.setext||r))}function gX(e,t,r,n){let i=Math.max(Math.min(6,e.depth||1),1),s=r.createTracker(n);if(pX(e,r)){let u=r.enter("headingSetext"),d=r.enter("phrasing"),h=r.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),u(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}let o="#".repeat(i),a=r.enter("headingAtx"),l=r.enter("phrasing");s.move(o+" ");let c=r.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=Mu(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,r.options.closeAtx&&(c+=" "+o),l(),a(),c}PN.peek=mX;function PN(e){return e.value||""}function mX(){return"<"}DN.peek=vX;function DN(e,t,r,n){let i=I1(r),s=i==='"'?"Quote":"Apostrophe",o=r.enter("image"),a=r.enter("label"),l=r.createTracker(n),c=l.move("![");return c+=l.move(r.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=r.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(r.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function vX(){return"!"}ON.peek=yX;function ON(e,t,r,n){let i=e.referenceType,s=r.enter("imageReference"),o=r.enter("label"),a=r.createTracker(n),l=a.move("!["),c=r.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();let u=r.stack;r.stack=[],o=r.enter("reference");let d=r.safe(r.associationId(e),{before:l,after:"]",...a.current()});return o(),r.stack=u,s(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function yX(){return"!"}NN.peek=EX;function NN(e,t,r){let n=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(n);)i+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++s<r.unsafe.length;){let o=r.unsafe[s],a=r.compilePattern(o),l;if(o.atBreak)for(;l=a.exec(n);){let c=l.index;n.charCodeAt(c)===10&&n.charCodeAt(c-1)===13&&c--,n=n.slice(0,c)+" "+n.slice(l.index+1)}}return i+n+i}function EX(){return"`"}function MN(e,t){let r=_N(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}FN.peek=TX;function FN(e,t,r,n){let i=I1(r),s=i==='"'?"Quote":"Apostrophe",o=r.createTracker(n),a,l;if(MN(e,r)){let u=r.stack;r.stack=[],a=r.enter("autolink");let d=o.move("<");return d+=o.move(r.containerPhrasing(e,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),r.stack=u,d}a=r.enter("link"),l=r.enter("label");let c=o.move("[");return c+=o.move(r.containerPhrasing(e,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(r.safe(e.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=r.enter("destinationRaw"),c+=o.move(r.safe(e.url,{before:c,after:e.title?" ":")",...o.current()}))),l(),e.title&&(l=r.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(r.safe(e.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function TX(e,t,r){return MN(e,r)?"<":"["}BN.peek=SX;function BN(e,t,r,n){let i=e.referenceType,s=r.enter("linkReference"),o=r.enter("label"),a=r.createTracker(n),l=a.move("["),c=r.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();let u=r.stack;r.stack=[],o=r.enter("reference");let d=r.safe(r.associationId(e),{before:l,after:"]",...a.current()});return o(),r.stack=u,s(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function SX(){return"["}function _1(e){let t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function bX(e){let t=_1(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function wX(e){let t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function UN(e){let t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function AX(e,t,r,n){let i=r.enter("list"),s=r.bulletCurrent,o=e.ordered?wX(r):_1(r),a=e.ordered?o==="."?")":".":bX(r),l=t&&r.bulletLastUsed?o===r.bulletLastUsed:!1;if(!e.ordered){let u=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(l=!0),UN(r)===o&&u){let d=-1;for(;++d<e.children.length;){let h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),r.bulletCurrent=o;let c=r.containerFlow(e,n);return r.bulletLastUsed=o,r.bulletCurrent=s,i(),c}function kX(e){let t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function CX(e,t,r,n){let i=kX(r),s=r.bulletCurrent||_1(r);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);let a=r.createTracker(n);a.move(s+" ".repeat(o-s.length)),a.shift(o);let l=r.enter("listItem"),c=r.indentLines(r.containerFlow(e,a.current()),u);return l(),c;function u(d,h,f){return h?(f?"":" ".repeat(o))+d:(f?s:s+" ".repeat(o-s.length))+d}}function xX(e,t,r,n){let i=r.enter("paragraph"),s=r.enter("phrasing"),o=r.containerPhrasing(e,n);return s(),i(),o}var HN=(function(e){if(e==null)return LX;if(typeof e=="function")return Og(e);if(typeof e=="object")return Array.isArray(e)?RX(e):IX(e);if(typeof e=="string")return _X(e);throw new Error("Expected function, string, or object as test")});function RX(e){let t=[],r=-1;for(;++r<e.length;)t[r]=HN(e[r]);return Og(n);function n(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function IX(e){let t=e;return Og(r);function r(n){let i=n,s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function _X(e){return Og(t);function t(r){return r&&r.type===e}}function Og(e){return t;function t(r,n,i){return!!(PX(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function LX(){return!0}function PX(e){return e!==null&&typeof e=="object"&&"type"in e}var DX=HN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function OX(e,t,r,n){return(e.children.some(function(i){return DX(i)})?r.containerPhrasing:r.containerFlow).call(r,e,n)}function NX(e){let t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}zN.peek=MX;function zN(e,t,r,n){let i=NX(r),s=r.enter("strong"),o=r.createTracker(n),a=o.move(i+i),l=o.move(r.containerPhrasing(e,{after:i,before:a,...o.current()})),c=l.charCodeAt(0),u=Cp(n.before.charCodeAt(n.before.length-1),c,i);u.inside&&(l=Mu(c)+l.slice(1));let d=l.charCodeAt(l.length-1),h=Cp(n.after.charCodeAt(0),d,i);h.inside&&(l=l.slice(0,-1)+Mu(d));let f=o.move(i+i);return s(),r.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function MX(e,t,r){return r.options.strong||"*"}function FX(e,t,r,n){return r.safe(e.value,n)}function BX(e){let t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function UX(e,t,r){let n=(UN(r)+(r.options.ruleSpaces?" ":"")).repeat(BX(r));return r.options.ruleSpaces?n.slice(0,-1):n}var HX={blockquote:JY,break:lR,code:iX,definition:oX,emphasis:IN,hardBreak:lR,heading:gX,html:PN,image:DN,imageReference:ON,inlineCode:NN,link:FN,linkReference:BN,list:AX,listItem:CX,paragraph:xX,root:OX,strong:zN,text:FX,thematicBreak:UX},dR=document.createElement("i");function L1(e){let t="&"+e+";";dR.innerHTML=t;let r=dR.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function zX(){return{enter:{table:$X,tableData:hR,tableHeader:hR,tableRow:jX},exit:{codeText:VX,table:GX,tableData:t0,tableHeader:t0,tableRow:t0}}}function $X(e){let t=e._align;this.enter({type:"table",align:t.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function GX(e){this.exit(e),this.data.inTable=void 0}function jX(e){this.enter({type:"tableRow",children:[]},e)}function t0(e){this.exit(e)}function hR(e){this.enter({type:"tableCell",children:[]},e)}function VX(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,WX));let r=this.stack[this.stack.length-1];r.type,r.value=t,this.exit(e)}function WX(e,t){return t==="|"?t:e}function qX(e){let t=e||{},r=t.tableCellPadding,n=t.tablePipeAlign,i=t.stringLength,s=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:l,tableRow:a}};function o(f,p,g,v){return c(u(f,g,v),f.align)}function a(f,p,g,v){let m=d(f,g,v),y=c([m]);return y.slice(0,y.indexOf(`
`))}function l(f,p,g,v){let m=g.enter("tableCell"),y=g.enter("phrasing"),E=g.containerPhrasing(f,{...v,before:s,after:s});return y(),m(),E}function c(f,p){return QY(f,{align:p,alignDelimiters:n,padding:r,stringLength:i})}function u(f,p,g){let v=f.children,m=-1,y=[],E=p.enter("table");for(;++m<v.length;)y[m]=d(v[m],p,g);return E(),y}function d(f,p,g){let v=f.children,m=-1,y=[],E=p.enter("tableRow");for(;++m<v.length;)y[m]=l(v[m],f,p,g);return E(),y}function h(f,p,g){let v=HX.inlineCode(f,p,g);return g.stack.includes("tableCell")&&(v=v.replace(/\|/g,"\\$&")),v}}function KX(e,t,r,n){let i=r.enter("blockquote"),s=r.createTracker(n);s.move("> "),s.shift(2);let o=r.indentLines(r.containerFlow(e,s.current()),YX);return i(),o}function YX(e,t,r){return">"+(r?"":" ")+e}function XX(e,t){return fR(e,t.inConstruct,!0)&&!fR(e,t.notInConstruct,!1)}function fR(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let n=-1;for(;++n<t.length;)if(e.includes(t[n]))return!0;return!1}function pR(e,t,r,n){let i=-1;for(;++i<r.unsafe.length;)if(r.unsafe[i].character===`
`&&XX(r.stack,r.unsafe[i]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function QX(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function ZX(e){let t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function JX(e,t,r,n){let i=ZX(r),s=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(QX(e,r)){let d=r.enter("codeIndented"),h=r.indentLines(s,eQ);return d(),h}let a=r.createTracker(n),l=i.repeat(Math.max(xN(s,i)+1,3)),c=r.enter("codeFenced"),u=a.move(l);if(e.lang){let d=r.enter(`codeFencedLang${o}`);u+=a.move(r.safe(e.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(e.lang&&e.meta){let d=r.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(r.safe(e.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function eQ(e,t,r){return(r?"":"    ")+e}function P1(e){let t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function tQ(e,t,r,n){let i=P1(r),s=i==='"'?"Quote":"Apostrophe",o=r.enter("definition"),a=r.enter("label"),l=r.createTracker(n),c=l.move("[");return c+=l.move(r.safe(r.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(e.url,{before:c,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=r.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(r.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function rQ(e){let t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Fu(e){return"&#x"+e.toString(16).toUpperCase()+";"}function nQ(e){return e!==null&&(e<0||e===32)}var iQ=$N(new RegExp("\\p{P}|\\p{S}","u")),sQ=$N(/\s/);function $N(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function gR(e){if(e===null||nQ(e)||sQ(e))return 1;if(iQ(e))return 2}function xp(e,t,r){let n=gR(e),i=gR(t);return n===void 0?i===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}GN.peek=oQ;function GN(e,t,r,n){let i=rQ(r),s=r.enter("emphasis"),o=r.createTracker(n),a=o.move(i),l=o.move(r.containerPhrasing(e,{after:i,before:a,...o.current()})),c=l.charCodeAt(0),u=xp(n.before.charCodeAt(n.before.length-1),c,i);u.inside&&(l=Fu(c)+l.slice(1));let d=l.charCodeAt(l.length-1),h=xp(n.after.charCodeAt(0),d,i);h.inside&&(l=l.slice(0,-1)+Fu(d));let f=o.move(i);return s(),r.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function oQ(e,t,r){return r.options.emphasis||"*"}var aQ={};function jN(e,t){let r=aQ,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,i=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return VN(e,n,i)}function VN(e,t,r){if(lQ(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return mR(e.children,t,r)}return Array.isArray(e)?mR(e,t,r):""}function mR(e,t,r){let n=[],i=-1;for(;++i<e.length;)n[i]=VN(e[i],t,r);return n.join("")}function lQ(e){return!!(e&&typeof e=="object")}function cQ(e,t){let r=!1;return Pg(e,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,Ap}),!!((!e.depth||e.depth<3)&&jN(e)&&(t.options.setext||r))}function uQ(e,t,r,n){let i=Math.max(Math.min(6,e.depth||1),1),s=r.createTracker(n);if(cQ(e,r)){let u=r.enter("headingSetext"),d=r.enter("phrasing"),h=r.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),u(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}let o="#".repeat(i),a=r.enter("headingAtx"),l=r.enter("phrasing");s.move(o+" ");let c=r.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=Fu(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,r.options.closeAtx&&(c+=" "+o),l(),a(),c}WN.peek=dQ;function WN(e){return e.value||""}function dQ(){return"<"}qN.peek=hQ;function qN(e,t,r,n){let i=P1(r),s=i==='"'?"Quote":"Apostrophe",o=r.enter("image"),a=r.enter("label"),l=r.createTracker(n),c=l.move("![");return c+=l.move(r.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=r.enter("destinationRaw"),c+=l.move(r.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=r.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(r.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function hQ(){return"!"}KN.peek=fQ;function KN(e,t,r,n){let i=e.referenceType,s=r.enter("imageReference"),o=r.enter("label"),a=r.createTracker(n),l=a.move("!["),c=r.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();let u=r.stack;r.stack=[],o=r.enter("reference");let d=r.safe(r.associationId(e),{before:l,after:"]",...a.current()});return o(),r.stack=u,s(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function fQ(){return"!"}YN.peek=pQ;function YN(e,t,r){let n=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(n);)i+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++s<r.unsafe.length;){let o=r.unsafe[s],a=r.compilePattern(o),l;if(o.atBreak)for(;l=a.exec(n);){let c=l.index;n.charCodeAt(c)===10&&n.charCodeAt(c-1)===13&&c--,n=n.slice(0,c)+" "+n.slice(l.index+1)}}return i+n+i}function pQ(){return"`"}function XN(e,t){let r=jN(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}QN.peek=gQ;function QN(e,t,r,n){let i=P1(r),s=i==='"'?"Quote":"Apostrophe",o=r.createTracker(n),a,l;if(XN(e,r)){let u=r.stack;r.stack=[],a=r.enter("autolink");let d=o.move("<");return d+=o.move(r.containerPhrasing(e,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),r.stack=u,d}a=r.enter("link"),l=r.enter("label");let c=o.move("[");return c+=o.move(r.containerPhrasing(e,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(r.safe(e.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=r.enter("destinationRaw"),c+=o.move(r.safe(e.url,{before:c,after:e.title?" ":")",...o.current()}))),l(),e.title&&(l=r.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(r.safe(e.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function gQ(e,t,r){return XN(e,r)?"<":"["}ZN.peek=mQ;function ZN(e,t,r,n){let i=e.referenceType,s=r.enter("linkReference"),o=r.enter("label"),a=r.createTracker(n),l=a.move("["),c=r.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();let u=r.stack;r.stack=[],o=r.enter("reference");let d=r.safe(r.associationId(e),{before:l,after:"]",...a.current()});return o(),r.stack=u,s(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function mQ(){return"["}function D1(e){let t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function vQ(e){let t=D1(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function yQ(e){let t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function JN(e){let t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function EQ(e,t,r,n){let i=r.enter("list"),s=r.bulletCurrent,o=e.ordered?yQ(r):D1(r),a=e.ordered?o==="."?")":".":vQ(r),l=t&&r.bulletLastUsed?o===r.bulletLastUsed:!1;if(!e.ordered){let u=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(l=!0),JN(r)===o&&u){let d=-1;for(;++d<e.children.length;){let h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),r.bulletCurrent=o;let c=r.containerFlow(e,n);return r.bulletLastUsed=o,r.bulletCurrent=s,i(),c}function TQ(e){let t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function SQ(e,t,r,n){let i=TQ(r),s=r.bulletCurrent||D1(r);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);let a=r.createTracker(n);a.move(s+" ".repeat(o-s.length)),a.shift(o);let l=r.enter("listItem"),c=r.indentLines(r.containerFlow(e,a.current()),u);return l(),c;function u(d,h,f){return h?(f?"":" ".repeat(o))+d:(f?s:s+" ".repeat(o-s.length))+d}}function bQ(e,t,r,n){let i=r.enter("paragraph"),s=r.enter("phrasing"),o=r.containerPhrasing(e,n);return s(),i(),o}var eM=(function(e){if(e==null)return CQ;if(typeof e=="function")return Ng(e);if(typeof e=="object")return Array.isArray(e)?wQ(e):AQ(e);if(typeof e=="string")return kQ(e);throw new Error("Expected function, string, or object as test")});function wQ(e){let t=[],r=-1;for(;++r<e.length;)t[r]=eM(e[r]);return Ng(n);function n(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function AQ(e){let t=e;return Ng(r);function r(n){let i=n,s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function kQ(e){return Ng(t);function t(r){return r&&r.type===e}}function Ng(e){return t;function t(r,n,i){return!!(xQ(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function CQ(){return!0}function xQ(e){return e!==null&&typeof e=="object"&&"type"in e}var RQ=eM(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function IQ(e,t,r,n){return(e.children.some(function(i){return RQ(i)})?r.containerPhrasing:r.containerFlow).call(r,e,n)}function _Q(e){let t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}tM.peek=LQ;function tM(e,t,r,n){let i=_Q(r),s=r.enter("strong"),o=r.createTracker(n),a=o.move(i+i),l=o.move(r.containerPhrasing(e,{after:i,before:a,...o.current()})),c=l.charCodeAt(0),u=xp(n.before.charCodeAt(n.before.length-1),c,i);u.inside&&(l=Fu(c)+l.slice(1));let d=l.charCodeAt(l.length-1),h=xp(n.after.charCodeAt(0),d,i);h.inside&&(l=l.slice(0,-1)+Fu(d));let f=o.move(i+i);return s(),r.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function LQ(e,t,r){return r.options.strong||"*"}function PQ(e,t,r,n){return r.safe(e.value,n)}function DQ(e){let t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function OQ(e,t,r){let n=(JN(r)+(r.options.ruleSpaces?" ":"")).repeat(DQ(r));return r.options.ruleSpaces?n.slice(0,-1):n}var NQ={blockquote:KX,break:pR,code:JX,definition:tQ,emphasis:GN,hardBreak:pR,heading:uQ,html:WN,image:qN,imageReference:KN,inlineCode:YN,link:QN,linkReference:ZN,list:EQ,listItem:SQ,paragraph:bQ,root:IQ,strong:tM,text:PQ,thematicBreak:OQ};function MQ(){return{exit:{taskListCheckValueChecked:vR,taskListCheckValueUnchecked:vR,paragraph:BQ}}}function FQ(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:UQ}}}function vR(e){let t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function BQ(e){let t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){let r=this.stack[this.stack.length-1];r.type;let n=r.children[0];if(n&&n.type==="text"){let i=t.children,s=-1,o;for(;++s<i.length;){let a=i[s];if(a.type==="paragraph"){o=a;break}}o===r&&(n.value=n.value.slice(1),n.value.length===0?r.children.shift():r.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,r.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function UQ(e,t,r,n){let i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",a=r.createTracker(n);s&&a.move(o);let l=NQ.listItem(e,t,r,{...n,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function HQ(){return[TY(),zY(),VY(),zX(),MQ()]}function zQ(e){return{extensions:[SY(),$Y(e),WY(),qX(e),FQ()]}}function $Q(e,t,r,n){let i=e.length,s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(t,r),e.splice(...o);else for(r&&e.splice(t,r);s<n.length;)o=n.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}var yR={}.hasOwnProperty;function GQ(e){let t={},r=-1;for(;++r<e.length;)jQ(t,e[r]);return t}function jQ(e,t){let r;for(r in t){let n=(yR.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r],s;if(i)for(s in i){yR.call(n,s)||(n[s]=[]);let o=i[s];VQ(n[s],Array.isArray(o)?o:o?[o]:[])}}}function VQ(e,t){let r=-1,n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);$Q(e,0,0,n)}var Bu=Mg(/[A-Za-z]/),O1=Mg(/[\dA-Za-z]/);function WQ(e){return e!==null&&(e<32||e===127)}function Il(e){return e!==null&&(e<0||e===32)}var rM=Mg(new RegExp("\\p{P}|\\p{S}","u")),Uu=Mg(/\s/);function Mg(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}var qQ={tokenize:JQ,partial:!0},nM={tokenize:eZ,partial:!0},iM={tokenize:tZ,partial:!0},sM={tokenize:rZ,partial:!0},KQ={tokenize:nZ,partial:!0},oM={name:"wwwAutolink",tokenize:QQ,previous:lM},aM={name:"protocolAutolink",tokenize:ZQ,previous:cM},os={name:"emailAutolink",tokenize:XQ,previous:uM},xi={};function YQ(){return{text:xi}}var ko=48;for(;ko<123;)xi[ko]=os,ko++,ko===58?ko=65:ko===91&&(ko=97);xi[43]=os;xi[45]=os;xi[46]=os;xi[95]=os;xi[72]=[os,aM];xi[104]=[os,aM];xi[87]=[os,oM];xi[119]=[os,oM];function XQ(e,t,r){let n=this,i,s;return o;function o(d){return!jE(d)||!uM.call(n,n.previous)||N1(n.events)?r(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(d))}function a(d){return jE(d)?(e.consume(d),a):d===64?(e.consume(d),l):r(d)}function l(d){return d===46?e.check(KQ,u,c)(d):d===45||d===95||O1(d)?(s=!0,e.consume(d),l):u(d)}function c(d){return e.consume(d),i=!0,l}function u(d){return s&&i&&Bu(n.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):r(d)}}function QQ(e,t,r){let n=this;return i;function i(o){return o!==87&&o!==119||!lM.call(n,n.previous)||N1(n.events)?r(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(qQ,e.attempt(nM,e.attempt(iM,s),r),r)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function ZQ(e,t,r){let n=this,i="",s=!1;return o;function o(d){return(d===72||d===104)&&cM.call(n,n.previous)&&!N1(n.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),e.consume(d),a):r(d)}function a(d){if(Bu(d)&&i.length<5)return i+=String.fromCodePoint(d),e.consume(d),a;if(d===58){let h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(d),l}return r(d)}function l(d){return d===47?(e.consume(d),s?c:(s=!0,l)):r(d)}function c(d){return d===null||WQ(d)||Il(d)||Uu(d)||rM(d)?r(d):e.attempt(nM,e.attempt(iM,u),r)(d)}function u(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function JQ(e,t,r){let n=0;return i;function i(o){return(o===87||o===119)&&n<3?(n++,e.consume(o),i):o===46&&n===3?(e.consume(o),s):r(o)}function s(o){return o===null?r(o):t(o)}}function eZ(e,t,r){let n,i,s;return o;function o(c){return c===46||c===95?e.check(sM,l,a)(c):c===null||Il(c)||Uu(c)||c!==45&&rM(c)?l(c):(s=!0,e.consume(c),o)}function a(c){return c===95?n=!0:(i=n,n=void 0),e.consume(c),o}function l(c){return i||n||!s?r(c):t(c)}}function tZ(e,t){let r=0,n=0;return i;function i(o){return o===40?(r++,e.consume(o),i):o===41&&n<r?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(sM,t,s)(o):o===null||Il(o)||Uu(o)?t(o):(e.consume(o),i)}function s(o){return o===41&&n++,e.consume(o),i}}function rZ(e,t,r){return n;function n(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),n):a===38?(e.consume(a),s):a===93?(e.consume(a),i):a===60||a===null||Il(a)||Uu(a)?t(a):r(a)}function i(a){return a===null||a===40||a===91||Il(a)||Uu(a)?t(a):n(a)}function s(a){return Bu(a)?o(a):r(a)}function o(a){return a===59?(e.consume(a),n):Bu(a)?(e.consume(a),o):r(a)}}function nZ(e,t,r){return n;function n(s){return e.consume(s),i}function i(s){return O1(s)?r(s):t(s)}}function lM(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Il(e)}function cM(e){return!Bu(e)}function uM(e){return!(e===47||jE(e))}function jE(e){return e===43||e===45||e===46||e===95||O1(e)}function N1(e){let t=e.length,r=!1;for(;t--;){let n=e[t][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}function iZ(e){return e!==null&&e<-2}function Rp(e){return e!==null&&(e<0||e===32)}function VE(e){return e===-2||e===-1||e===32}function M1(e,t,r,n){let i=n?n-1:Number.POSITIVE_INFINITY,s=0;return o;function o(l){return VE(l)?(e.enter(r),a(l)):t(l)}function a(l){return VE(l)&&s++<i?(e.consume(l),a):(e.exit(r),t(l))}}var sZ={partial:!0,tokenize:oZ};function oZ(e,t,r){return n;function n(s){return VE(s)?M1(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||iZ(s)?t(s):r(s)}}function F1(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}var aZ={tokenize:gZ,partial:!0};function lZ(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:hZ,continuation:{tokenize:fZ},exit:pZ}},text:{91:{name:"gfmFootnoteCall",tokenize:dZ},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:cZ,resolveTo:uZ}}}}function cZ(e,t,r){let n=this,i=n.events.length,s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]),o;for(;i--;){let l=n.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return r(l);let c=F1(n.sliceSerialize({start:o.end,end:n.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?r(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function uZ(e,t){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";let n={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;let s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[e[r+1],e[r+2],["enter",n,t],e[r+3],e[r+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",n,t]];return e.splice(r,e.length-r+1,...a),e}function dZ(e,t,r){let n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]),s=0,o;return a;function a(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?r(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(d){if(s>999||d===93&&!o||d===null||d===91||Rp(d))return r(d);if(d===93){e.exit("chunkString");let h=e.exit("gfmFootnoteCallString");return i.includes(F1(n.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(d)}return Rp(d)||(o=!0),s++,e.consume(d),d===92?u:c}function u(d){return d===91||d===92||d===93?(e.consume(d),s++,c):c(d)}}function hZ(e,t,r){let n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]),s,o=0,a;return l;function l(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):r(p)}function u(p){if(o>999||p===93&&!a||p===null||p===91||Rp(p))return r(p);if(p===93){e.exit("chunkString");let g=e.exit("gfmFootnoteDefinitionLabelString");return s=F1(n.sliceSerialize(g)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return Rp(p)||(a=!0),o++,e.consume(p),p===92?d:u}function d(p){return p===91||p===92||p===93?(e.consume(p),o++,u):u(p)}function h(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),i.includes(s)||i.push(s),M1(e,f,"gfmFootnoteDefinitionWhitespace")):r(p)}function f(p){return t(p)}}function fZ(e,t,r){return e.check(sZ,t,e.attempt(aZ,t,r))}function pZ(e){e.exit("gfmFootnoteDefinition")}function gZ(e,t,r){let n=this;return M1(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){let o=n.events[n.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):r(s)}}function r0(e,t,r,n){let i=e.length,s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(t,r),e.splice(...o);else for(r&&e.splice(t,r);s<n.length;)o=n.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function mZ(e){return e!==null&&(e<0||e===32)}var vZ=dM(new RegExp("\\p{P}|\\p{S}","u")),yZ=dM(/\s/);function dM(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function ER(e){if(e===null||mZ(e)||yZ(e))return 1;if(vZ(e))return 2}function EZ(e,t,r){let n=[],i=-1;for(;++i<e.length;){let s=e[i].resolveAll;s&&!n.includes(s)&&(t=s(t,r),n.push(s))}return t}function TZ(e){let t=(e||{}).singleTilde,r={name:"strikethrough",tokenize:i,resolveAll:n};return t==null&&(t=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function n(s,o){let a=-1;for(;++a<s.length;)if(s[a][0]==="enter"&&s[a][1].type==="strikethroughSequenceTemporary"&&s[a][1]._close){let l=a;for(;l--;)if(s[l][0]==="exit"&&s[l][1].type==="strikethroughSequenceTemporary"&&s[l][1]._open&&s[a][1].end.offset-s[a][1].start.offset===s[l][1].end.offset-s[l][1].start.offset){s[a][1].type="strikethroughSequence",s[l][1].type="strikethroughSequence";let c={type:"strikethrough",start:Object.assign({},s[l][1].start),end:Object.assign({},s[a][1].end)},u={type:"strikethroughText",start:Object.assign({},s[l][1].end),end:Object.assign({},s[a][1].start)},d=[["enter",c,o],["enter",s[l][1],o],["exit",s[l][1],o],["enter",u,o]],h=o.parser.constructs.insideSpan.null;h&&r0(d,d.length,0,EZ(h,s.slice(l+1,a),o)),r0(d,d.length,0,[["exit",u,o],["enter",s[a][1],o],["exit",s[a][1],o],["exit",c,o]]),r0(s,l-1,a-l+3,d),a=l+d.length-2;break}}for(a=-1;++a<s.length;)s[a][1].type==="strikethroughSequenceTemporary"&&(s[a][1].type="data");return s}function i(s,o,a){let l=this.previous,c=this.events,u=0;return d;function d(f){return l===126&&c[c.length-1][1].type!=="characterEscape"?a(f):(s.enter("strikethroughSequenceTemporary"),h(f))}function h(f){let p=ER(l);if(f===126)return u>1?a(f):(s.consume(f),u++,h);if(u<2&&!t)return a(f);let g=s.exit("strikethroughSequenceTemporary"),v=ER(f);return g._open=!v||v===2&&!!p,g._close=!p||p===2&&!!v,o(f)}}}function cf(e){return e!==null&&e<-2}function TR(e){return e!==null&&(e<0||e===32)}function Do(e){return e===-2||e===-1||e===32}function Jc(e,t,r,n){let i=n?n-1:Number.POSITIVE_INFINITY,s=0;return o;function o(l){return Do(l)?(e.enter(r),a(l)):t(l)}function a(l){return Do(l)&&s++<i?(e.consume(l),a):(e.exit(r),t(l))}}var WE=class{constructor(){this.map=[]}add(t,r,n){SZ(this,t,r,n)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let r=this.map.length,n=[];for(;r>0;)r-=1,n.push(t.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),t.length=this.map[r][0];n.push(t.slice()),t.length=0;let i=n.pop();for(;i;){for(let s of i)t.push(s);i=n.pop()}this.map.length=0}};function SZ(e,t,r,n){let i=0;if(!(r===0&&n.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=r,e.map[i][2].push(...n);return}i+=1}e.map.push([t,r,n])}}function bZ(e,t){let r=!1,n=[];for(;t<e.length;){let i=e[t];if(r){if(i[0]==="enter")i[1].type==="tableContent"&&n.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){let s=n.length-1;n[s]=n[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return n}function wZ(){return{flow:{null:{name:"table",tokenize:AZ,resolveAll:kZ}}}}function AZ(e,t,r){let n=this,i=0,s=0,o;return a;function a(C){let P=n.events.length-1;for(;P>-1;){let K=n.events[P][1].type;if(K==="lineEnding"||K==="linePrefix")P--;else break}let U=P>-1?n.events[P][1].type:null,G=U==="tableHead"||U==="tableRow"?w:l;return G===w&&n.parser.lazy[n.now().line]?r(C):G(C)}function l(C){return e.enter("tableHead"),e.enter("tableRow"),c(C)}function c(C){return C===124||(o=!0,s+=1),u(C)}function u(C){return C===null?r(C):cf(C)?s>1?(s=0,n.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),f):r(C):Do(C)?Jc(e,u,"whitespace")(C):(s+=1,o&&(o=!1,i+=1),C===124?(e.enter("tableCellDivider"),e.consume(C),e.exit("tableCellDivider"),o=!0,u):(e.enter("data"),d(C)))}function d(C){return C===null||C===124||TR(C)?(e.exit("data"),u(C)):(e.consume(C),C===92?h:d)}function h(C){return C===92||C===124?(e.consume(C),d):d(C)}function f(C){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(C):(e.enter("tableDelimiterRow"),o=!1,Do(C)?Jc(e,p,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):p(C))}function p(C){return C===45||C===58?v(C):C===124?(o=!0,e.enter("tableCellDivider"),e.consume(C),e.exit("tableCellDivider"),g):b(C)}function g(C){return Do(C)?Jc(e,v,"whitespace")(C):v(C)}function v(C){return C===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(C),e.exit("tableDelimiterMarker"),m):C===45?(s+=1,m(C)):C===null||cf(C)?S(C):b(C)}function m(C){return C===45?(e.enter("tableDelimiterFiller"),y(C)):b(C)}function y(C){return C===45?(e.consume(C),y):C===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(C),e.exit("tableDelimiterMarker"),E):(e.exit("tableDelimiterFiller"),E(C))}function E(C){return Do(C)?Jc(e,S,"whitespace")(C):S(C)}function S(C){return C===124?p(C):C===null||cf(C)?!o||i!==s?b(C):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(C)):b(C)}function b(C){return r(C)}function w(C){return e.enter("tableRow"),x(C)}function x(C){return C===124?(e.enter("tableCellDivider"),e.consume(C),e.exit("tableCellDivider"),x):C===null||cf(C)?(e.exit("tableRow"),t(C)):Do(C)?Jc(e,x,"whitespace")(C):(e.enter("data"),D(C))}function D(C){return C===null||C===124||TR(C)?(e.exit("data"),x(C)):(e.consume(C),C===92?N:D)}function N(C){return C===92||C===124?(e.consume(C),D):D(C)}}function kZ(e,t){let r=-1,n=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,d,h=new WE;for(;++r<e.length;){let f=e[r],p=f[1];f[0]==="enter"?p.type==="tableHead"?(a=!1,l!==0&&(SR(h,t,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(r,0,[["enter",c,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(n=!0,d=void 0,s=[0,0,0,0],o=[0,r+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(r,0,[["enter",u,t]])),i=p.type==="tableDelimiterRow"?2:u?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(n=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=uf(h,t,s,i,void 0,d),s=[0,0,0,0]),o[2]=r)):p.type==="tableCellDivider"&&(n?n=!1:(s[1]!==0&&(o[0]=o[1],d=uf(h,t,s,i,void 0,d)),s=o,o=[s[1],r,0,0])):p.type==="tableHead"?(a=!0,l=r):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=r,s[1]!==0?(o[0]=o[1],d=uf(h,t,s,i,r,d)):o[1]!==0&&(d=uf(h,t,o,i,r,d)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=r)}for(l!==0&&SR(h,t,l,c,u),h.consume(t.events),r=-1;++r<t.events.length;){let f=t.events[r];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=bZ(t.events,r))}return e}function uf(e,t,r,n,i,s){let o=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",a="tableContent";r[0]!==0&&(s.end=Object.assign({},ol(t.events,r[0])),e.add(r[0],0,[["exit",s,t]]));let l=ol(t.events,r[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},e.add(r[1],0,[["enter",s,t]]),r[2]!==0){let c=ol(t.events,r[2]),u=ol(t.events,r[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(e.add(r[2],0,[["enter",d,t]]),n!==2){let h=t.events[r[2]],f=t.events[r[3]];if(h[1].end=Object.assign({},f[1].end),h[1].type="chunkText",h[1].contentType="text",r[3]>r[2]+1){let p=r[2]+1,g=r[3]-r[2]-1;e.add(p,g,[])}}e.add(r[3]+1,0,[["exit",d,t]])}return i!==void 0&&(s.end=Object.assign({},ol(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function SR(e,t,r,n,i){let s=[],o=ol(t.events,r);i&&(i.end=Object.assign({},o),s.push(["exit",i,t])),n.end=Object.assign({},o),s.push(["exit",n,t]),e.add(r+1,0,s)}function ol(e,t){let r=e[t],n=r[0]==="enter"?"start":"end";return r[1][n]}function CZ(e){return e!==null&&e<-2}function xZ(e){return e!==null&&(e<0||e===32)}function qE(e){return e===-2||e===-1||e===32}function RZ(e,t,r,n){let i=Number.POSITIVE_INFINITY,s=0;return o;function o(l){return qE(l)?(e.enter(r),a(l)):t(l)}function a(l){return qE(l)&&s++<i?(e.consume(l),a):(e.exit(r),t(l))}}var IZ={name:"tasklistCheck",tokenize:LZ};function _Z(){return{text:{91:IZ}}}function LZ(e,t,r){let n=this;return i;function i(l){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?r(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),s)}function s(l){return xZ(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),o):r(l)}function o(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):r(l)}function a(l){return CZ(l)?t(l):qE(l)?e.check({tokenize:PZ},t,r)(l):r(l)}}function PZ(e,t,r){return RZ(e,n,"whitespace");function n(i){return i===null?r(i):t(i)}}function DZ(e){return GQ([YQ(),lZ(),TZ(e),wZ(),_Z()])}var OZ={};function NZ(e){let t=this,r=e||OZ,n=t.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),o=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(DZ(r)),s.push(HQ()),o.push(zQ(r))}var MZ={};function FZ(e,t){let r=MZ,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,i=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return hM(e,n,i)}function hM(e,t,r){if(BZ(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return bR(e.children,t,r)}return Array.isArray(e)?bR(e,t,r):""}function bR(e,t,r){let n=[],i=-1;for(;++i<e.length;)n[i]=hM(e[i],t,r);return n.join("")}function BZ(e){return!!(e&&typeof e=="object")}function Si(e,t,r,n){let i=e.length,s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(t,r),e.splice(...o);else for(r&&e.splice(t,r);s<n.length;)o=n.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Ln(e,t){return e.length>0?(Si(e,e.length,0,t),e):t}var wR={}.hasOwnProperty;function UZ(e){let t={},r=-1;for(;++r<e.length;)HZ(t,e[r]);return t}function HZ(e,t){let r;for(r in t){let n=(wR.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r],s;if(i)for(s in i){wR.call(n,s)||(n[s]=[]);let o=i[s];zZ(n[s],Array.isArray(o)?o:o?[o]:[])}}}function zZ(e,t){let r=-1,n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);Si(e,0,0,n)}function fM(e,t){let r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"\uFFFD":String.fromCodePoint(r)}function Tl(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}var pi=Js(/[A-Za-z]/),Yn=Js(/[\dA-Za-z]/),$Z=Js(/[#-'*+\--9=?A-Z^-~]/);function KE(e){return e!==null&&(e<32||e===127)}var YE=Js(/\d/),GZ=Js(/[\dA-Fa-f]/),jZ=Js(/[!-/:-@[-`{-~]/);function $e(e){return e!==null&&e<-2}function Xr(e){return e!==null&&(e<0||e===32)}function at(e){return e===-2||e===-1||e===32}var VZ=Js(new RegExp("\\p{P}|\\p{S}","u")),WZ=Js(/\s/);function Js(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function kt(e,t,r,n){let i=n?n-1:Number.POSITIVE_INFINITY,s=0;return o;function o(l){return at(l)?(e.enter(r),a(l)):t(l)}function a(l){return at(l)&&s++<i?(e.consume(l),a):(e.exit(r),t(l))}}var qZ={tokenize:KZ};function KZ(e){let t=e.attempt(this.parser.constructs.contentInitial,n,i),r;return t;function n(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),kt(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){let l=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=l),r=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return $e(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}var YZ={tokenize:XZ},AR={tokenize:QZ};function XZ(e){let t=this,r=[],n=0,i,s,o;return a;function a(E){if(n<r.length){let S=r[n];return t.containerState=S[1],e.attempt(S[0].continuation,l,c)(E)}return c(E)}function l(E){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&y();let S=t.events.length,b=S,w;for(;b--;)if(t.events[b][0]==="exit"&&t.events[b][1].type==="chunkFlow"){w=t.events[b][1].end;break}m(n);let x=S;for(;x<t.events.length;)t.events[x][1].end={...w},x++;return Si(t.events,b+1,0,t.events.slice(S)),t.events.length=x,c(E)}return a(E)}function c(E){if(n===r.length){if(!i)return h(E);if(i.currentConstruct&&i.currentConstruct.concrete)return p(E);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(AR,u,d)(E)}function u(E){return i&&y(),m(n),h(E)}function d(E){return t.parser.lazy[t.now().line]=n!==r.length,o=t.now().offset,p(E)}function h(E){return t.containerState={},e.attempt(AR,f,p)(E)}function f(E){return n++,r.push([t.currentConstruct,t.containerState]),h(E)}function p(E){if(E===null){i&&y(),m(0),e.consume(E);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),g(E)}function g(E){if(E===null){v(e.exit("chunkFlow"),!0),m(0),e.consume(E);return}return $e(E)?(e.consume(E),v(e.exit("chunkFlow")),n=0,t.interrupt=void 0,a):(e.consume(E),g)}function v(E,S){let b=t.sliceStream(E);if(S&&b.push(null),E.previous=s,s&&(s.next=E),s=E,i.defineSkip(E.start),i.write(b),t.parser.lazy[E.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;let x=t.events.length,D=x,N,C;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){if(N){C=t.events[D][1].end;break}N=!0}for(m(n),w=x;w<t.events.length;)t.events[w][1].end={...C},w++;Si(t.events,D+1,0,t.events.slice(x)),t.events.length=w}}function m(E){let S=r.length;for(;S-- >E;){let b=r[S];t.containerState=b[1],b[0].exit.call(t,e)}r.length=E}function y(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function QZ(e,t,r){return kt(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function kR(e){if(e===null||Xr(e)||WZ(e))return 1;if(VZ(e))return 2}function B1(e,t,r){let n=[],i=-1;for(;++i<e.length;){let s=e[i].resolveAll;s&&!n.includes(s)&&(t=s(t,r),n.push(s))}return t}var XE={name:"attention",resolveAll:ZZ,tokenize:JZ};function ZZ(e,t){let r=-1,n,i,s,o,a,l,c,u;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;l=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;let d={...e[n][1].end},h={...e[r][1].start};CR(d,-l),CR(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...e[n][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:h},s={type:l>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},e[n][1].end={...o.start},e[r][1].start={...a.end},c=[],e[n][1].end.offset-e[n][1].start.offset&&(c=Ln(c,[["enter",e[n][1],t],["exit",e[n][1],t]])),c=Ln(c,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),c=Ln(c,B1(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),c=Ln(c,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[r][1].end.offset-e[r][1].start.offset?(u=2,c=Ln(c,[["enter",e[r][1],t],["exit",e[r][1],t]])):u=0,Si(e,n-1,r-n+3,c),r=n+c.length-u-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function JZ(e,t){let r=this.parser.constructs.attentionMarkers.null,n=this.previous,i=kR(n),s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;let c=e.exit("attentionSequence"),u=kR(l),d=!u||u===2&&i||r.includes(l),h=!i||i===2&&u||r.includes(n);return c._open=!!(s===42?d:d&&(i||!h)),c._close=!!(s===42?h:h&&(u||!d)),t(l)}}function CR(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}var eJ={name:"autolink",tokenize:tJ};function tJ(e,t,r){let n=0;return i;function i(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(f){return pi(f)?(e.consume(f),o):f===64?r(f):c(f)}function o(f){return f===43||f===45||f===46||Yn(f)?(n=1,a(f)):c(f)}function a(f){return f===58?(e.consume(f),n=0,l):(f===43||f===45||f===46||Yn(f))&&n++<32?(e.consume(f),a):(n=0,c(f))}function l(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||KE(f)?r(f):(e.consume(f),l)}function c(f){return f===64?(e.consume(f),u):$Z(f)?(e.consume(f),c):r(f)}function u(f){return Yn(f)?d(f):r(f)}function d(f){return f===46?(e.consume(f),n=0,u):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):h(f)}function h(f){if((f===45||Yn(f))&&n++<63){let p=f===45?h:d;return e.consume(f),p}return r(f)}}var Fg={partial:!0,tokenize:rJ};function rJ(e,t,r){return n;function n(s){return at(s)?kt(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||$e(s)?t(s):r(s)}}var pM={continuation:{tokenize:iJ},exit:sJ,name:"blockQuote",tokenize:nJ};function nJ(e,t,r){let n=this;return i;function i(o){if(o===62){let a=n.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return r(o)}function s(o){return at(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function iJ(e,t,r){let n=this;return i;function i(o){return at(o)?kt(e,s,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(pM,t,r)(o)}}function sJ(e){e.exit("blockQuote")}var gM={name:"characterEscape",tokenize:oJ};function oJ(e,t,r){return n;function n(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return jZ(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(s)}}var mM={name:"characterReference",tokenize:aJ};function aJ(e,t,r){let n=this,i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),s=31,o=Yn,u(d))}function c(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=GZ,u):(e.enter("characterReferenceValue"),s=7,o=YE,u(d))}function u(d){if(d===59&&i){let h=e.exit("characterReferenceValue");return o===Yn&&!L1(n.sliceSerialize(h))?r(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),u):r(d)}}var xR={partial:!0,tokenize:cJ},RR={concrete:!0,name:"codeFenced",tokenize:lJ};function lJ(e,t,r){let n=this,i={partial:!0,tokenize:b},s=0,o=0,a;return l;function l(w){return c(w)}function c(w){let x=n.events[n.events.length-1];return s=x&&x[1].type==="linePrefix"?x[2].sliceSerialize(x[1],!0).length:0,a=w,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(w)}function u(w){return w===a?(o++,e.consume(w),u):o<3?r(w):(e.exit("codeFencedFenceSequence"),at(w)?kt(e,d,"whitespace")(w):d(w))}function d(w){return w===null||$e(w)?(e.exit("codeFencedFence"),n.interrupt?t(w):e.check(xR,g,S)(w)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(w))}function h(w){return w===null||$e(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(w)):at(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),kt(e,f,"whitespace")(w)):w===96&&w===a?r(w):(e.consume(w),h)}function f(w){return w===null||$e(w)?d(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===null||$e(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(w)):w===96&&w===a?r(w):(e.consume(w),p)}function g(w){return e.attempt(i,S,v)(w)}function v(w){return e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),m}function m(w){return s>0&&at(w)?kt(e,y,"linePrefix",s+1)(w):y(w)}function y(w){return w===null||$e(w)?e.check(xR,g,S)(w):(e.enter("codeFlowValue"),E(w))}function E(w){return w===null||$e(w)?(e.exit("codeFlowValue"),y(w)):(e.consume(w),E)}function S(w){return e.exit("codeFenced"),t(w)}function b(w,x,D){let N=0;return C;function C(B){return w.enter("lineEnding"),w.consume(B),w.exit("lineEnding"),P}function P(B){return w.enter("codeFencedFence"),at(B)?kt(w,U,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):U(B)}function U(B){return B===a?(w.enter("codeFencedFenceSequence"),G(B)):D(B)}function G(B){return B===a?(N++,w.consume(B),G):N>=o?(w.exit("codeFencedFenceSequence"),at(B)?kt(w,K,"whitespace")(B):K(B)):D(B)}function K(B){return B===null||$e(B)?(w.exit("codeFencedFence"),x(B)):D(B)}}}function cJ(e,t,r){let n=this;return i;function i(o){return o===null?r(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}var n0={name:"codeIndented",tokenize:dJ},uJ={partial:!0,tokenize:hJ};function dJ(e,t,r){let n=this;return i;function i(c){return e.enter("codeIndented"),kt(e,s,"linePrefix",5)(c)}function s(c){let u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):r(c)}function o(c){return c===null?l(c):$e(c)?e.attempt(uJ,o,l)(c):(e.enter("codeFlowValue"),a(c))}function a(c){return c===null||$e(c)?(e.exit("codeFlowValue"),o(c)):(e.consume(c),a)}function l(c){return e.exit("codeIndented"),t(c)}}function hJ(e,t,r){let n=this;return i;function i(o){return n.parser.lazy[n.now().line]?r(o):$e(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):kt(e,s,"linePrefix",5)(o)}function s(o){let a=n.events[n.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):$e(o)?i(o):r(o)}}var fJ={name:"codeText",previous:gJ,resolve:pJ,tokenize:mJ};function pJ(e){let t=e.length-4,r=3,n,i;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)i===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(i=n):(n===t||e[n][1].type==="lineEnding")&&(e[i][1].type="codeTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),t-=n-i-2,n=i+2),i=void 0);return e}function gJ(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function mJ(e,t,r){let n=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),n++,a):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?r(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):d===96?(s=e.enter("codeTextSequence"),i=0,u(d)):$e(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||$e(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),c)}function u(d){return d===96?(e.consume(d),i++,u):i===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",c(d))}}var QE=class{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){let n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){let i=r||0;this.setCursor(Math.trunc(t));let s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&eu(this.left,n),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),eu(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),eu(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){let r=this.left.splice(t,Number.POSITIVE_INFINITY);eu(this.right,r.reverse())}else{let r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);eu(this.left,r.reverse())}}};function eu(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function vM(e){let t={},r=-1,n,i,s,o,a,l,c,u=new QE(e);for(;++r<u.length;){for(;r in t;)r=t[r];if(n=u.get(r),r&&n[1].type==="chunkFlow"&&u.get(r-1)[1].type==="listItemPrefix"&&(l=n[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,vJ(u,r)),r=t[r],c=!0);else if(n[1]._container){for(s=r,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(n[1].end={...u.get(i)[1].start},a=u.slice(i,r),a.unshift(n),u.splice(i,r-i+1,a))}}return Si(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function vJ(e,t){let r=e.get(t)[1],n=e.get(t)[2],i=t-1,s=[],o=r._tokenizer;o||(o=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));let a=o.events,l=[],c={},u,d,h=-1,f=r,p=0,g=0,v=[g];for(;f;){for(;e.get(++i)[1]!==f;);s.push(i),f._tokenizer||(u=n.sliceStream(f),f.next||u.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=r;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(g=h+1,v.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):v.pop(),h=v.length;h--;){let m=a.slice(v[h],v[h+1]),y=s.pop();l.push([y,y+m.length-1]),e.splice(y,2,m)}for(l.reverse(),h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}var yJ={resolve:TJ,tokenize:SJ},EJ={partial:!0,tokenize:bJ};function TJ(e){return vM(e),e}function SJ(e,t){let r;return n;function n(a){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):$e(a)?e.check(EJ,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,i}}function bJ(e,t,r){let n=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),kt(e,s,"linePrefix")}function s(o){if(o===null||$e(o))return r(o);let a=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(n.parser.constructs.flow,r,t)(o)}}function yM(e,t,r,n,i,s,o,a,l){let c=l||Number.POSITIVE_INFINITY,u=0;return d;function d(m){return m===60?(e.enter(n),e.enter(i),e.enter(s),e.consume(m),e.exit(s),h):m===null||m===32||m===41||KE(m)?r(m):(e.enter(n),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),g(m))}function h(m){return m===62?(e.enter(s),e.consume(m),e.exit(s),e.exit(i),e.exit(n),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===62?(e.exit("chunkString"),e.exit(a),h(m)):m===null||m===60||$e(m)?r(m):(e.consume(m),m===92?p:f)}function p(m){return m===60||m===62||m===92?(e.consume(m),f):f(m)}function g(m){return!u&&(m===null||m===41||Xr(m))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(n),t(m)):u<c&&m===40?(e.consume(m),u++,g):m===41?(e.consume(m),u--,g):m===null||m===32||m===40||KE(m)?r(m):(e.consume(m),m===92?v:g)}function v(m){return m===40||m===41||m===92?(e.consume(m),g):g(m)}}function EM(e,t,r,n,i,s){let o=this,a=0,l;return c;function c(f){return e.enter(n),e.enter(i),e.consume(f),e.exit(i),e.enter(s),u}function u(f){return a>999||f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?r(f):f===93?(e.exit(s),e.enter(i),e.consume(f),e.exit(i),e.exit(n),t):$e(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||$e(f)||a++>999?(e.exit("chunkString"),u(f)):(e.consume(f),l||(l=!at(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(e.consume(f),a++,d):d(f)}}function TM(e,t,r,n,i,s){let o;return a;function a(h){return h===34||h===39||h===40?(e.enter(n),e.enter(i),e.consume(h),e.exit(i),o=h===40?41:h,l):r(h)}function l(h){return h===o?(e.enter(i),e.consume(h),e.exit(i),e.exit(n),t):(e.enter(s),c(h))}function c(h){return h===o?(e.exit(s),l(o)):h===null?r(h):$e(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),kt(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||$e(h)?(e.exit("chunkString"),c(h)):(e.consume(h),h===92?d:u)}function d(h){return h===o||h===92?(e.consume(h),u):u(h)}}function Su(e,t){let r;return n;function n(i){return $e(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),r=!0,n):at(i)?kt(e,n,r?"linePrefix":"lineSuffix")(i):t(i)}}var wJ={name:"definition",tokenize:kJ},AJ={partial:!0,tokenize:CJ};function kJ(e,t,r){let n=this,i;return s;function s(f){return e.enter("definition"),o(f)}function o(f){return EM.call(n,e,a,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return i=Tl(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),l):r(f)}function l(f){return Xr(f)?Su(e,c)(f):c(f)}function c(f){return yM(e,u,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return e.attempt(AJ,d,d)(f)}function d(f){return at(f)?kt(e,h,"whitespace")(f):h(f)}function h(f){return f===null||$e(f)?(e.exit("definition"),n.parser.defined.push(i),t(f)):r(f)}}function CJ(e,t,r){return n;function n(a){return Xr(a)?Su(e,i)(a):r(a)}function i(a){return TM(e,s,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return at(a)?kt(e,o,"whitespace")(a):o(a)}function o(a){return a===null||$e(a)?t(a):r(a)}}var xJ={name:"hardBreakEscape",tokenize:RJ};function RJ(e,t,r){return n;function n(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return $e(s)?(e.exit("hardBreakEscape"),t(s)):r(s)}}var IJ={name:"headingAtx",resolve:_J,tokenize:LJ};function _J(e,t){let r=e.length-2,n=3,i,s;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(i={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},s={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},Si(e,n,r-n+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function LJ(e,t,r){let n=0;return i;function i(u){return e.enter("atxHeading"),s(u)}function s(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&n++<6?(e.consume(u),o):u===null||Xr(u)?(e.exit("atxHeadingSequence"),a(u)):r(u)}function a(u){return u===35?(e.enter("atxHeadingSequence"),l(u)):u===null||$e(u)?(e.exit("atxHeading"),t(u)):at(u)?kt(e,a,"whitespace")(u):(e.enter("atxHeadingText"),c(u))}function l(u){return u===35?(e.consume(u),l):(e.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Xr(u)?(e.exit("atxHeadingText"),a(u)):(e.consume(u),c)}}var PJ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],IR=["pre","script","style","textarea"],DJ={concrete:!0,name:"htmlFlow",resolveTo:MJ,tokenize:FJ},OJ={partial:!0,tokenize:UJ},NJ={partial:!0,tokenize:BJ};function MJ(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function FJ(e,t,r){let n=this,i,s,o,a,l;return c;function c(F){return u(F)}function u(F){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(F),d}function d(F){return F===33?(e.consume(F),h):F===47?(e.consume(F),s=!0,g):F===63?(e.consume(F),i=3,n.interrupt?t:O):pi(F)?(e.consume(F),o=String.fromCharCode(F),v):r(F)}function h(F){return F===45?(e.consume(F),i=2,f):F===91?(e.consume(F),i=5,a=0,p):pi(F)?(e.consume(F),i=4,n.interrupt?t:O):r(F)}function f(F){return F===45?(e.consume(F),n.interrupt?t:O):r(F)}function p(F){let te="CDATA[";return F===te.charCodeAt(a++)?(e.consume(F),a===te.length?n.interrupt?t:U:p):r(F)}function g(F){return pi(F)?(e.consume(F),o=String.fromCharCode(F),v):r(F)}function v(F){if(F===null||F===47||F===62||Xr(F)){let te=F===47,ge=o.toLowerCase();return!te&&!s&&IR.includes(ge)?(i=1,n.interrupt?t(F):U(F)):PJ.includes(o.toLowerCase())?(i=6,te?(e.consume(F),m):n.interrupt?t(F):U(F)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(F):s?y(F):E(F))}return F===45||Yn(F)?(e.consume(F),o+=String.fromCharCode(F),v):r(F)}function m(F){return F===62?(e.consume(F),n.interrupt?t:U):r(F)}function y(F){return at(F)?(e.consume(F),y):C(F)}function E(F){return F===47?(e.consume(F),C):F===58||F===95||pi(F)?(e.consume(F),S):at(F)?(e.consume(F),E):C(F)}function S(F){return F===45||F===46||F===58||F===95||Yn(F)?(e.consume(F),S):b(F)}function b(F){return F===61?(e.consume(F),w):at(F)?(e.consume(F),b):E(F)}function w(F){return F===null||F===60||F===61||F===62||F===96?r(F):F===34||F===39?(e.consume(F),l=F,x):at(F)?(e.consume(F),w):D(F)}function x(F){return F===l?(e.consume(F),l=null,N):F===null||$e(F)?r(F):(e.consume(F),x)}function D(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||Xr(F)?b(F):(e.consume(F),D)}function N(F){return F===47||F===62||at(F)?E(F):r(F)}function C(F){return F===62?(e.consume(F),P):r(F)}function P(F){return F===null||$e(F)?U(F):at(F)?(e.consume(F),P):r(F)}function U(F){return F===45&&i===2?(e.consume(F),V):F===60&&i===1?(e.consume(F),W):F===62&&i===4?(e.consume(F),ie):F===63&&i===3?(e.consume(F),O):F===93&&i===5?(e.consume(F),Y):$e(F)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(OJ,le,G)(F)):F===null||$e(F)?(e.exit("htmlFlowData"),G(F)):(e.consume(F),U)}function G(F){return e.check(NJ,K,le)(F)}function K(F){return e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),B}function B(F){return F===null||$e(F)?G(F):(e.enter("htmlFlowData"),U(F))}function V(F){return F===45?(e.consume(F),O):U(F)}function W(F){return F===47?(e.consume(F),o="",X):U(F)}function X(F){if(F===62){let te=o.toLowerCase();return IR.includes(te)?(e.consume(F),ie):U(F)}return pi(F)&&o.length<8?(e.consume(F),o+=String.fromCharCode(F),X):U(F)}function Y(F){return F===93?(e.consume(F),O):U(F)}function O(F){return F===62?(e.consume(F),ie):F===45&&i===2?(e.consume(F),O):U(F)}function ie(F){return F===null||$e(F)?(e.exit("htmlFlowData"),le(F)):(e.consume(F),ie)}function le(F){return e.exit("htmlFlow"),t(F)}}function BJ(e,t,r){let n=this;return i;function i(o){return $e(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):r(o)}function s(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}function UJ(e,t,r){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Fg,t,r)}}var HJ={name:"htmlText",tokenize:zJ};function zJ(e,t,r){let n=this,i,s,o;return a;function a(O){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(O),l}function l(O){return O===33?(e.consume(O),c):O===47?(e.consume(O),b):O===63?(e.consume(O),E):pi(O)?(e.consume(O),D):r(O)}function c(O){return O===45?(e.consume(O),u):O===91?(e.consume(O),s=0,p):pi(O)?(e.consume(O),y):r(O)}function u(O){return O===45?(e.consume(O),f):r(O)}function d(O){return O===null?r(O):O===45?(e.consume(O),h):$e(O)?(o=d,W(O)):(e.consume(O),d)}function h(O){return O===45?(e.consume(O),f):d(O)}function f(O){return O===62?V(O):O===45?h(O):d(O)}function p(O){let ie="CDATA[";return O===ie.charCodeAt(s++)?(e.consume(O),s===ie.length?g:p):r(O)}function g(O){return O===null?r(O):O===93?(e.consume(O),v):$e(O)?(o=g,W(O)):(e.consume(O),g)}function v(O){return O===93?(e.consume(O),m):g(O)}function m(O){return O===62?V(O):O===93?(e.consume(O),m):g(O)}function y(O){return O===null||O===62?V(O):$e(O)?(o=y,W(O)):(e.consume(O),y)}function E(O){return O===null?r(O):O===63?(e.consume(O),S):$e(O)?(o=E,W(O)):(e.consume(O),E)}function S(O){return O===62?V(O):E(O)}function b(O){return pi(O)?(e.consume(O),w):r(O)}function w(O){return O===45||Yn(O)?(e.consume(O),w):x(O)}function x(O){return $e(O)?(o=x,W(O)):at(O)?(e.consume(O),x):V(O)}function D(O){return O===45||Yn(O)?(e.consume(O),D):O===47||O===62||Xr(O)?N(O):r(O)}function N(O){return O===47?(e.consume(O),V):O===58||O===95||pi(O)?(e.consume(O),C):$e(O)?(o=N,W(O)):at(O)?(e.consume(O),N):V(O)}function C(O){return O===45||O===46||O===58||O===95||Yn(O)?(e.consume(O),C):P(O)}function P(O){return O===61?(e.consume(O),U):$e(O)?(o=P,W(O)):at(O)?(e.consume(O),P):N(O)}function U(O){return O===null||O===60||O===61||O===62||O===96?r(O):O===34||O===39?(e.consume(O),i=O,G):$e(O)?(o=U,W(O)):at(O)?(e.consume(O),U):(e.consume(O),K)}function G(O){return O===i?(e.consume(O),i=void 0,B):O===null?r(O):$e(O)?(o=G,W(O)):(e.consume(O),G)}function K(O){return O===null||O===34||O===39||O===60||O===61||O===96?r(O):O===47||O===62||Xr(O)?N(O):(e.consume(O),K)}function B(O){return O===47||O===62||Xr(O)?N(O):r(O)}function V(O){return O===62?(e.consume(O),e.exit("htmlTextData"),e.exit("htmlText"),t):r(O)}function W(O){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),X}function X(O){return at(O)?kt(e,Y,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):Y(O)}function Y(O){return e.enter("htmlTextData"),o(O)}}var U1={name:"labelEnd",resolveAll:VJ,resolveTo:WJ,tokenize:qJ},$J={tokenize:KJ},GJ={tokenize:YJ},jJ={tokenize:XJ};function VJ(e){let t=-1,r=[];for(;++t<e.length;){let n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){let i=n.type==="labelImage"?4:2;n.type="data",t+=i}}return e.length!==r.length&&Si(e,0,e.length,r),e}function WJ(e,t){let r=e.length,n=0,i,s,o,a;for(;r--;)if(i=e[r][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[r][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[r][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=r,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(o=r);let l={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},u={type:"labelText",start:{...e[s+n+2][1].end},end:{...e[o-2][1].start}};return a=[["enter",l,t],["enter",c,t]],a=Ln(a,e.slice(s+1,s+n+3)),a=Ln(a,[["enter",u,t]]),a=Ln(a,B1(t.parser.constructs.insideSpan.null,e.slice(s+n+4,o-3),t)),a=Ln(a,[["exit",u,t],e[o-2],e[o-1],["exit",c,t]]),a=Ln(a,e.slice(o+1)),a=Ln(a,[["exit",l,t]]),Si(e,s,e.length,a),e}function qJ(e,t,r){let n=this,i=n.events.length,s,o;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){s=n.events[i][1];break}return a;function a(h){return s?s._inactive?d(h):(o=n.parser.defined.includes(Tl(n.sliceSerialize({start:s.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),l):r(h)}function l(h){return h===40?e.attempt($J,u,o?u:d)(h):h===91?e.attempt(GJ,u,o?c:d)(h):o?u(h):d(h)}function c(h){return e.attempt(jJ,u,d)(h)}function u(h){return t(h)}function d(h){return s._balanced=!0,r(h)}}function KJ(e,t,r){return n;function n(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return Xr(d)?Su(e,s)(d):s(d)}function s(d){return d===41?u(d):yM(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Xr(d)?Su(e,l)(d):u(d)}function a(d){return r(d)}function l(d){return d===34||d===39||d===40?TM(e,c,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return Xr(d)?Su(e,u)(d):u(d)}function u(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):r(d)}}function YJ(e,t,r){let n=this;return i;function i(a){return EM.call(n,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return n.parser.defined.includes(Tl(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(a):r(a)}function o(a){return r(a)}}function XJ(e,t,r){return n;function n(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):r(s)}}var QJ={name:"labelStartImage",resolveAll:U1.resolveAll,tokenize:ZJ};function ZJ(e,t,r){let n=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):r(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(a):t(a)}}var JJ={name:"labelStartLink",resolveAll:U1.resolveAll,tokenize:eee};function eee(e,t,r){let n=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):t(o)}}var i0={name:"lineEnding",tokenize:tee};function tee(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),kt(e,t,"linePrefix")}}var Kf={name:"thematicBreak",tokenize:ree};function ree(e,t,r){let n=0,i;return s;function s(c){return e.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(e.enter("thematicBreakSequence"),l(c)):n>=3&&(c===null||$e(c))?(e.exit("thematicBreak"),t(c)):r(c)}function l(c){return c===i?(e.consume(c),n++,l):(e.exit("thematicBreakSequence"),at(c)?kt(e,a,"whitespace")(c):a(c))}}var qr={continuation:{tokenize:oee},exit:lee,name:"list",tokenize:see},nee={partial:!0,tokenize:cee},iee={partial:!0,tokenize:aee};function see(e,t,r){let n=this,i=n.events[n.events.length-1],s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(f){let p=n.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!n.containerState.marker||f===n.containerState.marker:YE(f)){if(n.containerState.type||(n.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(Kf,r,c)(f):c(f);if(!n.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(f)}return r(f)}function l(f){return YE(f)&&++o<10?(e.consume(f),l):(!n.interrupt||o<2)&&(n.containerState.marker?f===n.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),c(f)):r(f)}function c(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||f,e.check(Fg,n.interrupt?r:u,e.attempt(nee,h,d))}function u(f){return n.containerState.initialBlankLine=!0,s++,h(f)}function d(f){return at(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),h):r(f)}function h(f){return n.containerState.size=s+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function oee(e,t,r){let n=this;return n.containerState._closeFlow=void 0,e.check(Fg,i,s);function i(a){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,kt(e,t,"listItemIndent",n.containerState.size+1)(a)}function s(a){return n.containerState.furtherBlankLines||!at(a)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(a)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(iee,t,o)(a))}function o(a){return n.containerState._closeFlow=!0,n.interrupt=void 0,kt(e,e.attempt(qr,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function aee(e,t,r){let n=this;return kt(e,i,"listItemIndent",n.containerState.size+1);function i(s){let o=n.events[n.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?t(s):r(s)}}function lee(e){e.exit(this.containerState.type)}function cee(e,t,r){let n=this;return kt(e,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){let o=n.events[n.events.length-1];return!at(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):r(s)}}var _R={name:"setextUnderline",resolveTo:uee,tokenize:dee};function uee(e,t){let r=e.length,n,i,s;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(i=r)}else e[r][1].type==="content"&&e.splice(r,1),!s&&e[r][1].type==="definition"&&(s=r);let o={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[n][1],t]),e[n][1].end={...e[s][1].end}):e[n][1]=o,e.push(["exit",o,t]),e}function dee(e,t,r){let n=this,i;return s;function s(c){let u=n.events.length,d;for(;u--;)if(n.events[u][1].type!=="lineEnding"&&n.events[u][1].type!=="linePrefix"&&n.events[u][1].type!=="content"){d=n.events[u][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||d)?(e.enter("setextHeadingLine"),i=c,o(c)):r(c)}function o(c){return e.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(e.consume(c),a):(e.exit("setextHeadingLineSequence"),at(c)?kt(e,l,"lineSuffix")(c):l(c))}function l(c){return c===null||$e(c)?(e.exit("setextHeadingLine"),t(c)):r(c)}}var hee={tokenize:fee};function fee(e){let t=this,r=e.attempt(Fg,n,e.attempt(this.parser.constructs.flowInitial,i,kt(e,e.attempt(this.parser.constructs.flow,i,e.attempt(yJ,i)),"linePrefix")));return r;function n(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,r}}var pee={resolveAll:bM()},gee=SM("string"),mee=SM("text");function SM(e){return{resolveAll:bM(e==="text"?vee:void 0),tokenize:t};function t(r){let n=this,i=this.parser.constructs[e],s=r.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){r.consume(u);return}return r.enter("data"),r.consume(u),l}function l(u){return c(u)?(r.exit("data"),s(u)):(r.consume(u),l)}function c(u){if(u===null)return!0;let d=i[u],h=-1;if(d)for(;++h<d.length;){let f=d[h];if(!f.previous||f.previous.call(n,n.previous))return!0}return!1}}}function bM(e){return t;function t(r,n){let i=-1,s;for(;++i<=r.length;)s===void 0?r[i]&&r[i][1].type==="data"&&(s=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==s+2&&(r[s][1].end=r[i-1][1].end,r.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(r,n):r}}function vee(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){let n=e[r-1][1],i=t.sliceStream(n),s=i.length,o=-1,a=0,l;for(;s--;){let c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(a=0),a){let c={type:r===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:n.start._bufferIndex+o,_index:n.start._index+s,line:n.end.line,column:n.end.column-a,offset:n.end.offset-a},end:{...n.end}};n.end={...c.start},n.start.offset===n.end.offset?Object.assign(n,c):(e.splice(r,0,["enter",c,t],["exit",c,t]),r+=2)}r++}return e}var yee={42:qr,43:qr,45:qr,48:qr,49:qr,50:qr,51:qr,52:qr,53:qr,54:qr,55:qr,56:qr,57:qr,62:pM},Eee={91:wJ},Tee={[-2]:n0,[-1]:n0,32:n0},See={35:IJ,42:Kf,45:[_R,Kf],60:DJ,61:_R,95:Kf,96:RR,126:RR},bee={38:mM,92:gM},wee={[-5]:i0,[-4]:i0,[-3]:i0,33:QJ,38:mM,42:XE,60:[eJ,HJ],91:JJ,92:[xJ,gM],93:U1,95:XE,96:fJ},Aee={null:[XE,pee]},kee={null:[42,95]},Cee={null:[]},xee=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:kee,contentInitial:Eee,disable:Cee,document:yee,flow:See,flowInitial:Tee,insideSpan:Aee,string:bee,text:wee},Symbol.toStringTag,{value:"Module"}));function Ree(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0},i={},s=[],o=[],a=[],l={attempt:x(b),check:x(w),consume:y,enter:E,exit:S,interrupt:x(w,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:e,previous:null,sliceSerialize:h,sliceStream:f,write:d},u=t.tokenize.call(c,l);return t.resolveAll&&s.push(t),c;function d(P){return o=Ln(o,P),v(),o[o.length-1]!==null?[]:(D(t,0),c.events=B1(s,c.events,c),c.events)}function h(P,U){return _ee(f(P),U)}function f(P){return Iee(o,P)}function p(){let{_bufferIndex:P,_index:U,line:G,column:K,offset:B}=n;return{_bufferIndex:P,_index:U,line:G,column:K,offset:B}}function g(P){i[P.line]=P.column,C()}function v(){let P;for(;n._index<o.length;){let U=o[n._index];if(typeof U=="string")for(P=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===P&&n._bufferIndex<U.length;)m(U.charCodeAt(n._bufferIndex));else m(U)}}function m(P){u=u(P)}function y(P){$e(P)?(n.line++,n.column=1,n.offset+=P===-3?2:1,C()):P!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),c.previous=P}function E(P,U){let G=U||{};return G.type=P,G.start=p(),c.events.push(["enter",G,c]),a.push(G),G}function S(P){let U=a.pop();return U.end=p(),c.events.push(["exit",U,c]),U}function b(P,U){D(P,U.from)}function w(P,U){U.restore()}function x(P,U){return G;function G(K,B,V){let W,X,Y,O;return Array.isArray(K)?le(K):"tokenize"in K?le([K]):ie(K);function ie(Ce){return de;function de(we){let Le=we!==null&&Ce[we],Pe=we!==null&&Ce.null,Se=[...Array.isArray(Le)?Le:Le?[Le]:[],...Array.isArray(Pe)?Pe:Pe?[Pe]:[]];return le(Se)(we)}}function le(Ce){return W=Ce,X=0,Ce.length===0?V:F(Ce[X])}function F(Ce){return de;function de(we){return O=N(),Y=Ce,Ce.partial||(c.currentConstruct=Ce),Ce.name&&c.parser.constructs.disable.null.includes(Ce.name)?ge():Ce.tokenize.call(U?Object.assign(Object.create(c),U):c,l,te,ge)(we)}}function te(Ce){return P(Y,O),B}function ge(Ce){return O.restore(),++X<W.length?F(W[X]):V}}}function D(P,U){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&Si(c.events,U,c.events.length-U,P.resolve(c.events.slice(U),c)),P.resolveTo&&(c.events=P.resolveTo(c.events,c))}function N(){let P=p(),U=c.previous,G=c.currentConstruct,K=c.events.length,B=Array.from(a);return{from:K,restore:V};function V(){n=P,c.previous=U,c.currentConstruct=G,c.events.length=K,a=B,C()}}function C(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function Iee(e,t){let r=t.start._index,n=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex,o;if(r===i)o=[e[r].slice(n,s)];else{if(o=e.slice(r,i),n>-1){let a=o[0];typeof a=="string"?o[0]=a.slice(n):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function _ee(e,t){let r=-1,n=[],i;for(;++r<e.length;){let s=e[r],o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,n.push(o)}return n.join("")}function Lee(e){let t={constructs:UZ([xee,...(e||{}).extensions||[]]),content:r(qZ),defined:[],document:r(YZ),flow:r(hee),lazy:{},string:r(gee),text:r(mee)};return t;function r(n){return i;function i(s){return Ree(t,n,s)}}}function Pee(e){for(;!vM(e););return e}var LR=/[\0\t\n\r]/g;function Dee(){let e=1,t="",r=!0,n;return i;function i(s,o,a){let l=[],c,u,d,h,f;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",r&&(s.charCodeAt(0)===65279&&d++,r=void 0);d<s.length;){if(LR.lastIndex=d,c=LR.exec(s),h=c&&c.index!==void 0?c.index:s.length,f=s.charCodeAt(h),!c){t=s.slice(d);break}if(f===10&&d===h&&n)l.push(-3),n=void 0;else switch(n&&(l.push(-5),n=void 0),d<h&&(l.push(s.slice(d,h)),e+=h-d),f){case 0:{l.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,l.push(-2);e++<u;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:n=!0,e=1}d=h+1}return a&&(n&&l.push(-5),t&&l.push(t),l.push(null)),l}}var Oee=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Nee(e){return e.replace(Oee,Mee)}function Mee(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){let n=r.charCodeAt(1),i=n===120||n===88;return fM(r.slice(i?2:1),i?16:10)}return L1(r)||e}function Yf(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?PR(e.position):"start"in e||"end"in e?PR(e):"line"in e||"column"in e?ZE(e):""}function ZE(e){return DR(e&&e.line)+":"+DR(e&&e.column)}function PR(e){return ZE(e&&e.start)+"-"+ZE(e&&e.end)}function DR(e){return e&&typeof e=="number"?e:1}var wM={}.hasOwnProperty;function Fee(e,t,r){return typeof t!="string"&&(r=t,t=void 0),Bee(r)(Pee(Lee(r).document().write(Dee()(e,t,!0))))}function Bee(e){let t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(J),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(Ct),blockQuote:s(Pe),characterEscape:N,characterReference:N,codeFenced:s(Se),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Se,o),codeText:s(Ue,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(Ve),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(_t),hardBreakEscape:s(Gt),hardBreakTrailing:s(Gt),htmlFlow:s(A,o),htmlFlowData:N,htmlText:s(A,o),htmlTextData:N,image:s(H),label:o,link:s(J),listItem:s(ue),listItemValue:h,listOrdered:s(me,d),listUnordered:s(me),paragraph:s(Be),reference:F,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ct),strong:s(Ae),thematicBreak:s(ht)},exit:{atxHeading:l(),atxHeadingSequence:b,autolink:l(),autolinkEmail:Le,autolinkProtocol:we,blockQuote:l(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:Ce,characterReference:de,codeFenced:l(v),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:C,codeIndented:l(m),codeText:l(B),codeTextData:C,data:C,definition:l(),definitionDestinationString:S,definitionLabelString:y,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(U),hardBreakTrailing:l(U),htmlFlow:l(G),htmlFlowData:C,htmlText:l(K),htmlTextData:C,image:l(W),label:Y,labelText:X,lineEnding:P,link:l(V),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:te,resourceDestinationString:O,resourceTitleString:ie,resource:le,setextHeading:l(D),setextHeadingLineSequence:x,setextHeadingText:w,strong:l(),thematicBreak:l()}};AM(t,(e||{}).mdastExtensions||[]);let r={};return n;function n(ee){let se={type:"root",children:[]},xe={stack:[se],tokenStack:[],config:t,enter:a,exit:c,buffer:o,resume:u,data:r},L=[],_=-1;for(;++_<ee.length;)if(ee[_][1].type==="listOrdered"||ee[_][1].type==="listUnordered")if(ee[_][0]==="enter")L.push(_);else{let M=L.pop();_=i(ee,M,_)}for(_=-1;++_<ee.length;){let M=t[ee[_][0]];wM.call(M,ee[_][1].type)&&M[ee[_][1].type].call(Object.assign({sliceSerialize:ee[_][2].sliceSerialize},xe),ee[_][1])}if(xe.tokenStack.length>0){let M=xe.tokenStack[xe.tokenStack.length-1];(M[1]||OR).call(xe,void 0,M[0])}for(se.position={start:Ds(ee.length>0?ee[0][1].start:{line:1,column:1,offset:0}),end:Ds(ee.length>0?ee[ee.length-2][1].end:{line:1,column:1,offset:0})},_=-1;++_<t.transforms.length;)se=t.transforms[_](se)||se;return se}function i(ee,se,xe){let L=se-1,_=-1,M=!1,$,re,he,Me;for(;++L<=xe;){let je=ee[L];switch(je[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{je[0]==="enter"?_++:_--,Me=void 0;break}case"lineEndingBlank":{je[0]==="enter"&&($&&!Me&&!_&&!he&&(he=L),Me=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Me=void 0}if(!_&&je[0]==="enter"&&je[1].type==="listItemPrefix"||_===-1&&je[0]==="exit"&&(je[1].type==="listUnordered"||je[1].type==="listOrdered")){if($){let Fe=L;for(re=void 0;Fe--;){let Ot=ee[Fe];if(Ot[1].type==="lineEnding"||Ot[1].type==="lineEndingBlank"){if(Ot[0]==="exit")continue;re&&(ee[re][1].type="lineEndingBlank",M=!0),Ot[1].type="lineEnding",re=Fe}else if(!(Ot[1].type==="linePrefix"||Ot[1].type==="blockQuotePrefix"||Ot[1].type==="blockQuotePrefixWhitespace"||Ot[1].type==="blockQuoteMarker"||Ot[1].type==="listItemIndent"))break}he&&(!re||he<re)&&($._spread=!0),$.end=Object.assign({},re?ee[re][1].start:je[1].end),ee.splice(re||L,0,["exit",$,je[2]]),L++,xe++}if(je[1].type==="listItemPrefix"){let Fe={type:"listItem",_spread:!1,start:Object.assign({},je[1].start),end:void 0};$=Fe,ee.splice(L,0,["enter",Fe,je[2]]),L++,xe++,he=void 0,Me=!0}}}return ee[se][1]._spread=M,xe}function s(ee,se){return xe;function xe(L){a.call(this,ee(L),L),se&&se.call(this,L)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ee,se,xe){this.stack[this.stack.length-1].children.push(ee),this.stack.push(ee),this.tokenStack.push([se,xe||void 0]),ee.position={start:Ds(se.start),end:void 0}}function l(ee){return se;function se(xe){ee&&ee.call(this,xe),c.call(this,xe)}}function c(ee,se){let xe=this.stack.pop(),L=this.tokenStack.pop();if(L)L[0].type!==ee.type&&(se?se.call(this,ee,L[0]):(L[1]||OR).call(this,ee,L[0]));else throw new Error("Cannot close `"+ee.type+"` ("+Yf({start:ee.start,end:ee.end})+"): it\u2019s not open");xe.position.end=Ds(ee.end)}function u(){return FZ(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(ee){if(this.data.expectingFirstListItemValue){let se=this.stack[this.stack.length-2];se.start=Number.parseInt(this.sliceSerialize(ee),10),this.data.expectingFirstListItemValue=void 0}}function f(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.lang=ee}function p(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.meta=ee}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.value=ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function m(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.value=ee.replace(/(\r?\n|\r)$/g,"")}function y(ee){let se=this.resume(),xe=this.stack[this.stack.length-1];xe.label=se,xe.identifier=Tl(this.sliceSerialize(ee)).toLowerCase()}function E(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.title=ee}function S(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.url=ee}function b(ee){let se=this.stack[this.stack.length-1];if(!se.depth){let xe=this.sliceSerialize(ee).length;se.depth=xe}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function x(ee){let se=this.stack[this.stack.length-1];se.depth=this.sliceSerialize(ee).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function N(ee){let se=this.stack[this.stack.length-1].children,xe=se[se.length-1];(!xe||xe.type!=="text")&&(xe=ot(),xe.position={start:Ds(ee.start),end:void 0},se.push(xe)),this.stack.push(xe)}function C(ee){let se=this.stack.pop();se.value+=this.sliceSerialize(ee),se.position.end=Ds(ee.end)}function P(ee){let se=this.stack[this.stack.length-1];if(this.data.atHardBreak){let xe=se.children[se.children.length-1];xe.position.end=Ds(ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(se.type)&&(N.call(this,ee),C.call(this,ee))}function U(){this.data.atHardBreak=!0}function G(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.value=ee}function K(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.value=ee}function B(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.value=ee}function V(){let ee=this.stack[this.stack.length-1];if(this.data.inReference){let se=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=se,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function W(){let ee=this.stack[this.stack.length-1];if(this.data.inReference){let se=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=se,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function X(ee){let se=this.sliceSerialize(ee),xe=this.stack[this.stack.length-2];xe.label=Nee(se),xe.identifier=Tl(se).toLowerCase()}function Y(){let ee=this.stack[this.stack.length-1],se=this.resume(),xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,xe.type==="link"){let L=ee.children;xe.children=L}else xe.alt=se}function O(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.url=ee}function ie(){let ee=this.resume(),se=this.stack[this.stack.length-1];se.title=ee}function le(){this.data.inReference=void 0}function F(){this.data.referenceType="collapsed"}function te(ee){let se=this.resume(),xe=this.stack[this.stack.length-1];xe.label=se,xe.identifier=Tl(this.sliceSerialize(ee)).toLowerCase(),this.data.referenceType="full"}function ge(ee){this.data.characterReferenceType=ee.type}function Ce(ee){let se=this.sliceSerialize(ee),xe=this.data.characterReferenceType,L;xe?(L=fM(se,xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):L=L1(se);let _=this.stack[this.stack.length-1];_.value+=L}function de(ee){let se=this.stack.pop();se.position.end=Ds(ee.end)}function we(ee){C.call(this,ee);let se=this.stack[this.stack.length-1];se.url=this.sliceSerialize(ee)}function Le(ee){C.call(this,ee);let se=this.stack[this.stack.length-1];se.url="mailto:"+this.sliceSerialize(ee)}function Pe(){return{type:"blockquote",children:[]}}function Se(){return{type:"code",lang:null,meta:null,value:""}}function Ue(){return{type:"inlineCode",value:""}}function Ve(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function _t(){return{type:"emphasis",children:[]}}function Ct(){return{type:"heading",depth:0,children:[]}}function Gt(){return{type:"break"}}function A(){return{type:"html",value:""}}function H(){return{type:"image",title:null,url:"",alt:null}}function J(){return{type:"link",title:null,url:"",children:[]}}function me(ee){return{type:"list",ordered:ee.type==="listOrdered",start:null,spread:ee._spread,children:[]}}function ue(ee){return{type:"listItem",spread:ee._spread,checked:null,children:[]}}function Be(){return{type:"paragraph",children:[]}}function Ae(){return{type:"strong",children:[]}}function ot(){return{type:"text",value:""}}function ht(){return{type:"thematicBreak"}}}function Ds(e){return{line:e.line,column:e.column,offset:e.offset}}function AM(e,t){let r=-1;for(;++r<t.length;){let n=t[r];Array.isArray(n)?AM(e,n):Uee(e,n)}}function Uee(e,t){let r;for(r in t)if(wM.call(t,r))switch(r){case"canContainEols":{let n=t[r];n&&e[r].push(...n);break}case"transforms":{let n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{let n=t[r];n&&Object.assign(e[r],n);break}}}function OR(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Yf({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Yf({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Yf({start:t.start,end:t.end})+") is still open")}function Hee(e){let t=this;t.parser=r;function r(n){return Fee(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function zee(e,t){let r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function $ee(e,t){let r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function Gee(e,t){let r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function jee(e,t){let r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Vee(e,t){let r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}var NR=Wee(/[\dA-Za-z]/);function Wee(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function ql(e){let t=[],r=-1,n=0,i=0;for(;++r<e.length;){let s=e.charCodeAt(r),o="";if(s===37&&NR(e.charCodeAt(r+1))&&NR(e.charCodeAt(r+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){let a=e.charCodeAt(r+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="\uFFFD"}else o=String.fromCharCode(s);o&&(t.push(e.slice(n,r),encodeURIComponent(o)),n=r+i+1,o=""),i&&(r+=i,i=0)}return t.join("")+e.slice(n)}function qee(e,t){let r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),i=ql(n.toLowerCase()),s=e.footnoteOrder.indexOf(n),o,a=e.footnoteCounts.get(n);a===void 0?(a=0,e.footnoteOrder.push(n),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(n,a);let l={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+i,id:r+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);let c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}function Kee(e,t){let r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Yee(e,t){if(e.options.allowDangerousHtml){let r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function kM(e,t){let r=t.referenceType,n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];let i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});let o=i[i.length-1];return o&&o.type==="text"?o.value+=n:i.push({type:"text",value:n}),i}function Xee(e,t){let r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return kM(e,t);let i={src:ql(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(i.title=n.title);let s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Qee(e,t){let r={src:ql(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);let n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function Zee(e,t){let r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);let n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function Jee(e,t){let r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return kM(e,t);let i={href:ql(n.url||"")};n.title!==null&&n.title!==void 0&&(i.title=n.title);let s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function ete(e,t){let r={href:ql(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);let n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function tte(e,t,r){let n=e.all(t),i=r?rte(r):CM(t),s={},o=[];if(typeof t.checked=="boolean"){let u=n[0],d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},n.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<n.length;){let u=n[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}let l=n[n.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});let c={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,c),e.applyData(t,c)}function rte(e){let t=!1;if(e.type==="list"){t=e.spread||!1;let r=e.children,n=-1;for(;!t&&++n<r.length;)t=CM(r[n])}return t}function CM(e){return e.spread??e.children.length>1}function nte(e,t){let r={},n=e.all(t),i=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++i<n.length;){let o=n[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}let s={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,s),e.applyData(t,s)}function ite(e,t){let r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ste(e,t){let r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function ote(e,t){let r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}var xM=IM("end"),RM=IM("start");function IM(e){return t;function t(r){let n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function ate(e){let t=RM(e),r=xM(e);if(t&&r)return{start:t,end:r}}function lte(e,t){let r=e.all(t),n=r.shift(),i=[];if(n){let o={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],o),i.push(o)}if(r.length>0){let o={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},a=RM(t.children[1]),l=xM(t.children[t.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}let s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function cte(e,t,r){let n=r?r.children:void 0,i=(n?n.indexOf(t):1)===0?"th":"td",s=r&&r.type==="table"?r.align:void 0,o=s?s.length:t.children.length,a=-1,l=[];for(;++a<o;){let u=t.children[a],d={},h=s?s[a]:void 0;h&&(d.align=h);let f={type:"element",tagName:i,properties:d,children:[]};u&&(f.children=e.all(u),e.patch(u,f),f=e.applyData(u,f)),l.push(f)}let c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function ute(e,t){let r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}var MR=9,FR=32;function dte(e){let t=String(e),r=/\r?\n|\r/g,n=r.exec(t),i=0,s=[];for(;n;)s.push(BR(t.slice(i,n.index),i>0,!0),n[0]),i=n.index+n[0].length,n=r.exec(t);return s.push(BR(t.slice(i),i>0,!1)),s.join("")}function BR(e,t,r){let n=0,i=e.length;if(t){let s=e.codePointAt(n);for(;s===MR||s===FR;)n++,s=e.codePointAt(n)}if(r){let s=e.codePointAt(i-1);for(;s===MR||s===FR;)i--,s=e.codePointAt(i-1)}return i>n?e.slice(n,i):""}function hte(e,t){let r={type:"text",value:dte(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function fte(e,t){let r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}var pte={blockquote:zee,break:$ee,code:Gee,delete:jee,emphasis:Vee,footnoteReference:qee,heading:Kee,html:Yee,imageReference:Xee,image:Qee,inlineCode:Zee,linkReference:Jee,link:ete,listItem:tte,list:nte,paragraph:ite,root:ste,strong:ote,table:lte,tableCell:ute,tableRow:cte,text:hte,thematicBreak:fte,toml:df,yaml:df,definition:df,footnoteDefinition:df};function df(){}function gte(e,t){let r=[{type:"text",value:"\u21A9"}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function mte(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function vte(e){let t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||gte,n=e.options.footnoteBackLabel||mte,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[],l=-1;for(;++l<e.footnoteOrder.length;){let c=e.footnoteById.get(e.footnoteOrder[l]);if(!c)continue;let u=e.all(c),d=String(c.identifier).toUpperCase(),h=ql(d.toLowerCase()),f=0,p=[],g=e.footnoteCounts.get(d);for(;g!==void 0&&++f<=g;){p.length>0&&p.push({type:"text",value:" "});let y=typeof r=="string"?r:r(l,f);typeof y=="string"&&(y={type:"text",value:y}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(l,f),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}let v=u[u.length-1];if(v&&v.type==="element"&&v.tagName==="p"){let y=v.children[v.children.length-1];y&&y.type==="text"?y.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...p)}else u.push(...p);let m={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(u,!0)};e.patch(c,m),a.push(m)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...xl(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}var JE={}.hasOwnProperty,yte={};function Ete(e,t){let r=t||yte,n=new Map,i=new Map,s=new Map,o={...pte,...r.handlers},a={all:c,applyData:Ste,definitionById:n,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:r,patch:Tte,wrap:wte};return Pg(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){let d=u.type==="definition"?n:i,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),a;function l(u,d){let h=u.type,f=a.handlers[h];if(JE.call(a.handlers,h)&&f)return f(a,u,d);if(a.options.passThrough&&a.options.passThrough.includes(h)){if("children"in u){let{children:p,...g}=u,v=xl(g);return v.children=a.all(u),v}return xl(u)}return(a.options.unknownHandler||bte)(a,u,d)}function c(u){let d=[];if("children"in u){let h=u.children,f=-1;for(;++f<h.length;){let p=a.one(h[f],u);if(p){if(f&&h[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=UR(p.value)),!Array.isArray(p)&&p.type==="element")){let g=p.children[0];g&&g.type==="text"&&(g.value=UR(g.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function Tte(e,t){e.position&&(t.position=ate(e))}function Ste(e,t){let r=t;if(e&&e.data){let n=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{let o="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:o}}r.type==="element"&&s&&Object.assign(r.properties,xl(s)),"children"in r&&r.children&&i!==null&&i!==void 0&&(r.children=i)}return r}function bte(e,t){let r=t.data||{},n="value"in t&&!(JE.call(r,"hProperties")||JE.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wte(e,t){let r=[],n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function UR(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function HR(e,t){let r=Ete(e,t),n=r.one(e,void 0),i=vte(r),s=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Ate(e,t){return e&&"run"in e?async function(r,n){let i=HR(r,{file:n,...t});await e.run(i,n)}:function(r,n){return HR(r,{file:n,...e||t})}}function zR(e){if(e)throw e}var Xf=Object.prototype.hasOwnProperty,_M=Object.prototype.toString,$R=Object.defineProperty,GR=Object.getOwnPropertyDescriptor,jR=function(e){return typeof Array.isArray=="function"?Array.isArray(e):_M.call(e)==="[object Array]"},VR=function(e){if(!e||_M.call(e)!=="[object Object]")return!1;var t=Xf.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Xf.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!r)return!1;var n;for(n in e);return typeof n>"u"||Xf.call(e,n)},WR=function(e,t){$R&&t.name==="__proto__"?$R(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},qR=function(e,t){if(t==="__proto__")if(Xf.call(e,t)){if(GR)return GR(e,t).value}else return;return e[t]},kte=function e(){var t,r,n,i,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(t=arguments[l],t!=null)for(r in t)n=qR(a,r),i=qR(t,r),a!==i&&(u&&i&&(VR(i)||(s=jR(i)))?(s?(s=!1,o=n&&jR(n)?n:[]):o=n&&VR(n)?n:{},WR(a,{name:r,newValue:e(u,o,i)})):typeof i<"u"&&WR(a,{name:r,newValue:i}));return a},s0=e1(kte);function eT(e){if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Cte(){let e=[],t={run:r,use:n};return t;function r(...i){let s=-1,o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){let u=e[++s],d=-1;if(l){o(l);return}for(;++d<i.length;)(c[d]===null||c[d]===void 0)&&(c[d]=i[d]);i=c,u?xte(u,a)(...c):o(null,...c)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function xte(e,t){let r;return n;function n(...o){let a=e.length>o.length,l;a&&o.push(i);try{l=e.apply(this,o)}catch(c){let u=c;if(a&&r)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){r||(r=!0,t(o,...a))}function s(o){i(null,o)}}function Rte(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?KR(e.position):"start"in e||"end"in e?KR(e):"line"in e||"column"in e?tT(e):""}function tT(e){return YR(e&&e.line)+":"+YR(e&&e.column)}function KR(e){return tT(e&&e.start)+"-"+tT(e&&e.end)}function YR(e){return e&&typeof e=="number"?e:1}var Cr=class extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let i="",s={},o=!1;if(r&&("line"in r&&"column"in r?s={place:r}:"start"in r&&"end"in r?s={place:r}:"type"in r?s={ancestors:[r],place:r.position}:s={...r}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof n=="string"){let l=n.indexOf(":");l===-1?s.ruleId=n:(s.source=n.slice(0,l),s.ruleId=n.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){let l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}let a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Rte(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}};Cr.prototype.file="";Cr.prototype.name="";Cr.prototype.reason="";Cr.prototype.message="";Cr.prototype.stack="";Cr.prototype.column=void 0;Cr.prototype.line=void 0;Cr.prototype.ancestors=void 0;Cr.prototype.cause=void 0;Cr.prototype.fatal=void 0;Cr.prototype.place=void 0;Cr.prototype.ruleId=void 0;Cr.prototype.source=void 0;var ui={basename:Ite,dirname:_te,extname:Lte,join:Pte,sep:"/"};function Ite(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');vd(e);let r=0,n=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){r=i+1;break}}else n<0&&(s=!0,n=i+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){r=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(n=i):(a=-1,n=o));return r===n?n=o:n<0&&(n=e.length),e.slice(r,n)}function _te(e){if(vd(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Lte(e){vd(e);let t=e.length,r=-1,n=0,i=-1,s=0,o;for(;t--;){let a=e.codePointAt(t);if(a===47){if(o){n=t+1;break}continue}r<0&&(o=!0,r=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||r<0||s===0||s===1&&i===r-1&&i===n+1?"":e.slice(i,r)}function Pte(...e){let t=-1,r;for(;++t<e.length;)vd(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":Dte(r)}function Dte(e){vd(e);let t=e.codePointAt(0)===47,r=Ote(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function Ote(e,t){let r="",n=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(l=r.lastIndexOf("/"),l!==r.length-1){l<0?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=o,s=0;continue}}else if(r.length>0){r="",n=0,i=o,s=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(i+1,o):r=e.slice(i+1,o),n=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return r}function vd(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}var Nte={cwd:Mte};function Mte(){return"/"}function rT(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Fte(e){if(typeof e=="string")e=new URL(e);else if(!rT(e)){let t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){let t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Bte(e)}function Bte(e){if(e.hostname!==""){let n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}let t=e.pathname,r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){let n=t.codePointAt(r+2);if(n===70||n===102){let i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}var o0=["history","path","basename","stem","extname","dirname"],nT=class{constructor(t){let r;t?rT(t)?r={path:t}:typeof t=="string"||Ute(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":Nte.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<o0.length;){let s=o0[n];s in r&&r[s]!==void 0&&r[s]!==null&&(this[s]=s==="history"?[...r[s]]:r[s])}let i;for(i in r)o0.includes(i)||(this[i]=r[i])}get basename(){return typeof this.path=="string"?ui.basename(this.path):void 0}set basename(t){l0(t,"basename"),a0(t,"basename"),this.path=ui.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ui.dirname(this.path):void 0}set dirname(t){XR(this.basename,"dirname"),this.path=ui.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ui.extname(this.path):void 0}set extname(t){if(a0(t,"extname"),XR(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ui.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){rT(t)&&(t=Fte(t)),l0(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ui.basename(this.path,this.extname):void 0}set stem(t){l0(t,"stem"),a0(t,"stem"),this.path=ui.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){let i=this.message(t,r,n);throw i.fatal=!0,i}info(t,r,n){let i=this.message(t,r,n);return i.fatal=void 0,i}message(t,r,n){let i=new Cr(t,r,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}};function a0(e,t){if(e&&e.includes(ui.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ui.sep+"`")}function l0(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function XR(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Ute(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var Hte=(function(e){let t=this.constructor.prototype,r=t[e],n=function(){return r.apply(n,arguments)};return Object.setPrototypeOf(n,t),n}),zte={}.hasOwnProperty,$te=class LM extends Hte{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Cte()}copy(){let t=new LM,r=-1;for(;++r<this.attachers.length;){let n=this.attachers[r];t.use(...n)}return t.data(s0(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(d0("data",this.frozen),this.namespace[t]=r,this):zte.call(this.namespace,t)&&this.namespace[t]||void 0:t?(d0("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;let t=this;for(;++this.freezeIndex<this.attachers.length;){let[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);let i=r.call(t,...n);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();let r=hf(t),n=this.parser||this.Parser;return c0("parse",n),n(String(r),r)}process(t,r){let n=this;return this.freeze(),c0("process",this.parser||this.Parser),u0("process",this.compiler||this.Compiler),r?i(void 0,r):new Promise(i);function i(s,o){let a=hf(t),l=n.parse(a);n.run(l,a,function(u,d,h){if(u||!d||!h)return c(u);let f=d,p=n.stringify(f,h);Vte(p)?h.value=p:h.result=p,c(u,h)});function c(u,d){u||!d?o(u):s?s(d):r(void 0,d)}}}processSync(t){let r=!1,n;return this.freeze(),c0("processSync",this.parser||this.Parser),u0("processSync",this.compiler||this.Compiler),this.process(t,i),ZR("processSync","process",r),n;function i(s,o){r=!0,zR(s),n=o}}run(t,r,n){QR(t),this.freeze();let i=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?s(void 0,n):new Promise(s);function s(o,a){let l=hf(r);i.run(t,l,c);function c(u,d,h){let f=d||t;u?a(u):o?o(f):n(void 0,f,h)}}}runSync(t,r){let n=!1,i;return this.run(t,r,s),ZR("runSync","run",n),i;function s(o,a){zR(o),i=a,n=!0}}stringify(t,r){this.freeze();let n=hf(r),i=this.compiler||this.Compiler;return u0("stringify",i),QR(t),i(t,n)}use(t,...r){let n=this.attachers,i=this.namespace;if(d0("use",this.frozen),t!=null)if(typeof t=="function")l(t,r);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){let[u,...d]=c;l(u,d)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=s0(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){let d=c[u];s(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,h=-1;for(;++d<n.length;)if(n[d][0]===c){h=d;break}if(h===-1)n.push([c,...u]);else if(u.length>0){let[f,...p]=u,g=n[h][1];eT(g)&&eT(f)&&(f=s0(!0,g,f)),n[h]=[c,f,...p]}}}},Gte=new $te().freeze();function c0(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function u0(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function d0(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function QR(e){if(!eT(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ZR(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function hf(e){return jte(e)?e:new nT(e)}function jte(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Vte(e){return typeof e=="string"||Wte(e)}function Wte(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var PM={exports:{}},tu={};var JR;function qte(){if(JR)return tu;JR=1;var e=I,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,d={},h=null,f=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(f=l.ref);for(u in l)n.call(l,u)&&!s.hasOwnProperty(u)&&(d[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)d[u]===void 0&&(d[u]=l[u]);return{$$typeof:t,type:a,key:h,ref:f,props:d,_owner:i.current}}return tu.Fragment=r,tu.jsx=o,tu.jsxs=o,tu}PM.exports=qte();var Kte=PM.exports;async function Yte(e){let t=await Gte().use(Hee).use(NZ).use(Ate,{allowDangerousHtml:!0}).use(KK).use(aY).processSync(e);return String(t)}function Xte(e){let[t,r]=I.useState("");return I.useEffect(()=>{(async()=>{let n=await Yte(e);r(n)})()},[e]),{html:t,jsx:Kte.jsx("div",{dangerouslySetInnerHTML:{__html:t}})}}var Qte=({value:e,handleClick:t})=>{let r=Xte(e);return I.createElement(Ag,{onClick:t},I.createElement(kg,{dangerouslySetInnerHTML:{__html:r.html}}))},eI=({value:e,handleClick:t,isContentSearch:r})=>I.createElement(Ag,{onClick:t},I.createElement(kg,{dangerouslySetInnerHTML:{__html:e},"data-content-search":r}));function qn(e,t){this.message=e,this.error=t}qn.prototype=Object.create(Error.prototype);var H1=/([0-9]+)?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function Zte(e,t){t||(t={});let{meta:r=!1,strict:n=!0}=t;if(typeof e!="string")throw new qn("Input must be a string");e=e.trim(),e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);let i=e.split(`

`),s=i.shift();if(!s.startsWith("WEBVTT"))throw new qn('Must start with "WEBVTT"');let o=s.split(`
`),a=o[0].replace("WEBVTT","");if(a.length>0&&a[0]!==" "&&a[0]!=="	")throw new qn("Header comment must start with space or tab");if(i.length===0&&o.length===1)return{valid:!0,strict:n,cues:[],errors:[]};if(!r&&o.length>1&&o[1]!=="")throw new qn("Missing blank line after signature");let{cues:l,errors:c}=ere(i,n);if(n&&c.length>0)throw c[0];let u=r?Jte(o):null,d={valid:c.length===0,strict:n,cues:l,errors:c};return r&&(d.meta=u),d}function Jte(e){let t={};return e.slice(1).forEach(r=>{let n=r.indexOf(":"),i=r.slice(0,n).trim(),s=r.slice(n+1).trim();t[i]=s}),Object.keys(t).length>0?t:null}function ere(e,t){let r=[];return{cues:e.map((n,i)=>{try{return tre(n,i,t)}catch(s){return r.push(s),null}}).filter(Boolean),errors:r}}function tre(e,t,r){let n="",i=0,s=.01,o="",a="",l=e.split(`
`).filter(Boolean);if(l.length>0&&l[0].trim().startsWith("NOTE"))return null;if(l.length===1&&!l[0].includes("-->"))throw new qn(`Cue identifier cannot be standalone (cue #${t})`);if(l.length>1&&!(l[0].includes("-->")||l[1].includes("-->"))){let u=`Cue identifier needs to be followed by timestamp (cue #${t})`;throw new qn(u)}l.length>1&&l[1].includes("-->")&&(n=l.shift());let c=typeof l[0]=="string"&&l[0].split(" --> ");if(c.length!==2||!tI(c[0])||!tI(c[1]))throw new qn(`Invalid cue timestamp (cue #${t})`);if(i=rI(c[0]),s=rI(c[1]),r){if(i>s)throw new qn(`Start timestamp greater than end (cue #${t})`);if(s<=i)throw new qn(`End must be greater than start (cue #${t})`)}if(!r&&s<i)throw new qn(`End must be greater or equal to start when not strict (cue #${t})`);return a=c[1].replace(H1,"").trim(),l.shift(),o=l.join(`
`),o?{identifier:n,start:i,end:s,text:o,styles:a}:!1}function tI(e){return H1.test(e)}function rI(e){let t=e.match(H1),r=parseFloat(t[1]||0)*60*60;return r+=parseFloat(t[2])*60,r+=parseFloat(t[3]),r}var DM={parse:Zte};function Mr(e,t){this.message=e,this.error=t}Mr.prototype=Object.create(Error.prototype);function rre(e){if(!e)throw new Mr("Input must be non-null");if(typeof e!="object")throw new Mr("Input must be an object");if(Array.isArray(e))throw new Mr("Input cannot be array");if(!e.valid)throw new Mr("Input must be valid");let t=`WEBVTT
`;if(e.meta){if(typeof e.meta!="object"||Array.isArray(e.meta))throw new Mr("Metadata must be an object");Object.entries(e.meta).forEach(n=>{if(typeof n[1]!="string")throw new Mr(`Metadata value for "${n[0]}" must be string`);t+=`${n[0]}: ${n[1]}
`})}let r=null;return e.cues.forEach((n,i)=>{if(r&&r>n.start)throw new Mr(`Cue number ${i} is not in chronological order`);r=n.start,t+=`
`,t+=nre(n),t+=`
`}),t}function nre(e){if(typeof e!="object")throw new Mr("Cue malformed: not of type object");if(typeof e.identifier!="string"&&typeof e.identifier!="number"&&e.identifier!==null)throw new Mr(`Cue malformed: identifier value is not a string.
    ${JSON.stringify(e)}`);if(isNaN(e.start))throw new Mr(`Cue malformed: null start value.
    ${JSON.stringify(e)}`);if(isNaN(e.end))throw new Mr(`Cue malformed: null end value.
    ${JSON.stringify(e)}`);if(e.start>=e.end)throw new Mr(`Cue malformed: start timestamp greater than end
    ${JSON.stringify(e)}`);if(typeof e.text!="string")throw new Mr(`Cue malformed: null text value.
    ${JSON.stringify(e)}`);if(typeof e.styles!="string")throw new Mr(`Cue malformed: null styles value.
    ${JSON.stringify(e)}`);let t="";e.identifier.length>0&&(t+=`${e.identifier}
`);let r=nI(e.start),n=nI(e.end);return t+=`${r} --> ${n}`,t+=e.styles?` ${e.styles}`:"",t+=`
${e.text}`,t}function nI(e){let t=ff(ire(e),2),r=ff(sre(e),2),n=ff(ore(e),2),i=ff(are(e),3);return`${t}:${r}:${n}.${i}`}function ff(e,t){let r=`${e}`;for(;r.length<t;)r=`0${r}`;return r}function ire(e){return Math.floor(e/60/60)}function sre(e){return Math.floor(e/60)%60}function ore(e){return Math.floor(e%60)}function are(e){return Math.floor((e%1).toFixed(4)*1e3)}var lre={compile:rre},cre=DM.parse;function ure(e,t){t=t||10;let r=cre(e),n=[],i=[],s=null,o=0,a=0;return r.cues.forEach((l,c)=>{let u=c===0,d=c===r.cues.length-1,h=l.start,f=l.end,p=d?1/0:r.cues[c+1].start,g=u?f:f-h,v=u?0:h-r.cues[c-1].end;o=o+g+v,`${c}`,n.length+1,s&&(i.push(s),o+=s.end-a,s=null),i.push(l);let m=p-f<t&&v<t&&o>t;if(dre(a,t,p,v)){let y=hre(d,f,t,o,a);n.push({duration:y,cues:i}),a+=y,o=0,i=[]}else m=!1;m&&(s=l)}),n}function dre(e,t,r,n){let i=OM(n,t);return(n<=t||i+e<r)&&r-e>=t}function hre(e,t,r,n,i){let s=r;return n>r&&(s=OM(n-r,r)),e?s=parseFloat((t-i).toFixed(2)):s=Math.round(s),s}function OM(e,t){return e+=t-e%t,e}var NM={segment:ure},MM=NM.segment;function fre(e,t,r){typeof r>"u"&&(r="900000");let n=MM(e,t),i=[];return n.forEach((s,o)=>{let a=`WEBVTT
X-TIMESTAMP-MAP=MPEGTS:${r},LOCAL:00:00:00.000

${vre(s.cues)}
`,l=FM(o);i.push({filename:l,content:a})}),i}function pre(e,t){let r=MM(e,t),n=gre(r);return`#EXTM3U
#EXT-X-TARGETDURATION:${Math.round(mre(r))}
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
${n}
#EXT-X-ENDLIST
`}function pf(e,t){return`${"0".repeat(Math.max(0,t-e.toString().length))}${e}`}function FM(e){return`${e}.vtt`}function gre(e){let t=[];return e.forEach((r,n)=>{t.push(`#EXTINF:${r.duration.toFixed(5)},
${FM(n)}`)}),t.join(`
`)}function mre(e){let t=0;return e.forEach(r=>{r.duration>t&&(t=r.duration)}),t}function vre(e){let t=[];return e.forEach(r=>{t.push(yre(r))}),t.join(`

`)}function yre(e){let t=[];e.identifier&&t.push(e.identifier);let r=iI(e.start),n=iI(e.end),i=e.styles?`${e.styles}`:"";return t.push(`${r} --> ${n} ${i}`),t.push(e.text),t.join(`
`)}function iI(e){let t=(e%1).toFixed(3);e=Math.round(e-t);let r=Math.floor(e/3600),n=Math.floor((e-r*3600)/60),i=e-r*3600-n*60;return`${`${pf(r,2)}:`}${pf(n,2)}:${pf(i,2)}.${pf(t*1e3,3)}`}var Ere={hlsSegment:fre,hlsSegmentPlaylist:pre},Tre=DM.parse,Sre=lre.compile,bre=NM.segment,wre=Ere,Are={parse:Tre,compile:Sre,segment:bre,hls:wre},kre=()=>{function e(l){return l.map(c=>{let u=c.identifier||_u();return{...c,identifier:u}})}function t(l){var c;let u=[],d=[],h=e(l);for(let f of h){for(;d.length>0&&d[d.length-1].end<=f.start;)d.pop();d.length>0?(d[d.length-1].children||(d[d.length-1].children=[]),(c=d[d.length-1].children)==null||c.push(f),d.push(f)):(u.push(f),d.push(f))}return u}function r(l,c=[]){return c.some(u=>l.start>=u.start&&l.end<=u.end)}function n(l=[]){return l.sort((c,u)=>c.start-u.start)}function i(l){let c=l.replace(/<(c|v|i|b|u|lang|ruby)(?:\.([^\s>]+))?(?:\s([^>]+))?>/g,(u,d,h,f)=>{let p=document.createElement(d);return h&&(p.className=h.replace(/\./g," ")),f?.length>0&&(p.title=f),p.outerHTML.replace(new RegExp(`</${d}>$`),"")});return console.log("normalizeVttTags",c),c}function s(l){var c;for(let u of l.children)s(u);if(l.localName==="c"||l.localName==="v"){let u=document.createElement("span");for(let d of l.attributes)u.setAttribute(d.name,d.value);u.innerHTML=l.innerHTML,(c=l.parentNode)==null||c.replaceChild(u,l)}}function o(l){let c=i(l),u=document.createElement("div");return u.innerHTML=c,s(u),u.innerHTML}function a(l){return new Promise((c,u)=>{let d=Are.parse(l);d.errors&&d.errors.length&&u(d.errors),c(d.cues.map(h=>({identifier:h.identifier||_u(),start:h.start,end:h.end,align:h.align,html:o(h.text),text:h.text||""})))})}return{addIdentifiersToParsedCues:e,createNestedCues:t,isChild:r,orderCuesByTime:n,parseVttData:a}};function z1(e){let[t,r]=k.useState(void 0);return yr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;let s=i[0],o,a;if("borderBoxSize"in s){let l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;r({width:o,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}function $1(e){let t=k.useRef({value:e,previous:e});return k.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var G1="Radio",[Cre,BM]=Ci(G1),[xre,Rre]=Cre(G1),UM=k.forwardRef((e,t)=>{let{__scopeRadio:r,name:n,checked:i=!1,required:s,disabled:o,value:a="on",onCheck:l,form:c,...u}=e,[d,h]=k.useState(null),f=yt(t,v=>h(v)),p=k.useRef(!1),g=d?c||!!d.closest("form"):!0;return(0,oe.jsxs)(xre,{scope:r,checked:i,disabled:o,children:[(0,oe.jsx)(rt.button,{type:"button",role:"radio","aria-checked":i,"data-state":GM(i),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:f,onClick:Je(e.onClick,v=>{i||l==null||l(),g&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})}),g&&(0,oe.jsx)($M,{control:d,bubbles:!p.current,name:n,value:a,checked:i,required:s,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});UM.displayName=G1;var HM="RadioIndicator",zM=k.forwardRef((e,t)=>{let{__scopeRadio:r,forceMount:n,...i}=e,s=Rre(HM,r);return(0,oe.jsx)(ud,{present:n||s.checked,children:(0,oe.jsx)(rt.span,{"data-state":GM(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t})})});zM.displayName=HM;var Ire="RadioBubbleInput",$M=k.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...i},s)=>{let o=k.useRef(null),a=yt(o,s),l=$1(r),c=z1(t);return k.useEffect(()=>{let u=o.current;if(!u)return;let d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==r&&h){let f=new Event("click",{bubbles:n});h.call(u,r),u.dispatchEvent(f)}},[l,r,n]),(0,oe.jsx)(rt.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:a,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});$M.displayName=Ire;function GM(e){return e?"checked":"unchecked"}var _re=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Bg="RadioGroup",[Lre]=Ci(Bg,[bg,BM]),jM=bg(),VM=BM(),[Pre,Dre]=Lre(Bg),WM=k.forwardRef((e,t)=>{let{__scopeRadioGroup:r,name:n,defaultValue:i,value:s,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:d,...h}=e,f=jM(r),p=Sg(c),[g,v]=Vs({prop:s,defaultProp:i??null,onChange:d,caller:Bg});return(0,oe.jsx)(Pre,{scope:r,name:n,required:o,disabled:a,value:g,onValueChange:v,children:(0,oe.jsx)(LD,{asChild:!0,...f,orientation:l,dir:p,loop:u,children:(0,oe.jsx)(rt.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:p,...h,ref:t})})})});WM.displayName=Bg;var qM="RadioGroupItem",KM=k.forwardRef((e,t)=>{let{__scopeRadioGroup:r,disabled:n,...i}=e,s=Dre(qM,r),o=s.disabled||n,a=jM(r),l=VM(r),c=k.useRef(null),u=yt(t,c),d=s.value===i.value,h=k.useRef(!1);return k.useEffect(()=>{let f=g=>{_re.includes(g.key)&&(h.current=!0)},p=()=>h.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",p)}},[]),(0,oe.jsx)(PD,{asChild:!0,...a,focusable:!o,active:d,children:(0,oe.jsx)(UM,{disabled:o,required:s.required,checked:d,...l,...i,name:s.name,ref:u,onCheck:()=>s.onValueChange(i.value),onKeyDown:Je(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:Je(i.onFocus,()=>{var f;h.current&&((f=c.current)==null||f.click())})})})});KM.displayName=qM;var Ore="RadioGroupIndicator",Nre=k.forwardRef((e,t)=>{let{__scopeRadioGroup:r,...n}=e,i=VM(r);return(0,oe.jsx)(zM,{...i,...n,ref:t})});Nre.displayName=Ore;var YM=WM,XM=KM,Mre=be(YM,{display:"flex",flexDirection:"column",width:"100%"}),QM=be(XM,{...GD,justifyContent:"space-between",textAlign:"left",flexGrow:1,margin:0,marginLeft:"-1rem",padding:"0.618rem 1rem",width:"calc(100% + 2rem)",fontSize:"1rem",strong:{marginLeft:"1rem"},"&:hover":{color:"$accent"},"&[aria-checked='true']":{background:"#6662"}}),Fre=750,Bre=e=>{for(;e&&e!==document.body;){let t=window.getComputedStyle(e).overflowY;if(t!=="visible"&&t!=="hidden"&&e.scrollHeight>e.clientHeight)return e;e=e.parentNode}return null},Ure=({html:e,text:t,start:r,end:n})=>{var i,s;let o=Zr(),{activePlayer:a,configOptions:l,isAutoScrollEnabled:c,isUserScrolling:u}=It(),d=(s=(i=l?.informationPanel)==null?void 0:i.vtt)==null?void 0:s.autoScroll,[h,f]=(0,k.useState)(!1),p=(0,k.useRef)(null),g=a;(0,k.useEffect)(()=>(g?.addEventListener("timeupdate",()=>{let{currentTime:m}=g;f(r<=m&&m<n)}),()=>document.removeEventListener("timeupdate",()=>{})),[n,r,g]),(0,k.useEffect)(()=>{var m;let y=E=>{o({type:"updateAutoScrolling",isAutoScrolling:!0}),E(),setTimeout(()=>o({type:"updateAutoScrolling",isAutoScrolling:!1}),Fre)};if(c&&h&&p.current&&!u){let E=p.current;if(E&&E instanceof HTMLElement){let S=Bre(E);if(S&&S instanceof HTMLElement){let b;switch((m=d?.settings)==null?void 0:m.block){case"center":let w=S.getBoundingClientRect();b=E.offsetTop+E.offsetHeight-Math.floor((w.bottom-w.top)/2);break;case"end":b=E.offsetTop+E.offsetHeight-(S.clientHeight-E.clientHeight)+2;break;default:b=E.offsetTop-2;break}y(()=>{var w;return S.scrollTo({top:b,left:0,behavior:(w=d?.settings)==null?void 0:w.behavior})})}}}},[d,h,u,c,o]);let v=()=>{g&&(g.pause(),g.currentTime=r,g.play())};return I.createElement(QM,{ref:p,"aria-checked":h,"data-testid":"information-panel-cue",onClick:v,value:t},I.createElement("div",{className:"webvtt-cue",dangerouslySetInnerHTML:{__html:e}}),I.createElement("strong",null,tD(r)))},Hre=be("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${QM}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),ZM=({items:e})=>I.createElement(Hre,null,e.map(t=>{let{html:r,text:n,start:i,end:s,children:o,identifier:a}=t;return I.createElement("li",{key:a},I.createElement(Ure,{html:r,text:n,start:i,end:s}),o&&I.createElement(ZM,{items:o}))})),zre=({inlineCues:e,label:t,vttUri:r})=>{let[n,i]=I.useState(e||[]),{createNestedCues:s,orderCuesByTime:o,parseVttData:a}=kre(),[l,c]=I.useState();return(0,k.useEffect)(()=>{!e&&r&&fetch(r,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(u=>u.text()).then(u=>{a(u).then(d=>{let h=o(d),f=s(h);i(f)})}).catch(u=>{console.error(r,u.toString()),c(u)})},[r,e]),I.createElement(Mre,{"data-testid":"annotation-item-vtt","aria-label":`${l1(t)}`},l&&I.createElement("div",{"data-testid":"error-message"},"Network Error: ",l.toString()),I.createElement(ZM,{items:n}))},$re=e=>{var t;if(!e)return"LTR";let r=["ar","fa","ur","ps","dv","sd","ug","ku","he","yi","jrb","jpr","nqo"],n=Array.isArray(e)?(t=e[0])==null?void 0:t.split("-")[0]:e?.split("-")[0];return r.includes(n)?"RTL":"LTR"},Gre=e=>{var t,r,n,i,s;let o={id:typeof e=="string"?e:e.source};if(typeof e=="string"){if(e.includes("#xywh=")){let a=e.split("#xywh=");if(a&&a[1]){let[l,c,u,d]=a[1].split(",").map(h=>Number(h));o={id:a[0],rect:{x:l,y:c,w:u,h:d}}}}else if(e.includes("#t=")){let a=e.split("#t=");a&&a[1]&&(o={id:a[0],t:a[1]})}}else if(typeof e=="object"){if(((t=e.selector)==null?void 0:t.type)==="PointSelector")o={id:e.source,point:{x:e.selector.x,y:e.selector.y}};else if(((r=e.selector)==null?void 0:r.type)==="SvgSelector")o={id:e.source,svg:e.selector.value};else if(((n=e.selector)==null?void 0:n.type)==="FragmentSelector"&&(i=e.selector)!=null&&i.value.includes("xywh=")&&e.source.type=="Canvas"&&e.source.id){let a=(s=e.selector)==null?void 0:s.value.split("xywh=");if(a&&a[1]){let[l,c,u,d]=a[1].split(",").map(h=>Number(h));o={id:e.source.id,rect:{x:l,y:c,w:u,h:d}}}}}return o},j1=({annotation:e,targetResource:t,isContentSearch:r,isContentState:n})=>{var i,s,o,a,l,c,u;let{target:d}=e,h=(i=d?.selector)==null?void 0:i.type,f=((o=(s=d?.selector)==null?void 0:s.value)==null?void 0:o.split("=")[1])||"full",[p,g]=f!=="full"?f?.split(",").slice(2):[100,100],v=`${t}/${f}/!${((Y,O)=>{let ie=Math.max(Y,O),le=Math.round(Y/ie*100),F=Math.round(O/ie*100);return[le,F].join(",")})(p,g)}/0/default.jpg`,m=It(),y=Zr(),{openSeadragonViewer:E,vault:S,visibleCanvases:b}=m,w=e!=null&&e.body?(a=e?.body)==null?void 0:a.map(Y=>S.get(Y.id)):[],{format:x=h==="PointSelector"?"text/vtt":"text/plain",language:D="none",value:N="",chars:C=""}=w[0]?w[0]:{},P=h==="PointSelector"?"text/vtt":x,U=((l=w[0])==null?void 0:l.label)||{none:["t"]},G=N||C||"None",K=D?$re(D).toLocaleLowerCase():"LTR",B=h==="PointSelector"&&(c=d?.selector)!=null&&c.t?[{start:(u=d?.selector)==null?void 0:u.t,end:0,html:G,text:G,styles:"",children:[]}]:void 0;function V(){var Y;let O=E?.getOverlayById(e.id);if(O&&E!=null&&E.viewport){O!=null&&O.element&&((Y=O.element)==null||Y.focus());let ie=O?.getBounds(E.viewport);ie.x-=.2,ie.y-=.2,ie.width+=.5,ie.height+=.5,E.viewport.fitBounds(ie,!1)}}(0,k.useEffect)(()=>{if(!E||!n)return;let Y=setInterval(()=>{E?.getOverlayById(e.id)&&(V(),E.container.className="clover-iiif-content-state",clearInterval(Y))},1e3);return()=>clearInterval(Y)},[E,n]);function W(Y){var O;Y.preventDefault(),Y.stopPropagation();let ie=((O=e?.target)==null?void 0:O.source)||e?.target,le=ie?.id;b.map(F=>F.id).includes(le)?V():y({type:"updateActiveCanvas",canvasId:le})}function X(){var Y,O,ie;switch(P){case"text/plain":return I.createElement(eI,{value:G,handleClick:W,isContentSearch:r});case"text/html":return I.createElement(eW,{value:G,handleClick:W});case"text/markdown":return I.createElement(Qte,{value:G,handleClick:W});case"text/vtt":return I.createElement(zre,{inlineCues:B,label:U,vttUri:((Y=w[0])==null?void 0:Y.id)||void 0});case((O=x?.match(/^image\//))==null?void 0:O.input):let le=((ie=w.find(F=>{var te;return!((te=F.id)!=null&&te.includes("vault://"))}))==null?void 0:ie.id)||"";return I.createElement(tW,{caption:N,handleClick:W,imageUri:le});default:return I.createElement(eI,{value:G,handleClick:W})}}if(x)return I.createElement(JV,{dir:K,"data-format":x,"data-content":G,className:"clover-iiif-annotation-item"},I.createElement("span",{style:{backgroundImage:`url(${v})`,backgroundSize:"cover",backgroundPosition:"center"}}),X())},JM=(e,t="none")=>{if(!e)return null;if(typeof e=="string")return[e];if(!e[t]){let r=Object.getOwnPropertyNames(e);if(r.length>0)return e[r[0]]}return!e[t]||!Array.isArray(e[t])?null:e[t]},Tn=(e,t="none",r=", ")=>{let n=JM(e,t);return Array.isArray(n)?n.join(`${r}`):n},eF={},Hu={},V1={},zu={},W1={};Object.defineProperty(W1,"__esModule",{value:!0});W1.default=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(function(e){return e.charCodeAt(0)}));var q1={};Object.defineProperty(q1,"__esModule",{value:!0});q1.default=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(function(e){return e.charCodeAt(0)}));var iT={};(function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);e.fromCodePoint=(t=String.fromCodePoint)!==null&&t!==void 0?t:function(s){var o="";return s>65535&&(s-=65536,o+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),o+=String.fromCharCode(s),o};function n(s){var o;return s>=55296&&s<=57343||s>1114111?65533:(o=r.get(s))!==null&&o!==void 0?o:s}e.replaceCodePoint=n;function i(s){return(0,e.fromCodePoint)(n(s))}e.default=i})(iT);(function(e){var t=He&&He.__createBinding||(Object.create?function(P,U,G,K){K===void 0&&(K=G);var B=Object.getOwnPropertyDescriptor(U,G);(!B||("get"in B?!U.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return U[G]}}),Object.defineProperty(P,K,B)}:function(P,U,G,K){K===void 0&&(K=G),P[K]=U[G]}),r=He&&He.__setModuleDefault||(Object.create?function(P,U){Object.defineProperty(P,"default",{enumerable:!0,value:U})}:function(P,U){P.default=U}),n=He&&He.__importStar||function(P){if(P&&P.__esModule)return P;var U={};if(P!=null)for(var G in P)G!=="default"&&Object.prototype.hasOwnProperty.call(P,G)&&t(U,P,G);return r(U,P),U},i=He&&He.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var s=i(W1);e.htmlDecodeTree=s.default;var o=i(q1);e.xmlDecodeTree=o.default;var a=n(iT);e.decodeCodePoint=a.default;var l=iT;Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return l.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return l.fromCodePoint}});var c;(function(P){P[P.NUM=35]="NUM",P[P.SEMI=59]="SEMI",P[P.EQUALS=61]="EQUALS",P[P.ZERO=48]="ZERO",P[P.NINE=57]="NINE",P[P.LOWER_A=97]="LOWER_A",P[P.LOWER_F=102]="LOWER_F",P[P.LOWER_X=120]="LOWER_X",P[P.LOWER_Z=122]="LOWER_Z",P[P.UPPER_A=65]="UPPER_A",P[P.UPPER_F=70]="UPPER_F",P[P.UPPER_Z=90]="UPPER_Z"})(c||(c={}));var u=32,d;(function(P){P[P.VALUE_LENGTH=49152]="VALUE_LENGTH",P[P.BRANCH_LENGTH=16256]="BRANCH_LENGTH",P[P.JUMP_TABLE=127]="JUMP_TABLE"})(d=e.BinTrieFlags||(e.BinTrieFlags={}));function h(P){return P>=c.ZERO&&P<=c.NINE}function f(P){return P>=c.UPPER_A&&P<=c.UPPER_F||P>=c.LOWER_A&&P<=c.LOWER_F}function p(P){return P>=c.UPPER_A&&P<=c.UPPER_Z||P>=c.LOWER_A&&P<=c.LOWER_Z||h(P)}function g(P){return P===c.EQUALS||p(P)}var v;(function(P){P[P.EntityStart=0]="EntityStart",P[P.NumericStart=1]="NumericStart",P[P.NumericDecimal=2]="NumericDecimal",P[P.NumericHex=3]="NumericHex",P[P.NamedEntity=4]="NamedEntity"})(v||(v={}));var m;(function(P){P[P.Legacy=0]="Legacy",P[P.Strict=1]="Strict",P[P.Attribute=2]="Attribute"})(m=e.DecodingMode||(e.DecodingMode={}));var y=(function(){function P(U,G,K){this.decodeTree=U,this.emitCodePoint=G,this.errors=K,this.state=v.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return P.prototype.startEntity=function(U){this.decodeMode=U,this.state=v.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},P.prototype.write=function(U,G){switch(this.state){case v.EntityStart:return U.charCodeAt(G)===c.NUM?(this.state=v.NumericStart,this.consumed+=1,this.stateNumericStart(U,G+1)):(this.state=v.NamedEntity,this.stateNamedEntity(U,G));case v.NumericStart:return this.stateNumericStart(U,G);case v.NumericDecimal:return this.stateNumericDecimal(U,G);case v.NumericHex:return this.stateNumericHex(U,G);case v.NamedEntity:return this.stateNamedEntity(U,G)}},P.prototype.stateNumericStart=function(U,G){return G>=U.length?-1:(U.charCodeAt(G)|u)===c.LOWER_X?(this.state=v.NumericHex,this.consumed+=1,this.stateNumericHex(U,G+1)):(this.state=v.NumericDecimal,this.stateNumericDecimal(U,G))},P.prototype.addToNumericResult=function(U,G,K,B){if(G!==K){var V=K-G;this.result=this.result*Math.pow(B,V)+parseInt(U.substr(G,V),B),this.consumed+=V}},P.prototype.stateNumericHex=function(U,G){for(var K=G;G<U.length;){var B=U.charCodeAt(G);if(h(B)||f(B))G+=1;else return this.addToNumericResult(U,K,G,16),this.emitNumericEntity(B,3)}return this.addToNumericResult(U,K,G,16),-1},P.prototype.stateNumericDecimal=function(U,G){for(var K=G;G<U.length;){var B=U.charCodeAt(G);if(h(B))G+=1;else return this.addToNumericResult(U,K,G,10),this.emitNumericEntity(B,2)}return this.addToNumericResult(U,K,G,10),-1},P.prototype.emitNumericEntity=function(U,G){var K;if(this.consumed<=G)return(K=this.errors)===null||K===void 0||K.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(U===c.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(U!==c.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},P.prototype.stateNamedEntity=function(U,G){for(var K=this.decodeTree,B=K[this.treeIndex],V=(B&d.VALUE_LENGTH)>>14;G<U.length;G++,this.excess++){var W=U.charCodeAt(G);if(this.treeIndex=S(K,B,this.treeIndex+Math.max(1,V),W),this.treeIndex<0)return this.result===0||this.decodeMode===m.Attribute&&(V===0||g(W))?0:this.emitNotTerminatedNamedEntity();if(B=K[this.treeIndex],V=(B&d.VALUE_LENGTH)>>14,V!==0){if(W===c.SEMI)return this.emitNamedEntityData(this.treeIndex,V,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},P.prototype.emitNotTerminatedNamedEntity=function(){var U,G=this,K=G.result,B=G.decodeTree,V=(B[K]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(K,V,this.consumed),(U=this.errors)===null||U===void 0||U.missingSemicolonAfterCharacterReference(),this.consumed},P.prototype.emitNamedEntityData=function(U,G,K){var B=this.decodeTree;return this.emitCodePoint(G===1?B[U]&~d.VALUE_LENGTH:B[U+1],K),G===3&&this.emitCodePoint(B[U+2],K),K},P.prototype.end=function(){var U;switch(this.state){case v.NamedEntity:return this.result!==0&&(this.decodeMode!==m.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case v.NumericDecimal:return this.emitNumericEntity(0,2);case v.NumericHex:return this.emitNumericEntity(0,3);case v.NumericStart:return(U=this.errors)===null||U===void 0||U.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case v.EntityStart:return 0}},P})();e.EntityDecoder=y;function E(P){var U="",G=new y(P,function(K){return U+=(0,a.fromCodePoint)(K)});return function(K,B){for(var V=0,W=0;(W=K.indexOf("&",W))>=0;){U+=K.slice(V,W),G.startEntity(B);var X=G.write(K,W+1);if(X<0){V=W+G.end();break}V=W+X,W=X===0?V+1:V}var Y=U+K.slice(V);return U="",Y}}function S(P,U,G,K){var B=(U&d.BRANCH_LENGTH)>>7,V=U&d.JUMP_TABLE;if(B===0)return V!==0&&K===V?G:-1;if(V){var W=K-V;return W<0||W>=B?-1:P[G+W]-1}for(var X=G,Y=X+B-1;X<=Y;){var O=X+Y>>>1,ie=P[O];if(ie<K)X=O+1;else if(ie>K)Y=O-1;else return P[O+B]}return-1}e.determineBranch=S;var b=E(s.default),w=E(o.default);function x(P,U){return U===void 0&&(U=m.Legacy),b(P,U)}e.decodeHTML=x;function D(P){return b(P,m.Attribute)}e.decodeHTMLAttribute=D;function N(P){return b(P,m.Strict)}e.decodeHTMLStrict=N;function C(P){return w(P,m.Strict)}e.decodeXML=C})(zu);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0;var t=zu,r;(function(h){h[h.Tab=9]="Tab",h[h.NewLine=10]="NewLine",h[h.FormFeed=12]="FormFeed",h[h.CarriageReturn=13]="CarriageReturn",h[h.Space=32]="Space",h[h.ExclamationMark=33]="ExclamationMark",h[h.Number=35]="Number",h[h.Amp=38]="Amp",h[h.SingleQuote=39]="SingleQuote",h[h.DoubleQuote=34]="DoubleQuote",h[h.Dash=45]="Dash",h[h.Slash=47]="Slash",h[h.Zero=48]="Zero",h[h.Nine=57]="Nine",h[h.Semi=59]="Semi",h[h.Lt=60]="Lt",h[h.Eq=61]="Eq",h[h.Gt=62]="Gt",h[h.Questionmark=63]="Questionmark",h[h.UpperA=65]="UpperA",h[h.LowerA=97]="LowerA",h[h.UpperF=70]="UpperF",h[h.LowerF=102]="LowerF",h[h.UpperZ=90]="UpperZ",h[h.LowerZ=122]="LowerZ",h[h.LowerX=120]="LowerX",h[h.OpeningSquareBracket=91]="OpeningSquareBracket"})(r||(r={}));var n;(function(h){h[h.Text=1]="Text",h[h.BeforeTagName=2]="BeforeTagName",h[h.InTagName=3]="InTagName",h[h.InSelfClosingTag=4]="InSelfClosingTag",h[h.BeforeClosingTagName=5]="BeforeClosingTagName",h[h.InClosingTagName=6]="InClosingTagName",h[h.AfterClosingTagName=7]="AfterClosingTagName",h[h.BeforeAttributeName=8]="BeforeAttributeName",h[h.InAttributeName=9]="InAttributeName",h[h.AfterAttributeName=10]="AfterAttributeName",h[h.BeforeAttributeValue=11]="BeforeAttributeValue",h[h.InAttributeValueDq=12]="InAttributeValueDq",h[h.InAttributeValueSq=13]="InAttributeValueSq",h[h.InAttributeValueNq=14]="InAttributeValueNq",h[h.BeforeDeclaration=15]="BeforeDeclaration",h[h.InDeclaration=16]="InDeclaration",h[h.InProcessingInstruction=17]="InProcessingInstruction",h[h.BeforeComment=18]="BeforeComment",h[h.CDATASequence=19]="CDATASequence",h[h.InSpecialComment=20]="InSpecialComment",h[h.InCommentLike=21]="InCommentLike",h[h.BeforeSpecialS=22]="BeforeSpecialS",h[h.SpecialStartSequence=23]="SpecialStartSequence",h[h.InSpecialTag=24]="InSpecialTag",h[h.BeforeEntity=25]="BeforeEntity",h[h.BeforeNumericEntity=26]="BeforeNumericEntity",h[h.InNamedEntity=27]="InNamedEntity",h[h.InNumericEntity=28]="InNumericEntity",h[h.InHexEntity=29]="InHexEntity"})(n||(n={}));function i(h){return h===r.Space||h===r.NewLine||h===r.Tab||h===r.FormFeed||h===r.CarriageReturn}function s(h){return h===r.Slash||h===r.Gt||i(h)}function o(h){return h>=r.Zero&&h<=r.Nine}function a(h){return h>=r.LowerA&&h<=r.LowerZ||h>=r.UpperA&&h<=r.UpperZ}function l(h){return h>=r.UpperA&&h<=r.UpperF||h>=r.LowerA&&h<=r.LowerF}var c;(function(h){h[h.NoValue=0]="NoValue",h[h.Unquoted=1]="Unquoted",h[h.Single=2]="Single",h[h.Double=3]="Double"})(c=e.QuoteType||(e.QuoteType={}));var u={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},d=(function(){function h(f,p){var g=f.xmlMode,v=g===void 0?!1:g,m=f.decodeEntities,y=m===void 0?!0:m;this.cbs=p,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=v,this.decodeEntities=y,this.entityTrie=v?t.xmlDecodeTree:t.htmlDecodeTree}return h.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},h.prototype.write=function(f){this.offset+=this.buffer.length,this.buffer=f,this.parse()},h.prototype.end=function(){this.running&&this.finish()},h.prototype.pause=function(){this.running=!1},h.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},h.prototype.getIndex=function(){return this.index},h.prototype.getSectionStart=function(){return this.sectionStart},h.prototype.stateText=function(f){f===r.Lt||!this.decodeEntities&&this.fastForwardTo(r.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&f===r.Amp&&(this.state=n.BeforeEntity)},h.prototype.stateSpecialStartSequence=function(f){var p=this.sequenceIndex===this.currentSequence.length,g=p?s(f):(f|32)===this.currentSequence[this.sequenceIndex];if(!g)this.isSpecial=!1;else if(!p){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(f)},h.prototype.stateInSpecialTag=function(f){if(this.sequenceIndex===this.currentSequence.length){if(f===r.Gt||i(f)){var p=this.index-this.currentSequence.length;if(this.sectionStart<p){var g=this.index;this.index=p,this.cbs.ontext(this.sectionStart,p),this.index=g}this.isSpecial=!1,this.sectionStart=p+2,this.stateInClosingTagName(f);return}this.sequenceIndex=0}(f|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===u.TitleEnd?this.decodeEntities&&f===r.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(r.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(f===r.Lt)},h.prototype.stateCDATASequence=function(f){f===u.Cdata[this.sequenceIndex]?++this.sequenceIndex===u.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=u.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(f))},h.prototype.fastForwardTo=function(f){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===f)return!0;return this.index=this.buffer.length+this.offset-1,!1},h.prototype.stateInCommentLike=function(f){f===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===u.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):f!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},h.prototype.isTagStartChar=function(f){return this.xmlMode?!s(f):a(f)},h.prototype.startSpecial=function(f,p){this.isSpecial=!0,this.currentSequence=f,this.sequenceIndex=p,this.state=n.SpecialStartSequence},h.prototype.stateBeforeTagName=function(f){if(f===r.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(f===r.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(f)){var p=f|32;this.sectionStart=this.index,!this.xmlMode&&p===u.TitleEnd[2]?this.startSpecial(u.TitleEnd,3):this.state=!this.xmlMode&&p===u.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else f===r.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(f))},h.prototype.stateInTagName=function(f){s(f)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f))},h.prototype.stateBeforeClosingTagName=function(f){i(f)||(f===r.Gt?this.state=n.Text:(this.state=this.isTagStartChar(f)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},h.prototype.stateInClosingTagName=function(f){(f===r.Gt||i(f))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(f))},h.prototype.stateAfterClosingTagName=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeAttributeName=function(f){f===r.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):f===r.Slash?this.state=n.InSelfClosingTag:i(f)||(this.state=n.InAttributeName,this.sectionStart=this.index)},h.prototype.stateInSelfClosingTag=function(f){f===r.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):i(f)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f))},h.prototype.stateInAttributeName=function(f){(f===r.Eq||s(f))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(f))},h.prototype.stateAfterAttributeName=function(f){f===r.Eq?this.state=n.BeforeAttributeValue:f===r.Slash||f===r.Gt?(this.cbs.onattribend(c.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f)):i(f)||(this.cbs.onattribend(c.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},h.prototype.stateBeforeAttributeValue=function(f){f===r.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):f===r.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):i(f)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(f))},h.prototype.handleInAttributeValue=function(f,p){f===p||!this.decodeEntities&&this.fastForwardTo(p)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p===r.DoubleQuote?c.Double:c.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&f===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},h.prototype.stateInAttributeValueDoubleQuotes=function(f){this.handleInAttributeValue(f,r.DoubleQuote)},h.prototype.stateInAttributeValueSingleQuotes=function(f){this.handleInAttributeValue(f,r.SingleQuote)},h.prototype.stateInAttributeValueNoQuotes=function(f){i(f)||f===r.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(c.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(f)):this.decodeEntities&&f===r.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},h.prototype.stateBeforeDeclaration=function(f){f===r.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=f===r.Dash?n.BeforeComment:n.InDeclaration},h.prototype.stateInDeclaration=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateInProcessingInstruction=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeComment=function(f){f===r.Dash?(this.state=n.InCommentLike,this.currentSequence=u.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},h.prototype.stateInSpecialComment=function(f){(f===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeSpecialS=function(f){var p=f|32;p===u.ScriptEnd[3]?this.startSpecial(u.ScriptEnd,4):p===u.StyleEnd[3]?this.startSpecial(u.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(f))},h.prototype.stateBeforeEntity=function(f){this.entityExcess=1,this.entityResult=0,f===r.Number?this.state=n.BeforeNumericEntity:f===r.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(f))},h.prototype.stateInNamedEntity=function(f){if(this.entityExcess+=1,this.trieIndex=(0,t.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,f),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var p=this.trieCurrent&t.BinTrieFlags.VALUE_LENGTH;if(p){var g=(p>>14)-1;if(!this.allowLegacyEntity()&&f!==r.Semi)this.trieIndex+=g;else{var v=this.index-this.entityExcess+1;v>this.sectionStart&&this.emitPartial(this.sectionStart,v),this.entityResult=this.trieIndex,this.trieIndex+=g,this.entityExcess=0,this.sectionStart=this.index+1,g===0&&this.emitNamedEntity()}}},h.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var f=(this.entityTrie[this.entityResult]&t.BinTrieFlags.VALUE_LENGTH)>>14;switch(f){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~t.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},h.prototype.stateBeforeNumericEntity=function(f){(f|32)===r.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(f))},h.prototype.emitNumericEntity=function(f){var p=this.index-this.entityExcess-1,g=p+2+ +(this.state===n.InHexEntity);g!==this.index&&(p>this.sectionStart&&this.emitPartial(this.sectionStart,p),this.sectionStart=this.index+Number(f),this.emitCodePoint((0,t.replaceCodePoint)(this.entityResult))),this.state=this.baseState},h.prototype.stateInNumericEntity=function(f){f===r.Semi?this.emitNumericEntity(!0):o(f)?(this.entityResult=this.entityResult*10+(f-r.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.stateInHexEntity=function(f){f===r.Semi?this.emitNumericEntity(!0):o(f)?(this.entityResult=this.entityResult*16+(f-r.Zero),this.entityExcess++):l(f)?(this.entityResult=this.entityResult*16+((f|32)-r.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},h.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},h.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},h.prototype.parse=function(){for(;this.shouldContinue();){var f=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(f);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(f);break}case n.InSpecialTag:{this.stateInSpecialTag(f);break}case n.CDATASequence:{this.stateCDATASequence(f);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(f);break}case n.InAttributeName:{this.stateInAttributeName(f);break}case n.InCommentLike:{this.stateInCommentLike(f);break}case n.InSpecialComment:{this.stateInSpecialComment(f);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(f);break}case n.InTagName:{this.stateInTagName(f);break}case n.InClosingTagName:{this.stateInClosingTagName(f);break}case n.BeforeTagName:{this.stateBeforeTagName(f);break}case n.AfterAttributeName:{this.stateAfterAttributeName(f);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(f);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(f);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(f);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(f);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(f);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(f);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(f);break}case n.InDeclaration:{this.stateInDeclaration(f);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(f);break}case n.BeforeComment:{this.stateBeforeComment(f);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(f);break}case n.InNamedEntity:{this.stateInNamedEntity(f);break}case n.BeforeEntity:{this.stateBeforeEntity(f);break}case n.InHexEntity:{this.stateInHexEntity(f);break}case n.InNumericEntity:{this.stateInNumericEntity(f);break}default:this.stateBeforeNumericEntity(f)}this.index++}this.cleanup()},h.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},h.prototype.handleTrailingData=function(){var f=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===u.CdataEnd?this.cbs.oncdata(this.sectionStart,f,0):this.cbs.oncomment(this.sectionStart,f,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,f)},h.prototype.emitPartial=function(f,p){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(f,p):this.cbs.ontext(f,p)},h.prototype.emitCodePoint=function(f){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(f):this.cbs.ontextentity(f)},h})();e.default=d})(V1);var jre=He&&He.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Vre=He&&He.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Wre=He&&He.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&jre(t,e,r);return Vre(t,e),t};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.Parser=void 0;var gf=Wre(V1),sI=zu,Qa=new Set(["input","option","optgroup","select","button","datalist","textarea"]),pt=new Set(["p"]),oI=new Set(["thead","tbody"]),aI=new Set(["dd","dt"]),lI=new Set(["rt","rp"]),qre=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pt],["h1",pt],["h2",pt],["h3",pt],["h4",pt],["h5",pt],["h6",pt],["select",Qa],["input",Qa],["output",Qa],["button",Qa],["datalist",Qa],["textarea",Qa],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",aI],["dt",aI],["address",pt],["article",pt],["aside",pt],["blockquote",pt],["details",pt],["div",pt],["dl",pt],["fieldset",pt],["figcaption",pt],["figure",pt],["footer",pt],["form",pt],["header",pt],["hr",pt],["main",pt],["nav",pt],["ol",pt],["pre",pt],["section",pt],["table",pt],["ul",pt],["rt",lI],["rp",lI],["tbody",oI],["tfoot",oI]]),Kre=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),cI=new Set(["math","svg"]),uI=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),Yre=/\s|\//,Xre=(function(){function e(t,r){r===void 0&&(r={});var n,i,s,o,a;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t??{},this.lowerCaseTagNames=(n=r.lowerCaseTags)!==null&&n!==void 0?n:!r.xmlMode,this.lowerCaseAttributeNames=(i=r.lowerCaseAttributeNames)!==null&&i!==void 0?i:!r.xmlMode,this.tokenizer=new((s=r.Tokenizer)!==null&&s!==void 0?s:gf.default)(this.options,this),(a=(o=this.cbs).onparserinit)===null||a===void 0||a.call(o,this)}return e.prototype.ontext=function(t,r){var n,i,s=this.getSlice(t,r);this.endIndex=r-1,(i=(n=this.cbs).ontext)===null||i===void 0||i.call(n,s),this.startIndex=r},e.prototype.ontextentity=function(t){var r,n,i=this.tokenizer.getSectionStart();this.endIndex=i-1,(n=(r=this.cbs).ontext)===null||n===void 0||n.call(r,(0,sI.fromCodePoint)(t)),this.startIndex=i},e.prototype.isVoidElement=function(t){return!this.options.xmlMode&&Kre.has(t)},e.prototype.onopentagname=function(t,r){this.endIndex=r;var n=this.getSlice(t,r);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},e.prototype.emitOpenTag=function(t){var r,n,i,s;this.openTagStart=this.startIndex,this.tagname=t;var o=!this.options.xmlMode&&qre.get(t);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){var a=this.stack.pop();(n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,a,!0)}this.isVoidElement(t)||(this.stack.push(t),cI.has(t)?this.foreignContext.push(!0):uI.has(t)&&this.foreignContext.push(!1)),(s=(i=this.cbs).onopentagname)===null||s===void 0||s.call(i,t),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(t){var r,n;this.startIndex=this.openTagStart,this.attribs&&((n=(r=this.cbs).onopentag)===null||n===void 0||n.call(r,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1},e.prototype.onclosetag=function(t,r){var n,i,s,o,a,l;this.endIndex=r;var c=this.getSlice(t,r);if(this.lowerCaseTagNames&&(c=c.toLowerCase()),(cI.has(c)||uI.has(c))&&this.foreignContext.pop(),this.isVoidElement(c))!this.options.xmlMode&&c==="br"&&((i=(n=this.cbs).onopentagname)===null||i===void 0||i.call(n,"br"),(o=(s=this.cbs).onopentag)===null||o===void 0||o.call(s,"br",{},!0),(l=(a=this.cbs).onclosetag)===null||l===void 0||l.call(a,"br",!1));else{var u=this.stack.lastIndexOf(c);if(u!==-1)if(this.cbs.onclosetag)for(var d=this.stack.length-u;d--;)this.cbs.onclosetag(this.stack.pop(),d!==0);else this.stack.length=u;else!this.options.xmlMode&&c==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1},e.prototype.onselfclosingtag=function(t){this.endIndex=t,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)},e.prototype.closeCurrentTag=function(t){var r,n,i=this.tagname;this.endOpenTag(t),this.stack[this.stack.length-1]===i&&((n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,i,!t),this.stack.pop())},e.prototype.onattribname=function(t,r){this.startIndex=t;var n=this.getSlice(t,r);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},e.prototype.onattribdata=function(t,r){this.attribvalue+=this.getSlice(t,r)},e.prototype.onattribentity=function(t){this.attribvalue+=(0,sI.fromCodePoint)(t)},e.prototype.onattribend=function(t,r){var n,i;this.endIndex=r,(i=(n=this.cbs).onattribute)===null||i===void 0||i.call(n,this.attribname,this.attribvalue,t===gf.QuoteType.Double?'"':t===gf.QuoteType.Single?"'":t===gf.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(t){var r=t.search(Yre),n=r<0?t:t.substr(0,r);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},e.prototype.ondeclaration=function(t,r){this.endIndex=r;var n=this.getSlice(t,r);if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(i),"!".concat(n))}this.startIndex=r+1},e.prototype.onprocessinginstruction=function(t,r){this.endIndex=r;var n=this.getSlice(t,r);if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(i),"?".concat(n))}this.startIndex=r+1},e.prototype.oncomment=function(t,r,n){var i,s,o,a;this.endIndex=r,(s=(i=this.cbs).oncomment)===null||s===void 0||s.call(i,this.getSlice(t,r-n)),(a=(o=this.cbs).oncommentend)===null||a===void 0||a.call(o),this.startIndex=r+1},e.prototype.oncdata=function(t,r,n){var i,s,o,a,l,c,u,d,h,f;this.endIndex=r;var p=this.getSlice(t,r-n);this.options.xmlMode||this.options.recognizeCDATA?((s=(i=this.cbs).oncdatastart)===null||s===void 0||s.call(i),(a=(o=this.cbs).ontext)===null||a===void 0||a.call(o,p),(c=(l=this.cbs).oncdataend)===null||c===void 0||c.call(l)):((d=(u=this.cbs).oncomment)===null||d===void 0||d.call(u,"[CDATA[".concat(p,"]]")),(f=(h=this.cbs).oncommentend)===null||f===void 0||f.call(h)),this.startIndex=r+1},e.prototype.onend=function(){var t,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}(r=(t=this.cbs).onend)===null||r===void 0||r.call(t)},e.prototype.reset=function(){var t,r,n,i;(r=(t=this.cbs).onreset)===null||r===void 0||r.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(i=(n=this.cbs).onparserinit)===null||i===void 0||i.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(t){this.reset(),this.end(t)},e.prototype.getSlice=function(t,r){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(t-this.bufferOffset,r-this.bufferOffset);r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,r-this.bufferOffset);return n},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(t){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)},e.prototype.end=function(t){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(t){this.write(t)},e.prototype.done=function(t){this.end(t)},e})();Hu.Parser=Xre;var Zi={},Kl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function r(n){return n.type===t.Tag||n.type===t.Script||n.type===t.Style}e.isTag=r,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(Kl);var it={},eo=He&&He.__extends||(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bu=He&&He.__assign||function(){return bu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},bu.apply(this,arguments)};Object.defineProperty(it,"__esModule",{value:!0});it.cloneNode=it.hasChildren=it.isDocument=it.isDirective=it.isComment=it.isText=it.isCDATA=it.isTag=it.Element=it.Document=it.CDATA=it.NodeWithChildren=it.ProcessingInstruction=it.Comment=it.Text=it.DataNode=it.Node=void 0;var Qr=Kl,K1=(function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),Y1(this,t)},e})();it.Node=K1;var Ug=(function(e){eo(t,e);function t(r){var n=e.call(this)||this;return n.data=r,n}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(r){this.data=r},enumerable:!1,configurable:!0}),t})(K1);it.DataNode=Ug;var tF=(function(e){eo(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=Qr.ElementType.Text,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t})(Ug);it.Text=tF;var rF=(function(e){eo(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=Qr.ElementType.Comment,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t})(Ug);it.Comment=rF;var nF=(function(e){eo(t,e);function t(r,n){var i=e.call(this,n)||this;return i.name=r,i.type=Qr.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t})(Ug);it.ProcessingInstruction=nF;var Hg=(function(e){eo(t,e);function t(r){var n=e.call(this)||this;return n.children=r,n}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(r){this.children=r},enumerable:!1,configurable:!0}),t})(K1);it.NodeWithChildren=Hg;var iF=(function(e){eo(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=Qr.ElementType.CDATA,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t})(Hg);it.CDATA=iF;var sF=(function(e){eo(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=Qr.ElementType.Root,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t})(Hg);it.Document=sF;var oF=(function(e){eo(t,e);function t(r,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=r==="script"?Qr.ElementType.Script:r==="style"?Qr.ElementType.Style:Qr.ElementType.Tag);var o=e.call(this,i)||this;return o.name=r,o.attribs=n,o.type=s,o}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(r){this.name=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var r=this;return Object.keys(this.attribs).map(function(n){var i,s;return{name:n,value:r.attribs[n],namespace:(i=r["x-attribsNamespace"])===null||i===void 0?void 0:i[n],prefix:(s=r["x-attribsPrefix"])===null||s===void 0?void 0:s[n]}})},enumerable:!1,configurable:!0}),t})(Hg);it.Element=oF;function aF(e){return(0,Qr.isTag)(e)}it.isTag=aF;function lF(e){return e.type===Qr.ElementType.CDATA}it.isCDATA=lF;function cF(e){return e.type===Qr.ElementType.Text}it.isText=cF;function uF(e){return e.type===Qr.ElementType.Comment}it.isComment=uF;function dF(e){return e.type===Qr.ElementType.Directive}it.isDirective=dF;function hF(e){return e.type===Qr.ElementType.Root}it.isDocument=hF;function Qre(e){return Object.prototype.hasOwnProperty.call(e,"children")}it.hasChildren=Qre;function Y1(e,t){t===void 0&&(t=!1);var r;if(cF(e))r=new tF(e.data);else if(uF(e))r=new rF(e.data);else if(aF(e)){var n=t?h0(e.children):[],i=new oF(e.name,bu({},e.attribs),n);n.forEach(function(l){return l.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=bu({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=bu({},e["x-attribsPrefix"])),r=i}else if(lF(e)){var n=t?h0(e.children):[],s=new iF(n);n.forEach(function(c){return c.parent=s}),r=s}else if(hF(e)){var n=t?h0(e.children):[],o=new sF(n);n.forEach(function(c){return c.parent=o}),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),r=o}else if(dF(e)){var a=new nF(e.name,e.data);e["x-name"]!=null&&(a["x-name"]=e["x-name"],a["x-publicId"]=e["x-publicId"],a["x-systemId"]=e["x-systemId"]),r=a}else throw new Error("Not implemented yet: ".concat(e.type));return r.startIndex=e.startIndex,r.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(r.sourceCodeLocation=e.sourceCodeLocation),r}it.cloneNode=Y1;function h0(e){for(var t=e.map(function(n){return Y1(n,!0)}),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}(function(e){var t=He&&He.__createBinding||(Object.create?function(a,l,c,u){u===void 0&&(u=c);var d=Object.getOwnPropertyDescriptor(l,c);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(a,u,d)}:function(a,l,c,u){u===void 0&&(u=c),a[u]=l[c]}),r=He&&He.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&t(l,a,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var n=Kl,i=it;r(it,e);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=(function(){function a(l,c,u){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof c=="function"&&(u=c,c=s),typeof l=="object"&&(c=l,l=void 0),this.callback=l??null,this.options=c??s,this.elementCB=u??null}return a.prototype.onparserinit=function(l){this.parser=l},a.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},a.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},a.prototype.onerror=function(l){this.handleCallback(l)},a.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},a.prototype.onopentag=function(l,c){var u=this.options.xmlMode?n.ElementType.Tag:void 0,d=new i.Element(l,c,void 0,u);this.addNode(d),this.tagStack.push(d)},a.prototype.ontext=function(l){var c=this.lastNode;if(c&&c.type===n.ElementType.Text)c.data+=l,this.options.withEndIndices&&(c.endIndex=this.parser.endIndex);else{var u=new i.Text(l);this.addNode(u),this.lastNode=u}},a.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=l;return}var c=new i.Comment(l);this.addNode(c),this.lastNode=c},a.prototype.oncommentend=function(){this.lastNode=null},a.prototype.oncdatastart=function(){var l=new i.Text(""),c=new i.CDATA([l]);this.addNode(c),l.parent=c,this.lastNode=l},a.prototype.oncdataend=function(){this.lastNode=null},a.prototype.onprocessinginstruction=function(l,c){var u=new i.ProcessingInstruction(l,c);this.addNode(u)},a.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},a.prototype.addNode=function(l){var c=this.tagStack[this.tagStack.length-1],u=c.children[c.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),c.children.push(l),u&&(l.prev=u,u.next=l),l.parent=c,this.lastNode=null},a})();e.DomHandler=o,e.default=o})(Zi);var Qf={},to={},yd={},fF={},qo={},X1={};Object.defineProperty(X1,"__esModule",{value:!0});function mf(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}X1.default=new Map(mf([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(mf([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(mf([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(mf([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var Ip={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);e.getCodePoint=String.prototype.codePointAt!=null?function(i,s){return i.codePointAt(s)}:(function(i,s){return(i.charCodeAt(s)&64512)===55296?(i.charCodeAt(s)-55296)*1024+i.charCodeAt(s+1)-56320+65536:i.charCodeAt(s)});function r(i){for(var s="",o=0,a;(a=e.xmlReplacer.exec(i))!==null;){var l=a.index,c=i.charCodeAt(l),u=t.get(c);u!==void 0?(s+=i.substring(o,l)+u,o=l+1):(s+="".concat(i.substring(o,l),"&#x").concat((0,e.getCodePoint)(i,l).toString(16),";"),o=e.xmlReplacer.lastIndex+=+((c&64512)===55296))}return s+i.substr(o)}e.encodeXML=r,e.escape=r;function n(i,s){return function(o){for(var a,l=0,c="";a=i.exec(o);)l!==a.index&&(c+=o.substring(l,a.index)),c+=s.get(a[0].charCodeAt(0)),l=a.index+1;return c+o.substring(l)}}e.escapeUTF8=n(/[&<>'"]/g,t),e.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(Ip);var Zre=He&&He.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qo,"__esModule",{value:!0});qo.encodeNonAsciiHTML=qo.encodeHTML=void 0;var Jre=Zre(X1),pF=Ip,ene=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function tne(e){return gF(ene,e)}qo.encodeHTML=tne;function rne(e){return gF(pF.xmlReplacer,e)}qo.encodeNonAsciiHTML=rne;function gF(e,t){for(var r="",n=0,i;(i=e.exec(t))!==null;){var s=i.index;r+=t.substring(n,s);var o=t.charCodeAt(s),a=Jre.default.get(o);if(typeof a=="object"){if(s+1<t.length){var l=t.charCodeAt(s+1),c=typeof a.n=="number"?a.n===l?a.o:void 0:a.n.get(l);if(c!==void 0){r+=c,n=e.lastIndex+=1;continue}}a=a.v}if(a!==void 0)r+=a,n=s+1;else{var u=(0,pF.getCodePoint)(t,s);r+="&#x".concat(u.toString(16),";"),n=e.lastIndex+=+(u!==o)}}return r+t.substr(n)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLAttribute=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.DecodingMode=e.EntityDecoder=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.EntityLevel=void 0;var t=zu,r=qo,n=Ip,i;(function(h){h[h.XML=0]="XML",h[h.HTML=1]="HTML"})(i=e.EntityLevel||(e.EntityLevel={}));var s;(function(h){h[h.UTF8=0]="UTF8",h[h.ASCII=1]="ASCII",h[h.Extensive=2]="Extensive",h[h.Attribute=3]="Attribute",h[h.Text=4]="Text"})(s=e.EncodingMode||(e.EncodingMode={}));function o(h,f){f===void 0&&(f=i.XML);var p=typeof f=="number"?f:f.level;if(p===i.HTML){var g=typeof f=="object"?f.mode:void 0;return(0,t.decodeHTML)(h,g)}return(0,t.decodeXML)(h)}e.decode=o;function a(h,f){var p;f===void 0&&(f=i.XML);var g=typeof f=="number"?{level:f}:f;return(p=g.mode)!==null&&p!==void 0||(g.mode=t.DecodingMode.Strict),o(h,g)}e.decodeStrict=a;function l(h,f){f===void 0&&(f=i.XML);var p=typeof f=="number"?{level:f}:f;return p.mode===s.UTF8?(0,n.escapeUTF8)(h):p.mode===s.Attribute?(0,n.escapeAttribute)(h):p.mode===s.Text?(0,n.escapeText)(h):p.level===i.HTML?p.mode===s.ASCII?(0,r.encodeNonAsciiHTML)(h):(0,r.encodeHTML)(h):(0,n.encodeXML)(h)}e.encode=l;var c=Ip;Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var u=qo;Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return u.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return u.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return u.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return u.encodeHTML}});var d=zu;Object.defineProperty(e,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(e,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})})(fF);var _l={};Object.defineProperty(_l,"__esModule",{value:!0});_l.attributeNames=_l.elementNames=void 0;_l.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]}));_l.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}));var dl=He&&He.__assign||function(){return dl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dl.apply(this,arguments)},nne=He&&He.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ine=He&&He.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),sne=He&&He.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&nne(t,e,r);return ine(t,e),t};Object.defineProperty(yd,"__esModule",{value:!0});yd.render=void 0;var $i=sne(Kl),_p=fF,mF=_l,one=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function ane(e){return e.replace(/"/g,"&quot;")}function lne(e,t){var r;if(e){var n=((r=t.encodeEntities)!==null&&r!==void 0?r:t.decodeEntities)===!1?ane:t.xmlMode||t.encodeEntities!=="utf8"?_p.encodeXML:_p.escapeAttribute;return Object.keys(e).map(function(i){var s,o,a=(s=e[i])!==null&&s!==void 0?s:"";return t.xmlMode==="foreign"&&(i=(o=mF.attributeNames.get(i))!==null&&o!==void 0?o:i),!t.emptyAttrs&&!t.xmlMode&&a===""?i:"".concat(i,'="').concat(n(a),'"')}).join(" ")}}var dI=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function zg(e,t){t===void 0&&(t={});for(var r=("length"in e)?e:[e],n="",i=0;i<r.length;i++)n+=cne(r[i],t);return n}yd.render=zg;yd.default=zg;function cne(e,t){switch(e.type){case $i.Root:return zg(e.children,t);case $i.Doctype:case $i.Directive:return fne(e);case $i.Comment:return mne(e);case $i.CDATA:return gne(e);case $i.Script:case $i.Style:case $i.Tag:return hne(e,t);case $i.Text:return pne(e,t)}}var une=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),dne=new Set(["svg","math"]);function hne(e,t){var r;t.xmlMode==="foreign"&&(e.name=(r=mF.elementNames.get(e.name))!==null&&r!==void 0?r:e.name,e.parent&&une.has(e.parent.name)&&(t=dl(dl({},t),{xmlMode:!1}))),!t.xmlMode&&dne.has(e.name)&&(t=dl(dl({},t),{xmlMode:"foreign"}));var n="<".concat(e.name),i=lne(e.attribs,t);return i&&(n+=" ".concat(i)),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&dI.has(e.name))?(t.xmlMode||(n+=" "),n+="/>"):(n+=">",e.children.length>0&&(n+=zg(e.children,t)),(t.xmlMode||!dI.has(e.name))&&(n+="</".concat(e.name,">"))),n}function fne(e){return"<".concat(e.data,">")}function pne(e,t){var r,n=e.data||"";return((r=t.encodeEntities)!==null&&r!==void 0?r:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&one.has(e.parent.name))&&(n=t.xmlMode||t.encodeEntities!=="utf8"?(0,_p.encodeXML)(n):(0,_p.escapeText)(n)),n}function gne(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}function mne(e){return"<!--".concat(e.data,"-->")}var vne=He&&He.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(to,"__esModule",{value:!0});to.getOuterHTML=vF;to.getInnerHTML=Tne;to.getText=Zf;to.textContent=sT;to.innerText=oT;var Ei=Zi,yne=vne(yd),Ene=Kl;function vF(e,t){return(0,yne.default)(e,t)}function Tne(e,t){return(0,Ei.hasChildren)(e)?e.children.map(function(r){return vF(r,t)}).join(""):""}function Zf(e){return Array.isArray(e)?e.map(Zf).join(""):(0,Ei.isTag)(e)?e.name==="br"?`
`:Zf(e.children):(0,Ei.isCDATA)(e)?Zf(e.children):(0,Ei.isText)(e)?e.data:""}function sT(e){return Array.isArray(e)?e.map(sT).join(""):(0,Ei.hasChildren)(e)&&!(0,Ei.isComment)(e)?sT(e.children):(0,Ei.isText)(e)?e.data:""}function oT(e){return Array.isArray(e)?e.map(oT).join(""):(0,Ei.hasChildren)(e)&&(e.type===Ene.ElementType.Tag||(0,Ei.isCDATA)(e))?oT(e.children):(0,Ei.isText)(e)?e.data:""}var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.getChildren=yF;Ri.getParent=EF;Ri.getSiblings=Sne;Ri.getAttributeValue=bne;Ri.hasAttrib=wne;Ri.getName=Ane;Ri.nextElementSibling=kne;Ri.prevElementSibling=Cne;var Q1=Zi;function yF(e){return(0,Q1.hasChildren)(e)?e.children:[]}function EF(e){return e.parent||null}function Sne(e){var t,r,n=EF(e);if(n!=null)return yF(n);for(var i=[e],s=e.prev,o=e.next;s!=null;)i.unshift(s),t=s,s=t.prev;for(;o!=null;)i.push(o),r=o,o=r.next;return i}function bne(e,t){var r;return(r=e.attribs)===null||r===void 0?void 0:r[t]}function wne(e,t){return e.attribs!=null&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&e.attribs[t]!=null}function Ane(e){return e.name}function kne(e){for(var t,r=e.next;r!==null&&!(0,Q1.isTag)(r);)t=r,r=t.next;return r}function Cne(e){for(var t,r=e.prev;r!==null&&!(0,Q1.isTag)(r);)t=r,r=t.prev;return r}var ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.removeElement=Ed;ro.replaceElement=xne;ro.appendChild=Rne;ro.append=Ine;ro.prependChild=_ne;ro.prepend=Lne;function Ed(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,r=t.lastIndexOf(e);r>=0&&t.splice(r,1)}e.next=null,e.prev=null,e.parent=null}function xne(e,t){var r=t.prev=e.prev;r&&(r.next=t);var n=t.next=e.next;n&&(n.prev=t);var i=t.parent=e.parent;if(i){var s=i.children;s[s.lastIndexOf(e)]=t,e.parent=null}}function Rne(e,t){if(Ed(t),t.next=null,t.parent=e,e.children.push(t)>1){var r=e.children[e.children.length-2];r.next=t,t.prev=r}else t.prev=null}function Ine(e,t){Ed(t);var r=e.parent,n=e.next;if(t.next=n,t.prev=e,e.next=t,t.parent=r,n){if(n.prev=t,r){var i=r.children;i.splice(i.lastIndexOf(n),0,t)}}else r&&r.children.push(t)}function _ne(e,t){if(Ed(t),t.parent=e,t.prev=null,e.children.unshift(t)!==1){var r=e.children[1];r.prev=t,t.next=r}else t.next=null}function Lne(e,t){Ed(t);var r=e.parent;if(r){var n=r.children;n.splice(n.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=r,t.prev=e.prev,t.next=e,e.prev=t}var as={};Object.defineProperty(as,"__esModule",{value:!0});as.filter=Pne;as.find=TF;as.findOneChild=Dne;as.findOne=SF;as.existsOne=bF;as.findAll=One;var Ko=Zi;function Pne(e,t,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),TF(e,Array.isArray(t)?t:[t],r,n)}function TF(e,t,r,n){for(var i=[],s=[Array.isArray(t)?t:[t]],o=[0];;){if(o[0]>=s[0].length){if(o.length===1)return i;s.shift(),o.shift();continue}var a=s[0][o[0]++];if(e(a)&&(i.push(a),--n<=0))return i;r&&(0,Ko.hasChildren)(a)&&a.children.length>0&&(o.unshift(0),s.unshift(a.children))}}function Dne(e,t){return t.find(e)}function SF(e,t,r){r===void 0&&(r=!0);for(var n=Array.isArray(t)?t:[t],i=0;i<n.length;i++){var s=n[i];if((0,Ko.isTag)(s)&&e(s))return s;if(r&&(0,Ko.hasChildren)(s)&&s.children.length>0){var o=SF(e,s.children,!0);if(o)return o}}return null}function bF(e,t){return(Array.isArray(t)?t:[t]).some(function(r){return(0,Ko.isTag)(r)&&e(r)||(0,Ko.hasChildren)(r)&&bF(e,r.children)})}function One(e,t){for(var r=[],n=[Array.isArray(t)?t:[t]],i=[0];;){if(i[0]>=n[0].length){if(n.length===1)return r;n.shift(),i.shift();continue}var s=n[0][i[0]++];(0,Ko.isTag)(s)&&e(s)&&r.push(s),(0,Ko.hasChildren)(s)&&s.children.length>0&&(i.unshift(0),n.unshift(s.children))}}var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.testElement=Mne;ls.getElements=Fne;ls.getElementById=Bne;ls.getElementsByTagName=Une;ls.getElementsByClassName=Hne;ls.getElementsByTagType=zne;var Oo=Zi,Td=as,Lp={tag_name:function(e){return typeof e=="function"?function(t){return(0,Oo.isTag)(t)&&e(t.name)}:e==="*"?Oo.isTag:function(t){return(0,Oo.isTag)(t)&&t.name===e}},tag_type:function(e){return typeof e=="function"?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return typeof e=="function"?function(t){return(0,Oo.isText)(t)&&e(t.data)}:function(t){return(0,Oo.isText)(t)&&t.data===e}}};function Z1(e,t){return typeof t=="function"?function(r){return(0,Oo.isTag)(r)&&t(r.attribs[e])}:function(r){return(0,Oo.isTag)(r)&&r.attribs[e]===t}}function Nne(e,t){return function(r){return e(r)||t(r)}}function wF(e){var t=Object.keys(e).map(function(r){var n=e[r];return Object.prototype.hasOwnProperty.call(Lp,r)?Lp[r](n):Z1(r,n)});return t.length===0?null:t.reduce(Nne)}function Mne(e,t){var r=wF(e);return r?r(t):!0}function Fne(e,t,r,n){n===void 0&&(n=1/0);var i=wF(e);return i?(0,Td.filter)(i,t,r,n):[]}function Bne(e,t,r){return r===void 0&&(r=!0),Array.isArray(t)||(t=[t]),(0,Td.findOne)(Z1("id",e),t,r)}function Une(e,t,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,Td.filter)(Lp.tag_name(e),t,r,n)}function Hne(e,t,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,Td.filter)(Z1("class",e),t,r,n)}function zne(e,t,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,Td.filter)(Lp.tag_type(e),t,r,n)}var aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.DocumentPosition=void 0;aa.removeSubsets=$ne;aa.compareDocumentPosition=AF;aa.uniqueSort=Gne;var hI=Zi;function $ne(e){for(var t=e.length;--t>=0;){var r=e[t];if(t>0&&e.lastIndexOf(r,t-1)>=0){e.splice(t,1);continue}for(var n=r.parent;n;n=n.parent)if(e.includes(n)){e.splice(t,1);break}}return e}var Vn;(function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"})(Vn||(aa.DocumentPosition=Vn={}));function AF(e,t){var r=[],n=[];if(e===t)return 0;for(var i=(0,hI.hasChildren)(e)?e:e.parent;i;)r.unshift(i),i=i.parent;for(i=(0,hI.hasChildren)(t)?t:t.parent;i;)n.unshift(i),i=i.parent;for(var s=Math.min(r.length,n.length),o=0;o<s&&r[o]===n[o];)o++;if(o===0)return Vn.DISCONNECTED;var a=r[o-1],l=a.children,c=r[o],u=n[o];return l.indexOf(c)>l.indexOf(u)?a===t?Vn.FOLLOWING|Vn.CONTAINED_BY:Vn.FOLLOWING:a===e?Vn.PRECEDING|Vn.CONTAINS:Vn.PRECEDING}function Gne(e){return e=e.filter(function(t,r,n){return!n.includes(t,r+1)}),e.sort(function(t,r){var n=AF(t,r);return n&Vn.PRECEDING?-1:n&Vn.FOLLOWING?1:0}),e}var J1={};Object.defineProperty(J1,"__esModule",{value:!0});J1.getFeed=Vne;var jne=to,Sd=ls;function Vne(e){var t=Pp(Xne,e);return t?t.name==="feed"?Wne(t):qne(t):null}function Wne(e){var t,r=e.children,n={type:"atom",items:(0,Sd.getElementsByTagName)("entry",r).map(function(o){var a,l=o.children,c={media:kF(l)};Kr(c,"id","id",l),Kr(c,"title","title",l);var u=(a=Pp("link",l))===null||a===void 0?void 0:a.attribs.href;u&&(c.link=u);var d=Gs("summary",l)||Gs("content",l);d&&(c.description=d);var h=Gs("updated",l);return h&&(c.pubDate=new Date(h)),c})};Kr(n,"id","id",r),Kr(n,"title","title",r);var i=(t=Pp("link",r))===null||t===void 0?void 0:t.attribs.href;i&&(n.link=i),Kr(n,"description","subtitle",r);var s=Gs("updated",r);return s&&(n.updated=new Date(s)),Kr(n,"author","email",r,!0),n}function qne(e){var t,r,n=(r=(t=Pp("channel",e.children))===null||t===void 0?void 0:t.children)!==null&&r!==void 0?r:[],i={type:e.name.substr(0,3),id:"",items:(0,Sd.getElementsByTagName)("item",e.children).map(function(o){var a=o.children,l={media:kF(a)};Kr(l,"id","guid",a),Kr(l,"title","title",a),Kr(l,"link","link",a),Kr(l,"description","description",a);var c=Gs("pubDate",a)||Gs("dc:date",a);return c&&(l.pubDate=new Date(c)),l})};Kr(i,"title","title",n),Kr(i,"link","link",n),Kr(i,"description","description",n);var s=Gs("lastBuildDate",n);return s&&(i.updated=new Date(s)),Kr(i,"author","managingEditor",n,!0),i}var Kne=["url","type","lang"],Yne=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function kF(e){return(0,Sd.getElementsByTagName)("media:content",e).map(function(t){for(var r=t.attribs,n={medium:r.medium,isDefault:!!r.isDefault},i=0,s=Kne;i<s.length;i++){var o=s[i];r[o]&&(n[o]=r[o])}for(var a=0,l=Yne;a<l.length;a++){var o=l[a];r[o]&&(n[o]=parseInt(r[o],10))}return r.expression&&(n.expression=r.expression),n})}function Pp(e,t){return(0,Sd.getElementsByTagName)(e,t,!0,1)[0]}function Gs(e,t,r){return r===void 0&&(r=!1),(0,jne.textContent)((0,Sd.getElementsByTagName)(e,t,r,1)).trim()}function Kr(e,t,r,n,i){i===void 0&&(i=!1);var s=Gs(r,n,i);s&&(e[t]=s)}function Xne(e){return e==="rss"||e==="feed"||e==="rdf:RDF"}(function(e){var t=He&&He.__createBinding||(Object.create?function(i,s,o,a){a===void 0&&(a=o);var l=Object.getOwnPropertyDescriptor(s,o);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,a,l)}:function(i,s,o,a){a===void 0&&(a=o),i[a]=s[o]}),r=He&&He.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&t(s,i,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,r(to,e),r(Ri,e),r(ro,e),r(as,e),r(ls,e),r(aa,e),r(J1,e);var n=Zi;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})})(Qf);(function(e){var t=He&&He.__createBinding||(Object.create?function(m,y,E,S){S===void 0&&(S=E);var b=Object.getOwnPropertyDescriptor(y,E);(!b||("get"in b?!y.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return y[E]}}),Object.defineProperty(m,S,b)}:function(m,y,E,S){S===void 0&&(S=E),m[S]=y[E]}),r=He&&He.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),n=He&&He.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var E in m)E!=="default"&&Object.prototype.hasOwnProperty.call(m,E)&&t(y,m,E);return r(y,m),y},i=He&&He.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DefaultHandler=e.DomHandler=e.Parser=void 0;var s=Hu,o=Hu;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return o.Parser}});var a=Zi,l=Zi;Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function c(m,y){var E=new a.DomHandler(void 0,y);return new s.Parser(E,y).end(m),E.root}e.parseDocument=c;function u(m,y){return c(m,y).children}e.parseDOM=u;function d(m,y,E){var S=new a.DomHandler(m,y,E);return new s.Parser(S,y)}e.createDomStream=d;var h=V1;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return i(h).default}}),e.ElementType=n(Kl);var f=Qf,p=Qf;Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return p.getFeed}});var g={xmlMode:!0};function v(m,y){return y===void 0&&(y=g),(0,f.getFeed)(u(m,y))}e.parseFeed=v,e.DomUtils=n(Qf)})(eF);var Qne=e=>{if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},eb={};Object.defineProperty(eb,"__esModule",{value:!0});function fI(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zne(e){var t,r;return fI(e)===!1?!1:(t=e.constructor,t===void 0?!0:(r=t.prototype,!(fI(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}eb.isPlainObject=Zne;var Jne=function(e){return eie(e)&&!tie(e)};function eie(e){return!!e&&typeof e=="object"}function tie(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||iie(e)}var rie=typeof Symbol=="function"&&Symbol.for,nie=rie?Symbol.for("react.element"):60103;function iie(e){return e.$$typeof===nie}function sie(e){return Array.isArray(e)?[]:{}}function $u(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Ll(sie(e),e,t):e}function oie(e,t,r){return e.concat(t).map(function(n){return $u(n,r)})}function aie(e,t){if(!t.customMerge)return Ll;var r=t.customMerge(e);return typeof r=="function"?r:Ll}function lie(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function pI(e){return Object.keys(e).concat(lie(e))}function CF(e,t){try{return t in e}catch{return!1}}function cie(e,t){return CF(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function uie(e,t,r){var n={};return r.isMergeableObject(e)&&pI(e).forEach(function(i){n[i]=$u(e[i],r)}),pI(t).forEach(function(i){cie(e,i)||(CF(e,i)&&r.isMergeableObject(t[i])?n[i]=aie(i,r)(e[i],t[i],r):n[i]=$u(t[i],r))}),n}function Ll(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||oie,r.isMergeableObject=r.isMergeableObject||Jne,r.cloneUnlessOtherwiseSpecified=$u;var n=Array.isArray(t),i=Array.isArray(e),s=n===i;return s?n?r.arrayMerge(e,t,r):uie(e,t,r):$u(t,r)}Ll.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,n){return Ll(r,n,t)},{})};var die=Ll,hie=die,xF={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.parseSrcset=r()})(He,function(){return function(t){function r(S){return S===" "||S==="	"||S===`
`||S==="\f"||S==="\r"}function n(S){var b,w=S.exec(t.substring(v));if(w)return b=w[0],v+=b.length,b}for(var i=t.length,s=/^[ \t\n\r\u000c]+/,o=/^[, \t\n\r\u000c]+/,a=/^[^ \t\n\r\u000c]+/,l=/[,]+$/,c=/^\d+$/,u=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,d,h,f,p,g,v=0,m=[];;){if(n(o),v>=i)return m;d=n(a),h=[],d.slice(-1)===","?(d=d.replace(l,""),E()):y()}function y(){for(n(s),f="",p="in descriptor";;){if(g=t.charAt(v),p==="in descriptor")if(r(g))f&&(h.push(f),f="",p="after descriptor");else if(g===","){v+=1,f&&h.push(f),E();return}else if(g==="(")f=f+g,p="in parens";else if(g===""){f&&h.push(f),E();return}else f=f+g;else if(p==="in parens")if(g===")")f=f+g,p="in descriptor";else if(g===""){h.push(f),E();return}else f=f+g;else if(p==="after descriptor"&&!r(g))if(g===""){E();return}else p="in descriptor",v-=1;v+=1}}function E(){var S=!1,b,w,x,D,N={},C,P,U,G,K;for(D=0;D<h.length;D++)C=h[D],P=C[C.length-1],U=C.substring(0,C.length-1),G=parseInt(U,10),K=parseFloat(U),c.test(U)&&P==="w"?((b||w)&&(S=!0),G===0?S=!0:b=G):u.test(U)&&P==="x"?((b||w||x)&&(S=!0),K<0?S=!0:w=K):c.test(U)&&P==="h"?((x||w)&&(S=!0),G===0?S=!0:x=G):S=!0;S?console&&console.log&&console.log("Invalid srcset descriptor found in '"+t+"' at '"+C+"'."):(N.url=d,b&&(N.w=b),w&&(N.d=w),x&&(N.h=x),m.push(N))}}})})(xF);var fie=xF.exports,tb={exports:{}},qe=String,RF=function(){return{isColorSupported:!1,reset:qe,bold:qe,dim:qe,italic:qe,underline:qe,inverse:qe,hidden:qe,strikethrough:qe,black:qe,red:qe,green:qe,yellow:qe,blue:qe,magenta:qe,cyan:qe,white:qe,gray:qe,bgBlack:qe,bgRed:qe,bgGreen:qe,bgYellow:qe,bgBlue:qe,bgMagenta:qe,bgCyan:qe,bgWhite:qe,blackBright:qe,redBright:qe,greenBright:qe,yellowBright:qe,blueBright:qe,magentaBright:qe,cyanBright:qe,whiteBright:qe,bgBlackBright:qe,bgRedBright:qe,bgGreenBright:qe,bgYellowBright:qe,bgBlueBright:qe,bgMagentaBright:qe,bgCyanBright:qe,bgWhiteBright:qe}};tb.exports=RF();tb.exports.createColors=RF;var pie=tb.exports,gie={},mie=Object.freeze(Object.defineProperty({__proto__:null,default:gie},Symbol.toStringTag,{value:"Module"})),Jn=qz(mie),gI=pie,mI=Jn,aT=class IF extends Error{constructor(t,r,n,i,s,o){super(t),this.name="CssSyntaxError",this.reason=t,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),typeof r<"u"&&typeof n<"u"&&(typeof r=="number"?(this.line=r,this.column=n):(this.line=r.line,this.column=r.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,IF)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(t){if(!this.source)return"";let r=this.source;t==null&&(t=gI.isColorSupported),mI&&t&&(r=mI(r));let n=r.split(/\r?\n/),i=Math.max(this.line-3,0),s=Math.min(this.line+2,n.length),o=String(s).length,a,l;if(t){let{bold:c,gray:u,red:d}=gI.createColors(!0);a=h=>c(d(h)),l=h=>u(h)}else a=l=c=>c;return n.slice(i,s).map((c,u)=>{let d=i+1+u,h=" "+(" "+d).slice(-o)+" | ";if(d===this.line){let f=l(h.replace(/\d/g," "))+c.slice(0,this.column-1).replace(/[^\t]/g," ");return a(">")+l(h)+c+`
 `+f+a("^")}return" "+l(h)+c}).join(`
`)}toString(){let t=this.showSourceCode();return t&&(t=`

`+t+`
`),this.name+": "+this.message+t}},rb=aT;aT.default=aT;var bd={};bd.isClean=Symbol("isClean");bd.my=Symbol("my");var vI={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function vie(e){return e[0].toUpperCase()+e.slice(1)}var lT=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let n=e.parent,i=0;for(;n&&n.type!=="root";)i+=1,n=n.parent;if(r.includes(`
`)){let s=this.raw(e,null,"indent");if(s.length)for(let o=0;o<i;o++)r+=s}return r}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let n;e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let i=e.nodes[n],s=this.raw(i,"before");s&&this.builder(s),this.stringify(i,t!==n||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(e,t,r){let n;if(r||(r=t),t&&(n=e.raws[t],typeof n<"u"))return n;let i=e.parent;if(r==="before"&&(!i||i.type==="root"&&i.first===e||i&&i.type==="document"))return"";if(!i)return vI[r];let s=e.root();if(s.rawCache||(s.rawCache={}),typeof s.rawCache[r]<"u")return s.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let o="raw"+vie(r);this[o]?n=this[o](s,e):s.walk(a=>{if(n=a.raws[t],typeof n<"u")return!1})}return typeof n>"u"&&(n=vI[r]),s.rawCache[r]=n,n}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(n=>{if(typeof n.raws.before<"u")return r=n.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(n=>{if(typeof n.raws.before<"u")return r=n.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t<"u"))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&typeof r.raws.before<"u"){let i=r.raws.before.split(`
`);return t=i[i.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t<"u"))return!1}),t}rawValue(e,t){let r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}},_F=lT;lT.default=lT;var yie=_F;function cT(e,t){new yie(t).stringify(e)}var $g=cT;cT.default=cT;var{isClean:vf,my:Eie}=bd,Tie=rb,Sie=_F,bie=$g;function uT(e,t){let r=new e.constructor;for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n)||n==="proxyCache")continue;let i=e[n],s=typeof i;n==="parent"&&s==="object"?t&&(r[n]=t):n==="source"?r[n]=i:Array.isArray(i)?r[n]=i.map(o=>uT(o,r)):(s==="object"&&i!==null&&(i=uT(i)),r[n]=i)}return r}var dT=class{constructor(e={}){this.raws={},this[vf]=!1,this[Eie]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=uT(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:n}=this.rangeBy(t);return this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new Tie(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[vf]){this[vf]=!1;let e=this;for(;e=e.parent;)e[vf]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let n=t.indexOf(e.word);n!==-1&&(r=this.positionInside(n,t))}return r}positionInside(e,t){let r=t||this.toString(),n=this.source.start.column,i=this.source.start.line;for(let s=0;s<e;s++)r[s]===`
`?(n=1,i+=1):n+=1;return{column:n,line:i}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n=this.toString(),i=n.indexOf(e.word);i!==-1&&(t=this.positionInside(i,n),r=this.positionInside(i+e.word.length,n))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new Sie().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let r={},n=t==null;t=t||new Map;let i=0;for(let s in this){if(!Object.prototype.hasOwnProperty.call(this,s)||s==="parent"||s==="proxyCache")continue;let o=this[s];if(Array.isArray(o))r[s]=o.map(a=>typeof a=="object"&&a.toJSON?a.toJSON(null,t):a);else if(typeof o=="object"&&o.toJSON)r[s]=o.toJSON(null,t);else if(s==="source"){let a=t.get(o.input);a==null&&(a=i,t.set(o.input,i),i++),r[s]={end:o.end,inputId:a,start:o.start}}else r[s]=o}return n&&(r.inputs=[...t.keys()].map(s=>s.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=bie){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}warn(e,t,r){let n={node:this};for(let i in r)n[i]=r[i];return e.warn(t,n)}get proxyOf(){return this}},Gg=dT;dT.default=dT;var wie=Gg,hT=class extends wie{constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}},jg=hT;hT.default=hT;var Aie="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",kie=(e=21)=>{let t="",r=e|0;for(;r--;)t+=Aie[Math.random()*64|0];return t},Cie={nanoid:kie},{SourceMapConsumer:yI,SourceMapGenerator:EI}=Jn,{existsSync:xie,readFileSync:Rie}=Jn,{dirname:f0,join:Iie}=Jn;function _ie(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}var fT=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=f0(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new yI(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,n=/^data:application\/json;charset=utf-?8,/,i=/^data:application\/json,/;if(n.test(e)||i.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return _ie(e.substr(RegExp.lastMatch.length));let s=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+s)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}loadFile(e){if(this.root=f0(e),xie(e))return this.mapFile=e,Rie(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let n=this.loadFile(r);if(!n)throw new Error("Unable to load previous source map: "+r.toString());return n}}else{if(t instanceof yI)return EI.fromSourceMap(t).toString();if(t instanceof EI)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=Iie(f0(e),r)),this.loadFile(r)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}},LF=fT;fT.default=fT;var{SourceMapConsumer:Lie,SourceMapGenerator:Pie}=Jn,{fileURLToPath:TI,pathToFileURL:yf}=Jn,{isAbsolute:pT,resolve:gT}=Jn,{nanoid:Die}=Cie,p0=Jn,SI=rb,Oie=LF,g0=Symbol("fromOffsetCache"),Nie=!!(Lie&&Pie),bI=!!(gT&&pT),Dp=class{constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!bI||/^\w+:\/\//.test(t.from)||pT(t.from)?this.file=t.from:this.file=gT(t.from)),bI&&Nie){let r=new Oie(this.css,t);if(r.text){this.map=r;let n=r.consumer().file;!this.file&&n&&(this.file=this.mapResolve(n))}}this.file||(this.id="<input css "+Die(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,n={}){let i,s,o;if(t&&typeof t=="object"){let l=t,c=r;if(typeof l.offset=="number"){let u=this.fromOffset(l.offset);t=u.line,r=u.col}else t=l.line,r=l.column;if(typeof c.offset=="number"){let u=this.fromOffset(c.offset);s=u.line,o=u.col}else s=c.line,o=c.column}else if(!r){let l=this.fromOffset(t);t=l.line,r=l.col}let a=this.origin(t,r,s,o);return a?i=new SI(e,a.endLine===void 0?a.line:{column:a.column,line:a.line},a.endLine===void 0?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,n.plugin):i=new SI(e,s===void 0?t:{column:r,line:t},s===void 0?r:{column:o,line:s},this.css,this.file,n.plugin),i.input={column:r,endColumn:o,endLine:s,line:t,source:this.css},this.file&&(yf&&(i.input.url=yf(this.file).toString()),i.input.file=this.file),i}fromOffset(e){let t,r;if(this[g0])r=this[g0];else{let i=this.css.split(`
`);r=new Array(i.length);let s=0;for(let o=0,a=i.length;o<a;o++)r[o]=s,s+=i[o].length+1;this[g0]=r}t=r[r.length-1];let n=0;if(e>=t)n=r.length-1;else{let i=r.length-2,s;for(;n<i;)if(s=n+(i-n>>1),e<r[s])i=s-1;else if(e>=r[s+1])n=s+1;else{n=s;break}}return{col:e-r[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:gT(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,n){if(!this.map)return!1;let i=this.map.consumer(),s=i.originalPositionFor({column:t,line:e});if(!s.source)return!1;let o;typeof r=="number"&&(o=i.originalPositionFor({column:n,line:r}));let a;pT(s.source)?a=yf(s.source):a=new URL(s.source,this.map.consumer().sourceRoot||yf(this.map.mapFile));let l={column:s.column,endColumn:o&&o.column,endLine:o&&o.line,line:s.line,url:a.toString()};if(a.protocol==="file:")if(TI)l.file=TI(a);else throw new Error("file: protocol is not available in this PostCSS build");let c=i.sourceContentFor(s.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}},Vg=Dp;Dp.default=Dp;p0&&p0.registerInput&&p0.registerInput(Dp);var{SourceMapConsumer:PF,SourceMapGenerator:Jf}=Jn,{dirname:ep,relative:DF,resolve:OF,sep:NF}=Jn,{pathToFileURL:wI}=Jn,Mie=Vg,Fie=!!(PF&&Jf),Bie=!!(ep&&OF&&DF&&NF),Uie=class{constructor(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||ep(e.file),n;this.mapOpts.sourcesContent===!1?(n=new PF(e.text),n.sourcesContent&&(n.sourcesContent=n.sourcesContent.map(()=>null))):n=e.consumer(),this.map.applySourceMap(n,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Bie&&Fie&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Jf.fromSourceMap(e)}else this.map=new Jf({file:this.outputFile()}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Jf({file:this.outputFile()});let e=1,t=1,r="<no source>",n={generated:{column:0,line:0},original:{column:0,line:0},source:""},i,s;this.stringify(this.root,(o,a,l)=>{if(this.css+=o,a&&l!=="end"&&(n.generated.line=e,n.generated.column=t-1,a.source&&a.source.start?(n.source=this.sourcePath(a),n.original.line=a.source.start.line,n.original.column=a.source.start.column-1,this.map.addMapping(n)):(n.source=r,n.original.line=1,n.original.column=0,this.map.addMapping(n))),i=o.match(/\n/g),i?(e+=i.length,s=o.lastIndexOf(`
`),t=o.length-s):t+=o.length,a&&l!=="start"){let c=a.parent||{raws:{}};(!(a.type==="decl"||a.type==="atrule"&&!a.nodes)||a!==c.last||c.raws.semicolon)&&(a.source&&a.source.end?(n.source=this.sourcePath(a),n.original.line=a.source.end.line,n.original.column=a.source.end.column-1,n.generated.line=e,n.generated.column=t-2,this.map.addMapping(n)):(n.source=r,n.original.line=1,n.original.column=0,n.generated.line=e,n.generated.column=t-1,this.map.addMapping(n)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?ep(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(r=ep(OF(r,this.mapOpts.annotation)));let n=DF(r,e);return this.memoizedPaths.set(e,n),n}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new Mie(this.css,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let n=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(n,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(wI){let r=wI(e).toString();return this.memoizedFileURLs.set(e,r),r}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;NF==="\\"&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}},MF=Uie,Hie=Gg,mT=class extends Hie{constructor(e){super(e),this.type="comment"}},Wg=mT;mT.default=mT;var{isClean:FF,my:BF}=bd,UF=jg,HF=Wg,zie=Gg,zF,nb,ib,$F;function GF(e){return e.map(t=>(t.nodes&&(t.nodes=GF(t.nodes)),delete t.source,t))}function jF(e){if(e[FF]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)jF(t)}var Ji=class VF extends zie{append(...t){for(let r of t){let n=this.normalize(r,this.last);for(let i of n)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(t){if(super.cleanRaws(t),this.nodes)for(let r of this.nodes)r.cleanRaws(t)}each(t){if(!this.proxyOf.nodes)return;let r=this.getIterator(),n,i;for(;this.indexes[r]<this.proxyOf.nodes.length&&(n=this.indexes[r],i=t(this.proxyOf.nodes[n],n),i!==!1);)this.indexes[r]+=1;return delete this.indexes[r],i}every(t){return this.nodes.every(t)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let t=this.lastEach;return this.indexes[t]=0,t}getProxyProcessor(){return{get(t,r){return r==="proxyOf"?t:t[r]?r==="each"||typeof r=="string"&&r.startsWith("walk")?(...n)=>t[r](...n.map(i=>typeof i=="function"?(s,o)=>i(s.toProxy(),o):i)):r==="every"||r==="some"?n=>t[r]((i,...s)=>n(i.toProxy(),...s)):r==="root"?()=>t.root().toProxy():r==="nodes"?t.nodes.map(n=>n.toProxy()):r==="first"||r==="last"?t[r].toProxy():t[r]:t[r]},set(t,r,n){return t[r]===n||(t[r]=n,(r==="name"||r==="params"||r==="selector")&&t.markDirty()),!0}}}index(t){return typeof t=="number"?t:(t.proxyOf&&(t=t.proxyOf),this.proxyOf.nodes.indexOf(t))}insertAfter(t,r){let n=this.index(t),i=this.normalize(r,this.proxyOf.nodes[n]).reverse();n=this.index(t);for(let o of i)this.proxyOf.nodes.splice(n+1,0,o);let s;for(let o in this.indexes)s=this.indexes[o],n<s&&(this.indexes[o]=s+i.length);return this.markDirty(),this}insertBefore(t,r){let n=this.index(t),i=n===0?"prepend":!1,s=this.normalize(r,this.proxyOf.nodes[n],i).reverse();n=this.index(t);for(let a of s)this.proxyOf.nodes.splice(n,0,a);let o;for(let a in this.indexes)o=this.indexes[a],n<=o&&(this.indexes[a]=o+s.length);return this.markDirty(),this}normalize(t,r){if(typeof t=="string")t=GF(zF(t).nodes);else if(Array.isArray(t)){t=t.slice(0);for(let n of t)n.parent&&n.parent.removeChild(n,"ignore")}else if(t.type==="root"&&this.type!=="document"){t=t.nodes.slice(0);for(let n of t)n.parent&&n.parent.removeChild(n,"ignore")}else if(t.type)t=[t];else if(t.prop){if(typeof t.value>"u")throw new Error("Value field is missed in node creation");typeof t.value!="string"&&(t.value=String(t.value)),t=[new UF(t)]}else if(t.selector)t=[new nb(t)];else if(t.name)t=[new ib(t)];else if(t.text)t=[new HF(t)];else throw new Error("Unknown node type in node creation");return t.map(n=>(n[BF]||VF.rebuild(n),n=n.proxyOf,n.parent&&n.parent.removeChild(n),n[FF]&&jF(n),typeof n.raws.before>"u"&&r&&typeof r.raws.before<"u"&&(n.raws.before=r.raws.before.replace(/\S/g,"")),n.parent=this.proxyOf,n))}prepend(...t){t=t.reverse();for(let r of t){let n=this.normalize(r,this.first,"prepend").reverse();for(let i of n)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+n.length}return this.markDirty(),this}push(t){return t.parent=this,this.proxyOf.nodes.push(t),this}removeAll(){for(let t of this.proxyOf.nodes)t.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(t){t=this.index(t),this.proxyOf.nodes[t].parent=void 0,this.proxyOf.nodes.splice(t,1);let r;for(let n in this.indexes)r=this.indexes[n],r>=t&&(this.indexes[n]=r-1);return this.markDirty(),this}replaceValues(t,r,n){return n||(n=r,r={}),this.walkDecls(i=>{r.props&&!r.props.includes(i.prop)||r.fast&&!i.value.includes(r.fast)||(i.value=i.value.replace(t,n))}),this.markDirty(),this}some(t){return this.nodes.some(t)}walk(t){return this.each((r,n)=>{let i;try{i=t(r,n)}catch(s){throw r.addToError(s)}return i!==!1&&r.walk&&(i=r.walk(t)),i})}walkAtRules(t,r){return r?t instanceof RegExp?this.walk((n,i)=>{if(n.type==="atrule"&&t.test(n.name))return r(n,i)}):this.walk((n,i)=>{if(n.type==="atrule"&&n.name===t)return r(n,i)}):(r=t,this.walk((n,i)=>{if(n.type==="atrule")return r(n,i)}))}walkComments(t){return this.walk((r,n)=>{if(r.type==="comment")return t(r,n)})}walkDecls(t,r){return r?t instanceof RegExp?this.walk((n,i)=>{if(n.type==="decl"&&t.test(n.prop))return r(n,i)}):this.walk((n,i)=>{if(n.type==="decl"&&n.prop===t)return r(n,i)}):(r=t,this.walk((n,i)=>{if(n.type==="decl")return r(n,i)}))}walkRules(t,r){return r?t instanceof RegExp?this.walk((n,i)=>{if(n.type==="rule"&&t.test(n.selector))return r(n,i)}):this.walk((n,i)=>{if(n.type==="rule"&&n.selector===t)return r(n,i)}):(r=t,this.walk((n,i)=>{if(n.type==="rule")return r(n,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Ji.registerParse=e=>{zF=e};Ji.registerRule=e=>{nb=e};Ji.registerAtRule=e=>{ib=e};Ji.registerRoot=e=>{$F=e};var la=Ji;Ji.default=Ji;Ji.rebuild=e=>{e.type==="atrule"?Object.setPrototypeOf(e,ib.prototype):e.type==="rule"?Object.setPrototypeOf(e,nb.prototype):e.type==="decl"?Object.setPrototypeOf(e,UF.prototype):e.type==="comment"?Object.setPrototypeOf(e,HF.prototype):e.type==="root"&&Object.setPrototypeOf(e,$F.prototype),e[BF]=!0,e.nodes&&e.nodes.forEach(t=>{Ji.rebuild(t)})};var $ie=la,WF,qF,Gu=class extends $ie{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new WF(new qF,this,e).stringify()}};Gu.registerLazyResult=e=>{WF=e};Gu.registerProcessor=e=>{qF=e};var sb=Gu;Gu.default=Gu;var vT=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}},KF=vT;vT.default=vT;var Gie=KF,yT=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new Gie(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}},ob=yT;yT.default=yT;var m0=39,AI=34,Ef=92,kI=47,Tf=10,ru=32,Sf=12,bf=9,wf=13,jie=91,Vie=93,Wie=40,qie=41,Kie=123,Yie=125,Xie=59,Qie=42,Zie=58,Jie=64,Af=/[\t\n\f\r "#'()/;[\\\]{}]/g,kf=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,ese=/.[\r\n"'(/\\]/,CI=/[\da-f]/i,tse=function(e,t={}){let r=e.css.valueOf(),n=t.ignoreErrors,i,s,o,a,l,c,u,d,h,f,p=r.length,g=0,v=[],m=[];function y(){return g}function E(x){throw e.error("Unclosed "+x,g)}function S(){return m.length===0&&g>=p}function b(x){if(m.length)return m.pop();if(g>=p)return;let D=x?x.ignoreUnclosed:!1;switch(i=r.charCodeAt(g),i){case Tf:case ru:case bf:case wf:case Sf:{s=g;do s+=1,i=r.charCodeAt(s);while(i===ru||i===Tf||i===bf||i===wf||i===Sf);f=["space",r.slice(g,s)],g=s-1;break}case jie:case Vie:case Kie:case Yie:case Zie:case Xie:case qie:{let N=String.fromCharCode(i);f=[N,N,g];break}case Wie:{if(d=v.length?v.pop()[1]:"",h=r.charCodeAt(g+1),d==="url"&&h!==m0&&h!==AI&&h!==ru&&h!==Tf&&h!==bf&&h!==Sf&&h!==wf){s=g;do{if(c=!1,s=r.indexOf(")",s+1),s===-1)if(n||D){s=g;break}else E("bracket");for(u=s;r.charCodeAt(u-1)===Ef;)u-=1,c=!c}while(c);f=["brackets",r.slice(g,s+1),g,s],g=s}else s=r.indexOf(")",g+1),a=r.slice(g,s+1),s===-1||ese.test(a)?f=["(","(",g]:(f=["brackets",a,g,s],g=s);break}case m0:case AI:{o=i===m0?"'":'"',s=g;do{if(c=!1,s=r.indexOf(o,s+1),s===-1)if(n||D){s=g+1;break}else E("string");for(u=s;r.charCodeAt(u-1)===Ef;)u-=1,c=!c}while(c);f=["string",r.slice(g,s+1),g,s],g=s;break}case Jie:{Af.lastIndex=g+1,Af.test(r),Af.lastIndex===0?s=r.length-1:s=Af.lastIndex-2,f=["at-word",r.slice(g,s+1),g,s],g=s;break}case Ef:{for(s=g,l=!0;r.charCodeAt(s+1)===Ef;)s+=1,l=!l;if(i=r.charCodeAt(s+1),l&&i!==kI&&i!==ru&&i!==Tf&&i!==bf&&i!==wf&&i!==Sf&&(s+=1,CI.test(r.charAt(s)))){for(;CI.test(r.charAt(s+1));)s+=1;r.charCodeAt(s+1)===ru&&(s+=1)}f=["word",r.slice(g,s+1),g,s],g=s;break}default:{i===kI&&r.charCodeAt(g+1)===Qie?(s=r.indexOf("*/",g+2)+1,s===0&&(n||D?s=r.length:E("comment")),f=["comment",r.slice(g,s+1),g,s],g=s):(kf.lastIndex=g+1,kf.test(r),kf.lastIndex===0?s=r.length-1:s=kf.lastIndex-2,f=["word",r.slice(g,s+1),g,s],v.push(f),g=s);break}}return g++,f}function w(x){m.push(x)}return{back:w,endOfFile:S,nextToken:b,position:y}},YF=la,Op=class extends YF{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}},ab=Op;Op.default=Op;YF.registerAtRule(Op);var XF=la,QF,ZF,Pl=class extends XF{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let n=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let i of n)i.raws.before=t.raws.before}return n}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new QF(new ZF,this,e).stringify()}};Pl.registerLazyResult=e=>{QF=e};Pl.registerProcessor=e=>{ZF=e};var wd=Pl;Pl.default=Pl;XF.registerRoot(Pl);var ju={comma(e){return ju.split(e,[","],!0)},space(e){let t=[" ",`
`,"	"];return ju.split(e,t)},split(e,t,r){let n=[],i="",s=!1,o=0,a=!1,l="",c=!1;for(let u of e)c?c=!1:u==="\\"?c=!0:a?u===l&&(a=!1):u==='"'||u==="'"?(a=!0,l=u):u==="("?o+=1:u===")"?o>0&&(o-=1):o===0&&t.includes(u)&&(s=!0),s?(i!==""&&n.push(i.trim()),i="",s=!1):i+=u;return(r||i!=="")&&n.push(i.trim()),n}},JF=ju;ju.default=ju;var e2=la,rse=JF,Np=class extends e2{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return rse.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}},lb=Np;Np.default=Np;e2.registerRule(Np);var nse=jg,ise=tse,sse=Wg,ose=ab,ase=wd,xI=lb,RI={empty:!0,space:!0};function lse(e){for(let t=e.length-1;t>=0;t--){let r=e[t],n=r[3]||r[2];if(n)return n}}var cse=class{constructor(e){this.input=e,this.root=new ase,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new ose;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,n,i,s=!1,o=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?l.push(r==="("?")":"]"):r==="{"&&l.length>0?l.push("}"):r===l[l.length-1]&&l.pop(),l.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r==="{"){o=!0;break}else if(r==="}"){if(a.length>0){for(i=a.length-1,n=a[i];n&&n[0]==="space";)n=a[--i];n&&(t.source.end=this.getPosition(n[3]||n[2]),t.source.end.offset++)}this.end(e);break}else a.push(e);else a.push(e);if(this.tokenizer.endOfFile()){s=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(t.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(t,"params",a),s&&(e=a[a.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),o&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,n;for(let i=t-1;i>=0&&(n=e[i],!(n[0]!=="space"&&(r+=1,r===2)));i--);throw this.input.error("Missed semicolon",n[0]==="word"?n[3]+1:n[2])}colon(e){let t=0,r,n,i;for(let[s,o]of e.entries()){if(r=o,n=r[0],n==="("&&(t+=1),n===")"&&(t-=1),t===0&&n===":")if(!i)this.doubleColon(r);else{if(i[0]==="word"&&i[1]==="progid")continue;return s}i=r}return!1}comment(e){let t=new sse;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let n=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=n[2],t.raws.left=n[1],t.raws.right=n[3]}}createTokenizer(){this.tokenizer=ise(this.input)}decl(e,t){let r=new nse;this.init(r,e[0][2]);let n=e[e.length-1];for(n[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(n[3]||n[2]||lse(e)),r.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let a=e[0][0];if(a===":"||a==="space"||a==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let i;for(;e.length;)if(i=e.shift(),i[0]===":"){r.raws.between+=i[1];break}else i[0]==="word"&&/\w/.test(i[1])&&this.unknownWord([i]),r.raws.between+=i[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let s=[],o;for(;e.length&&(o=e[0][0],!(o!=="space"&&o!=="comment"));)s.push(e.shift());this.precheckMissedSemicolon(e);for(let a=e.length-1;a>=0;a--){if(i=e[a],i[1].toLowerCase()==="!important"){r.important=!0;let l=this.stringFrom(e,a);l=this.spacesFromEnd(e)+l,l!==" !important"&&(r.raws.important=l);break}else if(i[1].toLowerCase()==="important"){let l=e.slice(0),c="";for(let u=a;u>0;u--){let d=l[u][0];if(c.trim().indexOf("!")===0&&d!=="space")break;c=l.pop()[1]+c}c.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=c,e=l)}if(i[0]!=="space"&&i[0]!=="comment")break}e.some(a=>a[0]!=="space"&&a[0]!=="comment")&&(r.raws.between+=s.map(a=>a[1]).join(""),s=[]),this.raw(r,"value",s.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new xI;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,r=null,n=!1,i=null,s=[],o=e[1].startsWith("--"),a=[],l=e;for(;l;){if(r=l[0],a.push(l),r==="("||r==="[")i||(i=l),s.push(r==="("?")":"]");else if(o&&n&&r==="{")i||(i=l),s.push("}");else if(s.length===0)if(r===";")if(n){this.decl(a,o);return}else break;else if(r==="{"){this.rule(a);return}else if(r==="}"){this.tokenizer.back(a.pop()),t=!0;break}else r===":"&&(n=!0);else r===s[s.length-1]&&(s.pop(),s.length===0&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),s.length>0&&this.unclosedBracket(i),t&&n){if(!o)for(;a.length&&(l=a[a.length-1][0],!(l!=="space"&&l!=="comment"));)this.tokenizer.back(a.pop());this.decl(a,o)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,n){let i,s,o=r.length,a="",l=!0,c,u;for(let d=0;d<o;d+=1)i=r[d],s=i[0],s==="space"&&d===o-1&&!n?l=!1:s==="comment"?(u=r[d-1]?r[d-1][0]:"empty",c=r[d+1]?r[d+1][0]:"empty",!RI[u]&&!RI[c]?a.slice(-1)===","?l=!1:a+=i[1]:l=!1):a+=i[1];if(!l){let d=r.reduce((h,f)=>h+f[1],"");e.raws[t]={raw:d,value:a}}e[t]=a}rule(e){e.pop();let t=new xI;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}},use=cse,dse=la,hse=use,fse=Vg;function Mp(e,t){let r=new fse(e,t),n=new hse(r);try{n.parse()}catch(i){throw i}return n.root}var cb=Mp;Mp.default=Mp;dse.registerParse(Mp);var{isClean:ci,my:pse}=bd,gse=MF,mse=$g,vse=la,yse=sb,II=ob,Ese=cb,Tse=wd,Sse={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},bse={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},wse={Once:!0,postcssPlugin:!0,prepare:!0},Dl=0;function nu(e){return typeof e=="object"&&typeof e.then=="function"}function t2(e){let t=!1,r=Sse[e.type];return e.type==="decl"?t=e.prop.toLowerCase():e.type==="atrule"&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,Dl,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,Dl,r+"Exit"]:[r,r+"Exit"]}function _I(e){let t;return e.type==="document"?t=["Document",Dl,"DocumentExit"]:e.type==="root"?t=["Root",Dl,"RootExit"]:t=t2(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function ET(e){return e[ci]=!1,e.nodes&&e.nodes.forEach(t=>ET(t)),e}var TT={},Ol=class r2{constructor(t,r,n){this.stringified=!1,this.processed=!1;let i;if(typeof r=="object"&&r!==null&&(r.type==="root"||r.type==="document"))i=ET(r);else if(r instanceof r2||r instanceof II)i=ET(r.root),r.map&&(typeof n.map>"u"&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=r.map);else{let s=Ese;n.syntax&&(s=n.syntax.parse),n.parser&&(s=n.parser),s.parse&&(s=s.parse);try{i=s(r,n)}catch(o){this.processed=!0,this.error=o}i&&!i[pse]&&vse.rebuild(i)}this.result=new II(t,i,n),this.helpers={...TT,postcss:TT,result:this.result},this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?{...s,...s.prepare(this.result)}:s)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(t){return this.async().catch(t)}finally(t){return this.async().then(t,t)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(t,r){let n=this.result.lastPlugin;try{r&&r.addToError(t),this.error=t,t.name==="CssSyntaxError"&&!t.plugin?(t.plugin=n.postcssPlugin,t.setMessage()):n.postcssVersion}catch(i){console&&console.error&&console.error(i)}return t}prepareVisitors(){this.listeners={};let t=(r,n,i)=>{this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push([r,i])};for(let r of this.plugins)if(typeof r=="object")for(let n in r){if(!bse[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${r.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!wse[n])if(typeof r[n]=="object")for(let i in r[n])i==="*"?t(r,n,r[n][i]):t(r,n+"-"+i.toLowerCase(),r[n][i]);else typeof r[n]=="function"&&t(r,n,r[n])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let t=0;t<this.plugins.length;t++){let r=this.plugins[t],n=this.runOnRoot(r);if(nu(n))try{await n}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[ci];){t[ci]=!0;let r=[_I(t)];for(;r.length>0;){let n=this.visitTick(r);if(nu(n))try{await n}catch(i){let s=r[r.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[r,n]of this.listeners.OnceExit){this.result.lastPlugin=r;try{if(t.type==="document"){let i=t.nodes.map(s=>n(s,this.helpers));await Promise.all(i)}else await n(t,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(t){this.result.lastPlugin=t;try{if(typeof t=="object"&&t.Once){if(this.result.root.type==="document"){let r=this.result.root.nodes.map(n=>t.Once(n,this.helpers));return nu(r[0])?Promise.all(r):r}return t.Once(this.result.root,this.helpers)}else if(typeof t=="function")return t(this.result.root,this.result)}catch(r){throw this.handleError(r)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let t=this.result.opts,r=mse;t.syntax&&(r=t.syntax.stringify),t.stringifier&&(r=t.stringifier),r.stringify&&(r=r.stringify);let n=new gse(r,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let t of this.plugins){let r=this.runOnRoot(t);if(nu(r))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[ci];)t[ci]=!0,this.walkSync(t);if(this.listeners.OnceExit)if(t.type==="document")for(let r of t.nodes)this.visitSync(this.listeners.OnceExit,r);else this.visitSync(this.listeners.OnceExit,t)}return this.result}then(t,r){return this.async().then(t,r)}toString(){return this.css}visitSync(t,r){for(let[n,i]of t){this.result.lastPlugin=n;let s;try{s=i(r,this.helpers)}catch(o){throw this.handleError(o,r.proxyOf)}if(r.type!=="root"&&r.type!=="document"&&!r.parent)return!0;if(nu(s))throw this.getAsyncError()}}visitTick(t){let r=t[t.length-1],{node:n,visitors:i}=r;if(n.type!=="root"&&n.type!=="document"&&!n.parent){t.pop();return}if(i.length>0&&r.visitorIndex<i.length){let[o,a]=i[r.visitorIndex];r.visitorIndex+=1,r.visitorIndex===i.length&&(r.visitors=[],r.visitorIndex=0),this.result.lastPlugin=o;try{return a(n.toProxy(),this.helpers)}catch(l){throw this.handleError(l,n)}}if(r.iterator!==0){let o=r.iterator,a;for(;a=n.nodes[n.indexes[o]];)if(n.indexes[o]+=1,!a[ci]){a[ci]=!0,t.push(_I(a));return}r.iterator=0,delete n.indexes[o]}let s=r.events;for(;r.eventIndex<s.length;){let o=s[r.eventIndex];if(r.eventIndex+=1,o===Dl){n.nodes&&n.nodes.length&&(n[ci]=!0,r.iterator=n.getIterator());return}else if(this.listeners[o]){r.visitors=this.listeners[o];return}}t.pop()}walkSync(t){t[ci]=!0;let r=t2(t);for(let n of r)if(n===Dl)t.nodes&&t.each(i=>{i[ci]||this.walkSync(i)});else{let i=this.listeners[n];if(i&&this.visitSync(i,t.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};Ol.registerPostcss=e=>{TT=e};var n2=Ol;Ol.default=Ol;Tse.registerLazyResult(Ol);yse.registerLazyResult(Ol);var Ase=MF,kse=$g,Cse=cb,xse=ob,ST=class{constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let n,i=kse;this.result=new xse(this._processor,n,this._opts),this.result.css=t;let s=this;Object.defineProperty(this.result,"root",{get(){return s.root}});let o=new Ase(i,n,this._opts,t);if(o.isMap()){let[a,l]=o.generate();a&&(this.result.css=a),l&&(this.result.map=l)}}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=Cse;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}},Rse=ST;ST.default=ST;var Ise=Rse,_se=n2,Lse=sb,Pse=wd,Vu=class{constructor(e=[]){this.version="8.4.31",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return this.plugins.length===0&&typeof t.parser>"u"&&typeof t.stringifier>"u"&&typeof t.syntax>"u"?new Ise(this,e,t):new _se(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}},Dse=Vu;Vu.default=Vu;Pse.registerProcessor(Vu);Lse.registerProcessor(Vu);var Ose=jg,Nse=LF,Mse=Wg,Fse=ab,Bse=Vg,Use=wd,Hse=lb;function Wu(e,t){if(Array.isArray(e))return e.map(i=>Wu(i));let{inputs:r,...n}=e;if(r){t=[];for(let i of r){let s={...i,__proto__:Bse.prototype};s.map&&(s.map={...s.map,__proto__:Nse.prototype}),t.push(s)}}if(n.nodes&&(n.nodes=e.nodes.map(i=>Wu(i,t))),n.source){let{inputId:i,...s}=n.source;n.source=s,i!=null&&(n.source.input=t[i])}if(n.type==="root")return new Use(n);if(n.type==="decl")return new Ose(n);if(n.type==="rule")return new Hse(n);if(n.type==="comment")return new Mse(n);if(n.type==="atrule")return new Fse(n);throw new Error("Unknown node type: "+e.type)}var zse=Wu;Wu.default=Wu;var $se=rb,i2=jg,Gse=n2,jse=la,ub=Dse,Vse=$g,Wse=zse,s2=sb,qse=KF,o2=Wg,a2=ab,Kse=ob,Yse=Vg,Xse=cb,Qse=JF,l2=lb,c2=wd,Zse=Gg;function dt(...e){return e.length===1&&Array.isArray(e[0])&&(e=e[0]),new ub(e)}dt.plugin=function(e,t){let r=!1;function n(...s){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let o=t(...s);return o.postcssPlugin=e,o.postcssVersion=new ub().version,o}let i;return Object.defineProperty(n,"postcss",{get(){return i||(i=n()),i}}),n.process=function(s,o,a){return dt([n(a)]).process(s,o)},n};dt.stringify=Vse;dt.parse=Xse;dt.fromJSON=Wse;dt.list=Qse;dt.comment=e=>new o2(e);dt.atRule=e=>new a2(e);dt.decl=e=>new i2(e);dt.rule=e=>new l2(e);dt.root=e=>new c2(e);dt.document=e=>new s2(e);dt.CssSyntaxError=$se;dt.Declaration=i2;dt.Container=jse;dt.Processor=ub;dt.Document=s2;dt.Comment=o2;dt.Warning=qse;dt.AtRule=a2;dt.Result=Kse;dt.Input=Yse;dt.Rule=l2;dt.Root=c2;dt.Node=Zse;Gse.registerPostcss(dt);var Jse=dt;dt.default=dt;var eoe=eF,LI=Qne,{isPlainObject:toe}=eb,PI=hie,roe=fie,{parse:noe}=Jse,ioe=["img","audio","video","picture","svg","object","map","iframe","embed"],soe=["script","style"];function al(e,t){e&&Object.keys(e).forEach(function(r){t(e[r],r)})}function Wi(e,t){return{}.hasOwnProperty.call(e,t)}function DI(e,t){let r=[];return al(e,function(n){t(n)&&r.push(n)}),r}function ooe(e){for(let t in e)if(Wi(e,t))return!1;return!0}function aoe(e){return e.map(function(t){if(!t.url)throw new Error("URL missing");return t.url+(t.w?` ${t.w}w`:"")+(t.h?` ${t.h}h`:"")+(t.d?` ${t.d}x`:"")}).join(", ")}var loe=qu,coe=/^[^\0\t\n\f\r /<=>]+$/;function qu(e,t,r){if(e==null)return"";typeof e=="number"&&(e=e.toString());let n="",i="";function s(B,V){let W=this;this.tag=B,this.attribs=V||{},this.tagPosition=n.length,this.text="",this.openingTagLength=0,this.mediaChildren=[],this.updateParentNodeText=function(){if(v.length){let X=v[v.length-1];X.text+=W.text}},this.updateParentNodeMediaChildren=function(){v.length&&ioe.includes(this.tag)&&v[v.length-1].mediaChildren.push(this.tag)}}t=Object.assign({},qu.defaults,t),t.parser=Object.assign({},uoe,t.parser);let o=function(B){return t.allowedTags===!1||(t.allowedTags||[]).indexOf(B)>-1};soe.forEach(function(B){o(B)&&!t.allowVulnerableTags&&console.warn(`

\u26A0\uFE0F Your \`allowedTags\` option includes, \`${B}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});let a=t.nonTextTags||["script","style","textarea","option"],l,c;t.allowedAttributes&&(l={},c={},al(t.allowedAttributes,function(B,V){l[V]=[];let W=[];B.forEach(function(X){typeof X=="string"&&X.indexOf("*")>=0?W.push(LI(X).replace(/\\\*/g,".*")):l[V].push(X)}),W.length&&(c[V]=new RegExp("^("+W.join("|")+")$"))}));let u={},d={},h={};al(t.allowedClasses,function(B,V){if(l&&(Wi(l,V)||(l[V]=[]),l[V].push("class")),u[V]=B,Array.isArray(B)){let W=[];u[V]=[],h[V]=[],B.forEach(function(X){typeof X=="string"&&X.indexOf("*")>=0?W.push(LI(X).replace(/\\\*/g,".*")):X instanceof RegExp?h[V].push(X):u[V].push(X)}),W.length&&(d[V]=new RegExp("^("+W.join("|")+")$"))}});let f={},p;al(t.transformTags,function(B,V){let W;typeof B=="function"?W=B:typeof B=="string"&&(W=qu.simpleTransform(B)),V==="*"?p=W:f[V]=W});let g,v,m,y,E,S,b=!1;x();let w=new eoe.Parser({onopentag:function(B,V){if(t.onOpenTag&&t.onOpenTag(B,V),t.enforceHtmlBoundary&&B==="html"&&x(),E){S++;return}let W=new s(B,V);v.push(W);let X=!1,Y=!!W.text,O;if(Wi(f,B)&&(O=f[B](B,V),W.attribs=V=O.attribs,O.text!==void 0&&(W.innerText=O.text),B!==O.tagName&&(W.name=B=O.tagName,y[g]=O.tagName)),p&&(O=p(B,V),W.attribs=V=O.attribs,B!==O.tagName&&(W.name=B=O.tagName,y[g]=O.tagName)),(!o(B)||t.disallowedTagsMode==="recursiveEscape"&&!ooe(m)||t.nestingLimit!=null&&g>=t.nestingLimit)&&(X=!0,m[g]=!0,(t.disallowedTagsMode==="discard"||t.disallowedTagsMode==="completelyDiscard")&&a.indexOf(B)!==-1&&(E=!0,S=1)),g++,X){if(t.disallowedTagsMode==="discard"||t.disallowedTagsMode==="completelyDiscard"){if(W.innerText&&!Y){let ie=D(W.innerText);t.textFilter?n+=t.textFilter(ie,B):n+=ie,b=!0}return}i=n,n=""}n+="<"+B,B==="script"&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(W.innerText=""),X&&(t.disallowedTagsMode==="escape"||t.disallowedTagsMode==="recursiveEscape")&&t.preserveEscapedAttributes?al(V,function(ie,le){n+=" "+le+'="'+D(ie||"",!0)+'"'}):(!l||Wi(l,B)||l["*"])&&al(V,function(ie,le){if(!coe.test(le)){delete W.attribs[le];return}if(ie===""&&!t.allowedEmptyAttributes.includes(le)&&(t.nonBooleanAttributes.includes(le)||t.nonBooleanAttributes.includes("*"))){delete W.attribs[le];return}let F=!1;if(!l||Wi(l,B)&&l[B].indexOf(le)!==-1||l["*"]&&l["*"].indexOf(le)!==-1||Wi(c,B)&&c[B].test(le)||c["*"]&&c["*"].test(le))F=!0;else if(l&&l[B]){for(let te of l[B])if(toe(te)&&te.name&&te.name===le){F=!0;let ge="";if(te.multiple===!0){let Ce=ie.split(" ");for(let de of Ce)te.values.indexOf(de)!==-1&&(ge===""?ge=de:ge+=" "+de)}else te.values.indexOf(ie)>=0&&(ge=ie);ie=ge}}if(F){if(t.allowedSchemesAppliedToAttributes.indexOf(le)!==-1&&N(B,ie)){delete W.attribs[le];return}if(B==="script"&&le==="src"){let te=!0;try{let ge=C(ie);if(t.allowedScriptHostnames||t.allowedScriptDomains){let Ce=(t.allowedScriptHostnames||[]).find(function(we){return we===ge.url.hostname}),de=(t.allowedScriptDomains||[]).find(function(we){return ge.url.hostname===we||ge.url.hostname.endsWith(`.${we}`)});te=Ce||de}}catch{te=!1}if(!te){delete W.attribs[le];return}}if(B==="iframe"&&le==="src"){let te=!0;try{let ge=C(ie);if(ge.isRelativeUrl)te=Wi(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){let Ce=(t.allowedIframeHostnames||[]).find(function(we){return we===ge.url.hostname}),de=(t.allowedIframeDomains||[]).find(function(we){return ge.url.hostname===we||ge.url.hostname.endsWith(`.${we}`)});te=Ce||de}}catch{te=!1}if(!te){delete W.attribs[le];return}}if(le==="srcset")try{let te=roe(ie);if(te.forEach(function(ge){N("srcset",ge.url)&&(ge.evil=!0)}),te=DI(te,function(ge){return!ge.evil}),te.length)ie=aoe(DI(te,function(ge){return!ge.evil})),W.attribs[le]=ie;else{delete W.attribs[le];return}}catch{delete W.attribs[le];return}if(le==="class"){let te=u[B],ge=u["*"],Ce=d[B],de=h[B],we=h["*"],Le=d["*"],Pe=[Ce,Le].concat(de,we).filter(function(Se){return Se});if(te&&ge?ie=K(ie,PI(te,ge),Pe):ie=K(ie,te||ge,Pe),!ie.length){delete W.attribs[le];return}}if(le==="style"){if(t.parseStyleAttributes)try{let te=noe(B+" {"+ie+"}",{map:!1}),ge=P(te,t.allowedStyles);if(ie=U(ge),ie.length===0){delete W.attribs[le];return}}catch{typeof window<"u"&&console.warn('Failed to parse "'+B+" {"+ie+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete W.attribs[le];return}else if(t.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}n+=" "+le,ie&&ie.length?n+='="'+D(ie,!0)+'"':t.allowedEmptyAttributes.includes(le)&&(n+='=""')}else delete W.attribs[le]}),t.selfClosing.indexOf(B)!==-1?n+=" />":(n+=">",W.innerText&&!Y&&!t.textFilter&&(n+=D(W.innerText),b=!0)),X&&(n=i+D(n),i=""),W.openingTagLength=n.length-W.tagPosition},ontext:function(B){if(E)return;let V=v[v.length-1],W;if(V&&(W=V.tag,B=V.innerText!==void 0?V.innerText:B),t.disallowedTagsMode==="completelyDiscard"&&!o(W))B="";else if((t.disallowedTagsMode==="discard"||t.disallowedTagsMode==="completelyDiscard")&&(W==="script"||W==="style"))n+=B;else if(!b){let X=D(B,!1);t.textFilter?n+=t.textFilter(X,W):n+=X}if(v.length){let X=v[v.length-1];X.text+=B}},onclosetag:function(B,V){if(t.onCloseTag&&t.onCloseTag(B,V),E)if(S--,!S)E=!1;else return;let W=v.pop();if(!W)return;if(W.tag!==B){v.push(W);return}E=t.enforceHtmlBoundary?B==="html":!1,g--;let X=m[g];if(X){if(delete m[g],t.disallowedTagsMode==="discard"||t.disallowedTagsMode==="completelyDiscard"){W.updateParentNodeText();return}i=n,n=""}if(y[g]&&(B=y[g],delete y[g]),t.exclusiveFilter){let Y=t.exclusiveFilter(W);if(Y==="excludeTag"){X&&(n=i,i=""),n=n.substring(0,W.tagPosition)+n.substring(W.tagPosition+W.openingTagLength);return}else if(Y){n=n.substring(0,W.tagPosition);return}}if(W.updateParentNodeMediaChildren(),W.updateParentNodeText(),t.selfClosing.indexOf(B)!==-1||V&&!o(B)&&["escape","recursiveEscape"].indexOf(t.disallowedTagsMode)>=0){X&&(n=i,i="");return}n+="</"+B+">",X&&(n=i+D(n),i=""),b=!1}},t.parser);return w.write(e),w.end(),n;function x(){n="",g=0,v=[],m={},y={},E=!1,S=0}function D(B,V){return typeof B!="string"&&(B=B+""),t.parser.decodeEntities&&(B=B.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),V&&(B=B.replace(/"/g,"&quot;"))),B=B.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),V&&(B=B.replace(/"/g,"&quot;")),B}function N(B,V){for(V=V.replace(/[\x00-\x20]+/g,"");;){let Y=V.indexOf("<!--");if(Y===-1)break;let O=V.indexOf("-->",Y+4);if(O===-1)break;V=V.substring(0,Y)+V.substring(O+3)}let W=V.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!W)return V.match(/^[/\\]{2}/)?!t.allowProtocolRelative:!1;let X=W[1].toLowerCase();return Wi(t.allowedSchemesByTag,B)?t.allowedSchemesByTag[B].indexOf(X)===-1:!t.allowedSchemes||t.allowedSchemes.indexOf(X)===-1}function C(B){if(B=B.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),B.startsWith("relative:"))throw new Error("relative: exploit attempt");let V="relative://relative-site";for(let X=0;X<100;X++)V+=`/${X}`;let W=new URL(B,V);return{isRelativeUrl:W&&W.hostname==="relative-site"&&W.protocol==="relative:",url:W}}function P(B,V){if(!V)return B;let W=B.nodes[0],X;return V[W.selector]&&V["*"]?X=PI(V[W.selector],V["*"]):X=V[W.selector]||V["*"],X&&(B.nodes[0].nodes=W.nodes.reduce(G(X),[])),B}function U(B){return B.nodes[0].nodes.reduce(function(V,W){return V.push(`${W.prop}:${W.value}${W.important?" !important":""}`),V},[]).join(";")}function G(B){return function(V,W){return Wi(B,W.prop)&&B[W.prop].some(function(X){return X.test(W.value)})&&V.push(W),V}}function K(B,V,W){return V?(B=B.split(/\s+/),B.filter(function(X){return V.indexOf(X)!==-1||W.some(function(Y){return Y.test(X)})}).join(" ")):B}}var uoe={decodeEntities:!0};qu.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","menu","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0,preserveEscapedAttributes:!1};qu.simpleTransform=function(e,t,r){return r=r===void 0?!0:r,t=t||{},function(n,i){let s;if(r)for(s in t)i[s]=t[s];else i=t;return{tagName:e,attribs:i}}};var doe=e1(loe);function hoe(e){return{__html:foe(e)}}function Ii(e,t){let r=Object.keys(e).filter(i=>t.includes(i)?null:i),n=new Object;return r.forEach(i=>{n[i]=e[i]}),n}function foe(e){return doe(e,{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})}var poe=be("span",{}),cs=e=>{let{as:t,label:r}=e,n=Ii(e,["as","label"]);return I.createElement(poe,{as:t,...n},Tn(r,n.lang))},ke=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},goe=Number.isSafeInteger||function(e){return typeof e=="number"&&Math.abs(e)<=moe},moe=Number.MAX_SAFE_INTEGER||9007199254740991,Oe=(function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e})({}),Q=(function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",e.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",e.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.ASSET_LIST_LOAD_ERROR="assetListLoadError",e.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",e.ASSET_LIST_PARSING_ERROR="assetListParsingError",e.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e})({}),R=(function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.STALL_RESOLVED="hlsStallResolved",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFERED_TO_END="hlsBufferedToEnd",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e.ASSET_LIST_LOADING="hlsAssetListLoading",e.ASSET_LIST_LOADED="hlsAssetListLoaded",e.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",e.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",e.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",e.INTERSTITIAL_STARTED="hlsInterstitialStarted",e.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",e.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",e.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",e.INTERSTITIAL_ENDED="hlsInterstitialEnded",e.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",e.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",e.EVENT_CUE_ENTER="hlsEventCueEnter",e})({}),et={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Re={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},Hs=class{constructor(t,r=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=r,this.totalWeight_=n}sample(t,r){let n=Math.pow(this.alpha_,t);this.estimate_=r*(1-n)+n*this.estimate_,this.totalWeight_+=t}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){let t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_}},bT=class{constructor(t,r,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Hs(t),this.fast_=new Hs(r),this.defaultTTFB_=i,this.ttfb_=new Hs(t)}update(t,r){let{slow_:n,fast_:i,ttfb_:s}=this;n.halfLife!==t&&(this.slow_=new Hs(t,n.getEstimate(),n.getTotalWeight())),i.halfLife!==r&&(this.fast_=new Hs(r,i.getEstimate(),i.getTotalWeight())),s.halfLife!==t&&(this.ttfb_=new Hs(t,s.getEstimate(),s.getTotalWeight()))}sample(t,r){t=Math.max(t,this.minDelayMs_);let n=8*r,i=t/1e3,s=n/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(t){let r=t/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(r,2)/2);this.ttfb_.sample(n,Math.max(t,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}};function voe(e,t,r){return(t=Eoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gt.apply(null,arguments)}function OI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OI(Object(r),!0).forEach(function(n){voe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eoe(e){var t=yoe(e,"string");return typeof t=="symbol"?t:t+""}var Jr=class{constructor(t,r){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;let n=`[${t}]:`;this.trace=zs,this.debug=r.debug.bind(null,n),this.log=r.log.bind(null,n),this.warn=r.warn.bind(null,n),this.info=r.info.bind(null,n),this.error=r.error.bind(null,n)}},zs=function(){},Toe={trace:zs,debug:zs,log:zs,warn:zs,info:zs,error:zs};function wT(){return gt({},Toe)}function Soe(e,t){let r=self.console[e];return r?r.bind(self.console,`${t?"["+t+"] ":""}[${e}] >`):zs}function NI(e,t,r){return t[e]?t[e].bind(t):Soe(e,r)}var AT=wT();function boe(e,t,r){let n=wT();if(typeof console=="object"&&e===!0||typeof e=="object"){let i=["debug","log","info","warn","error"];i.forEach(s=>{n[s]=NI(s,e,r)});try{n.log(`Debug logs enabled for "${t}" in hls.js version 1.6.13`)}catch{return wT()}i.forEach(s=>{AT[s]=NI(s,e)})}else gt(AT,n);return n}var ut=AT;function Ks(e=!0){return typeof self>"u"?void 0:(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function woe(e){return typeof self<"u"&&e===self.ManagedMediaSource}function u2(e,t){let r=Object.keys(e),n=Object.keys(t),i=r.length,s=n.length;return!i||!s||i===s&&!r.some(o=>n.indexOf(o)===-1)}function yn(e,t=!1){if(typeof TextDecoder<"u"){let l=new TextDecoder("utf-8").decode(e);if(t){let c=l.indexOf("\0");return c!==-1?l.substring(0,c):l}return l.replace(/\0/g,"")}let r=e.length,n,i,s,o="",a=0;for(;a<r;){if(n=e[a++],n===0&&t)return o;if(!(n===0||n===3))switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(n);break;case 12:case 13:i=e[a++],o+=String.fromCharCode((n&31)<<6|i&63);break;case 14:i=e[a++],s=e[a++],o+=String.fromCharCode((n&15)<<12|(i&63)<<6|(s&63)<<0);break}}return o}function Fr(e){let t="";for(let r=0;r<e.length;r++){let n=e[r].toString(16);n.length<2&&(n="0"+n),t+=n}return t}function d2(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Aoe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var MI={exports:{}},FI;function koe(){return FI||(FI=1,(function(e,t){(function(r){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=a.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=a.normalizePath(d.path),a.buildURLFromParts(d)}var h=a.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=a.normalizePath(h.path),a.buildURLFromParts(h)):c;var f=a.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var p=i.exec(f.path);f.netLoc=p[1],f.path=p[2]}f.netLoc&&!f.path&&(f.path="/");var g={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(g.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)g.path=f.path,h.params||(g.params=f.params,h.query||(g.query=f.query));else{var v=f.path,m=v.substring(0,v.lastIndexOf("/")+1)+h.path;g.path=a.normalizePath(m)}return g.path===null&&(g.path=u.alwaysNormalize?a.normalizePath(h.path):h.path),a.buildURLFromParts(g)},parseURL:function(l){var c=n.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};e.exports=a})()})(MI)),MI.exports}var db=koe(),Ku=class{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},mt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"},Fp=class{constructor(t){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof t=="string"&&(t={url:t}),this.base=t,Coe(this,"stats")}setByteRange(t,r){let n=t.split("@",2),i;n.length===1?i=r?.byteRangeEndOffset||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[mt.AUDIO]:null,[mt.VIDEO]:null,[mt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(t){this._streams=t}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Ku),this._stats}set stats(t){this._stats=t}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=db.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(t){this._url=t}clearElementaryStreamInfo(){let{elementaryStreams:t}=this;t[mt.AUDIO]=null,t[mt.VIDEO]=null,t[mt.AUDIOVIDEO]=null}};function Zt(e){return e.sn!=="initSegment"}var wu=class extends Fp{constructor(t,r){super(r),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=t}get byteLength(){if(this.hasStats){let t=this.stats.total;if(t)return t}if(this.byteRange.length){let t=this.byteRange[0],r=this.byteRange[1];if(ke(t)&&ke(r))return r-t}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(t){this._bitrate=t}get decryptdata(){var t;let{levelkeys:r}=this;if(!r||r.NONE)return null;if(r.identity)this._decryptdata||(this._decryptdata=r.identity.getDecryptData(this.sn));else if(!((t=this._decryptdata)!=null&&t.keyId)){let n=Object.keys(r);if(n.length===1){let i=this._decryptdata=r[n[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,r))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;let t=ke(this.duration)?this.duration:0;return this.programDateTime+t*1e3}get encrypted(){var t;if((t=this._decryptdata)!=null&&t.encrypted)return!0;if(this.levelkeys){var r;let n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&(r=this.levelkeys[n[0]])!=null&&r.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(t){if(!ke(t)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=t}get ref(){return Zt(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(t){this.setStart(this.start+t)}setStart(t){this.start=t,this._ref&&(this._ref.start=t)}setDuration(t){this.duration=t,this._ref&&(this._ref.duration=t)}setKeyFormat(t){let r=this.levelkeys;if(r){var n;let i=r[t];i&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,r))}}abortRequests(){var t,r;(t=this.loader)==null||t.abort(),(r=this.keyLoader)==null||r.abort()}setElementaryStreamInfo(t,r,n,i,s,o=!1){let{elementaryStreams:a}=this,l=a[t];if(!l){a[t]={startPTS:r,endPTS:n,startDTS:i,endDTS:s,partial:o};return}l.startPTS=Math.min(l.startPTS,r),l.endPTS=Math.max(l.endPTS,n),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,s)}},kT=class extends Fp{constructor(t,r,n,i,s){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=t.decimalFloatingPoint("DURATION"),this.gap=t.bool("GAP"),this.independent=t.bool("INDEPENDENT"),this.relurl=t.enumeratedString("URI"),this.fragment=r,this.index=i;let o=t.enumeratedString("BYTERANGE");o&&this.setByteRange(o,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){let{elementaryStreams:t}=this;return!!(t.audio||t.video||t.audiovideo)}};function h2(e,t){let r=Object.getPrototypeOf(e);if(r)return Object.getOwnPropertyDescriptor(r,t)||h2(r,t)}function Coe(e,t){let r=h2(e,t);r&&(r.enumerable=!0,Object.defineProperty(e,t,r))}var BI=Math.pow(2,32)-1,xoe=[].push,f2={video:1,audio:2,id3:3,text:4};function tr(e){return String.fromCharCode.apply(null,e)}function p2(e,t){let r=e[t]<<8|e[t+1];return r<0?65536+r:r}function ze(e,t){let r=g2(e,t);return r<0?4294967296+r:r}function UI(e,t){let r=ze(e,t);return r*=Math.pow(2,32),r+=ze(e,t+4),r}function g2(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Roe(e){let t=e.byteLength;for(let r=0;r<t;){let n=ze(e,r);if(n>8&&e[r+4]===109&&e[r+5]===111&&e[r+6]===111&&e[r+7]===102)return!0;r=n>1?r+n:t}return!1}function Ze(e,t){let r=[];if(!t.length)return r;let n=e.byteLength;for(let i=0;i<n;){let s=ze(e,i),o=tr(e.subarray(i+4,i+8)),a=s>1?i+s:n;if(o===t[0])if(t.length===1)r.push(e.subarray(i+8,a));else{let l=Ze(e.subarray(i+8,a),t.slice(1));l.length&&xoe.apply(r,l)}i=a}return r}function Ioe(e){let t=[],r=e[0],n=8,i=ze(e,n);n+=4;let s=0,o=0;r===0?(s=ze(e,n),o=ze(e,n+4),n+=8):(s=UI(e,n),o=UI(e,n+8),n+=16),n+=2;let a=e.length+o,l=p2(e,n);n+=2;for(let c=0;c<l;c++){let u=n,d=ze(e,u);u+=4;let h=d&2147483647;if((d&2147483648)>>>31===1)return ut.warn("SIDX has hierarchical references (not supported)"),null;let f=ze(e,u);u+=4,t.push({referenceSize:h,subsegmentDuration:f,info:{duration:f/i,start:a,end:a+h-1}}),a+=h,u+=4,n=u}return{earliestPresentationTime:s,timescale:i,version:r,referencesCount:l,references:t}}function m2(e){let t=[],r=Ze(e,["moov","trak"]);for(let n=0;n<r.length;n++){let i=r[n],s=Ze(i,["tkhd"])[0];if(s){let o=s[0],a=ze(s,o===0?12:20),l=Ze(i,["mdia","mdhd"])[0];if(l){o=l[0];let c=ze(l,o===0?12:20),u=Ze(i,["mdia","hdlr"])[0];if(u){let d=tr(u.subarray(8,12)),h={soun:mt.AUDIO,vide:mt.VIDEO}[d],f=Ze(i,["mdia","minf","stbl","stsd"])[0],p=_oe(f);h?(t[a]={timescale:c,type:h,stsd:p},t[h]=ct({timescale:c,id:a},p)):t[a]={timescale:c,type:d,stsd:p}}}}}return Ze(e,["moov","mvex","trex"]).forEach(n=>{let i=ze(n,4),s=t[i];s&&(s.default={duration:ze(n,12),flags:ze(n,20)})}),t}function _oe(e){let t=e.subarray(8),r=t.subarray(86),n=tr(t.subarray(4,8)),i=n,s,o=n==="enca"||n==="encv";if(o){let l=Ze(t,[n])[0].subarray(n==="enca"?28:78);Ze(l,["sinf"]).forEach(c=>{let u=Ze(c,["schm"])[0];if(u){let d=tr(u.subarray(4,8));if(d==="cbcs"||d==="cenc"){let h=Ze(c,["frma"])[0];h&&(i=tr(h))}}})}let a=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{let l=Ze(r,["avcC"])[0];l&&l.length>3&&(i+="."+xf(l[1])+xf(l[2])+xf(l[3]),s=Cf(a==="avc1"?"dva1":"dvav",r));break}case"mp4a":{let l=Ze(t,[n])[0],c=Ze(l.subarray(28),["esds"])[0];if(c&&c.length>7){let u=4;if(c[u++]!==3)break;u=v0(c,u),u+=2;let d=c[u++];if(d&128&&(u+=2),d&64&&(u+=c[u++]),c[u++]!==4)break;u=v0(c,u);let h=c[u++];if(h===64)i+="."+xf(h);else break;if(u+=12,c[u++]!==5)break;u=v0(c,u);let f=c[u++],p=(f&248)>>3;p===31&&(p+=1+((f&7)<<3)+((c[u]&224)>>5)),i+="."+p}break}case"hvc1":case"hev1":{let l=Ze(r,["hvcC"])[0];if(l&&l.length>12){let c=l[1],u=["","A","B","C"][c>>6],d=c&31,h=ze(l,2),f=(c&32)>>5?"H":"L",p=l[12],g=l.subarray(6,12);i+="."+u+d,i+="."+Loe(h).toString(16).toUpperCase(),i+="."+f+p;let v="";for(let m=g.length;m--;){let y=g[m];(y||v)&&(v="."+y.toString(16).toUpperCase()+v)}i+=v}s=Cf(a=="hev1"?"dvhe":"dvh1",r);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=Cf(i,r)||i;break}case"vp09":{let l=Ze(r,["vpcC"])[0];if(l&&l.length>6){let c=l[4],u=l[5],d=l[6]>>4&15;i+="."+di(c)+"."+di(u)+"."+di(d)}break}case"av01":{let l=Ze(r,["av1C"])[0];if(l&&l.length>2){let c=l[1]>>>5,u=l[1]&31,d=l[2]>>>7?"H":"M",h=(l[2]&64)>>6,f=(l[2]&32)>>5,p=c===2&&h?f?12:10:h?10:8,g=(l[2]&16)>>4,v=(l[2]&8)>>3,m=(l[2]&4)>>2,y=l[2]&3;i+="."+c+"."+di(u)+d+"."+di(p)+"."+g+"."+v+m+y+"."+di(1)+"."+di(1)+"."+di(1)+".0",s=Cf("dav1",r)}break}}return{codec:i,encrypted:o,supplemental:s}}function Cf(e,t){let r=Ze(t,["dvvC"]),n=r.length?r[0]:Ze(t,["dvcC"])[0];if(n){let i=n[2]>>1&127,s=n[2]<<5&32|n[3]>>3&31;return e+"."+di(i)+"."+di(s)}}function Loe(e){let t=0;for(let r=0;r<32;r++)t|=(e>>r&1)<<31-r;return t>>>0}function v0(e,t){let r=t+5;for(;e[t++]&128&&t<r;);return t}function xf(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function di(e){return(e<10?"0":"")+e}function Poe(e,t){if(!e||!t)return;let r=t.keyId;r&&t.isCommonEncryption&&v2(e,(n,i)=>{let s=n.subarray(8,24);s.some(o=>o!==0)||(ut.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${Fr(s)} -> ${Fr(r)}`),n.set(r,8))})}function Doe(e){let t=[];return v2(e,r=>t.push(r.subarray(8,24))),t}function v2(e,t){Ze(e,["moov","trak"]).forEach(r=>{let n=Ze(r,["mdia","minf","stbl","stsd"])[0];if(!n)return;let i=n.subarray(8),s=Ze(i,["enca"]),o=s.length>0;o||(s=Ze(i,["encv"])),s.forEach(a=>{let l=o?a.subarray(28):a.subarray(78);Ze(l,["sinf"]).forEach(c=>{let u=y2(c);u&&t(u,o)})})})}function y2(e){let t=Ze(e,["schm"])[0];if(t){let r=tr(t.subarray(4,8));if(r==="cbcs"||r==="cenc"){let n=Ze(e,["schi","tenc"])[0];if(n)return n}}}function Ooe(e,t,r){let n={},i=Ze(e,["moof","traf"]);for(let s=0;s<i.length;s++){let o=i[s],a=Ze(o,["tfhd"])[0],l=ze(a,4),c=t[l];if(!c)continue;n[l]||(n[l]={start:NaN,duration:0,sampleCount:0,timescale:c.timescale,type:c.type});let u=n[l],d=Ze(o,["tfdt"])[0];if(d){let E=d[0],S=ze(d,4);E===1&&(S===BI?r.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(S*=BI+1,S+=ze(d,8))),ke(S)&&(!ke(u.start)||S<u.start)&&(u.start=S)}let h=c.default,f=ze(a,0)|h?.flags,p=h?.duration||0;f&8&&(f&2?p=ze(a,12):p=ze(a,8));let g=Ze(o,["trun"]),v=u.start||0,m=0,y=p;for(let E=0;E<g.length;E++){let S=g[E],b=ze(S,4),w=u.sampleCount;u.sampleCount+=b;let x=S[3]&1,D=S[3]&4,N=S[2]&1,C=S[2]&2,P=S[2]&4,U=S[2]&8,G=8,K=b;for(x&&(G+=4),D&&b&&(!(S[G+1]&1)&&u.keyFrameIndex===void 0&&(u.keyFrameIndex=w),G+=4,N?(y=ze(S,G),G+=4):y=p,C&&(G+=4),U&&(G+=4),v+=y,m+=y,K--);K--;)N?(y=ze(S,G),G+=4):y=p,C&&(G+=4),P&&(S[G+1]&1||u.keyFrameIndex===void 0&&(u.keyFrameIndex=u.sampleCount-(K+1),u.keyFrameStart=v),G+=4),U&&(G+=4),v+=y,m+=y;!m&&p&&(m+=p*b)}u.duration+=m}if(!Object.keys(n).some(s=>n[s].duration)){let s=1/0,o=0,a=Ze(e,["sidx"]);for(let l=0;l<a.length;l++){let c=Ioe(a[l]);if(c!=null&&c.references){s=Math.min(s,c.earliestPresentationTime/c.timescale);let u=c.references.reduce((d,h)=>d+h.info.duration||0,0);o=Math.max(o,u+c.earliestPresentationTime/c.timescale)}}o&&ke(o)&&Object.keys(n).forEach(l=>{n[l].duration||(n[l].duration=o*n[l].timescale-n[l].start)})}return n}function Noe(e){let t={valid:null,remainder:null},r=Ze(e,["moof"]);if(r.length<2)return t.remainder=e,t;let n=r[r.length-1];return t.valid=e.slice(0,n.byteOffset-8),t.remainder=e.slice(n.byteOffset-8),t}function Pn(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function HI(e,t){let r=[],n=t.samples,i=t.timescale,s=t.id,o=!1;return Ze(n,["moof"]).map(a=>{let l=a.byteOffset-8;Ze(a,["traf"]).map(c=>{let u=Ze(c,["tfdt"]).map(d=>{let h=d[0],f=ze(d,4);return h===1&&(f*=Math.pow(2,32),f+=ze(d,8)),f/i})[0];return u!==void 0&&(e=u),Ze(c,["tfhd"]).map(d=>{let h=ze(d,4),f=ze(d,0)&16777215,p=(f&1)!==0,g=(f&2)!==0,v=(f&8)!==0,m=0,y=(f&16)!==0,E=0,S=(f&32)!==0,b=8;h===s&&(p&&(b+=8),g&&(b+=4),v&&(m=ze(d,b),b+=4),y&&(E=ze(d,b),b+=4),S&&(b+=4),t.type==="video"&&(o=qg(t.codec)),Ze(c,["trun"]).map(w=>{let x=w[0],D=ze(w,0)&16777215,N=(D&1)!==0,C=0,P=(D&4)!==0,U=(D&256)!==0,G=0,K=(D&512)!==0,B=0,V=(D&1024)!==0,W=(D&2048)!==0,X=0,Y=ze(w,4),O=8;N&&(C=ze(w,O),O+=4),P&&(O+=4);let ie=C+l;for(let le=0;le<Y;le++){if(U?(G=ze(w,O),O+=4):G=m,K?(B=ze(w,O),O+=4):B=E,V&&(O+=4),W&&(x===0?X=ze(w,O):X=g2(w,O),O+=4),t.type===mt.VIDEO){let F=0;for(;F<B;){let te=ze(n,ie);if(ie+=4,Moe(o,n[ie])){let ge=n.subarray(ie,ie+te);hb(ge,o?2:1,e+X/i,r)}ie+=te,F+=te+4}}e+=G/i}}))})})}),r}function qg(e){if(!e)return!1;let t=e.substring(0,4);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function Moe(e,t){if(e){let r=t>>1&63;return r===39||r===40}else return(t&31)===6}function hb(e,t,r,n){let i=E2(e),s=0;s+=t;let o=0,a=0,l=0;for(;s<i.length;){o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(l===255);a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(l===255);let c=i.length-s,u=s;if(a<c)s+=a;else if(a>c){ut.error(`Malformed SEI payload. ${a} is too small, only ${c} bytes left to parse.`);break}if(o===4){if(i[u++]===181){let d=p2(i,u);if(u+=2,d===49){let h=ze(i,u);if(u+=4,h===1195456820){let f=i[u++];if(f===3){let p=i[u++],g=31&p,v=64&p,m=v?2+g*3:0,y=new Uint8Array(m);if(v){y[0]=p;for(let E=1;E<m;E++)y[E]=i[u++]}n.push({type:f,payloadType:o,pts:r,bytes:y})}}}}}else if(o===5&&a>16){let d=[];for(let p=0;p<16;p++){let g=i[u++].toString(16);d.push(g.length==1?"0"+g:g),(p===3||p===5||p===7||p===9)&&d.push("-")}let h=a-16,f=new Uint8Array(h);for(let p=0;p<h;p++)f[p]=i[u++];n.push({payloadType:o,pts:r,uuid:d.join(""),userData:yn(f),userDataBytes:f})}}}function E2(e){let t=e.byteLength,r=[],n=1;for(;n<t-2;)e[n]===0&&e[n+1]===0&&e[n+2]===3?(r.push(n+2),n+=2):n++;if(r.length===0)return e;let i=t-r.length,s=new Uint8Array(i),o=0;for(n=0;n<i;o++,n++)o===r[0]&&(o++,r.shift()),s[n]=e[o];return s}function Foe(e){let t=e[0],r="",n="",i=0,s=0,o=0,a=0,l=0,c=0;if(t===0){for(;tr(e.subarray(c,c+1))!=="\0";)r+=tr(e.subarray(c,c+1)),c+=1;for(r+=tr(e.subarray(c,c+1)),c+=1;tr(e.subarray(c,c+1))!=="\0";)n+=tr(e.subarray(c,c+1)),c+=1;n+=tr(e.subarray(c,c+1)),c+=1,i=ze(e,12),s=ze(e,16),a=ze(e,20),l=ze(e,24),c=28}else if(t===1){c+=4,i=ze(e,c),c+=4;let d=ze(e,c);c+=4;let h=ze(e,c);for(c+=4,o=2**32*d+h,goe(o)||(o=Number.MAX_SAFE_INTEGER,ut.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=ze(e,c),c+=4,l=ze(e,c),c+=4;tr(e.subarray(c,c+1))!=="\0";)r+=tr(e.subarray(c,c+1)),c+=1;for(r+=tr(e.subarray(c,c+1)),c+=1;tr(e.subarray(c,c+1))!=="\0";)n+=tr(e.subarray(c,c+1)),c+=1;n+=tr(e.subarray(c,c+1)),c+=1}let u=e.subarray(c,e.byteLength);return{schemeIdUri:r,value:n,timeScale:i,presentationTime:o,presentationTimeDelta:s,eventDuration:a,id:l,payload:u}}function Boe(e,...t){let r=t.length,n=8,i=r;for(;i--;)n+=t[i].byteLength;let s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(e,4),i=0,n=8;i<r;i++)s.set(t[i],n),n+=t[i].byteLength;return s}function Uoe(e,t,r){if(e.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let s;n>0?(s=new Uint8Array(4),t.length>0&&new DataView(s.buffer).setUint32(0,t.length,!1)):s=new Uint8Array;let o=new Uint8Array(4);return r.byteLength>0&&new DataView(o.buffer).setUint32(0,r.byteLength,!1),Boe([112,115,115,104],new Uint8Array([n,0,0,0]),e,s,i,o,r)}function Hoe(e){let t=[];if(e instanceof ArrayBuffer){let r=e.byteLength,n=0;for(;n+32<r;){let i=new DataView(e,n),s=zoe(i);t.push(s),n+=s.size}}return t}function zoe(e){let t=e.getUint32(0),r=e.byteOffset,n=e.byteLength;if(n<t)return{offset:r,size:n};if(e.getUint32(4)!==1886614376)return{offset:r,size:t};let i=e.getUint32(8)>>>24;if(i!==0&&i!==1)return{offset:r,size:t};let s=e.buffer,o=Fr(new Uint8Array(s,r+12,16)),a=null,l=null,c=0;if(i===0)c=28;else{let d=e.getUint32(28);if(!d||n<32+d*16)return{offset:r,size:t};a=[];for(let h=0;h<d;h++)a.push(new Uint8Array(s,r+32+h*16,16));c=32+d*16}if(!c)return{offset:r,size:t};let u=e.getUint32(c);return t-32<u?{offset:r,size:t}:(l=new Uint8Array(s,r+c+4,u),{version:i,systemId:o,kids:a,data:l,offset:r,size:t})}var T2=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Nl={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function fb(e,t){let r=Nl[t];return!!r&&!!r[e.slice(0,4)]}function Yu(e,t,r=!0){return!e.split(",").some(n=>!pb(n,t,r))}function pb(e,t,r=!0){var n;let i=Ks(r);return(n=i?.isTypeSupported(Xu(e,t)))!=null?n:!1}function Xu(e,t){return`${t}/mp4;codecs=${e}`}function zI(e){if(e){let t=e.substring(0,4);return Nl.video[t]}return 2}function Bp(e){let t=T2();return e.split(",").reduce((r,n)=>{let i=t&&qg(n)?9:Nl.video[n];return i?(i*2+r)/(r?3:2):(Nl.audio[n]+r)/(r?2:1)},0)}var y0={};function $oe(e,t=!0){if(y0[e])return y0[e];let r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e];for(let i=0;i<r.length;i++){var n;if(pb(r[i],"audio",t))return y0[e]=r[i],r[i];if(r[i]==="mp3"&&(n=Ks(t))!=null&&n.isTypeSupported("audio/mpeg"))return""}return e}var Goe=/flac|opus|mp4a\.40\.34/i;function Up(e,t=!0){return e.replace(Goe,r=>$oe(r.toLowerCase(),t))}function joe(e,t){let r=[];if(e){let n=e.split(",");for(let i=0;i<n.length;i++)fb(n[i],"video")||r.push(n[i])}return t&&r.push(t),r.join(",")}function tp(e,t){if(e&&(e.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e)!==-1)&&($I(e,"audio")||$I(e,"video")))return e;if(t){let r=t.split(",");if(r.length>1){if(e){for(let n=r.length;n--;)if(r[n].substring(0,4)===e.substring(0,4))return r[n]}return r[0]}}return t||e}function $I(e,t){return fb(e,t)&&pb(e,t)}function Voe(e){let t=e.split(",");for(let r=0;r<t.length;r++){let n=t[r].split(".");n.length>2&&n[0]==="avc1"&&(t[r]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return t.join(",")}function Woe(e){if(e.startsWith("av01.")){let t=e.split("."),r=["0","111","01","01","01","0"];for(let n=t.length;n>4&&n<10;n++)t[n]=r[n-4];return t.join(".")}return e}function GI(e){let t=Ks(e)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function CT(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}var qoe={supported:!0,powerEfficient:!0,smooth:!0},Koe={supported:!1,smooth:!1,powerEfficient:!1},S2={supported:!0,configurations:[],decodingInfoResults:[qoe]};function b2(e,t){return{supported:!1,configurations:t,decodingInfoResults:[Koe],error:e}}function Yoe(e,t,r,n,i,s){let o=e.videoCodec,a=e.audioCodec?e.audioGroups:null,l=s?.audioCodec,c=s?.channels,u=c?parseInt(c):l?1/0:2,d=null;if(a!=null&&a.length)try{a.length===1&&a[0]?d=t.groups[a[0]].channels:d=a.reduce((h,f)=>{if(f){let p=t.groups[f];if(!p)throw new Error(`Audio track group ${f} not found`);Object.keys(p.channels).forEach(g=>{h[g]=(h[g]||0)+p.channels[g]})}return h},{2:0})}catch{return!0}return o!==void 0&&(o.split(",").some(h=>qg(h))||e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(n,30)||e.videoRange!=="SDR"&&e.videoRange!==r||e.bitrate>Math.max(i,8e6))||!!d&&ke(u)&&Object.keys(d).some(h=>parseInt(h)>u)}function w2(e,t,r,n={}){let i=e.videoCodec;if(!i&&!e.audioCodec||!r)return Promise.resolve(S2);let s=[],o=Xoe(e),a=o.length,l=Qoe(e,t,a>0),c=l.length;for(let u=a||1*c||1;u--;){let d={type:"media-source"};if(a&&(d.video=o[u%a]),c){d.audio=l[u%c];let h=d.audio.bitrate;d.video&&h&&(d.video.bitrate-=h)}s.push(d)}if(i){let u=navigator.userAgent;if(i.split(",").some(d=>qg(d))&&T2())return Promise.resolve(b2(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${u})`),s))}return Promise.all(s.map(u=>{let d=Joe(u);return n[d]||(n[d]=r.decodingInfo(u))})).then(u=>({supported:!u.some(d=>!d.supported),configurations:s,decodingInfoResults:u})).catch(u=>({supported:!1,configurations:s,decodingInfoResults:[],error:u}))}function Xoe(e){var t;let r=(t=e.videoCodec)==null?void 0:t.split(","),n=A2(e),i=e.width||640,s=e.height||480,o=e.frameRate||30,a=e.videoRange.toLowerCase();return r?r.map(l=>{let c={contentType:Xu(Woe(l),"video"),width:i,height:s,bitrate:n,framerate:o};return a!=="sdr"&&(c.transferFunction=a),c}):[]}function Qoe(e,t,r){var n;let i=(n=e.audioCodec)==null?void 0:n.split(","),s=A2(e);return i&&e.audioGroups?e.audioGroups.reduce((o,a)=>{var l;let c=a?(l=t.groups[a])==null?void 0:l.tracks:null;return c?c.reduce((u,d)=>{if(d.groupId===a){let h=parseFloat(d.channels||"");i.forEach(f=>{let p={contentType:Xu(f,"audio"),bitrate:r?Zoe(f,s):s};h&&(p.channels=""+h),u.push(p)})}return u},o):o},[]):[]}function Zoe(e,t){if(t<=1)return 1;let r=128e3;return e==="ec-3"?r=768e3:e==="ac-3"&&(r=64e4),Math.min(t/2,r)}function A2(e){return Math.ceil(Math.max(e.bitrate*.9,e.averageBitrate)/1e3)*1e3||1}function Joe(e){let t="",{audio:r,video:n}=e;if(n){let i=CT(n.contentType);t+=`${i}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(r){let i=CT(r.contentType);t+=`${n?"_":""}${i}_c${r.channels}`}return t}var xT=["NONE","TYPE-0","TYPE-1",null];function eae(e){return xT.indexOf(e)>-1}var Hp=["SDR","PQ","HLG"];function tae(e){return!!e&&Hp.indexOf(e)>-1}var rp={No:"",Yes:"YES",v2:"v2"};function jI(e){let{canSkipUntil:t,canSkipDateRanges:r,age:n}=e,i=n<t/2;return t&&i?r?rp.v2:rp.Yes:rp.No}var zp=class{constructor(t,r,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=r,this.skip=n}addDirectives(t){let r=new self.URL(t);return this.msn!==void 0&&r.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&r.searchParams.set("_HLS_part",this.part.toString()),this.skip&&r.searchParams.set("_HLS_skip",this.skip),r.href}},Yo=class{constructor(t){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[t.url],this._attrs=[t.attrs],this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.frameRate=t.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=t.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.codecSet=[t.videoCodec,t.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in t){var r;this.supplemental=t.supplemental;let n=(r=t.supplemental)==null?void 0:r.videoCodec;n&&n!==t.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",t.attrs.AUDIO),this.addGroupId("text",t.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(t){return VI(this._audioGroups,t)}hasSubtitleGroup(t){return VI(this._subtitleGroups,t)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(t,r){if(r){if(t==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(r)===-1&&n.push(r)}else if(t==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(r)===-1&&n.push(r)}}}get urlId(){return 0}set urlId(t){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var t;return(t=this.audioGroups)==null?void 0:t[0]}get textGroupId(){var t;return(t=this.subtitleGroups)==null?void 0:t[0]}addFallback(){}};function VI(e,t){return!t||!e?!1:e.indexOf(t)!==-1}function rae(){if(typeof matchMedia=="function"){let e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return e.matches===!0}return!1}function nae(e,t){let r=!1,n=[];if(e&&(r=e!=="SDR",n=[e]),t){n=t.allowedVideoRanges||Hp.slice(0);let i=n.join("")!=="SDR"&&!t.videoCodec;r=t.preferHDR!==void 0?t.preferHDR:i&&rae(),r||(n=["SDR"])}return{preferHDR:r,allowedVideoRanges:n}}var iae=e=>{let t=new WeakSet;return(r,n)=>{if(e&&(n=e(r,n)),typeof n=="object"&&n!==null){if(t.has(n))return;t.add(n)}return n}},vt=(e,t)=>JSON.stringify(e,iae(t));function sae(e,t,r,n,i){let s=Object.keys(e),o=n?.channels,a=n?.audioCodec,l=i?.videoCodec,c=o&&parseInt(o)===2,u=!1,d=!1,h=1/0,f=1/0,p=1/0,g=1/0,v=0,m=[],{preferHDR:y,allowedVideoRanges:E}=nae(t,i);for(let x=s.length;x--;){let D=e[s[x]];u||(u=D.channels[2]>0),h=Math.min(h,D.minHeight),f=Math.min(f,D.minFramerate),p=Math.min(p,D.minBitrate),E.filter(N=>D.videoRanges[N]>0).length>0&&(d=!0)}h=ke(h)?h:0,f=ke(f)?f:0;let S=Math.max(1080,h),b=Math.max(30,f);p=ke(p)?p:r,r=Math.max(p,r),d||(t=void 0);let w=s.length>1;return{codecSet:s.reduce((x,D)=>{let N=e[D];if(D===x)return x;if(m=d?E.filter(C=>N.videoRanges[C]>0):[],w){if(N.minBitrate>r)return ai(D,`min bitrate of ${N.minBitrate} > current estimate of ${r}`),x;if(!N.hasDefaultAudio)return ai(D,"no renditions with default or auto-select sound found"),x;if(a&&D.indexOf(a.substring(0,4))%5!==0)return ai(D,`audio codec preference "${a}" not found`),x;if(o&&!c){if(!N.channels[o])return ai(D,`no renditions with ${o} channel sound found (channels options: ${Object.keys(N.channels)})`),x}else if((!a||c)&&u&&N.channels[2]===0)return ai(D,"no renditions with stereo sound found"),x;if(N.minHeight>S)return ai(D,`min resolution of ${N.minHeight} > maximum of ${S}`),x;if(N.minFramerate>b)return ai(D,`min framerate of ${N.minFramerate} > maximum of ${b}`),x;if(!m.some(C=>N.videoRanges[C]>0))return ai(D,`no variants with VIDEO-RANGE of ${vt(m)} found`),x;if(l&&D.indexOf(l.substring(0,4))%5!==0)return ai(D,`video codec preference "${l}" not found`),x;if(N.maxScore<v)return ai(D,`max score of ${N.maxScore} < selected max of ${v}`),x}return x&&(Bp(D)>=Bp(x)||N.fragmentError>e[x].fragmentError)?x:(g=N.minIndex,v=N.maxScore,D)},void 0),videoRanges:m,preferHDR:y,minFramerate:f,minBitrate:p,minIndex:g}}function ai(e,t){ut.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function k2(e){return e.reduce((t,r)=>{let n=t.groups[r.groupId];n||(n=t.groups[r.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(r);let i=r.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||r.default,n.hasAutoSelect=n.hasAutoSelect||r.autoselect,n.hasDefault&&(t.hasDefaultAudio=!0),n.hasAutoSelect&&(t.hasAutoSelectAudio=!0),t},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function oae(e,t,r,n){return e.slice(r,n+1).reduce((i,s,o)=>{if(!s.codecSet)return i;let a=s.audioGroups,l=i[s.codecSet];l||(i[s.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:o,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,s.bitrate);let c=Math.min(s.height,s.width);return l.minHeight=Math.min(l.minHeight,c),l.minFramerate=Math.min(l.minFramerate,s.frameRate),l.minIndex=Math.min(l.minIndex,o),l.maxScore=Math.max(l.maxScore,s.score),l.fragmentError+=s.fragmentError,l.videoRanges[s.videoRange]=(l.videoRanges[s.videoRange]||0)+1,a&&a.forEach(u=>{if(!u)return;let d=t.groups[u];d&&(l.hasDefaultAudio=l.hasDefaultAudio||t.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(d.channels).forEach(h=>{l.channels[h]=(l.channels[h]||0)+d.channels[h]}))}),i},{})}function WI(e){if(!e)return e;let{lang:t,assocLang:r,characteristics:n,channels:i,audioCodec:s}=e;return{lang:t,assocLang:r,characteristics:n,channels:i,audioCodec:s}}function vi(e,t,r){if("attrs"in e){let n=t.indexOf(e);if(n!==-1)return n}for(let n=0;n<t.length;n++){let i=t[n];if(Go(e,i,r))return n}return-1}function Go(e,t,r){let{groupId:n,name:i,lang:s,assocLang:o,default:a}=e,l=e.forced;return(n===void 0||t.groupId===n)&&(i===void 0||t.name===i)&&(s===void 0||aae(s,t.lang))&&(s===void 0||t.assocLang===o)&&(a===void 0||t.default===a)&&(l===void 0||t.forced===l)&&(!("characteristics"in e)||lae(e.characteristics||"",t.characteristics))&&(r===void 0||r(e,t))}function aae(e,t="--"){return e.length===t.length?e===t:e.startsWith(t)||t.startsWith(e)}function lae(e,t=""){let r=e.split(","),n=t.split(",");return r.length===n.length&&!r.some(i=>n.indexOf(i)===-1)}function Io(e,t){let{audioCodec:r,channels:n}=e;return(r===void 0||(t.audioCodec||"").substring(0,4)===r.substring(0,4))&&(n===void 0||n===(t.channels||"2"))}function cae(e,t,r,n,i){let s=t[n],o=t.reduce((d,h,f)=>{let p=h.uri;return(d[p]||(d[p]=[])).push(f),d},{})[s.uri];o.length>1&&(n=Math.max.apply(Math,o));let a=s.videoRange,l=s.frameRate,c=s.codecSet.substring(0,4),u=qI(t,n,d=>{if(d.videoRange!==a||d.frameRate!==l||d.codecSet.substring(0,4)!==c)return!1;let h=d.audioGroups,f=r.filter(p=>!h||h.indexOf(p.groupId)!==-1);return vi(e,f,i)>-1});return u>-1?u:qI(t,n,d=>{let h=d.audioGroups,f=r.filter(p=>!h||h.indexOf(p.groupId)!==-1);return vi(e,f,i)>-1})}function qI(e,t,r){for(let n=t;n>-1;n--)if(r(e[n]))return n;for(let n=t+1;n<e.length;n++)if(r(e[n]))return n;return-1}function $p(e,t){var r;return!!e&&e!==((r=t.loadLevelObj)==null?void 0:r.uri)}var RT=class extends Jr{constructor(t){super("abr",t.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=r=>{var n;let{fragCurrent:i,partCurrent:s,hls:o}=this,{autoLevelEnabled:a,media:l}=o;if(!i||!l)return;let c=performance.now(),u=s?s.stats:i.stats,d=s?s.duration:i.duration,h=c-u.loading.start,f=o.minAutoLevel,p=i.level,g=this._nextAutoLevel;if(u.aborted||u.loaded&&u.loaded===u.total||p<=f){this.clearTimer(),this._nextAutoLevel=-1;return}if(!a)return;let v=g>-1&&g!==p,m=!!r||v;if(!m&&(l.paused||!l.playbackRate||!l.readyState))return;let y=o.mainForwardBufferInfo;if(!m&&y===null)return;let E=this.bwEstimator.getEstimateTTFB(),S=Math.abs(l.playbackRate);if(h<=Math.max(E,1e3*(d/(S*2))))return;let b=y?y.len/S:0,w=u.loading.first?u.loading.first-u.loading.start:-1,x=u.loaded&&w>-1,D=this.getBwEstimate(),N=o.levels,C=N[p],P=Math.max(u.loaded,Math.round(d*(i.bitrate||C.averageBitrate)/8)),U=x?h-w:h;U<1&&x&&(U=Math.min(h,u.loaded*8/D));let G=x?u.loaded*1e3/U:0,K=E/1e3,B=G?(P-u.loaded)/G:P*8/D+K;if(B<=b)return;let V=G?G*8:D,W=((n=r?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,X=this.hls.config.abrBandWidthUpFactor,Y=Number.POSITIVE_INFINITY,O;for(O=p-1;O>f;O--){let te=N[O].maxBitrate,ge=!N[O].details||W;if(Y=this.getTimeToLoadFrag(K,V,d*te,ge),Y<Math.min(b,d+K))break}if(Y>=B||Y>d*10)return;x?this.bwEstimator.sample(h-Math.min(E,w),u.loaded):this.bwEstimator.sampleTTFB(h);let ie=N[O].maxBitrate;this.getBwEstimate()*X>ie&&this.resetEstimator(ie);let le=this.findBestLevel(ie,f,O,0,b,1,1);le>-1&&(O=le),this.warn(`Fragment ${i.sn}${s?" part "+s.index:""} of level ${p} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${b.toFixed(3)} s
      Estimated load time for current fragment: ${B.toFixed(3)} s
      Estimated load time for down switch fragment: ${Y.toFixed(3)} s
      TTFB estimate: ${w|0} ms
      Current BW estimate: ${ke(D)?D|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${O} @ ${ie|0} bps`),o.nextLoadLevel=o.nextAutoLevel=O,this.clearTimer();let F=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===O&&O>0){let te=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${O>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${te.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,O>f){let ge=this.findBestLevel(this.hls.levels[f].bitrate,f,O,0,te,1,1);ge===-1&&(ge=f),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ge,this.resetEstimator(this.hls.levels[ge].bitrate)}}};v||B>Y*2?F():this.timer=self.setInterval(F,Y*1e3),o.trigger(R.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:s,stats:u})},this.hls=t,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(t){t&&(this.log(`setting initial bwe to ${t}`),this.hls.config.abrEwmaDefaultEstimate=t),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){let t=this.hls.config;return new bT(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate)}registerListeners(){let{hls:t}=this;t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.FRAG_LOADING,this.onFragLoading,this),t.on(R.FRAG_LOADED,this.onFragLoaded,this),t.on(R.FRAG_BUFFERED,this.onFragBuffered,this),t.on(R.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(R.LEVEL_LOADED,this.onLevelLoaded,this),t.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(R.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.on(R.ERROR,this.onError,this)}unregisterListeners(){let{hls:t}=this;t&&(t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.FRAG_LOADING,this.onFragLoading,this),t.off(R.FRAG_LOADED,this.onFragLoaded,this),t.off(R.FRAG_BUFFERED,this.onFragBuffered,this),t.off(R.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(R.LEVEL_LOADED,this.onLevelLoaded,this),t.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(R.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.off(R.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(t,r){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(t,r){let n=r.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=r.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(t,r){this.clearTimer()}onError(t,r){if(!r.fatal)switch(r.details){case Q.BUFFER_ADD_CODEC_ERROR:case Q.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Q.FRAG_LOAD_TIMEOUT:{let n=r.frag,{fragCurrent:i,partCurrent:s}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){let o=performance.now(),a=s?s.stats:n.stats,l=o-a.loading.start,c=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&c>-1){let u=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(u,c),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(t,r,n,i){let s=t+n/r,o=i?t+this.lastLevelLoadSec:0;return s+o}onLevelLoaded(t,r){let n=this.hls.config,{loading:i}=r.stats,s=i.end-i.first;ke(s)&&(this.lastLevelLoadSec=s/1e3),r.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(r.levelInfo)}onFragLoaded(t,{frag:r,part:n}){let i=n?n.stats:r.stats;if(r.type===Re.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),r.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){let s=n?n.duration:r.duration,o=this.hls.levels[r.level],a=(o.loaded?o.loaded.bytes:0)+i.loaded,l=(o.loaded?o.loaded.duration:0)+s;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(r.bitrateTest){let s={stats:i,frag:r,part:n,id:r.type};this.onFragBuffered(R.FRAG_BUFFERED,s),r.bitrateTest=!1}else this.lastLoadedFragLevel=r.level}}onFragBuffered(t,r){let{frag:n,part:i}=r,s=i!=null&&i.stats.loaded?i.stats:n.stats;if(s.aborted||this.ignoreFragment(n))return;let o=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(t){return t.type!==Re.MAIN||t.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){let{maxAutoLevel:t,minAutoLevel:r}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(n,r,t,0,i,1,1);if(s>-1)return s;let o=this.hls.firstLevel,a=Math.min(Math.max(o,r),t);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){let t=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(t!==-1&&(!r||!n||this.nextAutoLevelKey===this.getAutoLevelKey()))return t;let i=r&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(t!==-1){let s=this.hls.levels;if(s.length>Math.max(t,i)&&s[t].loadError<=s[i].loadError)return t}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){let{fragCurrent:t,partCurrent:r,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;let{maxAutoLevel:i,config:s,minAutoLevel:o}=n,a=r?r.duration:t?t.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay(),u=s.abrBandWidthFactor,d=s.abrBandWidthUpFactor;if(c){let v=this.findBestLevel(l,o,i,c,0,u,d);if(v>=0)return this.rebufferNotice=-1,v}let h=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay;if(!c){let v=this.bitrateTestDelay;v&&(h=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-v,this.info(`bitrate test took ${Math.round(1e3*v)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),u=d=1)}let f=this.findBestLevel(l,o,i,c,h,u,d);if(this.rebufferNotice!==f&&(this.rebufferNotice=f,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${f}`)),f>-1)return f;let p=n.levels[o],g=n.loadLevelObj;return g&&p?.bitrate<g.bitrate?o:n.loadLevel}getStarvationDelay(){let t=this.hls,r=t.media;if(!r)return 1/0;let n=r&&r.playbackRate!==0?Math.abs(r.playbackRate):1,i=t.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(t,r,n,i,s,o,a){var l;let c=i+s,u=this.lastLoadedFragLevel,d=u===-1?this.hls.firstLevel:u,{fragCurrent:h,partCurrent:f}=this,{levels:p,allAudioTracks:g,loadLevel:v,config:m}=this.hls;if(p.length===1)return 0;let y=p[d],E=!!((l=this.hls.latestLevelDetails)!=null&&l.live),S=v===-1||u===-1,b,w="SDR",x=y?.frameRate||0,{audioPreference:D,videoPreference:N}=m,C=this.audioTracksByGroup||(this.audioTracksByGroup=k2(g)),P=-1;if(S){if(this.firstSelection!==-1)return this.firstSelection;let V=this.codecTiers||(this.codecTiers=oae(p,C,r,n)),W=sae(V,w,t,D,N),{codecSet:X,videoRanges:Y,minFramerate:O,minBitrate:ie,minIndex:le,preferHDR:F}=W;P=le,b=X,w=F?Y[Y.length-1]:Y[0],x=O,t=Math.max(t,ie),this.log(`picked start tier ${vt(W)}`)}else b=y?.codecSet,w=y?.videoRange;let U=f?f.duration:h?h.duration:0,G=this.bwEstimator.getEstimateTTFB()/1e3,K=[];for(let V=n;V>=r;V--){var B;let W=p[V],X=V>d;if(!W)continue;if(m.useMediaCapabilities&&!W.supportedResult&&!W.supportedPromise){let te=navigator.mediaCapabilities;typeof te?.decodingInfo=="function"&&Yoe(W,C,w,x,t,D)?(W.supportedPromise=w2(W,C,te,this.supportedCache),W.supportedPromise.then(ge=>{if(!this.hls)return;W.supportedResult=ge;let Ce=this.hls.levels,de=Ce.indexOf(W);ge.error?this.warn(`MediaCapabilities decodingInfo error: "${ge.error}" for level ${de} ${vt(ge)}`):ge.supported?ge.decodingInfoResults.some(we=>we.smooth===!1||we.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${de} not smooth or powerEfficient: ${vt(ge)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${de} ${vt(ge)}`),de>-1&&Ce.length>1&&(this.log(`Removing unsupported level ${de}`),this.hls.removeLevel(de),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(ge=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${ge}`)})):W.supportedResult=S2}if((b&&W.codecSet!==b||w&&W.videoRange!==w||X&&x>W.frameRate||!X&&x>0&&x<W.frameRate||(B=W.supportedResult)!=null&&(B=B.decodingInfoResults)!=null&&B.some(te=>te.smooth===!1))&&(!S||V!==P)){K.push(V);continue}let Y=W.details,O=(f?Y?.partTarget:Y?.averagetargetduration)||U,ie;X?ie=a*t:ie=o*t;let le=U&&i>=U*2&&s===0?W.averageBitrate:W.maxBitrate,F=this.getTimeToLoadFrag(G,ie,le*O,Y===void 0);if(ie>=le&&(V===u||W.loadError===0&&W.fragmentError===0)&&(F<=G||!ke(F)||E&&!this.bitrateTestDelay||F<c)){let te=this.forcedAutoLevel;return V!==v&&(te===-1||te!==v)&&(K.length&&this.trace(`Skipped level(s) ${K.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${p[K[0]].codecs}" ${p[K[0]].videoRange}; not compatible with "${b}" ${w}`),this.info(`switch candidate:${d}->${V} adjustedbw(${Math.round(ie)})-bitrate=${Math.round(ie-le)} ttfb:${G.toFixed(1)} avgDuration:${O.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${F.toFixed(1)} firstSelection:${S} codecSet:${W.codecSet} videoRange:${W.videoRange} hls.loadLevel:${v}`)),S&&(this.firstSelection=V),V}}return-1}set nextAutoLevel(t){let r=this.deriveNextAutoLevel(t);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}deriveNextAutoLevel(t){let{maxAutoLevel:r,minAutoLevel:n}=this.hls;return Math.min(Math.max(t,n),r)}},C2={search:function(e,t){let r=0,n=e.length-1,i=null,s=null;for(;r<=n;){i=(r+n)/2|0,s=e[i];let o=t(s);if(o>0)r=i+1;else if(o<0)n=i-1;else return s}return null}};function uae(e,t,r){if(t===null||!Array.isArray(e)||!e.length||!ke(t))return null;let n=e[0].programDateTime;if(t<(n||0))return null;let i=e[e.length-1].endProgramDateTime;if(t>=(i||0))return null;for(let s=0;s<e.length;++s){let o=e[s];if(hae(t,r,o))return o}return null}function Xo(e,t,r=0,n=0,i=.005){let s=null;if(e){s=t[1+e.sn-t[0].sn]||null;let a=e.endDTS-r;a>0&&a<15e-7&&(r+=15e-7),s&&e.level!==s.level&&s.end<=e.end&&(s=t[2+e.sn-t[0].sn]||null)}else r===0&&t[0].start===0&&(s=t[0]);if(s&&((!e||e.level===s.level)&&KI(r,n,s)===0||dae(s,e,Math.min(i,n))))return s;let o=C2.search(t,KI.bind(null,r,n));return o&&(o!==e||!s)?o:s}function dae(e,t,r){if(t&&t.start===0&&t.level<e.level&&(t.endPTS||0)>0){let n=t.tagList.reduce((i,s)=>(s[0]==="INF"&&(i+=parseFloat(s[1])),i),r);return e.start<=n}return!1}function KI(e=0,t=0,r){if(r.start<=e&&r.start+r.duration>e)return 0;let n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function hae(e,t,r){let n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0))*1e3;return(r.endProgramDateTime||0)-n>e}function x2(e,t,r){if(e&&e.startCC<=t&&e.endCC>=t){let n=e.fragments,{fragmentHint:i}=e;i&&(n=n.concat(i));let s;return C2.search(n,o=>o.cc<t?1:o.cc>t?-1:(s=o,o.end<=r?1:o.start>r?-1:0)),s||null}return null}function Gp(e){switch(e.details){case Q.FRAG_LOAD_TIMEOUT:case Q.KEY_LOAD_TIMEOUT:case Q.LEVEL_LOAD_TIMEOUT:case Q.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function R2(e){return e.details.startsWith("key")}function I2(e){return R2(e)&&!!e.frag&&!e.frag.decryptdata}function YI(e,t){let r=Gp(t);return e.default[`${r?"timeout":"error"}Retry`]}function gb(e,t){let r=e.backoff==="linear"?1:Math.pow(2,t);return Math.min(r*e.retryDelayMs,e.maxRetryDelayMs)}function XI(e){return ct(ct({},e),{errorRetry:null,timeoutRetry:null})}function jp(e,t,r,n){if(!e)return!1;let i=n?.code,s=t<e.maxNumRetry&&(fae(i)||!!r);return e.shouldRetry?e.shouldRetry(e,t,r,n,s):s}function fae(e){return IT(e)||!!e&&(e<400||e>499)}function IT(e){return e===0&&navigator.onLine===!1}var mr={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},fn={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4},_T=class extends Jr{constructor(t){super("error-controller",t.logger),this.hls=void 0,this.playlistError=0,this.hls=t,this.registerListeners()}registerListeners(){let t=this.hls;t.on(R.ERROR,this.onError,this),t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){let t=this.hls;t&&(t.off(R.ERROR,this.onError,this),t.off(R.ERROR,this.onErrorOut,this),t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(t){}stopLoad(){this.playlistError=0}getVariantLevelIndex(t){return t?.type===Re.MAIN?t.level:this.getVariantIndex()}getVariantIndex(){var t;let r=this.hls,n=r.currentLevel;return(t=r.loadLevelObj)!=null&&t.details||n===-1?r.loadLevel:n}variantHasKey(t,r){if(t){var n;if((n=t.details)!=null&&n.hasKey(r))return!0;let i=t.audioGroups;if(i)return this.hls.allAudioTracks.filter(s=>i.indexOf(s.groupId)>=0).some(s=>{var o;return(o=s.details)==null?void 0:o.hasKey(r)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(t,r){var n;if(r.fatal)return;let i=this.hls,s=r.context;switch(r.details){case Q.FRAG_LOAD_ERROR:case Q.FRAG_LOAD_TIMEOUT:case Q.KEY_LOAD_ERROR:case Q.KEY_LOAD_TIMEOUT:r.errorAction=this.getFragRetryOrSwitchAction(r);return;case Q.FRAG_PARSING_ERROR:if((n=r.frag)!=null&&n.gap){r.errorAction=Sl();return}case Q.FRAG_GAP:case Q.FRAG_DECRYPT_ERROR:{r.errorAction=this.getFragRetryOrSwitchAction(r),r.errorAction.action=mr.SendAlternateToPenaltyBox;return}case Q.LEVEL_EMPTY_ERROR:case Q.LEVEL_PARSING_ERROR:{var o;let l=r.parent===Re.MAIN?r.level:i.loadLevel;r.details===Q.LEVEL_EMPTY_ERROR&&(o=r.context)!=null&&(o=o.levelDetails)!=null&&o.live?r.errorAction=this.getPlaylistRetryOrSwitchAction(r,l):(r.levelRetry=!1,r.errorAction=this.getLevelSwitchAction(r,l))}return;case Q.LEVEL_LOAD_ERROR:case Q.LEVEL_LOAD_TIMEOUT:typeof s?.level=="number"&&(r.errorAction=this.getPlaylistRetryOrSwitchAction(r,s.level));return;case Q.AUDIO_TRACK_LOAD_ERROR:case Q.AUDIO_TRACK_LOAD_TIMEOUT:case Q.SUBTITLE_LOAD_ERROR:case Q.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){let l=i.loadLevelObj;if(l&&(s.type===et.AUDIO_TRACK&&l.hasAudioGroup(s.groupId)||s.type===et.SUBTITLE_TRACK&&l.hasSubtitleGroup(s.groupId))){r.errorAction=this.getPlaylistRetryOrSwitchAction(r,i.loadLevel),r.errorAction.action=mr.SendAlternateToPenaltyBox,r.errorAction.flags=fn.MoveAllAlternatesMatchingHost;return}}return;case Q.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:r.errorAction={action:mr.SendAlternateToPenaltyBox,flags:fn.MoveAllAlternatesMatchingHDCP};return;case Q.KEY_SYSTEM_SESSION_UPDATE_FAILED:case Q.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case Q.KEY_SYSTEM_NO_SESSION:r.errorAction={action:mr.SendAlternateToPenaltyBox,flags:fn.MoveAllAlternatesMatchingKey};return;case Q.BUFFER_ADD_CODEC_ERROR:case Q.REMUX_ALLOC_ERROR:case Q.BUFFER_APPEND_ERROR:if(!r.errorAction){var a;r.errorAction=this.getLevelSwitchAction(r,(a=r.level)!=null?a:i.loadLevel)}return;case Q.INTERNAL_EXCEPTION:case Q.BUFFER_APPENDING_ERROR:case Q.BUFFER_FULL_ERROR:case Q.LEVEL_SWITCH_ERROR:case Q.BUFFER_STALLED_ERROR:case Q.BUFFER_SEEK_OVER_HOLE:case Q.BUFFER_NUDGE_ON_STALL:r.errorAction=Sl();return}r.type===Oe.KEY_SYSTEM_ERROR&&(r.levelRetry=!1,r.errorAction=Sl())}getPlaylistRetryOrSwitchAction(t,r){let n=this.hls,i=YI(n.config.playlistLoadPolicy,t),s=this.playlistError++;if(jp(i,s,Gp(t),t.response))return{action:mr.RetryRequest,flags:fn.None,retryConfig:i,retryCount:s};let o=this.getLevelSwitchAction(t,r);return i&&(o.retryConfig=i,o.retryCount=s),o}getFragRetryOrSwitchAction(t){let r=this.hls,n=this.getVariantLevelIndex(t.frag),i=r.levels[n],{fragLoadPolicy:s,keyLoadPolicy:o}=r.config,a=YI(R2(t)?o:s,t),l=r.levels.reduce((u,d)=>u+d.fragmentError,0);if(i&&(t.details!==Q.FRAG_GAP&&i.fragmentError++,!I2(t)&&jp(a,l,Gp(t),t.response)))return{action:mr.RetryRequest,flags:fn.None,retryConfig:a,retryCount:l};let c=this.getLevelSwitchAction(t,n);return a&&(c.retryConfig=a,c.retryCount=l),c}getLevelSwitchAction(t,r){let n=this.hls;r==null&&(r=n.loadLevel);let i=this.hls.levels[r];if(i){var s,o;let c=t.details;i.loadError++,c===Q.BUFFER_APPEND_ERROR&&i.fragmentError++;let u=-1,{levels:d,loadLevel:h,minAutoLevel:f,maxAutoLevel:p}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);let g=(s=t.frag)==null?void 0:s.type,v=(g===Re.AUDIO&&c===Q.FRAG_PARSING_ERROR||t.sourceBufferName==="audio"&&(c===Q.BUFFER_ADD_CODEC_ERROR||c===Q.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:S})=>i.audioCodec!==S),m=t.sourceBufferName==="video"&&(c===Q.BUFFER_ADD_CODEC_ERROR||c===Q.BUFFER_APPEND_ERROR)&&d.some(({codecSet:S,audioCodec:b})=>i.codecSet!==S&&i.audioCodec===b),{type:y,groupId:E}=(o=t.context)!=null?o:{};for(let S=d.length;S--;){let b=(S+h)%d.length;if(b!==h&&b>=f&&b<=p&&d[b].loadError===0){var a,l;let w=d[b];if(c===Q.FRAG_GAP&&g===Re.MAIN&&t.frag){let x=d[b].details;if(x){let D=Xo(t.frag,x.fragments,t.frag.start);if(D!=null&&D.gap)continue}}else if(y===et.AUDIO_TRACK&&w.hasAudioGroup(E)||y===et.SUBTITLE_TRACK&&w.hasSubtitleGroup(E)||g===Re.AUDIO&&(a=i.audioGroups)!=null&&a.some(x=>w.hasAudioGroup(x))||g===Re.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(x=>w.hasSubtitleGroup(x))||v&&i.audioCodec===w.audioCodec||m&&i.codecSet===w.codecSet||!v&&i.codecSet!==w.codecSet)continue;u=b;break}}if(u>-1&&n.loadLevel!==u)return t.levelRetry=!0,this.playlistError=0,{action:mr.SendAlternateToPenaltyBox,flags:fn.None,nextAutoLevel:u}}return{action:mr.SendAlternateToPenaltyBox,flags:fn.MoveAllAlternatesMatchingHost}}onErrorOut(t,r){var n;switch((n=r.errorAction)==null?void 0:n.action){case mr.DoNothing:break;case mr.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(r),!r.errorAction.resolved&&r.details!==Q.FRAG_GAP?r.fatal=!0:/MediaSource readyState: ended/.test(r.error.message)&&(this.warn(`MediaSource ended after "${r.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(r.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(t){let r=this.hls,n=t.errorAction;if(!n)return;let{flags:i}=n,s=n.nextAutoLevel;switch(i){case fn.None:this.switchLevel(t,s);break;case fn.MoveAllAlternatesMatchingHDCP:{let l=this.getVariantLevelIndex(t.frag),c=r.levels[l],u=c?.attrs["HDCP-LEVEL"];if(n.hdcpLevel=u,u==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(u){r.maxHdcpLevel=xT[xT.indexOf(u)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${r.maxHdcpLevel}" or lower`);break}}case fn.MoveAllAlternatesMatchingKey:{let l=t.decryptdata;if(l){let c=this.hls.levels,u=c.length;for(let h=u;h--;)if(this.variantHasKey(c[h],l)){var o,a;this.log(`Banned key found in level ${h} (${c[h].bitrate}bps) or audio group "${(o=c[h].audioGroups)==null?void 0:o.join(",")}" (${(a=t.frag)==null?void 0:a.type} fragment) ${Fr(l.keyId||[])}`),c[h].fragmentError++,c[h].loadError++,this.log(`Removing level ${h} with key error (${t.error})`),this.hls.removeLevel(h)}let d=t.frag;if(this.hls.levels.length<u)n.resolved=!0;else if(d&&d.type!==Re.MAIN){let h=d.decryptdata;h&&!l.matches(h)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(t,s)}switchLevel(t,r){if(r!==void 0&&t.errorAction&&(this.warn(`switching to level ${r} after ${t.details}`),this.hls.nextAutoLevel=r,t.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,t.details===Q.BUFFER_ADD_CODEC_ERROR&&t.mimeType&&t.sourceBufferName!=="audiovideo")){let n=CT(t.mimeType),i=this.hls.levels;for(let s=i.length;s--;)i[s][`${t.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${s} for ${t.details} ("${n}" not supported)`),this.hls.removeLevel(s))}}};function Sl(e){let t={action:mr.DoNothing,flags:fn.None};return e&&(t.resolved=!0),t}var nr={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},LT=class{constructor(t){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=t,this._registerListeners()}_registerListeners(){let{hls:t}=this;t&&(t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.BUFFER_APPENDED,this.onBufferAppended,this),t.on(R.FRAG_BUFFERED,this.onFragBuffered,this),t.on(R.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){let{hls:t}=this;t&&(t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.BUFFER_APPENDED,this.onBufferAppended,this),t.off(R.FRAG_BUFFERED,this.onFragBuffered,this),t.off(R.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(t,r){let n=this.activePartLists[r];if(n)for(let i=n.length;i--;){let s=n[i];if(!s)break;if(s.start<=t&&t<=s.end&&s.loaded)return s}return this.getBufferedFrag(t,r)}getBufferedFrag(t,r){return this.getFragAtPos(t,r,!0)}getFragAtPos(t,r,n){let{fragments:i}=this,s=Object.keys(i);for(let o=s.length;o--;){let a=i[s[o]];if(a?.body.type===r&&(!n||a.buffered)){let l=a.body;if(l.start<=t&&t<=l.end)return l}}return null}detectEvictedFragments(t,r,n,i,s){this.timeRanges&&(this.timeRanges[t]=r);let o=i?.fragment.sn||-1;Object.keys(this.fragments).forEach(a=>{let l=this.fragments[a];if(!l||o>=l.body.sn)return;if(!l.buffered&&(!l.loaded||s)){l.body.type===n&&this.removeFragment(l.body);return}let c=l.range[t];if(c){if(c.time.length===0){this.removeFragment(l.body);return}c.time.some(u=>{let d=!this.isTimeBuffered(u.startPTS,u.endPTS,r);return d&&this.removeFragment(l.body),d})}})}detectPartialFragments(t){let r=this.timeRanges;if(!r||t.frag.sn==="initSegment")return;let n=t.frag,i=Za(n),s=this.fragments[i];if(!s||s.buffered&&n.gap)return;let o=!n.relurl;Object.keys(r).forEach(a=>{let l=n.elementaryStreams[a];if(!l)return;let c=r[a],u=o||l.partial===!0;s.range[a]=this.getBufferedTimes(n,t.part,u,c)}),s.loaded=null,Object.keys(s.range).length?(s.buffered=!0,(s.body.endList=n.endList||s.body.endList)&&(this.endListFragments[s.body.type]=s),Rf(s)||this.removeParts(n.sn-1,n.type)):this.removeFragment(s.body)}removeParts(t,r){let n=this.activePartLists[r];n&&(this.activePartLists[r]=QI(n,i=>i.fragment.sn>=t))}fragBuffered(t,r){let n=Za(t),i=this.fragments[n];!i&&r&&(i=this.fragments[n]={body:t,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},t.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(t,r,n,i){let s={time:[],partial:n},o=t.start,a=t.end,l=t.minEndPTS||a,c=t.maxStartPTS||o;for(let u=0;u<i.length;u++){let d=i.start(u)-this.bufferPadding,h=i.end(u)+this.bufferPadding;if(c>=d&&l<=h){s.time.push({startPTS:Math.max(o,i.start(u)),endPTS:Math.min(a,i.end(u))});break}else if(o<h&&a>d){let f=Math.max(o,i.start(u)),p=Math.min(a,i.end(u));p>f&&(s.partial=!0,s.time.push({startPTS:f,endPTS:p}))}else if(a<=d)break}return s}getPartialFragment(t){let r=null,n,i,s,o=0,{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(c=>{let u=l[c];u&&Rf(u)&&(i=u.body.start-a,s=u.body.end+a,t>=i&&t<=s&&(n=Math.min(t-i,s-t),o<=n&&(r=u.body,o=n)))}),r}isEndListAppended(t){let r=this.endListFragments[t];return r!==void 0&&(r.buffered||Rf(r))}getState(t){let r=Za(t),n=this.fragments[r];return n?n.buffered?Rf(n)?nr.PARTIAL:nr.OK:nr.APPENDING:nr.NOT_LOADED}isTimeBuffered(t,r,n){let i,s;for(let o=0;o<n.length;o++){if(i=n.start(o)-this.bufferPadding,s=n.end(o)+this.bufferPadding,t>=i&&r<=s)return!0;if(r<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(t,r){if(r.frag.sn==="initSegment"||r.frag.bitrateTest)return;let n=r.frag,i=r.part?null:r,s=Za(n);this.fragments[s]={body:n,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(t,r){let{frag:n,part:i,timeRanges:s,type:o}=r;if(n.sn==="initSegment")return;let a=n.type;if(i){let c=this.activePartLists[a];c||(this.activePartLists[a]=c=[]),c.push(i)}this.timeRanges=s;let l=s[o];this.detectEvictedFragments(o,l,a,i)}onFragBuffered(t,r){this.detectPartialFragments(r)}hasFragment(t){let r=Za(t);return!!this.fragments[r]}hasFragments(t){let{fragments:r}=this,n=Object.keys(r);if(!t)return n.length>0;for(let i=n.length;i--;){let s=r[n[i]];if(s?.body.type===t)return!0}return!1}hasParts(t){var r;return!!((r=this.activePartLists[t])!=null&&r.length)}removeFragmentsInRange(t,r,n,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{let a=this.fragments[o];if(!a)return;let l=a.body;l.type!==n||i&&!l.gap||l.start<r&&l.end>t&&(a.buffered||s)&&this.removeFragment(l)})}removeFragment(t){let r=Za(t);t.clearElementaryStreamInfo();let n=this.activePartLists[t.type];if(n){let i=t.sn;this.activePartLists[t.type]=QI(n,s=>s.fragment.sn!==i)}delete this.fragments[r],t.endList&&delete this.endListFragments[t.type]}removeAllFragments(){var t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;let r=(t=this.hls)==null||(t=t.latestLevelDetails)==null?void 0:t.partList;r&&r.forEach(n=>n.clearElementaryStreamInfo())}};function Rf(e){var t,r,n;return e.buffered&&!!(e.body.gap||(t=e.range.video)!=null&&t.partial||(r=e.range.audio)!=null&&r.partial||(n=e.range.audiovideo)!=null&&n.partial)}function Za(e){return`${e.type}_${e.level}_${e.sn}`}function QI(e,t){return e.filter(r=>{let n=t(r);return n||r.clearElementaryStreamInfo(),n})}var Ys={cbc:0,ctr:1},PT=class{constructor(t,r,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=t,this.aesIV=r,this.aesMode=n}decrypt(t,r){switch(this.aesMode){case Ys.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},r,t);case Ys.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},r,t);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}};function pae(e){let t=e.byteLength,r=t&&new DataView(e.buffer).getUint8(t-1);return r?e.slice(0,t-r):e}var DT=class{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(t){let r=new DataView(t),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=r.getUint32(i*4);return n}initTable(){let t=this.sBox,r=this.invSBox,n=this.subMix,i=n[0],s=n[1],o=n[2],a=n[3],l=this.invSubMix,c=l[0],u=l[1],d=l[2],h=l[3],f=new Uint32Array(256),p=0,g=0,v=0;for(v=0;v<256;v++)v<128?f[v]=v<<1:f[v]=v<<1^283;for(v=0;v<256;v++){let m=g^g<<1^g<<2^g<<3^g<<4;m=m>>>8^m&255^99,t[p]=m,r[m]=p;let y=f[p],E=f[y],S=f[E],b=f[m]*257^m*16843008;i[p]=b<<24|b>>>8,s[p]=b<<16|b>>>16,o[p]=b<<8|b>>>24,a[p]=b,b=S*16843009^E*65537^y*257^p*16843008,c[m]=b<<24|b>>>8,u[m]=b<<16|b>>>16,d[m]=b<<8|b>>>24,h[m]=b,p?(p=y^f[f[f[S^y]]],g^=f[f[g]]):p=g=1}}expandKey(t){let r=this.uint8ArrayToUint32Array_(t),n=!0,i=0;for(;i<r.length&&n;)n=r[i]===this.key[i],i++;if(n)return;this.key=r;let s=this.keySize=r.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);let o=this.ksRows=(s+6+1)*4,a,l,c=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),d=this.sBox,h=this.rcon,f=this.invSubMix,p=f[0],g=f[1],v=f[2],m=f[3],y,E;for(a=0;a<o;a++){if(a<s){y=c[a]=r[a];continue}E=y,a%s===0?(E=E<<8|E>>>24,E=d[E>>>24]<<24|d[E>>>16&255]<<16|d[E>>>8&255]<<8|d[E&255],E^=h[a/s|0]<<24):s>6&&a%s===4&&(E=d[E>>>24]<<24|d[E>>>16&255]<<16|d[E>>>8&255]<<8|d[E&255]),c[a]=y=(c[a-s]^E)>>>0}for(l=0;l<o;l++)a=o-l,l&3?E=c[a]:E=c[a-4],l<4||a<=4?u[l]=E:u[l]=p[d[E>>>24]]^g[d[E>>>16&255]]^v[d[E>>>8&255]]^m[d[E&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24}decrypt(t,r,n){let i=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],c=a[1],u=a[2],d=a[3],h=this.uint8ArrayToUint32Array_(n),f=h[0],p=h[1],g=h[2],v=h[3],m=new Int32Array(t),y=new Int32Array(m.length),E,S,b,w,x,D,N,C,P,U,G,K,B,V,W=this.networkToHostOrderSwap;for(;r<m.length;){for(P=W(m[r]),U=W(m[r+1]),G=W(m[r+2]),K=W(m[r+3]),x=P^s[0],D=K^s[1],N=G^s[2],C=U^s[3],B=4,V=1;V<i;V++)E=l[x>>>24]^c[D>>16&255]^u[N>>8&255]^d[C&255]^s[B],S=l[D>>>24]^c[N>>16&255]^u[C>>8&255]^d[x&255]^s[B+1],b=l[N>>>24]^c[C>>16&255]^u[x>>8&255]^d[D&255]^s[B+2],w=l[C>>>24]^c[x>>16&255]^u[D>>8&255]^d[N&255]^s[B+3],x=E,D=S,N=b,C=w,B=B+4;E=o[x>>>24]<<24^o[D>>16&255]<<16^o[N>>8&255]<<8^o[C&255]^s[B],S=o[D>>>24]<<24^o[N>>16&255]<<16^o[C>>8&255]<<8^o[x&255]^s[B+1],b=o[N>>>24]<<24^o[C>>16&255]<<16^o[x>>8&255]<<8^o[D&255]^s[B+2],w=o[C>>>24]<<24^o[x>>16&255]<<16^o[D>>8&255]<<8^o[N&255]^s[B+3],y[r]=W(E^f),y[r+1]=W(w^p),y[r+2]=W(b^g),y[r+3]=W(S^v),f=P,p=U,g=G,v=K,r=r+4}return y.buffer}},OT=class{constructor(t,r,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=t,this.key=r,this.aesMode=n}expandKey(){let t=gae(this.aesMode);return this.subtle.importKey("raw",this.key,{name:t},!1,["encrypt","decrypt"])}};function gae(e){switch(e){case Ys.cbc:return"AES-CBC";case Ys.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${e}`)}}var mae=16,Qu=class{constructor(t,{removePKCS7Padding:r=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=t.enableSoftwareAES,this.removePKCS7Padding=r,r)try{let n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){let{currentResult:t,remainderData:r}=this;if(!t||r)return this.reset(),null;let n=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?pae(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(t,r,n,i){return this.useSoftware?new Promise((s,o)=>{let a=ArrayBuffer.isView(t)?t:new Uint8Array(t);this.softwareDecrypt(a,r,n,i);let l=this.flush();l?s(l.buffer):o(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(t),r,n,i)}softwareDecrypt(t,r,n,i){let{currentIV:s,currentResult:o,remainderData:a}=this;if(i!==Ys.cbc||r.byteLength!==16)return ut.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),a&&(t=Pn(a,t),this.remainderData=null);let l=this.getValidChunk(t);if(!l.length)return null;s&&(n=s);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new DT),c.expandKey(r);let u=o;return this.currentResult=c.decrypt(l.buffer,0,n),this.currentIV=l.slice(-16).buffer,u||null}webCryptoDecrypt(t,r,n,i){if(this.key!==r||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(t,r,n,i));this.key=r,this.fastAesKey=new OT(this.subtle,r,i)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new PT(this.subtle,new Uint8Array(n),i).decrypt(t.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(ut.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(t,r,n,i)))}onWebCryptoError(t,r,n,i){let s=this.enableSoftwareAES;if(s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(t,r,n,i);let o=this.flush();if(o)return o.buffer}throw new Error("WebCrypto"+(s?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(t){let r=t,n=t.length-t.length%mae;return n!==t.length&&(r=t.slice(0,n),this.remainderData=t.slice(n)),r}logOnce(t){this.logEnabled&&(ut.log(`[decrypter]: ${t}`),this.logEnabled=!1)}},ZI=Math.pow(2,17),NT=class{constructor(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(t,r){let n=t.url;if(!n)return Promise.reject(new Wn({type:Oe.NETWORK_ERROR,details:Q.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();let i=this.config,s=i.fLoader,o=i.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),t.gap)if(t.tagList.some(p=>p[0]==="GAP")){l(e_(t));return}else t.gap=!1;let c=this.loader=s?new s(i):new o(i),u=JI(t);t.loader=c;let d=XI(i.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:t.sn==="initSegment"?1/0:ZI};t.stats=c.stats;let f={onSuccess:(p,g,v,m)=>{this.resetLoader(t,c);let y=p.data;v.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(y.slice(0,16)),y=y.slice(16)),a({frag:t,part:null,payload:y,networkDetails:m})},onError:(p,g,v,m)=>{this.resetLoader(t,c),l(new Wn({type:Oe.NETWORK_ERROR,details:Q.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:ct({url:n,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:v,stats:m}))},onAbort:(p,g,v)=>{this.resetLoader(t,c),l(new Wn({type:Oe.NETWORK_ERROR,details:Q.INTERNAL_ABORTED,fatal:!1,frag:t,error:new Error("Aborted"),networkDetails:v,stats:p}))},onTimeout:(p,g,v)=>{this.resetLoader(t,c),l(new Wn({type:Oe.NETWORK_ERROR,details:Q.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:v,stats:p}))}};r&&(f.onProgress=(p,g,v,m)=>r({frag:t,part:null,payload:v,networkDetails:m})),c.load(u,h,f)})}loadPart(t,r,n){this.abort();let i=this.config,s=i.fLoader,o=i.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),t.gap||r.gap){l(e_(t,r));return}let c=this.loader=s?new s(i):new o(i),u=JI(t,r);t.loader=c;let d=XI(i.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:ZI};r.stats=c.stats,c.load(u,h,{onSuccess:(f,p,g,v)=>{this.resetLoader(t,c),this.updateStatsFromPart(t,r);let m={frag:t,part:r,payload:f.data,networkDetails:v};n(m),a(m)},onError:(f,p,g,v)=>{this.resetLoader(t,c),l(new Wn({type:Oe.NETWORK_ERROR,details:Q.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:r,response:ct({url:u.url,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:g,stats:v}))},onAbort:(f,p,g)=>{t.stats.aborted=r.stats.aborted,this.resetLoader(t,c),l(new Wn({type:Oe.NETWORK_ERROR,details:Q.INTERNAL_ABORTED,fatal:!1,frag:t,part:r,error:new Error("Aborted"),networkDetails:g,stats:f}))},onTimeout:(f,p,g)=>{this.resetLoader(t,c),l(new Wn({type:Oe.NETWORK_ERROR,details:Q.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:r,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:g,stats:f}))}})})}updateStatsFromPart(t,r){let n=t.stats,i=r.stats,s=i.total;if(n.loaded+=i.loaded,s){let l=Math.round(t.duration/r.duration),c=Math.min(Math.round(n.loaded/s),l),u=(l-c)*Math.round(n.loaded/c);n.total=n.loaded+u}else n.total=Math.max(n.loaded,n.total);let o=n.loading,a=i.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(t,r){t.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()}};function JI(e,t=null){let r=t||e,n={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,s=r.byteRangeEndOffset;if(ke(i)&&ke(s)){var o;let a=i,l=s;if(e.sn==="initSegment"&&vae((o=e.decryptdata)==null?void 0:o.method)){let c=s-i;c%16&&(l=s+(16-c%16)),i!==0&&(n.resetIV=!0,a=i-16)}n.rangeStart=a,n.rangeEnd=l}return n}function e_(e,t){let r=new Error(`GAP ${e.gap?"tag":"attribute"} found`),n={type:Oe.MEDIA_ERROR,details:Q.FRAG_GAP,fatal:!1,frag:e,error:r,networkDetails:null};return t&&(n.part=t),(t||e).stats.aborted=!0,new Wn(n)}function vae(e){return e==="AES-128"||e==="AES-256"}var Wn=class extends Error{constructor(t){super(t.error.message),this.data=void 0,this.data=t}},Vp=class extends Jr{constructor(t,r){super(t,r),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(t){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,t),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}},Zu=class{constructor(t,r,n,i=0,s=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=If(),this.buffering={audio:If(),video:If(),audiovideo:If()},this.level=t,this.sn=r,this.id=n,this.size=i,this.part=s,this.partial=o}};function If(){return{start:0,executeStart:0,executeEnd:0,end:0}}var t_={length:0,start:()=>0,end:()=>0},Qe=class e{static isBuffered(t,r){if(t){let n=e.getBuffered(t);for(let i=n.length;i--;)if(r>=n.start(i)&&r<=n.end(i))return!0}return!1}static bufferedRanges(t){if(t){let r=e.getBuffered(t);return e.timeRangesToArray(r)}return[]}static timeRangesToArray(t){let r=[];for(let n=0;n<t.length;n++)r.push({start:t.start(n),end:t.end(n)});return r}static bufferInfo(t,r,n){if(t){let i=e.bufferedRanges(t);if(i.length)return e.bufferedInfo(i,r,n)}return{len:0,start:r,end:r,bufferedIndex:-1}}static bufferedInfo(t,r,n){r=Math.max(0,r),t.length>1&&t.sort((u,d)=>u.start-d.start||d.end-u.end);let i=-1,s=[];if(n)for(let u=0;u<t.length;u++){r>=t[u].start&&r<=t[u].end&&(i=u);let d=s.length;if(d){let h=s[d-1].end;t[u].start-h<n?t[u].end>h&&(s[d-1].end=t[u].end):s.push(t[u])}else s.push(t[u])}else s=t;let o=0,a,l=r,c=r;for(let u=0;u<s.length;u++){let d=s[u].start,h=s[u].end;if(i===-1&&r>=d&&r<=h&&(i=u),r+n>=d&&r<h)l=d,c=h,o=c-r;else if(r+n<d){a=d;break}}return{len:o,start:l||0,end:c||0,nextStart:a,buffered:t,bufferedIndex:i}}static getBuffered(t){try{return t.buffered||t_}catch(r){return ut.log("failed to get media.buffered",r),t_}}},_2=/\{\$([a-zA-Z0-9-_]+)\}/g;function r_(e){return _2.test(e)}function MT(e,t){if(e.variableList!==null||e.hasVariableRefs){let r=e.variableList;return t.replace(_2,n=>{let i=n.substring(2,n.length-1),s=r?.[i];return s===void 0?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):s})}return t}function n_(e,t,r){let n=e.variableList;n||(e.variableList=n={});let i,s;if("QUERYPARAM"in t){i=t.QUERYPARAM;try{let o=new self.URL(r).searchParams;if(o.has(i))s=o.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${r}"`)}catch(o){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else i=t.NAME,s=t.VALUE;i in n?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=s||""}function yae(e,t,r){let n=t.IMPORT;if(r&&n in r){let i=e.variableList;i||(e.variableList=i={}),i[n]=r[n]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}var Eae=/^(\d+)x(\d+)$/,i_=/(.+?)=(".*?"|.*?)(?:,|$)/g,Bt=class e{constructor(t,r){typeof t=="string"&&(t=e.parseAttrList(t,r)),gt(this,t)}get clientAttrs(){return Object.keys(this).filter(t=>t.substring(0,2)==="X-")}decimalInteger(t){let r=parseInt(this[t],10);return r>Number.MAX_SAFE_INTEGER?1/0:r}hexadecimalInteger(t){if(this[t]){let r=(this[t]||"0x").slice(2);r=(r.length&1?"0":"")+r;let n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;i++)n[i]=parseInt(r.slice(i*2,i*2+2),16);return n}return null}hexadecimalIntegerAsNumber(t){let r=parseInt(this[t],16);return r>Number.MAX_SAFE_INTEGER?1/0:r}decimalFloatingPoint(t){return parseFloat(this[t])}optionalFloat(t,r){let n=this[t];return n?parseFloat(n):r}enumeratedString(t){return this[t]}enumeratedStringList(t,r){let n=this[t];return(n?n.split(/[ ,]+/):[]).reduce((i,s)=>(i[s.toLowerCase()]=!0,i),r)}bool(t){return this[t]==="YES"}decimalResolution(t){let r=Eae.exec(this[t]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}}static parseAttrList(t,r){let n,i={};for(i_.lastIndex=0;(n=i_.exec(t))!==null;){let o=n[1].trim(),a=n[2],l=a.indexOf('"')===0&&a.lastIndexOf('"')===a.length-1,c=!1;if(l)a=a.slice(1,-1);else switch(o){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(r&&(l||c))a=MT(r,a);else if(!c&&!l)switch(o){case"CLOSED-CAPTIONS":if(a==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":ut.warn(`${t}: attribute ${o} is missing quotes`)}i[o]=a}return i}},Tae="com.apple.hls.interstitial";function Sae(e){return e!=="ID"&&e!=="CLASS"&&e!=="CUE"&&e!=="START-DATE"&&e!=="DURATION"&&e!=="END-DATE"&&e!=="END-ON-NEXT"}function bae(e){return e==="SCTE35-OUT"||e==="SCTE35-IN"||e==="SCTE35-CMD"}var Wp=class{constructor(t,r,n=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=r?.tagAnchor||null,this.tagOrder=(i=r?.tagOrder)!=null?i:n,r){let s=r.attr;for(let o in s)if(Object.prototype.hasOwnProperty.call(t,o)&&t[o]!==s[o]){ut.warn(`DATERANGE tag attribute: "${o}" does not match for tags with ID: "${t.ID}"`),this._badValueForSameId=o;break}t=gt(new Bt({}),s,t)}if(this.attr=t,r?(this._startDate=r._startDate,this._cue=r._cue,this._endDate=r._endDate,this._dateAtEnd=r._dateAtEnd):this._startDate=new Date(t["START-DATE"]),"END-DATE"in this.attr){let s=r?.endDate||new Date(this.attr["END-DATE"]);ke(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){let t=this._cue;return t===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):t}get startTime(){let{tagAnchor:t}=this;return t===null||t.programDateTime===null?(ut.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${t}`),NaN):t.start+(this.startDate.getTime()-t.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){let t=this._endDate||this._dateAtEnd;if(t)return t;let r=this.duration;return r!==null?this._dateAtEnd=new Date(this._startDate.getTime()+r*1e3):null}get duration(){if("DURATION"in this.attr){let t=this.attr.decimalFloatingPoint("DURATION");if(ke(t))return t}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Tae}get isValid(){return!!this.id&&!this._badValueForSameId&&ke(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}},wae=10,FT=class{constructor(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=t}reloaded(t){if(!t){this.advanced=!0,this.updated=!0;return}let r=this.lastPartSn-t.lastPartSn,n=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!n||!!r||!this.live,this.advanced=this.endSN>t.endSN||r>0||r===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(t.misses*.6):this.misses=t.misses+1}hasKey(t){return this.encryptedFragments.some(r=>{let n=r.decryptdata;return n||(r.setKeyFormat(t.keyFormat),n=r.decryptdata),!!n&&t.matches(n)})}get hasProgramDateTime(){return this.fragments.length?ke(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||wae}get drift(){let t=this.driftEndTime-this.driftStartTime;return t>0?(this.driftEnd-this.driftStart)*1e3/t:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){let t=this.partList;if(t){let r=this.lastPartIndex;if(r!==-1){for(let n=t.length;n--;)if(t[n].index>r)return t[n].index;return r}}return 0}get lastPartSn(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){let t=this.partEnd-this.fragmentStart;return this.age>Math.max(t,this.totalduration)+this.levelTargetDuration}return!1}};function qp(e,t){return e.length===t.length?!e.some((r,n)=>r!==t[n]):!1}function s_(e,t){return!e&&!t?!0:!e||!t?!1:qp(e,t)}function bl(e){return e==="AES-128"||e==="AES-256"||e==="AES-256-CTR"}function mb(e){switch(e){case"AES-128":case"AES-256":return Ys.cbc;case"AES-256-CTR":return Ys.ctr;default:throw new Error(`invalid full segment method ${e}`)}}function vb(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}function BT(e){return Uint8Array.from(unescape(encodeURIComponent(e)),t=>t.charCodeAt(0))}function Aae(e){let t=BT(e).subarray(0,16),r=new Uint8Array(16);return r.set(t,16-t.length),r}function L2(e){let t=function(r,n,i){let s=r[n];r[n]=r[i],r[i]=s};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}function P2(e){let t=e.split(":"),r=null;if(t[0]==="data"&&t.length===2){let n=t[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){let s=i[0]==="base64",o=i[1];s?(n.splice(-1,1),r=vb(o)):r=Aae(o)}}return r}var Kp=typeof self<"u"?self:void 0,Ut={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},vr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function np(e){switch(e){case vr.FAIRPLAY:return Ut.FAIRPLAY;case vr.PLAYREADY:return Ut.PLAYREADY;case vr.WIDEVINE:return Ut.WIDEVINE;case vr.CLEARKEY:return Ut.CLEARKEY}}function E0(e){switch(e){case Ut.FAIRPLAY:return vr.FAIRPLAY;case Ut.PLAYREADY:return vr.PLAYREADY;case Ut.WIDEVINE:return vr.WIDEVINE;case Ut.CLEARKEY:return vr.CLEARKEY}}function lu(e){let{drmSystems:t,widevineLicenseUrl:r}=e,n=t?[Ut.FAIRPLAY,Ut.WIDEVINE,Ut.PLAYREADY,Ut.CLEARKEY].filter(i=>!!t[i]):[];return!n[Ut.WIDEVINE]&&r&&n.push(Ut.WIDEVINE),n}var D2=(function(e){return Kp!=null&&(e=Kp.navigator)!=null&&e.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function kae(e,t,r,n){let i;switch(e){case Ut.FAIRPLAY:i=["cenc","sinf"];break;case Ut.WIDEVINE:case Ut.PLAYREADY:i=["cenc"];break;case Ut.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return Cae(i,t,r,n)}function Cae(e,t,r,n){return[{initDataTypes:e,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:t.map(i=>({contentType:`audio/mp4; codecs=${i}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:r.map(i=>({contentType:`video/mp4; codecs=${i}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function xae(e){var t;return!!e&&(e.sessionType==="persistent-license"||!!((t=e.sessionTypes)!=null&&t.some(r=>r==="persistent-license")))}function O2(e){let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),r=String.fromCharCode.apply(null,Array.from(t)),n=r.substring(r.indexOf("<"),r.length),i=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(i){let s=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(s){let o=vb(s).subarray(0,16);return L2(o),o}}return null}var _f={},Ju=class e{static clearKeyUriToKeyIdMap(){_f={}}static setKeyIdForUri(t,r){_f[t]=r}constructor(t,r,n,i=[1],s=null,o){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=r,this.keyFormat=n,this.keyFormatVersions=i,this.iv=s,this.encrypted=t?t!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!bl(t),o!=null&&o.startsWith("0x")&&(this.keyId=new Uint8Array(d2(o)))}matches(t){return t.uri===this.uri&&t.method===this.method&&t.encrypted===this.encrypted&&t.keyFormat===this.keyFormat&&qp(t.keyFormatVersions,this.keyFormatVersions)&&s_(t.iv,this.iv)&&s_(t.keyId,this.keyId)}isSupported(){if(this.method){if(bl(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case vr.FAIRPLAY:case vr.WIDEVINE:case vr.PLAYREADY:case vr.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(t,r){if(!this.encrypted||!this.uri)return null;if(bl(this.method)){let s=this.iv;return s||(typeof t!="number"&&(ut.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),t=0),s=Iae(t)),new e(this.method,this.uri,"identity",this.keyFormatVersions,s)}if(this.keyId){let s=_f[this.uri];if(s&&!qp(this.keyId,s)&&e.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}let n=P2(this.uri);if(n)switch(this.keyFormat){case vr.WIDEVINE:if(this.pssh=n,!this.keyId){let s=Hoe(n.buffer);if(s.length){var i;let o=s[0];this.keyId=(i=o.kids)!=null&&i.length?o.kids[0]:null}}this.keyId||(this.keyId=o_(r));break;case vr.PLAYREADY:{let s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Uoe(s,null,n),this.keyId=O2(n);break}default:{let s=n.subarray(0,16);if(s.length!==16){let o=new Uint8Array(16);o.set(s,16-s.length),s=o}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s;s=Rae(r),s||(s=o_(r),s||(s=_f[this.uri])),s&&(this.keyId=s,e.setKeyIdForUri(this.uri,s))}return this}};function Rae(e){let t=e?.[vr.WIDEVINE];return t?t.keyId:null}function o_(e){let t=e?.[vr.PLAYREADY];if(t){let r=P2(t.uri);if(r)return O2(r)}return null}function Iae(e){let t=new Uint8Array(16);for(let r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}var a_=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,l_=/#EXT-X-MEDIA:(.*)/g,_ae=/^#EXT(?:INF|-X-TARGETDURATION):/m,T0=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Lae=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Fo=class e{static findGroup(t,r){for(let n=0;n<t.length;n++){let i=t[n];if(i.id===r)return i}}static resolve(t,r){return db.buildAbsoluteURL(r,t,{alwaysNormalize:!0})}static isMediaPlaylist(t){return _ae.test(t)}static parseMasterPlaylist(t,r){let n=r_(t),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},s=[];if(a_.lastIndex=0,!t.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let o;for(;(o=a_.exec(t))!=null;)if(o[1]){var a;let c=new Bt(o[1],i),u=MT(i,o[2]),d={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:e.resolve(u,r)},h=c.decimalResolution("RESOLUTION");h&&(d.width=h.width,d.height=h.height),d_(c.CODECS,d);let f=c["SUPPLEMENTAL-CODECS"];f&&(d.supplemental={},d_(f,d.supplemental)),(a=d.unknownCodecs)!=null&&a.length||s.push(d),i.levels.push(d)}else if(o[3]){let c=o[3],u=o[4];switch(c){case"SESSION-DATA":{let d=new Bt(u,i),h=d["DATA-ID"];h&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[h]=d);break}case"SESSION-KEY":{let d=c_(u,r,i);d.encrypted&&d.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(d)):ut.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{let d=new Bt(u,i);n_(i,d,r)}break}case"CONTENT-STEERING":{let d=new Bt(u,i);i.contentSteering={uri:e.resolve(d["SERVER-URI"],r),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=u_(u);break}}}let l=s.length>0&&s.length<i.levels.length;return i.levels=l?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(t,r,n){let i,s={},o=n.levels,a={AUDIO:o.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:o.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]},l=0;for(l_.lastIndex=0;(i=l_.exec(t))!==null;){let c=new Bt(i[1],n),u=c.TYPE;if(u){let d=a[u],h=s[u]||[];s[u]=h;let f=c.LANGUAGE,p=c["ASSOC-LANGUAGE"],g=c.CHANNELS,v=c.CHARACTERISTICS,m=c["INSTREAM-ID"],y={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||f||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:f,url:c.URI?e.resolve(c.URI,r):""};if(p&&(y.assocLang=p),g&&(y.channels=g),v&&(y.characteristics=v),m&&(y.instreamId=m),d!=null&&d.length){let E=e.findGroup(d,y.groupId)||d[0];h_(y,E,"audioCodec"),h_(y,E,"textCodec")}h.push(y)}}return s}static parseLevelPlaylist(t,r,n,i,s,o){var a;let l={url:r},c=new FT(r),u=c.fragments,d=[],h=null,f=0,p=0,g=0,v=0,m=0,y=null,E=new wu(i,l),S,b,w,x=-1,D=!1,N=null,C;if(T0.lastIndex=0,c.m3u8=t,c.hasVariableRefs=r_(t),((a=T0.exec(t))==null?void 0:a[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(S=T0.exec(t))!==null;){D&&(D=!1,E=new wu(i,l),E.playlistOffset=g,E.setStart(g),E.sn=f,E.cc=v,m&&(E.bitrate=m),E.level=n,h&&(E.initSegment=h,h.rawProgramDateTime&&(E.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null),N&&(E.setByteRange(N),N=null)));let K=S[1];if(K){E.duration=parseFloat(K);let B=(" "+S[2]).slice(1);E.title=B||null,E.tagList.push(B?["INF",K,B]:["INF",K])}else if(S[3]){if(ke(E.duration)){E.playlistOffset=g,E.setStart(g),w&&p_(E,w,c),E.sn=f,E.level=n,E.cc=v,u.push(E);let B=(" "+S[3]).slice(1);E.relurl=MT(c,B),UT(E,y,d),y=E,g+=E.duration,f++,p=0,D=!0}}else{if(S=S[0].match(Lae),!S){ut.warn("No matches on slow regex match for level playlist!");continue}for(b=1;b<S.length&&S[b]===void 0;b++);let B=(" "+S[b]).slice(1),V=(" "+S[b+1]).slice(1),W=S[b+2]?(" "+S[b+2]).slice(1):null;switch(B){case"BYTERANGE":y?E.setByteRange(V,y):E.setByteRange(V);break;case"PROGRAM-DATE-TIME":E.rawProgramDateTime=V,E.tagList.push(["PROGRAM-DATE-TIME",V]),x===-1&&(x=u.length);break;case"PLAYLIST-TYPE":c.type&&Gi(c,B,S),c.type=V.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?Gi(c,B,S):u.length>0&&g_(c,B,S),f=c.startSN=parseInt(V);break;case"SKIP":{c.skippedSegments&&Gi(c,B,S);let X=new Bt(V,c),Y=X.decimalInteger("SKIPPED-SEGMENTS");if(ke(Y)){c.skippedSegments+=Y;for(let ie=Y;ie--;)u.push(null);f+=Y}let O=X.enumeratedString("RECENTLY-REMOVED-DATERANGES");O&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(O.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&Gi(c,B,S),c.targetduration=Math.max(parseInt(V),1);break;case"VERSION":c.version!==null&&Gi(c,B,S),c.version=parseInt(V);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||Gi(c,B,S),c.live=!1;break;case"#":(V||W)&&E.tagList.push(W?[V,W]:[V]);break;case"DISCONTINUITY":v++,E.tagList.push(["DIS"]);break;case"GAP":E.gap=!0,E.tagList.push([B]);break;case"BITRATE":E.tagList.push([B,V]),m=parseInt(V)*1e3,ke(m)?E.bitrate=m:m=0;break;case"DATERANGE":{let X=new Bt(V,c),Y=new Wp(X,c.dateRanges[X.ID],c.dateRangeTagCount);c.dateRangeTagCount++,Y.isValid||c.skippedSegments?c.dateRanges[Y.id]=Y:ut.warn(`Ignoring invalid DATERANGE tag: "${V}"`),E.tagList.push(["EXT-X-DATERANGE",V]);break}case"DEFINE":{{let X=new Bt(V,c);"IMPORT"in X?yae(c,X,o):n_(c,X,r)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?Gi(c,B,S):u.length>0&&g_(c,B,S),c.startCC=v=parseInt(V);break;case"KEY":{let X=c_(V,r,c);if(X.isSupported()){if(X.method==="NONE"){w=void 0;break}w||(w={});let Y=w[X.keyFormat];Y!=null&&Y.matches(X)||(Y&&(w=gt({},w)),w[X.keyFormat]=X)}else ut.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${V}"`);break}case"START":c.startTimeOffset=u_(V);break;case"MAP":{let X=new Bt(V,c);if(E.duration){let Y=new wu(i,l);f_(Y,X,n,w),h=Y,E.initSegment=h,h.rawProgramDateTime&&!E.rawProgramDateTime&&(E.rawProgramDateTime=h.rawProgramDateTime)}else{let Y=E.byteRangeEndOffset;if(Y){let O=E.byteRangeStartOffset;N=`${Y-O}@${O}`}else N=null;f_(E,X,n,w),h=E,D=!0}h.cc=v;break}case"SERVER-CONTROL":{C&&Gi(c,B,S),C=new Bt(V),c.canBlockReload=C.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=C.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&C.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=C.optionalFloat("PART-HOLD-BACK",0),c.holdBack=C.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&Gi(c,B,S);let X=new Bt(V);c.partTarget=X.decimalFloatingPoint("PART-TARGET");break}case"PART":{let X=c.partList;X||(X=c.partList=[]);let Y=p>0?X[X.length-1]:void 0,O=p++,ie=new Bt(V,c),le=new kT(ie,E,l,O,Y);X.push(le),E.duration+=le.duration;break}case"PRELOAD-HINT":{let X=new Bt(V,c);c.preloadHint=X;break}case"RENDITION-REPORT":{let X=new Bt(V,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(X);break}default:ut.warn(`line parsed but not handled: ${S}`);break}}}y&&!y.relurl?(u.pop(),g-=y.duration,c.partList&&(c.fragmentHint=y)):c.partList&&(UT(E,y,d),E.cc=v,c.fragmentHint=E,w&&p_(E,w,c)),c.targetduration||(c.playlistParsingError=new Error("Missing Target Duration"));let P=u.length,U=u[0],G=u[P-1];if(g+=c.skippedSegments*c.targetduration,g>0&&P&&G){c.averagetargetduration=g/P;let K=G.sn;c.endSN=K!=="initSegment"?K:0,c.live||(G.endList=!0),x>0&&(Dae(u,x),U&&d.unshift(U))}return c.fragmentHint&&(g+=c.fragmentHint.duration),c.totalduration=g,d.length&&c.dateRangeTagCount&&U&&N2(d,c),c.endCC=v,c}};function N2(e,t){let r=e.length;if(!r)if(t.hasProgramDateTime){let a=t.fragments[t.fragments.length-1];e.push(a),r++}else return;let n=e[r-1],i=t.live?1/0:t.totalduration,s=Object.keys(t.dateRanges);for(let a=s.length;a--;){let l=t.dateRanges[s[a]],c=l.startDate.getTime();l.tagAnchor=n.ref;for(let u=r;u--;){var o;if(((o=e[u])==null?void 0:o.sn)<t.startSN)break;let d=Pae(t,c,e,u,i);if(d!==-1){l.tagAnchor=t.fragments[d].ref;break}}}}function Pae(e,t,r,n,i){let s=r[n];if(s){let a=s.programDateTime;if(t>=a||n===0){var o;let l=(((o=r[n+1])==null?void 0:o.start)||i)-s.start;if(t<=a+l*1e3){let c=r[n].sn-e.startSN;if(c<0)return-1;let u=e.fragments;if(u.length>r.length){let d=(r[n+1]||u[u.length-1]).sn-e.startSN;for(let h=d;h>c;h--){let f=u[h].programDateTime;if(t>=f&&t<f+u[h].duration*1e3)return h}}return c}}}return-1}function c_(e,t,r){var n,i;let s=new Bt(e,r),o=(n=s.METHOD)!=null?n:"",a=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,u=(i=s.KEYFORMAT)!=null?i:"identity";a&&s.IV&&!l&&ut.error(`Invalid IV: ${s.IV}`);let d=a?Fo.resolve(a,t):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new Ju(o,d,u,h,l,s.KEYID)}function u_(e){let t=new Bt(e).decimalFloatingPoint("TIME-OFFSET");return ke(t)?t:null}function d_(e,t){let r=(e||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{let i=r.filter(s=>fb(s,n));i.length&&(t[`${n}Codec`]=i.map(s=>s.split("/")[0]).join(","),r=r.filter(s=>i.indexOf(s)===-1))}),t.unknownCodecs=r}function h_(e,t,r){let n=t[r];n&&(e[r]=n)}function Dae(e,t){let r=e[t];for(let n=t;n--;){let i=e[n];if(!i)return;i.programDateTime=r.programDateTime-i.duration*1e3,r=i}}function UT(e,t,r){e.rawProgramDateTime?r.push(e):t!=null&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function f_(e,t,r,n){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=r,e.sn="initSegment",n&&(e.levelkeys=n),e.initSegment=null}function p_(e,t,r){e.levelkeys=t;let{encryptedFragments:n}=r;(!n.length||n[n.length-1].levelkeys!==t)&&Object.keys(t).some(i=>t[i].isCommonEncryption)&&n.push(e)}function Gi(e,t,r){e.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${r[0]})`)}function g_(e,t,r){e.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${r[0]})`)}function S0(e,t){let r=t.startPTS;if(ke(r)){let n=0,i;t.sn>e.sn?(n=r-e.start,i=e):(n=e.start-r,i=t),i.duration!==n&&i.setDuration(n)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration):t.setStart(Math.max(e.start-t.duration,0))}function M2(e,t,r,n,i,s,o){n-r<=0&&(o.warn("Fragment should have a positive duration",t),n=r+t.duration,s=i+t.duration);let a=r,l=n,c=t.startPTS,u=t.endPTS;if(ke(c)){let v=Math.abs(c-r);e&&v>e.totalduration?o.warn(`media timestamps and playlist times differ by ${v}s for level ${t.level} ${e.url}`):ke(t.deltaPTS)?t.deltaPTS=Math.max(v,t.deltaPTS):t.deltaPTS=v,a=Math.max(r,c),r=Math.min(r,c),i=t.startDTS!==void 0?Math.min(i,t.startDTS):i,l=Math.min(n,u),n=Math.max(n,u),s=t.endDTS!==void 0?Math.max(s,t.endDTS):s}let d=r-t.start;t.start!==0&&t.setStart(r),t.setDuration(n-t.start),t.startPTS=r,t.maxStartPTS=a,t.startDTS=i,t.endPTS=n,t.minEndPTS=l,t.endDTS=s;let h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;let f,p=h-e.startSN,g=e.fragments;for(g[p]=t,f=p;f>0;f--)S0(g[f],g[f-1]);for(f=p;f<g.length-1;f++)S0(g[f],g[f+1]);return e.fragmentHint&&S0(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function Oae(e,t,r){if(e===t)return;let n=null,i=e.fragments;for(let u=i.length-1;u>=0;u--){let d=i[u].initSegment;if(d){n=d;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;let s;Fae(e,t,(u,d,h,f)=>{if((!t.startCC||t.skippedSegments)&&d.cc!==u.cc){let p=u.cc-d.cc;for(let g=h;g<f.length;g++)f[g].cc+=p;t.endCC=f[f.length-1].cc}ke(u.startPTS)&&ke(u.endPTS)&&(d.setStart(d.startPTS=u.startPTS),d.startDTS=u.startDTS,d.maxStartPTS=u.maxStartPTS,d.endPTS=u.endPTS,d.endDTS=u.endDTS,d.minEndPTS=u.minEndPTS,d.setDuration(u.endPTS-u.startPTS),d.duration&&(s=d),t.PTSKnown=t.alignedSliding=!0),u.hasStreams&&(d.elementaryStreams=u.elementaryStreams),d.loader=u.loader,u.hasStats&&(d.stats=u.stats),u.initSegment&&(d.initSegment=u.initSegment,n=u.initSegment)});let o=t.fragments,a=t.fragmentHint?o.concat(t.fragmentHint):o;if(n&&a.forEach(u=>{var d;u&&(!u.initSegment||u.initSegment.relurl===((d=n)==null?void 0:d.relurl))&&(u.initSegment=n)}),t.skippedSegments){if(t.deltaUpdateFailed=o.some(u=>!u),t.deltaUpdateFailed){r.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let u=t.skippedSegments;u--;)o.shift();t.startSN=o[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=Nae(e.dateRanges,t,r));let u=e.fragments.filter(d=>d.rawProgramDateTime);if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(let d=1;d<a.length;d++)a[d].programDateTime===null&&UT(a[d],a[d-1],u);N2(u,t)}t.endCC=o[o.length-1].cc}if(!t.startCC){var l;let u=U2(e,t.startSN-1);t.startCC=(l=u?.cc)!=null?l:o[0].cc}Mae(e.partList,t.partList,(u,d)=>{d.elementaryStreams=u.elementaryStreams,d.stats=u.stats}),s?M2(t,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,r):F2(e,t),o.length&&(t.totalduration=t.edge-o[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;let c=t.advancedDateTime;if(t.advanced&&c){let u=t.edge;t.driftStart||(t.driftStartTime=c,t.driftStart=u),t.driftEndTime=c,t.driftEnd=u}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;t.requestScheduled===-1&&(t.requestScheduled=e.requestScheduled)}function Nae(e,t,r){let{dateRanges:n,recentlyRemovedDateranges:i}=t,s=gt({},e);i&&i.forEach(a=>{delete s[a]});let o=Object.keys(s).length;return o?(Object.keys(n).forEach(a=>{let l=s[a],c=new Wp(n[a].attr,l);c.isValid?(s[a]=c,l||(c.tagOrder+=o)):r.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${vt(n[a].attr)}"`)}),s):n}function Mae(e,t,r){if(e&&t){let n=0;for(let i=0,s=e.length;i<=s;i++){let o=e[i],a=t[i+n];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?r(o,a):n--}}}function Fae(e,t,r){let n=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,s=(e.fragmentHint?1:0)+(n?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,o=t.startSN-e.startSN,a=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=i;c<=s;c++){let u=l[o+c],d=a[c];if(n&&!d&&u&&(d=t.fragments[c]=u),u&&d){r(u,d,c,a);let h=u.relurl,f=d.relurl;if(h&&Bae(h,f)){t.playlistParsingError=m_(`media sequence mismatch ${d.sn}:`,e,t,u,d);return}else if(u.cc!==d.cc){t.playlistParsingError=m_(`discontinuity sequence mismatch (${u.cc}!=${d.cc})`,e,t,u,d);return}}}}function m_(e,t,r,n,i){return new Error(`${e} ${i.url}
Playlist starting @${t.startSN}
${t.m3u8}

Playlist starting @${r.startSN}
${r.m3u8}`)}function F2(e,t,r=!0){let n=t.startSN+t.skippedSegments-e.startSN,i=e.fragments,s=n>=0,o=0;if(s&&n<i.length)o=i[n].start;else if(s&&t.startSN===e.endSN+1)o=e.fragmentEnd;else if(s&&r)o=e.fragmentStart+n*t.levelTargetDuration;else if(!t.skippedSegments&&t.fragmentStart===0)o=e.fragmentStart;else return;HT(t,o)}function HT(e,t){if(t){let r=e.fragments;for(let n=e.skippedSegments;n<r.length;n++)r[n].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function B2(e,t=1/0){let r=1e3*e.targetduration;if(e.updated){let n=e.fragments;if(n.length&&r*4>t){let i=n[n.length-1].duration*1e3;i<r&&(r=i)}}else r/=2;return Math.round(r)}function U2(e,t,r){if(!e)return null;let n=e.fragments[t-e.startSN];return n||(n=e.fragmentHint,n&&n.sn===t)?n:t<e.startSN&&r&&r.sn===t?r:null}function v_(e,t,r){return e?H2(e.partList,t,r):null}function H2(e,t,r){if(e)for(let n=e.length;n--;){let i=e[n];if(i.index===r&&i.fragment.sn===t)return i}return null}function z2(e){e.forEach((t,r)=>{var n;(n=t.details)==null||n.fragments.forEach(i=>{i.level=r,i.initSegment&&(i.initSegment.level=r)})})}function Bae(e,t){return e!==t&&t?y_(e)!==y_(t):!1}function y_(e){return e.replace(/\?[^?]*$/,"")}function Au(e,t){for(let n=0,i=e.length;n<i;n++){var r;if(((r=e[n])==null?void 0:r.cc)===t)return e[n]}return null}function Uae(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}function E_(e,t){let r=e.start+t;e.startPTS=r,e.setStart(r),e.endPTS=r+e.duration}function $2(e,t){let r=t.fragments;for(let n=0,i=r.length;n<i;n++)E_(r[n],e);t.fragmentHint&&E_(t.fragmentHint,e),t.alignedSliding=!0}function Hae(e,t){e&&(G2(t,e),t.alignedSliding||Yp(t,e),!t.alignedSliding&&!t.skippedSegments&&F2(e,t,!1))}function G2(e,t){if(!Uae(t,e))return;let r=Math.min(t.endCC,e.endCC),n=Au(t.fragments,r),i=Au(e.fragments,r);if(!n||!i)return;ut.log(`Aligning playlist at start of dicontinuity sequence ${r}`);let s=n.start-i.start;$2(s,e)}function Yp(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;let r=e.fragments,n=t.fragments;if(!r.length||!n.length)return;let i,s,o=Math.min(t.endCC,e.endCC);t.startCC<o&&e.startCC<o&&(i=Au(n,o),s=Au(r,o)),(!i||!s)&&(i=n[Math.floor(n.length/2)],s=Au(r,i.cc)||r[Math.floor(r.length/2)]);let a=i.programDateTime,l=s.programDateTime;if(!a||!l)return;let c=(l-a)/1e3-(s.start-i.start);$2(c,e)}function Br(e,t,r){Yr(e,t,r),e.addEventListener(t,r)}function Yr(e,t,r){e.removeEventListener(t,r)}var zae={toString:function(e){let t="",r=e.length;for(let n=0;n<r;n++)t+=`[${e.start(n).toFixed(3)}-${e.end(n).toFixed(3)}]`;return t}},ae={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},ed=class extends Vp{constructor(t,r,n,i,s){super(i,t.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ae.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{let{config:o,fragCurrent:a,media:l,mediaBuffer:c,state:u}=this,d=l?l.currentTime:0,h=Qe.bufferInfo(c||l,d,o.maxBufferHole),f=!h.len;if(this.log(`Media seeking to ${ke(d)?d.toFixed(3):d}, state: ${u}, ${f?"out of":"in"} buffer`),this.state===ae.ENDED)this.resetLoadingState();else if(a){let p=o.maxFragLookUpTolerance,g=a.start-p,v=a.start+a.duration+p;if(f||v<h.start||g>h.end){let m=d>v;(d<g||m)&&(m&&a.loader&&(this.log(`Cancelling fragment load for seek (sn: ${a.sn})`),a.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);let p=this.lastCurrentTime;if(d>p&&(this.lastCurrentTime=d),!this.loadingParts){let g=Math.max(h.end,d),v=this.shouldLoadParts(this.getLevelDetails(),g);v&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${g.toFixed(2)}`),this.loadingParts=v)}}this.hls.hasEnoughToStart||(this.log(`Setting ${f?"startPosition":"nextLoadPosition"} to ${d} for seek without enough to start`),this.nextLoadPosition=d,f&&(this.startPosition=d)),f&&this.state===ae.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=s,this.hls=t,this.fragmentLoader=new NT(t.config),this.keyLoader=n,this.fragmentTracker=r,this.config=t.config,this.decrypter=new Qu(t.config)}registerListeners(){let{hls:t}=this;t.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(R.ERROR,this.onError,this)}unregisterListeners(){let{hls:t}=this;t.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(R.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(t){}stopLoad(){if(this.state===ae.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);let t=this.fragCurrent;t!=null&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ae.STOPPED}get startPositionValue(){let{nextLoadPosition:t,startPosition:r}=this;return r===-1&&t?t:r}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(t,r){if(r.live||!this.media)return!1;let n=t.end||0,i=this.config.timelineOffset||0;if(n<=i)return!1;let s=t.buffered;this.config.maxBufferHole&&s&&s.length>1&&(t=Qe.bufferedInfo(s,t.start,0));let o=t.nextStart;if(o&&o>i&&o<r.edge||this.media.currentTime<t.start)return!1;let a=r.partList;if(a!=null&&a.length){let c=a[a.length-1];return Qe.isBuffered(this.media,c.start+c.duration/2)}let l=r.fragments[r.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(l)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){let t=this.config.timelineOffset;if(t){var r;return((r=this.getLevelDetails())==null?void 0:r.appliedTimelineOffset)||t}return 0}onMediaAttached(t,r){let n=this.media=this.mediaBuffer=r.media;Br(n,"seeking",this.onMediaSeeking),Br(n,"ended",this.onMediaEnded);let i=this.config;this.levels&&i.autoStartLoad&&this.state===ae.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(t,r){let n=!!r.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Yr(i,"seeking",this.onMediaSeeking),Yr(i,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(t,r){}onManifestLoaded(t,r){this.startTimeOffset=r.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=ae.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(t,r,n){this.startFragRequested=!0,this._loadFragForPlayback(t,r,n)}_loadFragForPlayback(t,r,n){let i=s=>{let o=s.frag;if(this.fragContextChanged(o)){this.warn(`${o.type} sn: ${o.sn}${s.part?" part: "+s.part.index:""} of ${this.fragInfo(o,!1,s.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(o);return}o.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(t,r,n,i).then(s=>{if(!s)return;let o=this.state,a=s.frag;if(this.fragContextChanged(a)){(o===ae.FRAG_LOADING||!this.fragCurrent&&o===ae.PARSING)&&(this.fragmentTracker.removeFragment(a),this.state=ae.IDLE);return}"payload"in s&&(this.log(`Loaded ${a.type} sn: ${a.sn} of ${this.playlistLabel()} ${a.level}`),this.hls.trigger(R.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===ae.STOPPED||this.state===ae.ERROR||(this.warn(`Frag error: ${s?.message||s}`),this.resetFragmentLoading(t))})}clearTrackerIfNeeded(t){var r;let{fragmentTracker:n}=this;if(n.getState(t)===nr.APPENDING){let i=t.type,s=this.getFwdBufferInfo(this.mediaBuffer,i),o=Math.max(t.duration,s?s.len:this.config.maxBufferLength),a=this.backtrackFragment;((a?t.sn-a.sn:0)===1||this.reduceMaxBufferLength(o,t.duration))&&n.removeFragment(t)}else((r=this.mediaBuffer)==null?void 0:r.buffered.length)===0?n.removeAllFragments():n.hasParts(t.type)&&(n.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type}),n.getState(t)===nr.PARTIAL&&n.removeFragment(t))}checkLiveUpdate(t){if(t.updated&&!t.live){let r=t.fragments[t.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:r,part:null,stats:r.stats,id:r.type})}t.fragments[0]||(t.deltaUpdateFailed=!0)}waitForLive(t){let r=t.details;return r?.live&&r.type!=="EVENT"&&(this.levelLastLoaded!==t||r.expired)}flushMainBuffer(t,r,n=null){if(!(t-r))return;let i={startOffset:t,endOffset:r,type:n};this.hls.trigger(R.BUFFER_FLUSHING,i)}_loadInitSegment(t,r){this._doFragLoad(t,r).then(n=>{let i=n?.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{let{hls:i}=this,{frag:s,payload:o}=n,a=s.decryptdata;if(o&&o.byteLength>0&&a!=null&&a.key&&a.iv&&bl(a.method)){let l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(o),a.key.buffer,a.iv.buffer,mb(a.method)).catch(c=>{throw i.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:s}),c}).then(c=>{let u=self.performance.now();return i.trigger(R.FRAG_DECRYPTED,{frag:s,payload:c,stats:{tstart:l,tdecrypt:u}}),n.payload=c,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===ae.STOPPED||this.state===ae.ERROR||(this.warn(n),this.resetFragmentLoading(t))})}completeInitSegmentLoad(t){let{levels:r}=this;if(!r)throw new Error("init load aborted, missing levels");let n=t.frag.stats;this.state!==ae.STOPPED&&(this.state=ae.IDLE),t.frag.data=new Uint8Array(t.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(t,r){var n,i;let s=t.tracks;if(s&&!r.encrypted&&((n=s.audio)!=null&&n.encrypted||(i=s.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){let o=this.media,a=new Error(`Encrypted track with no key in ${this.fragInfo(r)} (media ${o?"attached mediaKeys: "+o.mediaKeys:"detached"})`);return this.warn(a.message),!o||o.mediaKeys?!1:(this.hls.trigger(R.ERROR,{type:Oe.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_NO_KEYS,fatal:!1,error:a,frag:r}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(t){let{fragCurrent:r}=this;return!t||!r||t.sn!==r.sn||t.level!==r.level}fragBufferedComplete(t,r){let n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${t.type} sn: ${t.sn}${r?" part: "+r.index:""} of ${this.fragInfo(t,!1,r)} > buffer:${n?zae.toString(Qe.getBuffered(n)):"(detached)"})`),Zt(t)){var i;if(t.type!==Re.SUBTITLE){let o=t.elementaryStreams;if(!Object.keys(o).some(a=>!!o[a])){this.state=ae.IDLE;return}}let s=(i=this.levels)==null?void 0:i[t.level];s!=null&&s.fragmentError&&(this.log(`Resetting level fragment error count of ${s.fragmentError} on frag buffered`),s.fragmentError=0)}this.state=ae.IDLE}_handleFragmentLoadComplete(t){let{transmuxer:r}=this;if(!r)return;let{frag:n,part:i,partsLoaded:s}=t,o=!s||s.length===0||s.some(l=>!l),a=new Zu(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!o);r.flush(a)}_handleFragmentLoadProgress(t){}_doFragLoad(t,r,n=null,i){var s;this.fragCurrent=t;let o=r.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(t.encrypted&&!((s=t.decryptdata)!=null&&s.key)){if(this.log(`Loading key for ${t.sn} of [${o.startSN}-${o.endSN}], ${this.playlistLabel()} ${t.level}`),this.state=ae.KEY_LOADING,this.fragCurrent=t,a=this.keyLoader.load(t).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(R.KEY_LOADED,h),this.state===ae.KEY_LOADING&&(this.state=ae.IDLE),h}),this.hls.trigger(R.KEY_LOADING,{frag:t}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else t.encrypted||(a=this.keyLoader.loadClear(t,o.encryptedFragments,this.startFragRequested),a&&this.log("[eme] blocking frag load until media-keys acquired"));let l=this.fragPrevious;if(Zt(t)&&(!l||t.sn!==l.sn)){let h=this.shouldLoadParts(r.details,t.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} loading sn ${l?.sn}->${t.sn}`),this.loadingParts=h)}if(n=Math.max(t.start,n||0),this.loadingParts&&Zt(t)){let h=o.partList;if(h&&i){n>o.fragmentEnd&&o.fragmentHint&&(t=o.fragmentHint);let f=this.getNextPart(h,t,n);if(f>-1){let p=h[f];t=this.fragCurrent=p.fragment,this.log(`Loading ${t.type} sn: ${t.sn} part: ${p.index} (${f}/${h.length-1}) of ${this.fragInfo(t,!1,p)}) cc: ${t.cc} [${o.startSN}-${o.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=p.start+p.duration,this.state=ae.FRAG_LOADING;let g;return a?g=a.then(v=>!v||this.fragContextChanged(v.frag)?null:this.doFragPartsLoad(t,p,r,i)).catch(v=>this.handleFragLoadError(v)):g=this.doFragPartsLoad(t,p,r,i).catch(v=>this.handleFragLoadError(v)),this.hls.trigger(R.FRAG_LOADING,{frag:t,part:p,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):g}else if(!t.url||this.loadedEndOfParts(h,n))return Promise.resolve(null)}}if(Zt(t)&&this.loadingParts){var c;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${t.sn} loaded parts: ${(c=o.partList)==null?void 0:c.filter(h=>h.loaded).map(h=>`[${h.start}-${h.end}]`)}`),this.loadingParts=!1}else if(!t.url)return Promise.resolve(null);this.log(`Loading ${t.type} sn: ${t.sn} of ${this.fragInfo(t,!1)}) cc: ${t.cc} ${"["+o.startSN+"-"+o.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),ke(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=ae.FRAG_LOADING;let u=this.config.progressive,d;return u&&a?d=a.then(h=>!h||this.fragContextChanged(h.frag)?null:this.fragmentLoader.load(t,i)).catch(h=>this.handleFragLoadError(h)):d=Promise.all([this.fragmentLoader.load(t,u?i:void 0),a]).then(([h])=>(!u&&i&&i(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(R.FRAG_LOADING,{frag:t,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(t,r,n,i){return new Promise((s,o)=>{var a;let l=[],c=(a=n.details)==null?void 0:a.partList,u=d=>{this.fragmentLoader.loadPart(t,d,i).then(h=>{l[d.index]=h;let f=h.part;this.hls.trigger(R.FRAG_LOADED,h);let p=v_(n.details,t.sn,d.index+1)||H2(c,t.sn,d.index+1);if(p)u(p);else return s({frag:t,part:f,partsLoaded:l})}).catch(o)};u(r)})}handleFragLoadError(t){if("data"in t){let r=t.data;r.frag&&r.details===Q.INTERNAL_ABORTED?this.handleFragLoadAborted(r.frag,r.part):r.frag&&r.type===Oe.KEY_SYSTEM_ERROR?(r.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(r.frag)):this.hls.trigger(R.ERROR,r)}else this.hls.trigger(R.ERROR,{type:Oe.OTHER_ERROR,details:Q.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0});return null}_handleTransmuxerFlush(t){let r=this.getCurrentContext(t);if(!r||this.state!==ae.PARSING){!this.fragCurrent&&this.state!==ae.STOPPED&&this.state!==ae.ERROR&&(this.state=ae.IDLE);return}let{frag:n,part:i,level:s}=r,o=self.performance.now();n.stats.parsing.end=o,i&&(i.stats.parsing.end=o);let a=this.getLevelDetails(),l=a&&n.sn>a.endSN||this.shouldLoadParts(a,n.end);l!==this.loadingParts&&(this.log(`LL-Part loading ${l?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=l),this.updateLevelTiming(n,i,s,t.partial)}shouldLoadParts(t,r){if(this.config.lowLatencyMode){if(!t)return this.loadingParts;if(t.partList){var n;let s=t.partList[0];if(s.fragment.type===Re.SUBTITLE)return!1;let o=s.end+(((n=t.fragmentHint)==null?void 0:n.duration)||0);if(r>=o){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>s.start-s.fragment.duration)return!0}}}return!1}getCurrentContext(t){let{levels:r,fragCurrent:n}=this,{level:i,sn:s,part:o}=t;if(!(r!=null&&r[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;let a=r[i],l=a.details,c=o>-1?v_(l,s,o):null,u=c?c.fragment:U2(l,s,n);return u?(n&&n!==u&&(u.stats=n.stats),{frag:u,part:c,level:a}):null}bufferFragmentData(t,r,n,i,s){if(this.state!==ae.PARSING)return;let{data1:o,data2:a}=t,l=o;if(a&&(l=Pn(o,a)),!l.length)return;let c=this.initPTS[r.cc],u=c?-c.baseTime/c.timescale:void 0,d={type:t.type,frag:r,part:n,chunkMeta:i,offset:u,parent:r.type,data:l};if(this.hls.trigger(R.BUFFER_APPENDING,d),t.dropped&&t.independent&&!n){if(s)return;this.flushBufferGap(r)}}flushBufferGap(t){let r=this.media;if(!r)return;if(!Qe.isBuffered(r,r.currentTime)){this.flushMainBuffer(0,t.start);return}let n=r.currentTime,i=Qe.bufferInfo(r,n,0),s=t.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),a=Math.max(Math.min(t.start-o,i.end-o),n+o);t.start-a>o&&this.flushMainBuffer(a,t.start)}getFwdBufferInfo(t,r){var n;let i=this.getLoadPosition();if(!ke(i))return null;let s=this.lastCurrentTime>i||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(t,i,r,s)}getFwdBufferInfoAtPos(t,r,n,i){let s=Qe.bufferInfo(t,r,i);if(s.len===0&&s.nextStart!==void 0){let o=this.fragmentTracker.getBufferedFrag(r,n);if(o&&(s.nextStart<=o.end||o.gap)){let a=Math.max(Math.min(s.nextStart,o.end)-r,i);return Qe.bufferInfo(t,r,a)}}return s}getMaxBufferLength(t){let{config:r}=this,n;return t?n=Math.max(8*r.maxBufferSize/t,r.maxBufferLength):n=r.maxBufferLength,Math.min(n,r.maxMaxBufferLength)}reduceMaxBufferLength(t,r){let n=this.config,i=Math.max(Math.min(t-r,n.maxBufferLength),r),s=Math.max(t-r*3,n.maxMaxBufferLength/2,i);return s>=i?(n.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(t,r=Re.MAIN){let n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(t,r):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(t,r){let n=r.fragments,i=n.length;if(!i)return null;let{config:s}=this,o=n[0].start,a=s.lowLatencyMode&&!!r.partList,l=null;if(r.live){let d=s.initialLiveManifestSize;if(i<d)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${d})`),null;if(!r.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||t<o){var c;a&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(r);let h=this.hls.startPosition,f=this.hls.liveSyncPosition,p=l?(h!==-1&&h>=o?h:f)||l.start:t;this.log(`Setting startPosition to ${p} to match start frag at live edge. mainStart: ${h} liveSyncPosition: ${f} frag.start: ${(c=l)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=p}}else t<=o&&(l=n[0]);if(!l){let d=this.loadingParts?r.partEnd:r.fragmentEnd;l=this.getFragmentAtPosition(t,d,r)}let u=this.filterReplacedPrimary(l,r);if(!u&&l){let d=l.sn-r.startSN;u=this.filterReplacedPrimary(n[d+1]||null,r)}return this.mapToInitFragWhenRequired(u)}isLoopLoading(t,r){let n=this.fragmentTracker.getState(t);return(n===nr.OK||n===nr.PARTIAL&&!!t.gap)&&this.nextLoadPosition>r}getNextFragmentLoopLoading(t,r,n,i,s){let o=null;if(t.gap&&(o=this.getNextFragment(this.nextLoadPosition,r),o&&!o.gap&&n.nextStart)){let a=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i,0);if(a!==null&&n.len+a.len>=s){let l=o.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,o}get primaryPrefetch(){if(T_(this.config)){var t;if(!((t=this.hls.interstitialsManager)==null||(t=t.playingItem)==null)&&t.event)return!0}return!1}filterReplacedPrimary(t,r){if(!t)return t;if(T_(this.config)&&t.type!==Re.SUBTITLE){let n=this.hls.interstitialsManager,i=n?.bufferingItem;if(i){let o=i.event;if(o){if(o.appendInPlace||Math.abs(t.start-i.start)>1||i.start===0)return null}else if(t.end<=i.start&&r?.live===!1||t.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||t.start-i.end>1))return null}let s=n?.playerQueue;if(s)for(let o=s.length;o--;){let a=s[o].interstitial;if(a.appendInPlace&&t.start>=a.startTime&&t.end<=a.resumeTime)return null}}return t}mapToInitFragWhenRequired(t){return t!=null&&t.initSegment&&!t.initSegment.data&&!this.bitrateTest?t.initSegment:t}getNextPart(t,r,n){let i=-1,s=!1,o=!0;for(let a=0,l=t.length;a<l;a++){let c=t[a];if(o=o&&!c.independent,i>-1&&n<c.start)break;let u=c.loaded;u?i=-1:(s||(c.independent||o)&&c.fragment===r)&&(c.fragment!==r&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${c.start}`),i=a),s=u}return i}loadedEndOfParts(t,r){let n;for(let i=t.length;i--;){if(n=t[i],!n.loaded)return!1;if(r>n.start)return!0}return!1}getInitialLiveFragment(t){let r=t.fragments,n=this.fragPrevious,i=null;if(n){if(t.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=uae(r,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){let s=n.sn+1;if(s>=t.startSN&&s<=t.endSN){let o=r[s-t.startSN];n.cc===o.cc&&(i=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=x2(t,n.cc,n.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{let s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?t.fragmentEnd:t.edge,t))}return i}getFragmentAtPosition(t,r,n){let{config:i}=this,{fragPrevious:s}=this,{fragments:o,endSN:a}=n,{fragmentHint:l}=n,{maxFragLookUpTolerance:c}=i,u=n.partList,d=!!(this.loadingParts&&u!=null&&u.length&&l);d&&!this.bitrateTest&&u[u.length-1].fragment.sn===l.sn&&(o=o.concat(l),a=l.sn);let h;if(t<r){var f;let p=t<this.lastCurrentTime||t>r-c||(f=this.media)!=null&&f.paused||!this.startFragRequested?0:c;h=Xo(s,o,t,p)}else h=o[o.length-1];if(h){let p=h.sn-n.startSN,g=this.fragmentTracker.getState(h);if((g===nr.OK||g===nr.PARTIAL&&h.gap)&&(s=h),s&&h.sn===s.sn&&(!d||u[0].fragment.sn>h.sn||!n.live)&&h.level===s.level){let v=o[p+1];h.sn<a&&this.fragmentTracker.getState(v)!==nr.OK?h=v:h=null}}return h}alignPlaylists(t,r,n){let i=t.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;let s=t.fragmentStart,o=!r,a=t.alignedSliding&&ke(s);if(o||!a&&!s){Hae(n,t);let l=t.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${r?r.startSN:"na"}->${t.startSN} fragments: ${i}`),l}return s}waitForCdnTuneIn(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,t.partTarget*3)}setStartPosition(t,r){let n=this.startPosition;n<r&&(n=-1);let i=this.timelineOffset;if(n===-1){let s=this.startTimeOffset!==null,o=s?this.startTimeOffset:t.startTimeOffset;o!==null&&ke(o)?(n=r+o,o<0&&(n+=t.edge),n=Math.min(Math.max(r,n),r+t.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${o} found in ${s?"multivariant":"media"} playlist`),this.startPosition=n):t.live?(n=this.hls.liveSyncPosition||r,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+i}this.nextLoadPosition=n+i}getLoadPosition(){var t;let{media:r}=this,n=0;return(t=this.hls)!=null&&t.hasEnoughToStart&&r?n=r.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(t,r){this.transmuxer&&t.type===this.playlistType&&Zt(t)&&t.stats.aborted&&(this.log(`Fragment ${t.sn}${r?" part "+r.index:""} of ${this.playlistLabel()} ${t.level} was aborted`),this.resetFragmentLoading(t))}resetFragmentLoading(t){(!this.fragCurrent||!this.fragContextChanged(t)&&this.state!==ae.FRAG_LOADING_WAITING_RETRY)&&(this.state=ae.IDLE)}onFragmentOrKeyLoadError(t,r){var n;if(r.chunkMeta&&!r.frag){let m=this.getCurrentContext(r.chunkMeta);m&&(r.frag=m.frag)}let i=r.frag;if(!i||i.type!==t||!this.levels)return;if(this.fragContextChanged(i)){var s;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}let o=r.details===Q.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(i,!0);let a=r.errorAction;if(!a){this.state=ae.ERROR;return}let{action:l,flags:c,retryCount:u=0,retryConfig:d}=a,h=!!d,f=h&&l===mr.RetryRequest,p=h&&!a.resolved&&c===fn.MoveAllAlternatesMatchingHost,g=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!f&&p&&Zt(i)&&!i.endList&&g&&!I2(r))this.resetFragmentErrors(t),this.treatAsGap(i),a.resolved=!0;else if((f||p)&&u<d.maxNumRetry){var v;let m=IT((v=r.response)==null?void 0:v.code),y=gb(d,u);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+y,this.state=ae.FRAG_LOADING_WAITING_RETRY,a.resolved=!0,m){this.log("Waiting for connection (offline)"),this.retryDate=1/0,r.reason="offline";return}this.warn(`Fragment ${i.sn} of ${t} ${i.level} errored with ${r.details}, retrying loading ${u+1}/${d.maxNumRetry} in ${y}ms`)}else if(d)if(this.resetFragmentErrors(t),u<d.maxNumRetry)!o&&l!==mr.RemoveAlternatePermanently&&(a.resolved=!0);else{this.warn(`${r.details} reached or exceeded max retry (${u})`);return}else l===mr.SendAlternateToPenaltyBox?this.state=ae.WAITING_LEVEL:this.state=ae.ERROR;this.tickImmediate()}checkRetryDate(){let t=self.performance.now(),r=this.retryDate,n=r===1/0;(!r||t>=r||n&&!IT(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=ae.IDLE)}reduceLengthAndFlushBuffer(t){if(this.state===ae.PARSING||this.state===ae.PARSED){let r=t.frag,n=t.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),s=i&&i.len>.5;s&&this.reduceMaxBufferLength(i.len,r?.duration||10);let o=!s;return o&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),r&&(this.fragmentTracker.removeFragment(r),this.nextLoadPosition=r.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(t){t===Re.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==ae.STOPPED&&(this.state=ae.IDLE)}afterBufferFlushed(t,r,n){if(!t)return;let i=Qe.getBuffered(t);this.fragmentTracker.detectEvictedFragments(r,i,n),this.state===ae.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==ae.STOPPED&&(this.state=ae.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;let t=this.levelLastLoaded,r=t?t.details:null;r!=null&&r.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(r,r.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(t){this.log(`Loading context changed while buffering sn ${t.sn} of ${this.playlistLabel()} ${t.level===-1?"<removed>":t.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(t=0){this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)}updateLevelTiming(t,r,n,i){let s=n.details;if(!s){this.warn("level.details undefined");return}if(!Object.keys(t.elementaryStreams).reduce((a,l)=>{let c=t.elementaryStreams[l];if(c){let u=c.endPTS-c.startPTS;if(u<=0)return this.warn(`Could not parse fragment ${t.sn} ${l} duration reliably (${u})`),a||!1;let d=i?0:M2(s,t,c.startPTS,c.endPTS,c.startDTS,c.endDTS,this);return this.hls.trigger(R.LEVEL_PTS_UPDATED,{details:s,level:n,drift:d,type:l,frag:t,start:c.startPTS,end:c.endPTS}),!0}return a},!1)){var o;if(n.fragmentError===0&&this.treatAsGap(t,n),((o=this.transmuxer)==null?void 0:o.error)===null){let a=new Error(`Found no media in fragment ${t.sn} of ${this.playlistLabel()} ${t.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(a.message),this.hls.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.FRAG_PARSING_ERROR,fatal:!1,error:a,frag:t,reason:`Found no media in msn ${t.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=ae.PARSED,this.log(`Parsed ${t.type} sn: ${t.sn}${r?" part: "+r.index:""} of ${this.fragInfo(t,!1,r)})`),this.hls.trigger(R.FRAG_PARSED,{frag:t,part:r})}playlistLabel(){return this.playlistType===Re.MAIN?"level":"track"}fragInfo(t,r=!0,n){var i,s;return`${this.playlistLabel()} ${t.level} (${n?"part":"frag"}:[${((i=r&&!n?t.startPTS:(n||t).start)!=null?i:NaN).toFixed(3)}-${((s=r&&!n?t.endPTS:(n||t).end)!=null?s:NaN).toFixed(3)}]${n&&t.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(t,r){r&&r.fragmentError++,t.gap=!0,this.fragmentTracker.removeFragment(t),this.fragmentTracker.fragBuffered(t,!0)}resetTransmuxer(){var t;(t=this.transmuxer)==null||t.reset()}recoverWorkerError(t){t.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(t){let r=this._state;r!==t&&(this._state=t,this.log(`${r}->${t}`))}get state(){return this._state}};function T_(e){return!!e.interstitialsController&&e.enableInterstitialPlayback!==!1}var Xp=class{constructor(){this.chunks=[],this.dataLength=0}push(t){this.chunks.push(t),this.dataLength+=t.length}flush(){let{chunks:t,dataLength:r}=this,n;if(t.length)t.length===1?n=t[0]:n=$ae(t,r);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}};function $ae(e,t){let r=new Uint8Array(t),n=0;for(let i=0;i<e.length;i++){let s=e[i];r.set(s,n),n+=s.length}return r}var S_={exports:{}},b_;function Gae(){return b_||(b_=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),p=r?r+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)t.call(c,u)&&l.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=r?r+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,h=u.length,f=new Array(h);d<h;d++)f[d]=u[d].fn;return f},a.prototype.listenerCount=function(l){var c=r?r+l:l,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(l,c,u,d,h,f){var p=r?r+l:l;if(!this._events[p])return!1;var g=this._events[p],v=arguments.length,m,y;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,u),!0;case 4:return g.fn.call(g.context,c,u,d),!0;case 5:return g.fn.call(g.context,c,u,d,h),!0;case 6:return g.fn.call(g.context,c,u,d,h,f),!0}for(y=1,m=new Array(v-1);y<v;y++)m[y-1]=arguments[y];g.fn.apply(g.context,m)}else{var E=g.length,S;for(y=0;y<E;y++)switch(g[y].once&&this.removeListener(l,g[y].fn,void 0,!0),v){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,c);break;case 3:g[y].fn.call(g[y].context,c,u);break;case 4:g[y].fn.call(g[y].context,c,u,d);break;default:if(!m)for(S=1,m=new Array(v-1);S<v;S++)m[S-1]=arguments[S];g[y].fn.apply(g[y].context,m)}}return!0},a.prototype.on=function(l,c,u){return s(this,l,c,u,!1)},a.prototype.once=function(l,c,u){return s(this,l,c,u,!0)},a.prototype.removeListener=function(l,c,u,d){var h=r?r+l:l;if(!this._events[h])return this;if(!c)return o(this,h),this;var f=this._events[h];if(f.fn)f.fn===c&&(!d||f.once)&&(!u||f.context===u)&&o(this,h);else{for(var p=0,g=[],v=f.length;p<v;p++)(f[p].fn!==c||d&&!f[p].once||u&&f[p].context!==u)&&g.push(f[p]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=r?r+l:l,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(S_)),S_.exports}var jae=Gae(),yb=Aoe(jae),td="1.6.13",Ml={};function Vae(){return typeof __HLS_WORKER_BUNDLE__=="function"}function Wae(){let e=Ml[td];if(e)return e.clientCount++,e;let t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),r=self.URL.createObjectURL(t),n={worker:new self.Worker(r),objectURL:r,clientCount:1};return Ml[td]=n,n}function qae(e){let t=Ml[e];if(t)return t.clientCount++,t;let r=new self.URL(e,self.location.href).href,n={worker:new self.Worker(r),scriptURL:r,clientCount:1};return Ml[e]=n,n}function Kae(e){let t=Ml[e||td];if(t&&t.clientCount--===1){let{worker:r,objectURL:n}=t;delete Ml[e||td],n&&self.URL.revokeObjectURL(n),r.terminate()}}function j2(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Eb(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Kg(e,t){let r=0;return r=(e[t]&127)<<21,r|=(e[t+1]&127)<<14,r|=(e[t+2]&127)<<7,r|=e[t+3]&127,r}function rd(e,t){let r=t,n=0;for(;Eb(e,t);){n+=10;let i=Kg(e,t+6);n+=i,j2(e,t+10)&&(n+=10),t+=n}if(n>0)return e.subarray(r,r+n)}function Yae(e,t,r,n){let i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=t[r+2],o=s>>2&15;if(o>12){let f=new Error(`invalid ADTS sampling index:${o}`);e.emit(R.ERROR,R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});return}let a=(s>>6&3)+1,l=t[r+3]>>6&3|(s&1)<<2,c="mp4a.40."+a,u=i[o],d=o;(a===5||a===29)&&(d-=3);let h=[a<<3|(d&14)>>1,(d&1)<<7|l<<3];return ut.log(`manifest codec:${n}, parsed codec:${c}, channels:${l}, rate:${u} (ADTS object type:${a} sampling index:${o})`),{config:h,samplerate:u,channelCount:l,codec:c,parsedCodec:c,manifestCodec:n}}function V2(e,t){return e[t]===255&&(e[t+1]&246)===240}function W2(e,t){return e[t+1]&1?7:9}function Tb(e,t){return(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5}function Xae(e,t){return t+5<e.length}function Qp(e,t){return t+1<e.length&&V2(e,t)}function Qae(e,t){return Xae(e,t)&&V2(e,t)&&Tb(e,t)<=e.length-t}function Zae(e,t){if(Qp(e,t)){let r=W2(e,t);if(t+r>=e.length)return!1;let n=Tb(e,t);if(n<=r)return!1;let i=t+n;return i===e.length||Qp(e,i)}return!1}function q2(e,t,r,n,i){if(!e.samplerate){let s=Yae(t,r,n,i);if(!s)return;gt(e,s)}}function K2(e){return 1024*9e4/e}function Jae(e,t){let r=W2(e,t);if(t+r<=e.length){let n=Tb(e,t)-r;if(n>0)return{headerLength:r,frameLength:n}}}function Y2(e,t,r,n,i){let s=K2(e.samplerate),o=n+i*s,a=Jae(t,r),l;if(a){let{frameLength:u,headerLength:d}=a,h=d+u,f=Math.max(0,r+h-t.length);f?(l=new Uint8Array(h-d),l.set(t.subarray(r+d,t.length),0)):l=t.subarray(r+d,r+h);let p={unit:l,pts:o};return f||e.samples.push(p),{sample:p,length:h,missing:f}}let c=t.length-r;return l=new Uint8Array(c),l.set(t.subarray(r,t.length),0),{sample:{unit:l,pts:o},length:c,missing:-1}}function ele(e,t){return Eb(e,t)&&Kg(e,t+6)+10<=e.length-t}function tle(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function b0(e,t=0,r=1/0){return rle(e,t,r,Uint8Array)}function rle(e,t,r,n){let i=nle(e),s=1;"BYTES_PER_ELEMENT"in n&&(s=n.BYTES_PER_ELEMENT);let o=ile(e)?e.byteOffset:0,a=(o+e.byteLength)/s,l=(o+t)/s,c=Math.floor(Math.max(0,Math.min(l,a))),u=Math.floor(Math.min(c+Math.max(r,0),a));return new n(i,c,u-c)}function nle(e){return e instanceof ArrayBuffer?e:e.buffer}function ile(e){return e&&e.buffer instanceof ArrayBuffer&&e.byteLength!==void 0&&e.byteOffset!==void 0}function sle(e){let t={key:e.type,description:"",data:"",mimeType:null,pictureType:null},r=3;if(e.size<2)return;if(e.data[0]!==r){console.log("Ignore frame with unrecognized character encoding");return}let n=e.data.subarray(1).indexOf(0);if(n===-1)return;let i=yn(b0(e.data,1,n)),s=e.data[2+n],o=e.data.subarray(3+n).indexOf(0);if(o===-1)return;let a=yn(b0(e.data,3+n,o)),l;return i==="-->"?l=yn(b0(e.data,4+n+o)):l=tle(e.data.subarray(4+n+o)),t.mimeType=i,t.pictureType=s,t.description=a,t.data=l,t}function ole(e){if(e.size<2)return;let t=yn(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}function ale(e){if(e.size<2)return;if(e.type==="TXXX"){let r=1,n=yn(e.data.subarray(r),!0);r+=n.length+1;let i=yn(e.data.subarray(r));return{key:e.type,info:n,data:i}}let t=yn(e.data.subarray(1));return{key:e.type,info:"",data:t}}function lle(e){if(e.type==="WXXX"){if(e.size<2)return;let r=1,n=yn(e.data.subarray(r),!0);r+=n.length+1;let i=yn(e.data.subarray(r));return{key:e.type,info:n,data:i}}let t=yn(e.data);return{key:e.type,info:"",data:t}}function cle(e){return e.type==="PRIV"?ole(e):e.type[0]==="W"?lle(e):e.type==="APIC"?sle(e):ale(e)}function ule(e){let t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=Kg(e,4),n=10;return{type:t,size:r,data:e.subarray(n,n+r)}}var Lf=10,dle=10;function X2(e){let t=0,r=[];for(;Eb(e,t);){let n=Kg(e,t+6);e[t+5]>>6&1&&(t+=Lf),t+=Lf;let i=t+n;for(;t+dle<i;){let s=ule(e.subarray(t)),o=cle(s);o&&r.push(o),t+=s.size+Lf}j2(e,t)&&(t+=Lf)}return r}function Q2(e){return e&&e.key==="PRIV"&&e.info==="com.apple.streaming.transportStreamTimestamp"}function hle(e){if(e.data.byteLength===8){let t=new Uint8Array(e.data),r=t[3]&1,n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=4772185884e-2),Math.round(n)}}function Sb(e){let t=X2(e);for(let r=0;r<t.length;r++){let n=t[r];if(Q2(n))return hle(n)}}var gn=(function(e){return e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3",e.misbklv="urn:misb:KLV:bin:1910.1",e})({});function fi(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}var nd=class{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(t,r,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(t){this.initPTS=t,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(t,r){return!1}appendFrame(t,r,n){}demux(t,r){this.cachedData&&(t=Pn(this.cachedData,t),this.cachedData=null);let n=rd(t,0),i=n?n.length:0,s,o=this._audioTrack,a=this._id3Track,l=n?Sb(n):void 0,c=t.length;for((this.basePTS===null||this.frameIndex===0&&ke(l))&&(this.basePTS=fle(l,r,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:gn.audioId3,duration:Number.POSITIVE_INFINITY});i<c;){if(this.canParse(t,i)){let u=this.appendFrame(o,t,i);u?(this.frameIndex++,this.lastPTS=u.sample.pts,i+=u.length,s=i):i=c}else ele(t,i)?(n=rd(t,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:gn.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,s=i):i++;if(i===c&&s!==c){let u=t.slice(s);this.cachedData?this.cachedData=Pn(this.cachedData,u):this.cachedData=u}}return{audioTrack:o,videoTrack:fi(),id3Track:a,textTrack:fi()}}demuxSampleAes(t,r,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(t){let r=this.cachedData;return r&&(this.cachedData=null,this.demux(r,0)),{audioTrack:this._audioTrack,videoTrack:fi(),id3Track:this._id3Track,textTrack:fi()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}},fle=(e,t,r)=>{if(ke(e))return e*90;let n=r?r.baseTime*9e4/r.timescale:0;return t*9e4+n},Pf=null,ple=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],gle=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],mle=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],vle=[0,1,1,4];function Z2(e,t,r,n,i){if(r+24>t.length)return;let s=J2(t,r);if(s&&r+s.frameLength<=t.length){let o=s.samplesPerFrame*9e4/s.sampleRate,a=n+i*o,l={unit:t.subarray(r,r+s.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=s.channelCount,e.samplerate=s.sampleRate,e.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function J2(e,t){let r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,s=e[t+2]>>2&3;if(r!==1&&i!==0&&i!==15&&s!==3){let o=e[t+2]>>1&1,a=e[t+3]>>6,l=r===3?3-n:n===3?3:4,c=ple[l*14+i-1]*1e3,u=gle[(r===3?0:r===2?1:2)*3+s],d=a===3?1:2,h=mle[r][n],f=vle[n],p=h*8*f,g=Math.floor(h*c/u+o)*f;if(Pf===null){let v=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Pf=v?parseInt(v[1]):0}return Pf&&Pf<=87&&n===2&&c>=224e3&&a===0&&(e[t+3]=e[t+3]|128),{sampleRate:u,channelCount:d,frameLength:g,samplesPerFrame:p}}}function bb(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function eB(e,t){return t+1<e.length&&bb(e,t)}function yle(e,t){return bb(e,t)&&4<=e.length-t}function tB(e,t){if(t+1<e.length&&bb(e,t)){let r=J2(e,t),n=4;r!=null&&r.frameLength&&(n=r.frameLength);let i=t+n;return i===e.length||eB(e,i)}return!1}var zT=class extends nd{constructor(t,r){super(),this.observer=void 0,this.config=void 0,this.observer=t,this.config=r}resetInitSegment(t,r,n,i){super.resetInitSegment(t,r,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}static probe(t,r){if(!t)return!1;let n=rd(t,0),i=n?.length||0;if(tB(t,i))return!1;for(let s=t.length;i<s;i++)if(Zae(t,i))return r.log("ADTS sync word found !"),!0;return!1}canParse(t,r){return Qae(t,r)}appendFrame(t,r,n){q2(t,this.observer,r,n,t.manifestCodec);let i=Y2(t,r,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}},rB=(e,t)=>{let r=0,n=5;t+=n;let i=new Uint32Array(1),s=new Uint32Array(1),o=new Uint8Array(1);for(;n>0;){o[0]=e[t];let a=Math.min(n,8),l=8-a;s[0]=4278190080>>>24+l<<l,i[0]=(o[0]&s[0])>>l,r=r?r<<a|i[0]:i[0],t+=1,n-=a}return r},$T=class extends nd{constructor(t){super(),this.observer=void 0,this.observer=t}resetInitSegment(t,r,n,i){super.resetInitSegment(t,r,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}canParse(t,r){return r+64<t.length}appendFrame(t,r,n){let i=nB(t,r,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:t.samples[t.samples.length-1],length:i,missing:0}}static probe(t){if(!t)return!1;let r=rd(t,0);if(!r)return!1;let n=r.length;return t[n]===11&&t[n+1]===119&&Sb(r)!==void 0&&rB(t,n)<16}};function nB(e,t,r,n,i){if(r+8>t.length||t[r]!==11||t[r+1]!==119)return-1;let s=t[r+4]>>6;if(s>=3)return-1;let o=[48e3,44100,32e3][s],a=t[r+4]&63,l=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][a*3+s]*2;if(r+l>t.length)return-1;let c=t[r+6]>>5,u=0;c===2?u+=2:(c&1&&c!==1&&(u+=2),c&4&&(u+=2));let d=(t[r+6]<<8|t[r+7])>>12-u&1,h=[2,1,2,3,3,4,4,5][c]+d,f=t[r+5]>>3,p=t[r+5]&7,g=new Uint8Array([s<<6|f<<1|p>>2,(p&3)<<6|c<<3|d<<2|a>>4,a<<4&224]),v=1536/o*9e4,m=n+i*v,y=t.subarray(r,r+l);return e.config=g,e.channelCount=h,e.samplerate=o,e.samples.push({unit:y,pts:m}),l}var GT=class extends nd{resetInitSegment(t,r,n,i){super.resetInitSegment(t,r,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}}static probe(t){if(!t)return!1;let r=rd(t,0),n=r?.length||0;if(r&&t[n]===11&&t[n+1]===119&&Sb(r)!==void 0&&rB(t,n)<=16)return!1;for(let i=t.length;n<i;n++)if(tB(t,n))return ut.log("MPEG Audio sync word found !"),!0;return!1}canParse(t,r){return yle(t,r)}appendFrame(t,r,n){if(this.basePTS!==null)return Z2(t,r,n,this.basePTS,this.frameIndex)}},Ele=/\/emsg[-/]ID3/i,jT=class{constructor(t,r){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=r}resetTimeStamp(){}resetInitSegment(t,r,n,i){let s=this.videoTrack=fi("video",1),o=this.audioTrack=fi("audio",1),a=this.txtTrack=fi("text",1);if(this.id3Track=fi("id3",1),this.timeOffset=0,!(t!=null&&t.byteLength))return;let l=m2(t);if(l.video){let{id:c,timescale:u,codec:d,supplemental:h}=l.video;s.id=c,s.timescale=a.timescale=u,s.codec=d,s.supplemental=h}if(l.audio){let{id:c,timescale:u,codec:d}=l.audio;o.id=c,o.timescale=u,o.codec=d}a.id=f2.text,s.sampleDuration=0,s.duration=o.duration=i}resetContiguity(){this.remainderData=null}static probe(t){return Roe(t)}demux(t,r){this.timeOffset=r;let n=t,i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Pn(this.remainderData,t));let a=Noe(n);this.remainderData=a.remainder,i.samples=a.valid||new Uint8Array}else i.samples=n;let o=this.extractID3Track(i,r);return s.samples=HI(r,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){let t=this.timeOffset,r=this.videoTrack,n=this.txtTrack;r.samples=this.remainderData||new Uint8Array,this.remainderData=null;let i=this.extractID3Track(r,this.timeOffset);return n.samples=HI(t,r),{videoTrack:r,audioTrack:fi(),id3Track:i,textTrack:fi()}}extractID3Track(t,r){let n=this.id3Track;if(t.samples.length){let i=Ze(t.samples,["emsg"]);i&&i.forEach(s=>{let o=Foe(s);if(Ele.test(o.schemeIdUri)){let a=w_(o,r),l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);let c=o.payload;n.samples.push({data:c,len:c.byteLength,dts:a,pts:a,type:gn.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&o.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){let a=w_(o,r);n.samples.push({data:o.payload,len:o.payload.byteLength,dts:a,pts:a,type:gn.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(t,r,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}};function w_(e,t){return ke(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}var VT=class{constructor(t,r,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Qu(r,{removePKCS7Padding:!1})}decryptBuffer(t){return this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,Ys.cbc)}decryptAacSample(t,r,n){let i=t[r].unit;if(i.length<=16)return;let s=i.subarray(16,i.length-i.length%16),o=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(o).then(a=>{let l=new Uint8Array(a);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(t,r+1,n)}).catch(n)}decryptAacSamples(t,r,n){for(;;r++){if(r>=t.length){n();return}if(!(t[r].unit.length<32)&&(this.decryptAacSample(t,r,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(t){let r=Math.floor((t.length-48)/160)*16+16,n=new Int8Array(r),i=0;for(let s=32;s<t.length-16;s+=160,i+=16)n.set(t.subarray(s,s+16),i);return n}getAvcDecryptedUnit(t,r){let n=new Uint8Array(r),i=0;for(let s=32;s<t.length-16;s+=160,i+=16)t.set(n.subarray(i,i+16),s);return t}decryptAvcSample(t,r,n,i,s){let o=E2(s.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(t,r,n+1,i)}).catch(i)}decryptAvcSamples(t,r,n,i){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;r++,n=0){if(r>=t.length){i();return}let s=t[r].units;for(;!(n>=s.length);n++){let o=s[n];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(t,r,n,i,o),!this.decrypter.isSync()))return}}}},Zp=class{constructor(){this.VideoSample=null}createVideoSample(t,r,n){return{key:t,frame:!1,pts:r,dts:n,units:[],length:0}}getLastNalUnit(t){var r;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=t[t.length-1]),(r=n)!=null&&r.units){let s=n.units;i=s[s.length-1]}return i}pushAccessUnit(t,r){if(t.units.length&&t.frame){if(t.pts===void 0){let n=r.samples,i=n.length;if(i){let s=n[i-1];t.pts=s.pts,t.dts=s.dts}else{r.dropped++;return}}r.samples.push(t)}}parseNALu(t,r,n){let i=r.byteLength,s=t.naluState||0,o=s,a=[],l=0,c,u,d,h=-1,f=0;for(s===-1&&(h=0,f=this.getNALuType(r,0),s=0,l=1);l<i;){if(c=r[l++],!s){s=c?0:1;continue}if(s===1){s=c?0:2;continue}if(!c)s=3;else if(c===1){if(u=l-s-1,h>=0){let p={data:r.subarray(h,u),type:f};a.push(p)}else{let p=this.getLastNalUnit(t.samples);p&&(o&&l<=4-o&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-o)),u>0&&(p.data=Pn(p.data,r.subarray(0,u)),p.state=0))}l<i?(d=this.getNALuType(r,l),h=l,f=d,s=0):s=-1}else s=0}if(h>=0&&s>=0){let p={data:r.subarray(h,i),type:f,state:s};a.push(p)}if(a.length===0){let p=this.getLastNalUnit(t.samples);p&&(p.data=Pn(p.data,r))}return t.naluState=s,a}},jo=class{constructor(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){let t=this.data,r=this.bytesAvailable,n=t.byteLength-r,i=new Uint8Array(4),s=Math.min(4,r);if(s===0)throw new Error("no bytes available");i.set(t.subarray(n,n+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(t){let r;t=Math.min(t,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,r=t>>3,t-=r<<3,this.bytesAvailable-=r,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)}readBits(t){let r=Math.min(this.bitsAvailable,t),n=this.word>>>32-r;if(t>32&&ut.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0)this.word<<=r;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return r=t-r,r>0&&this.bitsAvailable?n<<r|this.readBits(r):n}skipLZ(){let t;for(t=0;t<this.bitsAvailable;++t)if(this.word&2147483648>>>t)return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){let t=this.skipLZ();return this.readBits(t+1)-1}readEG(){let t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}},WT=class extends Zp{parsePES(t,r,n,i){let s=this.parseNALu(t,n.data,i),o=this.VideoSample,a,l=!1;n.data=null,o&&s.length&&!t.audFound&&(this.pushAccessUnit(o,t),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(c=>{var u,d;switch(c.type){case 1:{let g=!1;a=!0;let v=c.data;if(l&&v.length>4){let m=this.readSliceType(v);(m===2||m===4||m===7||m===9)&&(g=!0)}if(g){var h;(h=o)!=null&&h.frame&&!o.key&&(this.pushAccessUnit(o,t),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.frame=!0,o.key=g;break}case 5:a=!0,(u=o)!=null&&u.frame&&!o.key&&(this.pushAccessUnit(o,t),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 6:{a=!0,hb(c.data,1,n.pts,r.samples);break}case 7:{var f,p;a=!0,l=!0;let g=c.data,v=this.readSPS(g);if(!t.sps||t.width!==v.width||t.height!==v.height||((f=t.pixelRatio)==null?void 0:f[0])!==v.pixelRatio[0]||((p=t.pixelRatio)==null?void 0:p[1])!==v.pixelRatio[1]){t.width=v.width,t.height=v.height,t.pixelRatio=v.pixelRatio,t.sps=[g];let m=g.subarray(1,4),y="avc1.";for(let E=0;E<3;E++){let S=m[E].toString(16);S.length<2&&(S="0"+S),y+=S}t.codec=y}break}case 8:a=!0,t.pps=[c.data];break;case 9:a=!0,t.audFound=!0,(d=o)!=null&&d.frame&&(this.pushAccessUnit(o,t),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:a=!0;break;default:a=!1;break}o&&a&&o.units.push(c)}),i&&o&&(this.pushAccessUnit(o,t),this.VideoSample=null)}getNALuType(t,r){return t[r]&31}readSliceType(t){let r=new jo(t);return r.readUByte(),r.readUEG(),r.readUEG()}skipScalingList(t,r){let n=8,i=8,s;for(let o=0;o<t;o++)i!==0&&(s=r.readEG(),i=(n+s+256)%256),n=i===0?n:i}readSPS(t){let r=new jo(t),n=0,i=0,s=0,o=0,a,l,c,u=r.readUByte.bind(r),d=r.readBits.bind(r),h=r.readUEG.bind(r),f=r.readBoolean.bind(r),p=r.skipBits.bind(r),g=r.skipEG.bind(r),v=r.skipUEG.bind(r),m=this.skipScalingList.bind(this);u();let y=u();if(d(5),p(3),u(),v(),y===100||y===110||y===122||y===244||y===44||y===83||y===86||y===118||y===128){let D=h();if(D===3&&p(1),v(),v(),p(1),f())for(l=D!==3?8:12,c=0;c<l;c++)f()&&(c<6?m(16,r):m(64,r))}v();let E=h();if(E===0)h();else if(E===1)for(p(1),g(),g(),a=h(),c=0;c<a;c++)g();v(),p(1);let S=h(),b=h(),w=d(1);w===0&&p(1),p(1),f()&&(n=h(),i=h(),s=h(),o=h());let x=[1,1];if(f()&&f())switch(u()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:{x=[u()<<8|u(),u()<<8|u()];break}}return{width:Math.ceil((S+1)*16-n*2-i*2),height:(2-w)*(b+1)*16-(w?2:4)*(s+o),pixelRatio:x}}},qT=class extends Zp{constructor(...t){super(...t),this.initVPS=null}parsePES(t,r,n,i){let s=this.parseNALu(t,n.data,i),o=this.VideoSample,a,l=!1;n.data=null,o&&s.length&&!t.audFound&&(this.pushAccessUnit(o,t),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(c=>{var u,d;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),o.frame=!0,a=!0;break;case 16:case 17:case 18:case 21:if(a=!0,l){var h;(h=o)!=null&&h.frame&&!o.key&&(this.pushAccessUnit(o,t),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 19:case 20:a=!0,(u=o)!=null&&u.frame&&!o.key&&(this.pushAccessUnit(o,t),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 39:a=!0,hb(c.data,2,n.pts,r.samples);break;case 32:a=!0,t.vps||(typeof t.params!="object"&&(t.params={}),t.params=gt(t.params,this.readVPS(c.data)),this.initVPS=c.data),t.vps=[c.data];break;case 33:if(a=!0,l=!0,t.vps!==void 0&&t.vps[0]!==this.initVPS&&t.sps!==void 0&&!this.matchSPS(t.sps[0],c.data)&&(this.initVPS=t.vps[0],t.sps=t.pps=void 0),!t.sps){let f=this.readSPS(c.data);t.width=f.width,t.height=f.height,t.pixelRatio=f.pixelRatio,t.codec=f.codecString,t.sps=[],typeof t.params!="object"&&(t.params={});for(let p in f.params)t.params[p]=f.params[p]}this.pushParameterSet(t.sps,c.data,t.vps),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0;break;case 34:if(a=!0,typeof t.params=="object"){if(!t.pps){t.pps=[];let f=this.readPPS(c.data);for(let p in f)t.params[p]=f[p]}this.pushParameterSet(t.pps,c.data,t.vps)}break;case 35:a=!0,t.audFound=!0,(d=o)!=null&&d.frame&&(this.pushAccessUnit(o,t),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:a=!1;break}o&&a&&o.units.push(c)}),i&&o&&(this.pushAccessUnit(o,t),this.VideoSample=null)}pushParameterSet(t,r,n){(n&&n[0]===this.initVPS||!n&&!t.length)&&t.push(r)}getNALuType(t,r){return(t[r]&126)>>>1}ebsp2rbsp(t){let r=new Uint8Array(t.byteLength),n=0;for(let i=0;i<t.byteLength;i++)i>=2&&t[i]===3&&t[i-1]===0&&t[i-2]===0||(r[n]=t[i],n++);return new Uint8Array(r.buffer,0,n)}pushAccessUnit(t,r){super.pushAccessUnit(t,r),this.initVPS&&(this.initVPS=null)}readVPS(t){let r=new jo(t);r.readUByte(),r.readUByte(),r.readBits(4),r.skipBits(2),r.readBits(6);let n=r.readBits(3),i=r.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:i}}readSPS(t){let r=new jo(this.ebsp2rbsp(t));r.readUByte(),r.readUByte(),r.readBits(4);let n=r.readBits(3);r.readBoolean();let i=r.readBits(2),s=r.readBoolean(),o=r.readBits(5),a=r.readUByte(),l=r.readUByte(),c=r.readUByte(),u=r.readUByte(),d=r.readUByte(),h=r.readUByte(),f=r.readUByte(),p=r.readUByte(),g=r.readUByte(),v=r.readUByte(),m=r.readUByte(),y=[],E=[];for(let Se=0;Se<n;Se++)y.push(r.readBoolean()),E.push(r.readBoolean());if(n>0)for(let Se=n;Se<8;Se++)r.readBits(2);for(let Se=0;Se<n;Se++)y[Se]&&(r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte()),E[Se]&&r.readUByte();r.readUEG();let S=r.readUEG();S==3&&r.skipBits(1);let b=r.readUEG(),w=r.readUEG(),x=r.readBoolean(),D=0,N=0,C=0,P=0;x&&(D+=r.readUEG(),N+=r.readUEG(),C+=r.readUEG(),P+=r.readUEG());let U=r.readUEG(),G=r.readUEG(),K=r.readUEG(),B=r.readBoolean();for(let Se=B?0:n;Se<=n;Se++)r.skipUEG(),r.skipUEG(),r.skipUEG();if(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.readBoolean()&&r.readBoolean())for(let Se=0;Se<4;Se++)for(let Ue=0;Ue<(Se===3?2:6);Ue++)if(!r.readBoolean())r.readUEG();else{let Ve=Math.min(64,1<<4+(Se<<1));Se>1&&r.readEG();for(let _t=0;_t<Ve;_t++)r.readEG()}r.readBoolean(),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.skipUEG(),r.skipUEG(),r.readBoolean());let V=r.readUEG(),W=0;for(let Se=0;Se<V;Se++){let Ue=!1;if(Se!==0&&(Ue=r.readBoolean()),Ue){Se===V&&r.readUEG(),r.readBoolean(),r.readUEG();let Ve=0;for(let _t=0;_t<=W;_t++){let Ct=r.readBoolean(),Gt=!1;Ct||(Gt=r.readBoolean()),(Ct||Gt)&&Ve++}W=Ve}else{let Ve=r.readUEG(),_t=r.readUEG();W=Ve+_t;for(let Ct=0;Ct<Ve;Ct++)r.readUEG(),r.readBoolean();for(let Ct=0;Ct<_t;Ct++)r.readUEG(),r.readBoolean()}}if(r.readBoolean()){let Se=r.readUEG();for(let Ue=0;Ue<Se;Ue++){for(let Ve=0;Ve<K+4;Ve++)r.readBits(1);r.readBits(1)}}let X=0,Y=1,O=1,ie=!0,le=1,F=0;r.readBoolean(),r.readBoolean();let te=!1;if(r.readBoolean()){if(r.readBoolean()){let Se=r.readUByte(),Ue=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Ve=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Se>0&&Se<16?(Y=Ue[Se-1],O=Ve[Se-1]):Se===255&&(Y=r.readBits(16),O=r.readBits(16))}if(r.readBoolean()&&r.readBoolean(),r.readBoolean()&&(r.readBits(3),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.readUByte(),r.readUByte())),r.readBoolean()&&(r.readUEG(),r.readUEG()),r.readBoolean(),r.readBoolean(),r.readBoolean(),te=r.readBoolean(),te&&(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG()),r.readBoolean()&&(le=r.readBits(32),F=r.readBits(32),r.readBoolean()&&r.readUEG(),r.readBoolean())){let Se=r.readBoolean(),Ue=r.readBoolean(),Ve=!1;(Se||Ue)&&(Ve=r.readBoolean(),Ve&&(r.readUByte(),r.readBits(5),r.readBoolean(),r.readBits(5)),r.readBits(4),r.readBits(4),Ve&&r.readBits(4),r.readBits(5),r.readBits(5),r.readBits(5));for(let _t=0;_t<=n;_t++){ie=r.readBoolean();let Ct=ie||r.readBoolean(),Gt=!1;Ct?r.readEG():Gt=r.readBoolean();let A=Gt?1:r.readUEG()+1;if(Se)for(let H=0;H<A;H++)r.readUEG(),r.readUEG(),Ve&&(r.readUEG(),r.readUEG()),r.skipBits(1);if(Ue)for(let H=0;H<A;H++)r.readUEG(),r.readUEG(),Ve&&(r.readUEG(),r.readUEG()),r.skipBits(1)}}r.readBoolean()&&(r.readBoolean(),r.readBoolean(),r.readBoolean(),X=r.readUEG())}let ge=b,Ce=w;if(x){let Se=1,Ue=1;S===1?Se=Ue=2:S==2&&(Se=2),ge=b-Se*N-Se*D,Ce=w-Ue*P-Ue*C}let de=i?["A","B","C"][i]:"",we=a<<24|l<<16|c<<8|u,Le=0;for(let Se=0;Se<32;Se++)Le=(Le|(we>>Se&1)<<31-Se)>>>0;let Pe=Le.toString(16);return o===1&&Pe==="2"&&(Pe="6"),{codecString:`hvc1.${de}${o}.${Pe}.${s?"H":"L"}${m}.B0`,params:{general_tier_flag:s,general_profile_idc:o,general_profile_space:i,general_profile_compatibility_flags:[a,l,c,u],general_constraint_indicator_flags:[d,h,f,p,g,v],general_level_idc:m,bit_depth:U+8,bit_depth_luma_minus8:U,bit_depth_chroma_minus8:G,min_spatial_segmentation_idc:X,chroma_format_idc:S,frame_rate:{fixed:ie,fps:F/le}},width:ge,height:Ce,pixelRatio:[Y,O]}}readPPS(t){let r=new jo(this.ebsp2rbsp(t));r.readUByte(),r.readUByte(),r.skipUEG(),r.skipUEG(),r.skipBits(2),r.skipBits(3),r.skipBits(2),r.skipUEG(),r.skipUEG(),r.skipEG(),r.skipBits(2),r.readBoolean()&&r.skipUEG(),r.skipEG(),r.skipEG(),r.skipBits(4);let n=r.readBoolean(),i=r.readBoolean(),s=1;return i&&n?s=0:i?s=3:n&&(s=2),{parallelismType:s}}matchSPS(t,r){return String.fromCharCode.apply(null,t).substr(3)===String.fromCharCode.apply(null,r).substr(3)}},cr=188,KT=class e{constructor(t,r,n,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=t,this.config=r,this.typeSupported=n,this.logger=i,this.videoParser=null}static probe(t,r){let n=e.syncOffset(t);return n>0&&r.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(t){let r=t.length,n=Math.min(cr*5,r-cr)+1,i=0;for(;i<n;){let s=!1,o=-1,a=0;for(let l=i;l<r;l+=cr)if(t[l]===71&&(r-l===cr||t[l+cr]===71)){if(a++,o===-1&&(o=l,o!==0&&(n=Math.min(o+cr*99,t.length-cr)+1)),s||(s=YT(t,l)===0),s&&a>1&&(o===0&&a>2||l+cr>n))return o}else{if(a)return-1;break}i++}return-1}static createTrack(t,r){return{container:t==="video"||t==="audio"?"video/mp2t":void 0,type:t,id:f2[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:t==="audio"?r:void 0}}resetInitSegment(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=e.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3"),this._txtTrack=e.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){let{_audioTrack:t,_videoTrack:r,_id3Track:n}=this;t&&(t.pesData=null),r&&(r.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(t,r,n=!1,i=!1){n||(this.sampleAes=null);let s,o=this._videoTrack,a=this._audioTrack,l=this._id3Track,c=this._txtTrack,u=o.pid,d=o.pesData,h=a.pid,f=l.pid,p=a.pesData,g=l.pesData,v=null,m=this.pmtParsed,y=this._pmtId,E=t.length;if(this.remainderData&&(t=Pn(this.remainderData,t),E=t.length,this.remainderData=null),E<cr&&!i)return this.remainderData=t,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};let S=Math.max(0,e.syncOffset(t));E-=(E-S)%cr,E<t.byteLength&&!i&&(this.remainderData=new Uint8Array(t.buffer,E,t.buffer.byteLength-E));let b=0;for(let x=S;x<E;x+=cr)if(t[x]===71){let D=!!(t[x+1]&64),N=YT(t,x),C=(t[x+3]&48)>>4,P;if(C>1){if(P=x+5+t[x+4],P===x+cr)continue}else P=x+4;switch(N){case u:D&&(d&&(s=Ja(d,this.logger))&&(this.readyVideoParser(o.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(o,c,s,!1)),d={data:[],size:0}),d&&(d.data.push(t.subarray(P,x+cr)),d.size+=x+cr-P);break;case h:if(D){if(p&&(s=Ja(p,this.logger)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,s);break;case"mp3":this.parseMPEGPES(a,s);break;case"ac3":this.parseAC3PES(a,s);break}p={data:[],size:0}}p&&(p.data.push(t.subarray(P,x+cr)),p.size+=x+cr-P);break;case f:D&&(g&&(s=Ja(g,this.logger))&&this.parseID3PES(l,s),g={data:[],size:0}),g&&(g.data.push(t.subarray(P,x+cr)),g.size+=x+cr-P);break;case 0:D&&(P+=t[P]+1),y=this._pmtId=Tle(t,P);break;case y:{D&&(P+=t[P]+1);let U=Sle(t,P,this.typeSupported,n,this.observer,this.logger);u=U.videoPid,u>0&&(o.pid=u,o.segmentCodec=U.segmentVideoCodec),h=U.audioPid,h>0&&(a.pid=h,a.segmentCodec=U.segmentAudioCodec),f=U.id3Pid,f>0&&(l.pid=f),v!==null&&!m&&(this.logger.warn(`MPEG-TS PMT found at ${x} after unknown PID '${v}'. Backtracking to sync byte @${S} to parse all TS packets.`),v=null,x=S-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:v=N;break}}else b++;b>0&&XT(this.observer,new Error(`Found ${b} TS packet/s that do not start with 0x47`),void 0,this.logger),o.pesData=d,a.pesData=p,l.pesData=g;let w={audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};return i&&this.extractRemainingSamples(w),w}flush(){let{remainderData:t}=this;this.remainderData=null;let r;return t?r=this.demux(t,-1,!1,!0):r={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(r),this.sampleAes?this.decrypt(r,this.sampleAes):r}extractRemainingSamples(t){let{audioTrack:r,videoTrack:n,id3Track:i,textTrack:s}=t,o=n.pesData,a=r.pesData,l=i.pesData,c;if(o&&(c=Ja(o,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,s,c,!0),n.pesData=null)):n.pesData=o,a&&(c=Ja(a,this.logger))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,c);break;case"mp3":this.parseMPEGPES(r,c);break;case"ac3":this.parseAC3PES(r,c);break}r.pesData=null}else a!=null&&a.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=a;l&&(c=Ja(l,this.logger))?(this.parseID3PES(i,c),i.pesData=null):i.pesData=l}demuxSampleAes(t,r,n){let i=this.demux(t,n,!0,!this.config.progressive),s=this.sampleAes=new VT(this.observer,this.config,r);return this.decrypt(i,s)}readyVideoParser(t){this.videoParser===null&&(t==="avc"?this.videoParser=new WT:t==="hevc"&&(this.videoParser=new qT))}decrypt(t,r){return new Promise(n=>{let{audioTrack:i,videoTrack:s}=t;i.samples&&i.segmentCodec==="aac"?r.decryptAacSamples(i.samples,0,()=>{s.samples?r.decryptAvcSamples(s.samples,0,0,()=>{n(t)}):n(t)}):s.samples&&r.decryptAvcSamples(s.samples,0,0,()=>{n(t)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(t,r){let n=0,i=this.aacOverFlow,s=r.data;if(i){this.aacOverFlow=null;let d=i.missing,h=i.sample.unit.byteLength;if(d===-1)s=Pn(i.sample.unit,s);else{let f=h-d;i.sample.unit.set(s.subarray(0,d),f),t.samples.push(i.sample),n=i.missing}}let o,a;for(o=n,a=s.length;o<a-1&&!Qp(s,o);o++);if(o!==n){let d,h=o<a-1;if(h?d=`AAC PES did not start with ADTS header,offset:${o}`:d="No ADTS header found in AAC PES",XT(this.observer,new Error(d),h,this.logger),!h)return}q2(t,this.observer,s,o,this.audioCodec);let l;if(r.pts!==void 0)l=r.pts;else if(i){let d=K2(t.samplerate);l=i.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;o<a;)if(u=Y2(t,s,o,l,c),o+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;o<a-1&&!Qp(s,o);o++);}parseMPEGPES(t,r){let n=r.data,i=n.length,s=0,o=0,a=r.pts;if(a===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<i;)if(eB(n,o)){let l=Z2(t,n,o,a,s);if(l)o+=l.length,s++;else break}else o++}parseAC3PES(t,r){{let n=r.data,i=r.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}let s=n.length,o=0,a=0,l;for(;a<s&&(l=nB(t,n,a,i,o++))>0;)a+=l}}parseID3PES(t,r){if(r.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}let n=gt({},r,{type:this._videoTrack?gn.emsg:gn.audioId3,duration:Number.POSITIVE_INFINITY});t.samples.push(n)}};function YT(e,t){return((e[t+1]&31)<<8)+e[t+2]}function Tle(e,t){return(e[t+10]&31)<<8|e[t+11]}function Sle(e,t,r,n,i,s){let o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=(e[t+1]&15)<<8|e[t+2],l=t+3+a-4,c=(e[t+10]&15)<<8|e[t+11];for(t+=12+c;t<l;){let u=YT(e,t),d=(e[t+3]&15)<<8|e[t+4];switch(e[t]){case 207:if(!n){w0("ADTS AAC",s);break}case 15:o.audioPid===-1&&(o.audioPid=u);break;case 21:o.id3Pid===-1&&(o.id3Pid=u);break;case 219:if(!n){w0("H.264",s);break}case 27:o.videoPid===-1&&(o.videoPid=u);break;case 3:case 4:!r.mpeg&&!r.mp3?s.log("MPEG audio found, not supported in this browser"):o.audioPid===-1&&(o.audioPid=u,o.segmentAudioCodec="mp3");break;case 193:if(!n){w0("AC-3",s);break}case 129:r.ac3?o.audioPid===-1&&(o.audioPid=u,o.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(o.audioPid===-1&&d>0){let h=t+5,f=d;for(;f>2;){switch(e[h]){case 106:r.ac3!==!0?s.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=u,o.segmentAudioCodec="ac3");break}let p=e[h+1]+2;h+=p,f-=p}}break;case 194:case 135:return XT(i,new Error("Unsupported EC-3 in M2TS found"),void 0,s),o;case 36:o.videoPid===-1&&(o.videoPid=u,o.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"));break}t+=d+5}return o}function XT(e,t,r,n){n.warn(`parsing error: ${t.message}`),e.emit(R.ERROR,R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:t,reason:t.message})}function w0(e,t){t.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function Ja(e,t){let r=0,n,i,s,o,a,l=e.data;if(!e||e.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=Pn(l[0],l[1]),l.splice(1,1);if(n=l[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>e.size-6)return null;let c=n[7];c&192&&(o=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,c&64?(a=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,o-a>60*9e4&&(t.warn(`${Math.round((o-a)/9e4)}s delta between PTS and DTS, align them`),o=a)):a=o),s=n[8];let u=s+9;if(e.size<=u)return null;e.size-=u;let d=new Uint8Array(e.size);for(let h=0,f=l.length;h<f;h++){n=l[h];let p=n.byteLength;if(u)if(u>p){u-=p;continue}else n=n.subarray(u),p-=u,u=0;d.set(n,r),r+=p}return i&&(i-=s+3),{data:d,pts:o,dts:a,len:i}}return null}var QT=class{static getSilentFrame(t,r){switch(t){case"mp4a.40.2":if(r===1)return new Uint8Array([0,200,0,128,35,128]);if(r===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(r===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(r===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(r===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(r===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(r===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}},Os=Math.pow(2,32)-1,ir=class e{static init(){e.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);let r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};let i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=s,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);let o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,a),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))}static box(t,...r){let n=8,i=r.length,s=i;for(;i--;)n+=r[i].byteLength;let o=new Uint8Array(n);for(o[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=n&255,o.set(t,4),i=0,n=8;i<s;i++)o.set(r[i],n),n+=r[i].byteLength;return o}static hdlr(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}static mdat(t){return e.box(e.types.mdat,t)}static mdhd(t,r){r*=t;let n=Math.floor(r/(Os+1)),i=Math.floor(r%(Os+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(t){return e.box(e.types.mdia,e.mdhd(t.timescale||0,t.duration||0),e.hdlr(t.type),e.minf(t))}static mfhd(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]))}static minf(t){return t.type==="audio"?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}static moof(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))}static moov(t){let r=t.length,n=[];for(;r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale||0,t[0].duration||0)].concat(n).concat(e.mvex(t)))}static mvex(t){let r=t.length,n=[];for(;r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex,...n])}static mvhd(t,r){r*=t;let n=Math.floor(r/(Os+1)),i=Math.floor(r%(Os+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,s)}static sdtp(t){let r=t.samples||[],n=new Uint8Array(4+r.length),i,s;for(i=0;i<r.length;i++)s=r[i].flags,n[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return e.box(e.types.sdtp,n)}static stbl(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}static avc1(t){let r=[],n=[],i,s,o;for(i=0;i<t.sps.length;i++)s=t.sps[i],o=s.byteLength,r.push(o>>>8&255),r.push(o&255),r=r.concat(Array.prototype.slice.call(s));for(i=0;i<t.pps.length;i++)s=t.pps[i],o=s.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(s));let a=e.box(e.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|t.sps.length].concat(r).concat([t.pps.length]).concat(n))),l=t.width,c=t.height,u=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(t){let r=t.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...r,6,1,2])}static audioStsd(t){let r=t.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount||0,0,16,0,0,0,0,r>>8&255,r&255,0,0])}static mp4a(t){return e.box(e.types.mp4a,e.audioStsd(t),e.box(e.types.esds,e.esds(t)))}static mp3(t){return e.box(e.types[".mp3"],e.audioStsd(t))}static ac3(t){return e.box(e.types["ac-3"],e.audioStsd(t),e.box(e.types.dac3,t.config))}static stsd(t){let{segmentCodec:r}=t;if(t.type==="audio"){if(r==="aac")return e.box(e.types.stsd,e.STSD,e.mp4a(t));if(r==="ac3"&&t.config)return e.box(e.types.stsd,e.STSD,e.ac3(t));if(r==="mp3"&&t.codec==="mp3")return e.box(e.types.stsd,e.STSD,e.mp3(t))}else if(t.pps&&t.sps){if(r==="avc")return e.box(e.types.stsd,e.STSD,e.avc1(t));if(r==="hevc"&&t.vps)return e.box(e.types.stsd,e.STSD,e.hvc1(t))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${t.type} segment codec (${r}/${t.codec})`)}static tkhd(t){let r=t.id,n=(t.duration||0)*(t.timescale||0),i=t.width||0,s=t.height||0,o=Math.floor(n/(Os+1)),a=Math.floor(n%(Os+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(t,r){let n=e.sdtp(t),i=t.id,s=Math.floor(r/(Os+1)),o=Math.floor(r%(Os+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255])),e.trun(t,n.length+16+20+8+16+8+8),n)}static trak(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}static trex(t){let r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(t,r){let n=t.samples||[],i=n.length,s=12+16*i,o=new Uint8Array(s),a,l,c,u,d,h;for(r+=8+s,o.set([t.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255],0),a=0;a<i;a++)l=n[a],c=l.duration,u=l.size,d=l.flags,h=l.cts,o.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*a);return e.box(e.types.trun,o)}static initSegment(t){e.types||e.init();let r=e.moov(t);return Pn(e.FTYP,r)}static hvc1(t){let r=t.params,n=[t.vps,t.sps,t.pps],i=4,s=new Uint8Array([1,r.general_profile_space<<6|(r.general_tier_flag?32:0)|r.general_profile_idc,r.general_profile_compatibility_flags[0],r.general_profile_compatibility_flags[1],r.general_profile_compatibility_flags[2],r.general_profile_compatibility_flags[3],r.general_constraint_indicator_flags[0],r.general_constraint_indicator_flags[1],r.general_constraint_indicator_flags[2],r.general_constraint_indicator_flags[3],r.general_constraint_indicator_flags[4],r.general_constraint_indicator_flags[5],r.general_level_idc,240|r.min_spatial_segmentation_idc>>8,255&r.min_spatial_segmentation_idc,252|r.parallelismType,252|r.chroma_format_idc,248|r.bit_depth_luma_minus8,248|r.bit_depth_chroma_minus8,0,parseInt(r.frame_rate.fps),i-1|r.temporal_id_nested<<2|r.num_temporal_layers<<3|(r.frame_rate.fixed?64:0),n.length]),o=s.length;for(let p=0;p<n.length;p+=1){o+=3;for(let g=0;g<n[p].length;g+=1)o+=2+n[p][g].length}let a=new Uint8Array(o);a.set(s,0),o=s.length;let l=n.length-1;for(let p=0;p<n.length;p+=1){a.set(new Uint8Array([32+p|(p===l?128:0),0,n[p].length]),o),o+=3;for(let g=0;g<n[p].length;g+=1)a.set(new Uint8Array([n[p][g].length>>8,n[p][g].length&255]),o),o+=2,a.set(n[p][g],o),o+=n[p][g].length}let c=e.box(e.types.hvcC,a),u=t.width,d=t.height,h=t.pixelRatio[0],f=t.pixelRatio[1];return e.box(e.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,f>>24,f>>16&255,f>>8&255,f&255])))}};ir.types=void 0;ir.HDLR_TYPES=void 0;ir.STTS=void 0;ir.STSC=void 0;ir.STCO=void 0;ir.STSZ=void 0;ir.VMHD=void 0;ir.SMHD=void 0;ir.STSD=void 0;ir.FTYP=void 0;ir.DINF=void 0;var iB=9e4;function wb(e,t,r=1,n=!1){let i=e*t*r;return n?Math.round(i):i}function ble(e,t,r=1,n=!1){return wb(e,t,1/r,n)}function iu(e,t=!1){return wb(e,1e3,1/iB,t)}function wle(e,t=1){return wb(e,iB,1/t)}function A_(e){let{baseTime:t,timescale:r,trackId:n}=e;return`${t/r} (${t}/${r}) trackId: ${n}`}var Ale=10*1e3,kle=1024,Cle=1152,xle=1536,el=null,A0=null;function k_(e,t,r,n){return{duration:t,size:r,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}var wl=class extends Jr{constructor(t,r,n,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=t,this.config=r,this.typeSupported=n,this.ISGenerated=!1,el===null){let s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);el=s?parseInt(s[1]):0}if(A0===null){let s=navigator.userAgent.match(/Safari\/(\d+)/i);A0=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(t){let r=this._initPTS;(!r||!t||t.trackId!==r.trackId||t.baseTime!==r.baseTime||t.timescale!==r.timescale)&&this.log(`Reset initPTS: ${r&&A_(r)} > ${t&&A_(t)}`),this._initPTS=this._initDTS=t}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(t){let r=!1,n=t[0].pts,i=t.reduce((s,o)=>{let a=o.pts,l=a-s;return l<-4294967296&&(r=!0,a=pn(a,n),l=a-s),l>0?s:a},n);return r&&this.debug("PTS rollover detected"),i}remux(t,r,n,i,s,o,a,l){let c,u,d,h,f,p,g=s,v=s,m=t.pid>-1,y=r.pid>-1,E=r.samples.length,S=t.samples.length>0,b=a&&E>0||E>1;if((!m||S)&&(!y||b)||this.ISGenerated||a){if(this.ISGenerated){var w,x,D,N;let G=this.videoTrackConfig;(G&&(r.width!==G.width||r.height!==G.height||((w=r.pixelRatio)==null?void 0:w[0])!==((x=G.pixelRatio)==null?void 0:x[0])||((D=r.pixelRatio)==null?void 0:D[1])!==((N=G.pixelRatio)==null?void 0:N[1]))||!G&&b||this.nextAudioTs===null&&S)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(t,r,s,o));let C=this.isVideoContiguous,P=-1,U;if(b&&(P=Rle(r.samples),!C&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,P>0){this.warn(`Dropped ${P} out of ${E} video samples due to a missing keyframe`);let G=this.getVideoStartPts(r.samples);r.samples=r.samples.slice(P),r.dropped+=P,v+=(r.samples[0].pts-G)/r.inputTimeScale,U=v}else P===-1&&(this.warn(`No keyframe found out of ${E} video samples`),p=!1);if(this.ISGenerated){if(S&&b){let G=this.getVideoStartPts(r.samples),K=(pn(t.samples[0].pts,G)-G)/r.inputTimeScale;g+=Math.max(0,K),v+=Math.max(0,-K)}if(S){if(t.samplerate||(this.warn("regenerate InitSegment as audio detected"),d=this.generateIS(t,r,s,o)),u=this.remuxAudio(t,g,this.isAudioContiguous,o,y||b||l===Re.AUDIO?v:void 0),b){let G=u?u.endPTS-u.startPTS:0;r.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),d=this.generateIS(t,r,s,o)),c=this.remuxVideo(r,v,C,G)}}else b&&(c=this.remuxVideo(r,v,C,0));c&&(c.firstKeyFrame=P,c.independent=P!==-1,c.firstKeyFramePTS=U)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(f=sB(n,s,this._initPTS,this._initDTS)),i.samples.length&&(h=oB(i,s,this._initPTS))),{audio:u,video:c,initSegment:d,independent:p,text:h,id3:f}}computeInitPts(t,r,n,i){let s=Math.round(n*r),o=pn(t,s);if(o<s+r)for(this.log(`Adjusting PTS for rollover in timeline near ${(s-o)/r} ${i}`);o<s+r;)o+=8589934592;return o-s}generateIS(t,r,n,i){let s=t.samples,o=r.samples,a=this.typeSupported,l={},c=this._initPTS,u=!c||i,d="audio/mp4",h,f,p,g=-1;if(u&&(h=f=1/0),t.config&&s.length){switch(t.timescale=t.samplerate,t.segmentCodec){case"mp3":a.mpeg?(d="audio/mpeg",t.codec=""):a.mp3&&(t.codec="mp3");break;case"ac3":t.codec="ac-3";break}l.audio={id:"audio",container:d,codec:t.codec,initSegment:t.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):ir.initSegment([t]),metadata:{channelCount:t.channelCount}},u&&(g=t.id,p=t.inputTimeScale,!c||p!==c.timescale?h=f=this.computeInitPts(s[0].pts,p,n,"audio"):u=!1)}if(r.sps&&r.pps&&o.length){if(r.timescale=r.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:r.codec,initSegment:ir.initSegment([r]),metadata:{width:r.width,height:r.height}},u)if(g=r.id,p=r.inputTimeScale,!c||p!==c.timescale){let v=this.getVideoStartPts(o),m=pn(o[0].dts,v),y=this.computeInitPts(m,p,n,"video"),E=this.computeInitPts(v,p,n,"video");f=Math.min(f,y),h=Math.min(h,E)}else u=!1;this.videoTrackConfig={width:r.width,height:r.height,pixelRatio:r.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(c&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${n} ${h/p} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${h/p} (${h}/${p}) trackId: ${g}`),this._initPTS={baseTime:h,timescale:p,trackId:g},this._initDTS={baseTime:f,timescale:p,trackId:g}):h=p=void 0,{tracks:l,initPTS:h,timescale:p,trackId:g}}remuxVideo(t,r,n,i){let s=t.inputTimeScale,o=t.samples,a=[],l=o.length,c=this._initPTS,u=c.baseTime*s/c.timescale,d=this.nextVideoTs,h=8,f=this.videoSampleDuration,p,g,v=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,y=!1;if(!n||d===null){let Y=u+r*s,O=o[0].pts-pn(o[0].dts,o[0].pts);el&&d!==null&&Math.abs(Y-O-(d+u))<15e3?n=!0:d=Y-O-u}let E=d+u;for(let Y=0;Y<l;Y++){let O=o[Y];O.pts=pn(O.pts,E),O.dts=pn(O.dts,E),O.dts<o[Y>0?Y-1:Y].dts&&(y=!0)}y&&o.sort(function(Y,O){let ie=Y.dts-O.dts,le=Y.pts-O.pts;return ie||le}),p=o[0].dts,g=o[o.length-1].dts;let S=g-p,b=S?Math.round(S/(l-1)):f||t.inputTimeScale/30;if(n){let Y=p-E,O=Y>b,ie=Y<-1;if((O||ie)&&(O?this.warn(`${(t.segmentCodec||"").toUpperCase()}: ${iu(Y,!0)} ms (${Y}dts) hole between fragments detected at ${r.toFixed(3)}`):this.warn(`${(t.segmentCodec||"").toUpperCase()}: ${iu(-Y,!0)} ms (${Y}dts) overlapping between fragments detected at ${r.toFixed(3)}`),!ie||E>=o[0].pts||el)){p=E;let le=o[0].pts-Y;if(O)o[0].dts=p,o[0].pts=le;else{let F=!0;for(let te=0;te<o.length&&!(o[te].dts>le&&F);te++){let ge=o[te].pts;if(o[te].dts-=Y,o[te].pts-=Y,te<o.length-1){let Ce=o[te+1].pts,de=o[te].pts,we=Ce<=de,Le=Ce<=ge;F=we==Le}}}this.log(`Video: Initial PTS/DTS adjusted: ${iu(le,!0)}/${iu(p,!0)}, delta: ${iu(Y,!0)} ms`)}}p=Math.max(0,p);let w=0,x=0,D=p;for(let Y=0;Y<l;Y++){let O=o[Y],ie=O.units,le=ie.length,F=0;for(let te=0;te<le;te++)F+=ie[te].data.length;x+=F,w+=le,O.length=F,O.dts<D?(O.dts=D,D+=b/4|0||1):D=O.dts,v=Math.min(O.pts,v),m=Math.max(O.pts,m)}g=o[l-1].dts;let N=x+4*w+8,C;try{C=new Uint8Array(N)}catch(Y){this.observer.emit(R.ERROR,R.ERROR,{type:Oe.MUX_ERROR,details:Q.REMUX_ALLOC_ERROR,fatal:!1,error:Y,bytes:N,reason:`fail allocating video mdat ${N}`});return}let P=new DataView(C.buffer);P.setUint32(0,N),C.set(ir.types.mdat,4);let U=!1,G=Number.POSITIVE_INFINITY,K=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,V=Number.NEGATIVE_INFINITY;for(let Y=0;Y<l;Y++){let O=o[Y],ie=O.units,le=0;for(let ge=0,Ce=ie.length;ge<Ce;ge++){let de=ie[ge],we=de.data,Le=de.data.byteLength;P.setUint32(h,Le),h+=4,C.set(we,h),h+=Le,le+=4+Le}let F;if(Y<l-1)f=o[Y+1].dts-O.dts,F=o[Y+1].pts-O.pts;else{let ge=this.config,Ce=Y>0?O.dts-o[Y-1].dts:b;if(F=Y>0?O.pts-o[Y-1].pts:b,ge.stretchShortVideoTrack&&this.nextAudioTs!==null){let de=Math.floor(ge.maxBufferHole*s),we=(i?v+i*s:this.nextAudioTs+u)-O.pts;we>de?(f=we-Ce,f<0?f=Ce:U=!0,this.log(`It is approximately ${we/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=Ce}else f=Ce}let te=Math.round(O.pts-O.dts);G=Math.min(G,f),B=Math.max(B,f),K=Math.min(K,F),V=Math.max(V,F),a.push(k_(O.key,f,le,te))}if(a.length){if(el){if(el<70){let Y=a[0].flags;Y.dependsOn=2,Y.isNonSync=0}}else if(A0&&V-K<B-G&&b/B<.025&&a[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Y=p;for(let O=0,ie=a.length;O<ie;O++){let le=Y+a[O].duration,F=Y+a[O].cts;if(O<ie-1){let te=le+a[O+1].cts;a[O].duration=te-F}else a[O].duration=O?a[O-1].duration:b;a[O].cts=0,Y=le}}}f=U||!f?b:f;let W=g+f;this.nextVideoTs=d=W-u,this.videoSampleDuration=f,this.isVideoContiguous=!0;let X={data1:ir.moof(t.sequenceNumber++,p,gt(t,{samples:a})),data2:C,startPTS:(v-u)/s,endPTS:(m+f-u)/s,startDTS:(p-u)/s,endDTS:d/s,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:t.dropped};return t.samples=[],t.dropped=0,X}getSamplesPerFrame(t){switch(t.segmentCodec){case"mp3":return Cle;case"ac3":return xle;default:return kle}}remuxAudio(t,r,n,i,s){let o=t.inputTimeScale,a=t.samplerate?t.samplerate:o,l=o/a,c=this.getSamplesPerFrame(t),u=c*l,d=this._initPTS,h=t.segmentCodec==="mp3"&&this.typeSupported.mpeg,f=[],p=s!==void 0,g=t.samples,v=h?0:8,m=this.nextAudioTs||-1,y=d.baseTime*o/d.timescale,E=y+r*o;if(this.isAudioContiguous=n=n||g.length&&m>0&&(i&&Math.abs(E-(m+y))<9e3||Math.abs(pn(g[0].pts,E)-(m+y))<20*u),g.forEach(function(B){B.pts=pn(B.pts,E)}),!n||m<0){let B=g.length;if(g=g.filter(V=>V.pts>=0),B!==g.length&&this.warn(`Removed ${g.length-B} of ${B} samples (initPTS ${y} / ${o})`),!g.length)return;s===0?m=0:i&&!p?m=Math.max(0,E-y):m=g[0].pts-y}if(t.segmentCodec==="aac"){let B=this.config.maxAudioFramesDrift;for(let V=0,W=m+y;V<g.length;V++){let X=g[V],Y=X.pts,O=Y-W,ie=Math.abs(1e3*O/o);if(O<=-B*u&&p)V===0&&(this.warn(`Audio frame @ ${(Y/o).toFixed(3)}s overlaps marker by ${Math.round(1e3*O/o)} ms.`),this.nextAudioTs=m=Y-y,W=Y);else if(O>=B*u&&ie<Ale&&p){let le=Math.round(O/u);for(W=Y-le*u;W<0&&le&&u;)le--,W+=u;V===0&&(this.nextAudioTs=m=W-y),this.warn(`Injecting ${le} audio frames @ ${((W-y)/o).toFixed(3)}s due to ${Math.round(1e3*O/o)} ms gap.`);for(let F=0;F<le;F++){let te=QT.getSilentFrame(t.parsedCodec||t.manifestCodec||t.codec,t.channelCount);te||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),te=X.unit.subarray()),g.splice(V,0,{unit:te,pts:W}),W+=u,V++}}X.pts=W,W+=u}}let S=null,b=null,w,x=0,D=g.length;for(;D--;)x+=g[D].unit.byteLength;for(let B=0,V=g.length;B<V;B++){let W=g[B],X=W.unit,Y=W.pts;if(b!==null){let ie=f[B-1];ie.duration=Math.round((Y-b)/l)}else if(n&&t.segmentCodec==="aac"&&(Y=m+y),S=Y,x>0){x+=v;try{w=new Uint8Array(x)}catch(ie){this.observer.emit(R.ERROR,R.ERROR,{type:Oe.MUX_ERROR,details:Q.REMUX_ALLOC_ERROR,fatal:!1,error:ie,bytes:x,reason:`fail allocating audio mdat ${x}`});return}h||(new DataView(w.buffer).setUint32(0,x),w.set(ir.types.mdat,4))}else return;w.set(X,v);let O=X.byteLength;v+=O,f.push(k_(!0,c,O,0)),b=Y}let N=f.length;if(!N)return;let C=f[f.length-1];m=b-y,this.nextAudioTs=m+l*C.duration;let P=h?new Uint8Array(0):ir.moof(t.sequenceNumber++,S/l,gt({},t,{samples:f}));t.samples=[];let U=(S-y)/o,G=m/o,K={data1:P,data2:w,startPTS:U,endPTS:G,startDTS:U,endDTS:G,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.isAudioContiguous=!0,K}};function pn(e,t){let r;if(t===null)return e;for(t<e?r=-8589934592:r=8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}function Rle(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}function sB(e,t,r,n){let i=e.samples.length;if(!i)return;let s=e.inputTimeScale;for(let a=0;a<i;a++){let l=e.samples[a];l.pts=pn(l.pts-r.baseTime*s/r.timescale,t*s)/s,l.dts=pn(l.dts-n.baseTime*s/n.timescale,t*s)/s}let o=e.samples;return e.samples=[],{samples:o}}function oB(e,t,r){let n=e.samples.length;if(!n)return;let i=e.inputTimeScale;for(let o=0;o<n;o++){let a=e.samples[o];a.pts=pn(a.pts-r.baseTime*i/r.timescale,t*i)/i}e.samples.sort((o,a)=>o.pts-a.pts);let s=e.samples;return e.samples=[],{samples:s}}var ZT=class extends Jr{constructor(t,r,n,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(t){this.lastEndTime=null;let r=this.initPTS;r&&t&&r.baseTime===t.baseTime&&r.timescale===t.timescale||(this.initPTS=t)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(t,r,n,i){this.audioCodec=r,this.videoCodec=n,this.generateInitSegment(t,i),this.emitInitSegment=!0}generateInitSegment(t,r){let{audioCodec:n,videoCodec:i}=this;if(!(t!=null&&t.byteLength)){this.initTracks=void 0,this.initData=void 0;return}let{audio:s,video:o}=this.initData=m2(t);if(r)Poe(t,r);else{let l=s||o;l!=null&&l.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${l.codec}")!`)}s&&(n=C_(s,mt.AUDIO,this)),o&&(i=C_(o,mt.VIDEO,this));let a={};s&&o?a.audiovideo={container:"video/mp4",codec:n+","+i,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:t,id:"main"}:s?a.audio={container:"audio/mp4",codec:n,encrypted:s.encrypted,initSegment:t,id:"audio"}:o?a.video={container:"video/mp4",codec:i,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:t,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(t,r,n,i,s,o){var a,l;let{initPTS:c,lastEndTime:u}=this,d={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};ke(u)||(u=this.lastEndTime=s||0);let h=r.samples;if(!h.length)return d;let f={initPTS:void 0,timescale:void 0,trackId:void 0},p=this.initData;if((a=p)!=null&&a.length||(this.generateInitSegment(h),p=this.initData),!((l=p)!=null&&l.length))return this.warn("Failed to generate initSegment."),d;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);let g=Ooe(h,p,this),v=p.audio?g[p.audio.id]:null,m=p.video?g[p.video.id]:null,y=Df(m,1/0),E=Df(v,1/0),S=Df(m,0,!0),b=Df(v,0,!0),w=s,x=0,D=v&&(!m||!c&&E<y||c&&c.trackId===p.audio.id),N=D?v:m;if(N){let X=N.timescale,Y=N.start-s*X,O=D?p.audio.id:p.video.id;w=N.start/X,x=D?b-E:S-y,(o||!c)&&(Ile(c,w,s,x)||X!==c.timescale)&&(c&&this.warn(`Timestamps at playlist time: ${o?"":"~"}${s} ${Y/X} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${s} offset: ${w-s} (${Y}/${X}) trackId: ${O}`),c=null,f.initPTS=Y,f.timescale=X,f.trackId=O)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${s}`);c?(f.initPTS=c.baseTime,f.timescale=c.timescale,f.trackId=c.trackId):((!f.timescale||f.trackId===void 0||f.initPTS===void 0)&&(this.warn("Could not set initPTS"),f.initPTS=w,f.timescale=1,f.trackId=-1),this.initPTS=c={baseTime:f.initPTS,timescale:f.timescale,trackId:f.trackId});let C=w-c.baseTime/c.timescale,P=C+x;x>0?this.lastEndTime=P:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());let U=!!p.audio,G=!!p.video,K="";U&&(K+="audio"),G&&(K+="video");let B=(p.audio?p.audio.encrypted:!1)||(p.video?p.video.encrypted:!1),V={data1:h,startPTS:C,startDTS:C,endPTS:P,endDTS:P,type:K,hasAudio:U,hasVideo:G,nb:1,dropped:0,encrypted:B};d.audio=U&&!G?V:void 0,d.video=G?V:void 0;let W=m?.sampleCount;if(W){let X=m.keyFrameIndex,Y=X!==-1;V.nb=W,V.dropped=X===0||this.isVideoContiguous?0:Y?X:W,V.independent=Y,V.firstKeyFrame=X,Y&&m.keyFrameStart&&(V.firstKeyFramePTS=(m.keyFrameStart-c.baseTime)/c.timescale),this.isVideoContiguous||(d.independent=Y),this.isVideoContiguous||(this.isVideoContiguous=Y),V.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${X}/${W} dropped: ${V.dropped} start: ${V.firstKeyFramePTS||"NA"}`)}return d.initSegment=f,d.id3=sB(n,s,c,c),i.samples.length&&(d.text=oB(i,s,c)),d}};function Df(e,t,r=!1){return e?.start!==void 0?(e.start+(r?e.duration:0))/e.timescale:t}function Ile(e,t,r,n){if(e===null)return!0;let i=Math.max(n,1),s=t-e.baseTime/e.timescale;return Math.abs(s-r)>i}function C_(e,t,r){let n=e.codec;return n&&n.length>4?n:t===mt.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?Up(n,!1):(r.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(r.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}var qi;try{qi=self.performance.now.bind(self.performance)}catch{qi=Date.now}var ip=[{demux:jT,remux:ZT},{demux:KT,remux:wl},{demux:zT,remux:wl},{demux:GT,remux:wl}];ip.splice(2,0,{demux:$T,remux:wl});var Jp=class{constructor(t,r,n,i,s,o){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=t,this.typeSupported=r,this.config=n,this.id=s,this.logger=o}configure(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()}push(t,r,n,i){let s=n.transmuxing;s.executeStart=qi();let o=new Uint8Array(t),{currentTransmuxState:a,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);let{contiguous:c,discontinuity:u,trackSwitch:d,accurateTimeOffset:h,timeOffset:f,initSegmentChange:p}=i||a,{audioCodec:g,videoCodec:v,defaultInitPts:m,duration:y,initSegmentData:E}=l,S=_le(o,r);if(S&&bl(S.method)){let D=this.getDecrypter(),N=mb(S.method);if(D.isSync()){let C=D.softwareDecrypt(o,S.key.buffer,S.iv.buffer,N);if(n.part>-1){let P=D.flush();C=P&&P.buffer}if(!C)return s.executeEnd=qi(),k0(n);o=new Uint8Array(C)}else return this.asyncResult=!0,this.decryptionPromise=D.webCryptoDecrypt(o,S.key.buffer,S.iv.buffer,N).then(C=>{let P=this.push(C,null,n);return this.decryptionPromise=null,P}),this.decryptionPromise}let b=this.needsProbing(u,d);if(b){let D=this.configureTransmuxer(o);if(D)return this.logger.warn(`[transmuxer] ${D.message}`),this.observer.emit(R.ERROR,R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.FRAG_PARSING_ERROR,fatal:!1,error:D,reason:D.message}),s.executeEnd=qi(),k0(n)}(u||d||p||b)&&this.resetInitSegment(E,g,v,y,r),(u||p||b)&&this.resetInitialTimestamp(m),c||this.resetContiguity();let w=this.transmux(o,S,f,h,n);this.asyncResult=id(w);let x=this.currentTransmuxState;return x.contiguous=!0,x.discontinuity=!1,x.trackSwitch=!1,s.executeEnd=qi(),w}flush(t){let r=t.transmuxing;r.executeStart=qi();let{decrypter:n,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return this.asyncResult=!0,s.then(()=>this.flush(t));let o=[],{timeOffset:a}=i;if(n){let d=n.flush();d&&o.push(this.push(d.buffer,null,t))}let{demuxer:l,remuxer:c}=this;if(!l||!c){r.executeEnd=qi();let d=[k0(t)];return this.asyncResult?Promise.resolve(d):d}let u=l.flush(a);return id(u)?(this.asyncResult=!0,u.then(d=>(this.flushRemux(o,d,t),o))):(this.flushRemux(o,u,t),this.asyncResult?Promise.resolve(o):o)}flushRemux(t,r,n){let{audioTrack:i,videoTrack:s,id3Track:o,textTrack:a}=r,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===Re.MAIN?"level":"track"} ${n.level}`);let u=this.remuxer.remux(i,s,o,a,c,l,!0,this.id);t.push({remuxResult:u,chunkMeta:n}),n.transmuxing.executeEnd=qi()}resetInitialTimestamp(t){let{demuxer:r,remuxer:n}=this;!r||!n||(r.resetTimeStamp(t),n.resetTimeStamp(t))}resetContiguity(){let{demuxer:t,remuxer:r}=this;!t||!r||(t.resetContiguity(),r.resetNextTimestamp())}resetInitSegment(t,r,n,i,s){let{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(t,r,n,i),a.resetInitSegment(t,r,n,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(t,r,n,i,s){let o;return r&&r.method==="SAMPLE-AES"?o=this.transmuxSampleAes(t,r,n,i,s):o=this.transmuxUnencrypted(t,n,i,s),o}transmuxUnencrypted(t,r,n,i){let{audioTrack:s,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(t,r,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,o,a,l,r,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(t,r,n,i,s){return this.demuxer.demuxSampleAes(t,r,n).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,n,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(t){let{config:r,observer:n,typeSupported:i}=this,s;for(let d=0,h=ip.length;d<h;d++){var o;if((o=ip[d].demux)!=null&&o.probe(t,this.logger)){s=ip[d];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");let a=this.demuxer,l=this.remuxer,c=s.remux,u=s.demux;(!l||!(l instanceof c))&&(this.remuxer=new c(n,r,i,this.logger)),(!a||!(a instanceof u))&&(this.demuxer=new u(n,r,i,this.logger),this.probe=u.probe)}needsProbing(t,r){return!this.demuxer||!this.remuxer||t||r}getDecrypter(){let t=this.decrypter;return t||(t=this.decrypter=new Qu(this.config)),t}};function _le(e,t){let r=null;return e.byteLength>0&&t?.key!=null&&t.iv!==null&&t.method!=null&&(r=t),r}var k0=e=>({remuxResult:{},chunkMeta:e});function id(e){return"then"in e&&e.then instanceof Function}var JT=class{constructor(t,r,n,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=r,this.initSegmentData=n,this.duration=i,this.defaultInitPts=s||null}},eS=class{constructor(t,r,n,i,s,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=r,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=o}},x_=0,eg=class{constructor(t,r,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=x_++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{let c=l.data,u=this.hls;if(!(!u||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var d;let h=(d=this.workerContext)==null?void 0:d.objectURL;h&&self.URL.revokeObjectURL(h);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{u.logger[c.data.logType]&&u.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,u.trigger(c.event,c.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;let c=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(R.ERROR,{type:Oe.OTHER_ERROR,details:Q.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};let s=t.config;this.hls=t,this.id=r,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;let o=(l,c)=>{c=c||{},c.frag=this.frag||void 0,l===R.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(l,c)};this.observer=new yb,this.observer.on(R.FRAG_DECRYPTED,o),this.observer.on(R.ERROR,o);let a=GI(s.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){let l=this.hls.logger;if(s.workerPath||Vae()){try{s.workerPath?(l.log(`loading Web Worker ${s.workerPath} for "${r}"`),this.workerContext=qae(s.workerPath)):(l.log(`injecting Web Worker for "${r}"`),this.workerContext=Wae());let{worker:c}=this.workerContext;c.addEventListener("message",this.onWorkerMessage),c.addEventListener("error",this.onWorkerError),c.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:a,id:r,config:vt(s)})}catch(c){l.warn(`Error setting up "${r}" Web Worker, fallback to inline`,c),this.terminateWorker(),this.error=null,this.transmuxer=new Jp(this.observer,a,s,"",r,t.logger)}return}}this.transmuxer=new Jp(this.observer,a,s,"",r,t.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){let t=this.instanceNo;this.instanceNo=x_++;let r=this.hls.config,n=GI(r.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:t,typeSupported:n,id:this.id,config:vt(r)})}}terminateWorker(){if(this.workerContext){let{worker:t}=this.workerContext;this.workerContext=null,t.removeEventListener("message",this.onWorkerMessage),t.removeEventListener("error",this.onWorkerError),Kae(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{let r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}let t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(t,r,n,i,s,o,a,l,c,u){var d,h;c.transmuxing.start=self.performance.now();let{instanceNo:f,transmuxer:p}=this,g=o?o.start:s.start,v=s.decryptdata,m=this.frag,y=!(m&&s.cc===m.cc),E=!(m&&c.level===m.level),S=m?c.sn-m.sn:-1,b=this.part?c.part-this.part.index:-1,w=S===0&&c.id>1&&c.id===m?.stats.chunkCount,x=!E&&(S===1||S===0&&(b===1||w&&b<=0)),D=self.performance.now();(E||S||s.stats.parsing.start===0)&&(s.stats.parsing.start=D),o&&(b||!x)&&(o.stats.parsing.start=D);let N=!(m&&((d=s.initSegment)==null?void 0:d.url)===((h=m.initSegment)==null?void 0:h.url)),C=new eS(y,x,l,E,g,N);if(!x||y||N){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${s.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===Re.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${y}
        trackSwitch: ${E}
        contiguous: ${x}
        accurateTimeOffset: ${l}
        timeOffset: ${g}
        initSegmentChange: ${N}`);let P=new JT(n,i,r,a,u);this.configureTransmuxer(P)}if(this.frag=s,this.part=o,this.workerContext)this.workerContext.worker.postMessage({instanceNo:f,cmd:"demux",data:t,decryptdata:v,chunkMeta:c,state:C},t instanceof ArrayBuffer?[t]:[]);else if(p){let P=p.push(t,v,c,C);id(P)?P.then(U=>{this.handleTransmuxComplete(U)}).catch(U=>{this.transmuxerError(U,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(P)}}flush(t){t.transmuxing.start=self.performance.now();let{instanceNo:r,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:r,cmd:"flush",chunkMeta:t});else if(n){let i=n.flush(t);id(i)?i.then(s=>{this.handleFlushResult(s,t)}).catch(s=>{this.transmuxerError(s,t,"transmuxer-interface flush error")}):this.handleFlushResult(i,t)}}transmuxerError(t,r,n){this.hls&&(this.error=t,this.hls.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.FRAG_PARSING_ERROR,chunkMeta:r,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:t,err:t,reason:n}))}handleFlushResult(t,r){t.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(r)}configureTransmuxer(t){let{instanceNo:r,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:r,cmd:"configure",config:t}):n&&n.configure(t)}handleTransmuxComplete(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)}},R_=100,tS=class extends ed{constructor(t,r,n){super(t,r,n,"audio-stream-controller",Re.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();let{hls:t}=this;t.on(R.LEVEL_LOADED,this.onLevelLoaded,this),t.on(R.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(R.BUFFER_RESET,this.onBufferReset,this),t.on(R.BUFFER_CREATED,this.onBufferCreated,this),t.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(R.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(R.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(R.FRAG_LOADING,this.onFragLoading,this),t.on(R.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){let{hls:t}=this;t&&(super.unregisterListeners(),t.off(R.LEVEL_LOADED,this.onLevelLoaded,this),t.off(R.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(R.BUFFER_RESET,this.onBufferReset,this),t.off(R.BUFFER_CREATED,this.onBufferCreated,this),t.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(R.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(R.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(R.FRAG_LOADING,this.onFragLoading,this),t.off(R.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(t,{frag:r,id:n,initPTS:i,timescale:s,trackId:o}){if(n===Re.MAIN){let a=r.cc,l=this.fragCurrent;if(this.initPTS[a]={baseTime:i,timescale:s,trackId:o},this.log(`InitPTS for cc: ${a} found from main: ${i/s} (${i}/${s}) trackId: ${o}`),this.mainAnchor=r,this.state===ae.WAITING_INIT_PTS){let c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==a)&&this.syncWithAnchor(r,c?.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==a?(l.abortRequests(),this.syncWithAnchor(r,l)):this.state===ae.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(t,r){var n;let i=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(r&&i?.cc===r.cc)return;let s=(i||t).cc,o=this.getLevelDetails(),a=this.getLoadPosition(),l=x2(o,s,a);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===ae.IDLE&&this.doTickIdle())}startLoad(t,r){if(!this.levels){this.startPosition=t,this.state=ae.STOPPED;return}let n=this.lastCurrentTime;this.stopLoad(),this.setInterval(R_),n>0&&t===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),t=n,this.state=ae.IDLE):this.state=ae.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=r?-1:t,this.tick()}doTick(){switch(this.state){case ae.IDLE:this.doTickIdle();break;case ae.WAITING_TRACK:{let{levels:t,trackId:r}=this,n=t?.[r],i=n?.details;if(i&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(i))break;this.state=ae.WAITING_INIT_PTS}break}case ae.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case ae.WAITING_INIT_PTS:{let t=this.waitingData;if(t){let{frag:r,part:n,cache:i,complete:s}=t,o=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=ae.FRAG_LOADING;let a=i.flush().buffer,l={frag:r,part:n,payload:a,networkDetails:null};this._handleFragmentLoadProgress(l),s&&super._handleFragmentLoadComplete(l)}else o&&o.cc!==t.frag.cc&&this.syncWithAnchor(o,t.frag)}else this.state=ae.IDLE}}this.onTickEnd()}resetLoadingState(){let t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){let{media:t}=this;t!=null&&t.readyState&&(this.lastCurrentTime=t.currentTime)}doTickIdle(){var t;let{hls:r,levels:n,media:i,trackId:s}=this,o=r.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!o.startFragPrefetch)||!(n!=null&&n[s]))return;let a=n[s],l=a.details;if(!l||this.waitForLive(a)||this.waitForCdnTuneIn(l)){this.state=ae.WAITING_TRACK,this.startFragRequested=!1;return}let c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,mt.AUDIO,Re.AUDIO));let u=this.getFwdBufferInfo(c,Re.AUDIO);if(u===null)return;if(!this.switchingTrack&&this._streamEnded(u,l)){r.trigger(R.BUFFER_EOS,{type:"audio"}),this.state=ae.ENDED;return}let d=u.len,h=r.maxBufferLength,f=l.fragments,p=f[0].start,g=this.getLoadPosition(),v=this.flushing?g:u.end;if(this.switchingTrack&&i){let E=g;l.PTSKnown&&E<p&&(u.end>p||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=p+.05)}if(d>=h&&!this.switchingTrack&&v<f[f.length-1].start)return;let m=this.getNextFragment(v,l);if(m&&this.isLoopLoading(m,v)&&(m=this.getNextFragmentLoopLoading(m,l,u,Re.MAIN,h)),!m){this.bufferFlushed=!0;return}let y=((t=this.mainFragLoading)==null?void 0:t.frag)||null;if(!this.audioOnly&&this.startFragRequested&&y&&Zt(m)&&!m.endList&&(!l.live||!this.loadingParts&&v<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(y)===nr.OK&&(this.mainFragLoading=y=null),y&&Zt(y))){if(m.start>y.end){let E=this.fragmentTracker.getFragAtPos(v,Re.MAIN);E&&E.end>y.end&&(y=E,this.mainFragLoading={frag:E,targetBufferTime:null})}if(m.start>y.end)return}this.loadFragment(m,a,v)}onMediaDetaching(t,r){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(t,r)}onAudioTracksUpdated(t,{audioTracks:r}){this.resetTransmuxer(),this.levels=r.map(n=>new Yo(n))}onAudioTrackSwitching(t,r){let n=!!r.url;this.trackId=r.id;let{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?(this.switchingTrack=r,this.flushAudioIfNeeded(r),this.state!==ae.STOPPED&&(this.setInterval(R_),this.state=ae.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=r,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(t,r){this.mainDetails=r.details;let n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(R.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(t,r){var n;let{levels:i}=this,{details:s,id:o,groupId:a,track:l}=r;if(!i){this.warn(`Audio tracks reset while loading track ${o} "${l.name}" of "${a}"`);return}let c=this.mainDetails;if(!c||s.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=r,this.state!==ae.STOPPED&&(this.state=ae.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${o} "${l.name}" of "${a}" loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);let u=i[o],d=0;if(s.live||(n=u.details)!=null&&n.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;if(u.details){var h;d=this.alignPlaylists(s,u.details,(h=this.levelLastLoaded)==null?void 0:h.details)}s.alignedSliding||(G2(s,c),s.alignedSliding||Yp(s,c),d=s.fragmentStart)}u.details=s,this.levelLastLoaded=u,this.startFragRequested||this.setStartPosition(c,d),this.hls.trigger(R.AUDIO_TRACK_UPDATED,{details:s,id:o,groupId:r.groupId}),this.state===ae.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=ae.IDLE),this.tick()}_handleFragmentLoadProgress(t){var r;let n=t.frag,{part:i,payload:s}=t,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}let c=l[a];if(!c){this.warn("Audio track is undefined on fragment load progress");return}let u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}let d=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2",h=this.transmuxer;h||(h=this.transmuxer=new eg(this.hls,Re.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));let f=this.initPTS[n.cc],p=(r=n.initSegment)==null?void 0:r.data;if(f!==void 0){let g=i?i.index:-1,v=g!==-1,m=new Zu(n.level,n.sn,n.stats.chunkCount,s.byteLength,g,v);h.push(s,p,d,"",n,i,u.totalduration,!1,m,f)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${u.startSN} ,${u.endSN}],track ${a}`);let{cache:g}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new Xp,complete:!1};g.push(new Uint8Array(s)),this.state!==ae.STOPPED&&(this.state=ae.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(t){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(t)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(t,r){this.bufferFlushed=this.flushing=!1;let n=r.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(t,r){!this.audioOnly&&r.frag.type===Re.MAIN&&Zt(r.frag)&&(this.mainFragLoading=r,this.state===ae.IDLE&&this.tick())}onFragBuffered(t,r){let{frag:n,part:i}=r;if(n.type!==Re.AUDIO){!this.audioOnly&&n.type===Re.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Zt(n)){this.fragPrevious=n;let s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(R.AUDIO_TRACK_SWITCHED,ct({},s)))}this.fragBufferedComplete(n,i),this.media&&this.tick()}onError(t,r){var n;if(r.fatal){this.state=ae.ERROR;return}switch(r.details){case Q.FRAG_GAP:case Q.FRAG_PARSING_ERROR:case Q.FRAG_DECRYPT_ERROR:case Q.FRAG_LOAD_ERROR:case Q.FRAG_LOAD_TIMEOUT:case Q.KEY_LOAD_ERROR:case Q.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Re.AUDIO,r);break;case Q.AUDIO_TRACK_LOAD_ERROR:case Q.AUDIO_TRACK_LOAD_TIMEOUT:case Q.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===ae.WAITING_TRACK&&((n=r.context)==null?void 0:n.type)===et.AUDIO_TRACK&&(this.state=ae.IDLE);break;case Q.BUFFER_ADD_CODEC_ERROR:case Q.BUFFER_APPEND_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)||this.resetLoadingState();break;case Q.BUFFER_FULL_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Q.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onBufferFlushing(t,{type:r}){r!==mt.VIDEO&&(this.flushing=!0)}onBufferFlushed(t,{type:r}){if(r!==mt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===ae.ENDED&&(this.state=ae.IDLE);let n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,r,Re.AUDIO),this.tick())}}_handleTransmuxComplete(t){var r;let n="audio",{hls:i}=this,{remuxResult:s,chunkMeta:o}=t,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}let{frag:l,part:c,level:u}=a,{details:d}=u,{audio:h,text:f,id3:p,initSegment:g}=s;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=ae.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){let v=l.initSegment||l;if(this.unhandledEncryptionError(g,l))return;this._bufferInitSegment(u,g.tracks,v,o),i.trigger(R.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:n,tracks:g.tracks})}if(h){let{startPTS:v,endPTS:m,startDTS:y,endDTS:E}=h;c&&(c.elementaryStreams[mt.AUDIO]={startPTS:v,endPTS:m,startDTS:y,endDTS:E}),l.setElementaryStreamInfo(mt.AUDIO,v,m,y,E),this.bufferFragmentData(h,l,c,o)}if(p!=null&&(r=p.samples)!=null&&r.length){let v=gt({id:n,frag:l,details:d},p);i.trigger(R.FRAG_PARSING_METADATA,v)}if(f){let v=gt({id:n,frag:l,details:d},f);i.trigger(R.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(t,r,n,i){if(this.state!==ae.PARSING||(r.video&&delete r.video,r.audiovideo&&delete r.audiovideo,!r.audio))return;let s=r.audio;s.id=Re.AUDIO;let o=t.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${o}/${s.codec}]`),o&&o.split(",").length===1&&(s.levelCodec=o),this.hls.trigger(R.BUFFER_CODECS,r);let a=s.initSegment;if(a!=null&&a.byteLength){let l={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:a};this.hls.trigger(R.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(t,r,n){let i=this.fragmentTracker.getState(t);if(this.switchingTrack||i===nr.NOT_LOADED||i===nr.PARTIAL){var s;if(!Zt(t))this._loadInitSegment(t,r);else if((s=r.details)!=null&&s.live&&!this.initPTS[t.cc]){this.log(`Waiting for video PTS in continuity counter ${t.cc} of live stream before loading audio fragment ${t.sn} of level ${this.trackId}`),this.state=ae.WAITING_INIT_PTS;let o=this.mainDetails;o&&o.fragmentStart!==r.details.fragmentStart&&Yp(r.details,o)}else super.loadFragment(t,r,n)}else this.clearTrackerIfNeeded(t)}flushAudioIfNeeded(t){if(this.media&&this.bufferedTrack){let{name:r,lang:n,assocLang:i,characteristics:s,audioCodec:o,channels:a}=this.bufferedTrack;Go({name:r,lang:n,assocLang:i,characteristics:s,audioCodec:o,channels:a},t,Io)||($p(t.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=t)}}completeAudioSwitch(t){let{hls:r}=this;this.flushAudioIfNeeded(t),this.bufferedTrack=t,this.switchingTrack=null,r.trigger(R.AUDIO_TRACK_SWITCHED,ct({},t))}},sd=class extends Jr{constructor(t,r){super(r,t.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=t}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(t,r,n){let i=r?.renditionReports;if(i){let s=-1;for(let o=0;o<i.length;o++){let a=i[o],l;try{l=new self.URL(a.URI,r.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),l=a.URI||""}if(l===t){s=o;break}else l===t.substring(0,l.length)&&(s=o)}if(s!==-1){let o=i[s],a=parseInt(o["LAST-MSN"])||r.lastPartSn,l=parseInt(o["LAST-PART"])||r.lastPartIndex;if(this.hls.config.lowLatencyMode){let u=Math.min(r.age-r.partTarget,r.targetduration);l>=0&&u>r.partTarget&&(l+=1)}let c=n&&jI(n);return new zp(a,l>=0?l:void 0,c)}}}loadPlaylist(t){this.clearTimer()}loadingPlaylist(t,r){this.clearTimer()}shouldLoadPlaylist(t){return this.canLoad&&!!t&&!!t.url&&(!t.details||t.details.live)}getUrlWithDirectives(t,r){if(r)try{return r.addDirectives(t)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return t}playlistLoaded(t,r,n){let{details:i,stats:s}=r,o=self.performance.now(),a=s.loading.first?Math.max(0,o-s.loading.first):0;i.advancedDateTime=Date.now()-a;let l=this.hls.config.timelineOffset;if(l!==i.appliedTimelineOffset){let u=Math.max(l||0,0);i.appliedTimelineOffset=u,i.fragments.forEach(d=>{d.setStart(d.playlistOffset+u)})}if(i.live||n!=null&&n.live){let u="levelInfo"in r?r.levelInfo:r.track;if(i.reloaded(n),n&&i.fragments.length>0){Oae(n,i,this);let y=i.playlistParsingError;if(y){this.warn(y);let E=this.hls;if(!E.config.ignorePlaylistParsingErrors){var c;let{networkDetails:S}=r;E.trigger(R.ERROR,{type:Oe.NETWORK_ERROR,details:Q.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:y,reason:y.message,level:r.level||void 0,parent:(c=i.fragments[0])==null?void 0:c.type,networkDetails:S,stats:s});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=s.loading.start);let d=this.hls.mainForwardBufferInfo,h=d?d.end-d.len:0,f=(i.edge-h)*1e3,p=B2(i,f);if(i.requestScheduled+p<o?i.requestScheduled=o:i.requestScheduled+=p,this.log(`live playlist ${t} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let g,v,m;if(i.canBlockReload&&i.endSN&&i.advanced){let y=this.hls.config.lowLatencyMode,E=i.lastPartSn,S=i.endSN,b=i.lastPartIndex,w=b!==-1,x=E===S;w?x?(v=S+1,m=y?0:b):(v=E,m=y?b+1:i.maxPartIndex):v=S+1;let D=i.age,N=D+i.ageHeader,C=Math.min(N-i.partTarget,i.targetduration*1.5);if(C>0){if(N>i.targetduration*3)this.log(`Playlist last advanced ${D.toFixed(2)}s ago. Omitting segment and part directives.`),v=void 0,m=void 0;else if(n!=null&&n.tuneInGoal&&N-i.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${C} with playlist age: ${i.age}`),C=0;else{let P=Math.floor(C/i.targetduration);if(v+=P,m!==void 0){let U=Math.round(C%i.targetduration/i.partTarget);m+=U}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${D.toFixed(2)}s goal: ${C} skip sn ${P} to part ${m}`)}i.tuneInGoal=C}if(g=this.getDeliveryDirectives(i,r.deliveryDirectives,v,m),y||!x){i.requestScheduled=o,this.loadingPlaylist(u,g);return}}else(i.canBlockReload||i.canSkipUntil)&&(g=this.getDeliveryDirectives(i,r.deliveryDirectives,v,m));g&&v!==void 0&&i.canBlockReload&&(i.requestScheduled=s.loading.first+Math.max(p-a*2,p/2)),this.scheduleLoading(u,g,i)}else this.clearTimer()}scheduleLoading(t,r,n){let i=n||t.details;if(!i){this.loadingPlaylist(t,r);return}let s=self.performance.now(),o=i.requestScheduled;if(s>=o){this.loadingPlaylist(t,r);return}let a=o-s;this.log(`reload live playlist ${t.name||t.bitrate+"bps"} in ${Math.round(a)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(t,r),a)}getDeliveryDirectives(t,r,n,i){let s=jI(t);return r!=null&&r.skip&&t.deltaUpdateFailed&&(n=r.msn,i=r.part,s=rp.No),new zp(n,i,s)}checkRetry(t){let r=t.details,n=Gp(t),i=t.errorAction,{action:s,retryCount:o=0,retryConfig:a}=i||{},l=!!i&&!!a&&(s===mr.RetryRequest||!i.resolved&&s===mr.SendAlternateToPenaltyBox);if(l){var c;if(o>=a.maxNumRetry)return!1;if(n&&(c=t.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${r}" without delivery-directives`),this.loadPlaylist();else{let u=gb(a,o);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${r}" in ${u}ms`)}t.levelRetry=!0,i.resolved=!0}return l}};function aB(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!od(e[r].attrs,t[r].attrs))return!1;return!0}function od(e,t,r){let n=e["STABLE-RENDITION-ID"];return n&&!r?n===t["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>e[i]!==t[i])}function rS(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}var nS=class extends sd{constructor(t){super(t,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){let{hls:t}=this;t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.MANIFEST_PARSED,this.onManifestParsed,this),t.on(R.LEVEL_LOADING,this.onLevelLoading,this),t.on(R.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(R.ERROR,this.onError,this)}unregisterListeners(){let{hls:t}=this;t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.MANIFEST_PARSED,this.onManifestParsed,this),t.off(R.LEVEL_LOADING,this.onLevelLoading,this),t.off(R.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(R.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(t,r){this.tracks=r.audioTracks||[]}onAudioTrackLoaded(t,r){let{id:n,groupId:i,details:s}=r,o=this.tracksInGroup[n];if(!o||o.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${o?.groupId}`);return}let a=o.details;o.details=r.details,this.log(`Audio track ${n} "${o.name}" lang:${o.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,a)}onLevelLoading(t,r){this.switchLevel(r.level)}onLevelSwitching(t,r){this.switchLevel(r.level)}switchLevel(t){let r=this.hls.levels[t];if(!r)return;let n=r.audioGroups||null,i=this.groupIds,s=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(a=>i?.indexOf(a)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;let a=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(h=>h.default)&&(this.selectDefaultTrack=!1),a.forEach((h,f)=>{h.id=f});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;let l=this.hls.config.audioPreference;if(!s&&l){let h=vi(l,a,Io);if(h>-1)s=a[h];else{let f=vi(l,this.tracks);s=this.tracks[f]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));let u={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(R.AUDIO_TRACKS_UPDATED,u);let d=this.trackId;if(c!==-1&&d===-1)this.setAudioTrack(c);else if(a.length&&d===-1){var o;let h=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(h.message),this.hls.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}}onError(t,r){r.fatal||!r.context||r.context.type===et.AUDIO_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}setAudioOption(t){let r=this.hls;if(r.config.audioPreference=t,t){let n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){let i=this.currentTrack;if(i&&Go(t,i,Io))return i;let s=vi(t,this.tracksInGroup,Io);if(s>-1){let o=this.tracksInGroup[s];return this.setAudioTrack(s),o}else if(i){let o=r.loadLevel;o===-1&&(o=r.firstAutoLevel);let a=cae(t,r.levels,n,o,Io);if(a===-1)return null;r.nextLoadLevel=a}if(t.channels||t.audioCodec){let o=vi(t,n);if(o>-1)return n[o]}}}return null}setAudioTrack(t){let r=this.tracksInGroup;if(t<0||t>=r.length){this.warn(`Invalid audio track id: ${t}`);return}this.selectDefaultTrack=!1;let n=this.currentTrack,i=r[t],s=i.details&&!i.details.live;if(t===this.trackId&&i===n&&s||(this.log(`Switching to audio-track ${t} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=t,this.currentTrack=i,this.hls.trigger(R.AUDIO_TRACK_SWITCHING,ct({},i)),s))return;let o=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(o)}findTrackId(t){let r=this.tracksInGroup;for(let n=0;n<r.length;n++){let i=r[n];if(!(this.selectDefaultTrack&&!i.default)&&(!t||Go(t,i,Io)))return n}if(t){let{name:n,lang:i,assocLang:s,characteristics:o,audioCodec:a,channels:l}=t;for(let c=0;c<r.length;c++){let u=r[c];if(Go({name:n,lang:i,assocLang:s,characteristics:o,audioCodec:a,channels:l},u,Io))return c}for(let c=0;c<r.length;c++){let u=r[c];if(od(t.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<r.length;c++){let u=r[c];if(od(t.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(t){super.loadPlaylist();let r=this.currentTrack;this.shouldLoadPlaylist(r)&&$p(r.url,this.hls)&&this.scheduleLoading(r,t)}loadingPlaylist(t,r){super.loadingPlaylist(t,r);let n=t.id,i=t.groupId,s=this.getUrlWithDirectives(t.url,r),o=t.details,a=o?.age;this.log(`Loading audio-track ${n} "${t.name}" lang:${t.lang} group:${i}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${s}`),this.hls.trigger(R.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:r||null,track:t})}},iS=class{constructor(t){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=t}destroy(){this.tracks=this.queues=null}append(t,r,n){if(this.queues===null||this.tracks===null)return;let i=this.queues[r];i.push(t),i.length===1&&!n&&this.executeNext(r)}appendBlocker(t){return new Promise(r=>{let n={label:"async-blocker",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,t)})}prependBlocker(t){return new Promise(r=>{if(this.queues){let n={label:"async-blocker-prepend",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[t].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(t=>{var r;let n=(r=t[0])==null?void 0:r.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(t[0].execute(),t.splice(0,1))})}unblockAudio(t){this.queues!==null&&this.queues.audio[0]===t&&this.shiftAndExecuteNext("audio")}executeNext(t){if(this.queues===null||this.tracks===null)return;let r=this.queues[t];if(r.length){let i=r[0];try{i.execute()}catch(s){var n;if(i.onError(s),this.queues===null||this.tracks===null)return;let o=(n=this.tracks[t])==null?void 0:n.buffer;o!=null&&o.updating||this.shiftAndExecuteNext(t)}}}shiftAndExecuteNext(t){this.queues!==null&&(this.queues[t].shift(),this.executeNext(t))}current(t){var r;return((r=this.queues)==null?void 0:r[t][0])||null}toString(){let{queues:t,tracks:r}=this;return t===null||r===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(t){var r,n;return(r=this.queues)!=null&&r[t]||(n=this.tracks)!=null&&n[t]?`${t}: (${this.listSbInfo(t)}) ${this.listOps(t)}`:""}listSbInfo(t){var r;let n=(r=this.tracks)==null?void 0:r[t],i=n?.buffer;return i?`SourceBuffer${i.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(t){var r;return((r=this.queues)==null?void 0:r[t].map(n=>n.label).join(", "))||""}},I_=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,lB="HlsJsTrackRemovedError",sS=class extends Error{constructor(t){super(t),this.name=lB}},oS=class extends Jr{constructor(t,r){super("buffer-controller",t.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{let{media:i,mediaSource:s}=this;n&&this.log("Media source opened"),!(!i||!s)&&(s.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(R.MEDIA_ATTACHED,{media:i,mediaSource:s}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{let{mediaSrc:n,_objectUrl:i}=this;n!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=t,this.fragmentTracker=r,this.appendSource=woe(Ks(t.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){let{hls:t}=this;t.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.MANIFEST_PARSED,this.onManifestParsed,this),t.on(R.BUFFER_RESET,this.onBufferReset,this),t.on(R.BUFFER_APPENDING,this.onBufferAppending,this),t.on(R.BUFFER_CODECS,this.onBufferCodecs,this),t.on(R.BUFFER_EOS,this.onBufferEos,this),t.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(R.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(R.FRAG_PARSED,this.onFragParsed,this),t.on(R.FRAG_CHANGED,this.onFragChanged,this),t.on(R.ERROR,this.onError,this)}unregisterListeners(){let{hls:t}=this;t.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.MANIFEST_PARSED,this.onManifestParsed,this),t.off(R.BUFFER_RESET,this.onBufferReset,this),t.off(R.BUFFER_APPENDING,this.onBufferAppending,this),t.off(R.BUFFER_CODECS,this.onBufferCodecs,this),t.off(R.BUFFER_EOS,this.onBufferEos,this),t.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(R.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(R.FRAG_PARSED,this.onFragParsed,this),t.off(R.FRAG_CHANGED,this.onFragChanged,this),t.off(R.ERROR,this.onError,this)}transferMedia(){let{media:t,mediaSource:r}=this;if(!t)return null;let n={};if(this.operationQueue){let s=this.isUpdating();s||this.operationQueue.removeBlockers();let o=this.isQueued();(s||o)&&this.warn(`Transfering MediaSource with${o?" operations in queue":""}${s?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}let i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===r?gt(n,i.tracks):this.sourceBuffers.forEach(s=>{let[o]=s;o&&(n[o]=gt({},this.tracks[o]),this.removeBuffer(o)),s[0]=s[1]=null}),{media:t,mediaSource:r,tracks:n}}initTracks(){let t={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=t,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(t,r){var n;let i=2;(r.audio&&!r.video||!r.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(t,r){let n=this.media=r.media;this.transferData=this.overrides=void 0;let i=Ks(this.appendSource);if(i){let s=!!r.mediaSource;(s||r.overrides)&&(this.transferData=r,this.overrides=r.overrides);let o=this.mediaSource=r.mediaSource||new i;if(this.assignMediaSource(o),s)this._objectUrl=n.src,this.attachTransferred();else{let a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{n.removeAttribute("src");let l=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||l&&o instanceof l,__(n),Lle(n,a),n.load()}catch{n.src=a}else n.src=a}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(t){var r,n;this.log(`${((r=this.transferData)==null?void 0:r.mediaSource)===t?"transferred":"created"} media source: ${(n=t.constructor)==null?void 0:n.name}`),t.addEventListener("sourceopen",this._onMediaSourceOpen),t.addEventListener("sourceended",this._onMediaSourceEnded),t.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.addEventListener("startstreaming",this._onStartStreaming),t.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){let t=this.media,r=this.transferData;if(!r||!t)return;let n=this.tracks,i=r.tracks,s=i?Object.keys(i):null,o=s?s.length:0,a=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&s&&o){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${vt(n,(l,c)=>l==="initSegment"?void 0:c)};
transfer tracks: ${vt(i,(l,c)=>l==="initSegment"?void 0:c)}}`),!u2(i,n)){r.mediaSource=null,r.tracks=void 0;let l=t.currentTime,c=this.details,u=Math.max(l,c?.fragments[0].start||0);if(u-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${u}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(n)}") start time: ${u} currentTime: ${l}`),this.onMediaDetaching(R.MEDIA_DETACHING,{}),this.onMediaAttaching(R.MEDIA_ATTACHING,r),t.currentTime=u;return}this.transferData=void 0,s.forEach(l=>{let c=l,u=i[c];if(u){let d=u.buffer;if(d){let h=this.fragmentTracker,f=u.id;if(h.hasFragments(f)||h.hasParts(f)){let v=Qe.getBuffered(d);h.detectEvictedFragments(c,v,f,null,!0)}let p=C0(c),g=[c,d];this.sourceBuffers[p]=g,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,u)}}}),a(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),a()}get mediaSourceOpenOrEnded(){var t;let r=(t=this.mediaSource)==null?void 0:t.readyState;return r==="open"||r==="ended"}onMediaDetaching(t,r){let n=!!r.transferMedia;this.transferData=this.overrides=void 0;let{media:i,mediaSource:s,_objectUrl:o}=this;if(s){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([a])=>{a&&this.removeBuffer(a)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){let a=s.readyState==="open";try{let l=s.sourceBuffers;for(let c=l.length;c--;)a&&l[c].abort(),s.removeSourceBuffer(l[c]);a&&s.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}s.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("sourceended",this._onMediaSourceEnded),s.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(o&&self.URL.revokeObjectURL(o),this.mediaSrc===o?(i.removeAttribute("src"),this.appendSource&&__(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(R.MEDIA_DETACHED,r)}onBufferReset(){this.sourceBuffers.forEach(([t])=>{t&&this.resetBuffer(t)}),this.initTracks()}resetBuffer(t){var r;let n=(r=this.tracks[t])==null?void 0:r.buffer;if(this.removeBuffer(t),n)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(s){this.warn(`onBufferReset ${t}`,s)}delete this.tracks[t]}removeBuffer(t){this.removeBufferListeners(t),this.sourceBuffers[C0(t)]=[null,null];let r=this.tracks[t];r&&(r.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new iS(this.tracks)}onBufferCodecs(t,r){var n;let i=this.tracks,s=Object.keys(r);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);let o="audiovideo"in r&&(i.audio||i.video)||i.audiovideo&&("audio"in r||"video"in r),a=!o&&this.sourceBufferCount&&this.media&&s.some(l=>!i[l]);if(o||a){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${s}" SourceBuffers`);return}s.forEach(l=>{var c,u;let d=r[l],{id:h,codec:f,levelCodec:p,container:g,metadata:v,supplemental:m}=d,y=i[l],E=(c=this.transferData)==null||(c=c.tracks)==null?void 0:c[l],S=E!=null&&E.buffer?E:y,b=S?.pendingCodec||S?.codec,w=S?.levelCodec;y||(y=i[l]={buffer:void 0,listeners:[],codec:f,supplemental:m,container:g,levelCodec:p,metadata:v,id:h});let x=tp(b,w),D=x?.replace(I_,"$1"),N=tp(f,p),C=(u=N)==null?void 0:u.replace(I_,"$1");N&&x&&D!==C&&(l.slice(0,5)==="audio"&&(N=Up(N,this.appendSource)),this.log(`switching codec ${b} to ${N}`),N!==(y.pendingCodec||y.codec)&&(y.pendingCodec=N),y.container=g,this.appendChangeType(l,g,N))}),(this.tracksReady||this.sourceBufferCount)&&(r.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!r.video&&((n=r.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((t,r)=>{let n=this.tracks[r];return t[r]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},t},{})}appendChangeType(t,r,n){let i=`${r};codecs=${n}`,s={label:`change-type=${i}`,execute:()=>{let o=this.tracks[t];if(o){let a=o.buffer;a!=null&&a.changeType&&(this.log(`changing ${t} sourceBuffer type to ${i}`),a.changeType(i),o.codec=n,o.container=r)}this.shiftAndExecuteNext(t)},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn(`Failed to change ${t} SourceBuffer type`,o)}};this.append(s,t,this.isPending(this.tracks[t]))}blockAudio(t){var r;let n=t.start,i=n+t.duration*.05;if(((r=this.fragmentTracker.getAppendedFrag(n,Re.MAIN))==null?void 0:r.gap)===!0)return;let s={label:"block-audio",execute:()=>{var o;let a=this.tracks.video;(this.lastVideoAppendEnd>i||a!=null&&a.buffer&&Qe.isBuffered(a.buffer,i)||((o=this.fragmentTracker.getAppendedFrag(i,Re.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:s,frag:t},this.append(s,"audio",!0)}unblockAudio(){let{blockedAudioAppend:t,operationQueue:r}=this;t&&r&&(this.blockedAudioAppend=null,r.unblockAudio(t.op))}onBufferAppending(t,r){let{tracks:n}=this,{data:i,type:s,parent:o,frag:a,part:l,chunkMeta:c,offset:u}=r,d=c.buffering[s],{sn:h,cc:f}=a,p=self.performance.now();d.start=p;let g=a.stats.buffering,v=l?l.stats.buffering:null;g.start===0&&(g.start=p),v&&v.start===0&&(v.start=p);let m=n.audio,y=!1;s==="audio"&&m?.container==="audio/mpeg"&&(y=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);let E=n.video,S=E?.buffer;if(S&&h!=="initSegment"){let x=l||a,D=this.blockedAudioAppend;if(s==="audio"&&o!=="main"&&!this.blockedAudioAppend&&!(E.ending||E.ended)){let N=x.start+x.duration*.05,C=S.buffered,P=this.currentOp("video");!C.length&&!P?this.blockAudio(x):!P&&!Qe.isBuffered(S,N)&&this.lastVideoAppendEnd<N&&this.blockAudio(x)}else if(s==="video"){let N=x.end;if(D){let C=D.frag.start;(N>C||N<this.lastVideoAppendEnd||Qe.isBuffered(S,C))&&this.unblockAudio()}this.lastVideoAppendEnd=N}}let b=(l||a).start,w={label:`append-${s}`,execute:()=>{var x;d.executeStart=self.performance.now();let D=(x=this.tracks[s])==null?void 0:x.buffer;D&&(y?this.updateTimestampOffset(D,b,.1,s,h,f):u!==void 0&&ke(u)&&this.updateTimestampOffset(D,u,1e-6,s,h,f)),this.appendExecutor(i,s)},onStart:()=>{},onComplete:()=>{let x=self.performance.now();d.executeEnd=d.end=x,g.first===0&&(g.first=x),v&&v.first===0&&(v.first=x);let D={};this.sourceBuffers.forEach(([N,C])=>{N&&(D[N]=Qe.getBuffered(C))}),this.appendErrors[s]=0,s==="audio"||s==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(R.BUFFER_APPENDED,{type:s,frag:a,part:l,chunkMeta:c,parent:a.type,timeRanges:D})},onError:x=>{var D;let N={type:Oe.MEDIA_ERROR,parent:a.type,details:Q.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:a,part:l,chunkMeta:c,error:x,err:x,fatal:!1},C=(D=this.media)==null?void 0:D.error;if(x.code===DOMException.QUOTA_EXCEEDED_ERR||x.name=="QuotaExceededError"||"quota"in x)N.details=Q.BUFFER_FULL_ERROR;else if(x.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!C)N.errorAction=Sl(!0);else if(x.name===lB&&this.sourceBufferCount===0)N.errorAction=Sl(!0);else{let P=++this.appendErrors[s];this.warn(`Failed ${P}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer (${C||"no media error"})`),(P>=this.hls.config.appendErrorMaxRetry||C)&&(N.fatal=!0)}this.hls.trigger(R.ERROR,N)}};this.log(`queuing "${s}" append sn: ${h}${l?" p: "+l.index:""} of ${a.type===Re.MAIN?"level":"track"} ${a.level} cc: ${f}`),this.append(w,s,this.isPending(this.tracks[s]))}getFlushOp(t,r,n){return this.log(`queuing "${t}" remove ${r}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(t,r,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(R.BUFFER_FLUSHED,{type:t})},onError:i=>{this.warn(`Failed to remove ${r}-${n} from "${t}" SourceBuffer`,i)}}}onBufferFlushing(t,r){let{type:n,startOffset:i,endOffset:s}=r;n?this.append(this.getFlushOp(n,i,s),n):this.sourceBuffers.forEach(([o])=>{o&&this.append(this.getFlushOp(o,i,s),o)})}onFragParsed(t,r){let{frag:n,part:i}=r,s=[],o=i?i.elementaryStreams:n.elementaryStreams;o[mt.AUDIOVIDEO]?s.push("audiovideo"):(o[mt.AUDIO]&&s.push("audio"),o[mt.VIDEO]&&s.push("video"));let a=()=>{let l=self.performance.now();n.stats.buffering.end=l,i&&(i.stats.buffering.end=l);let c=i?i.stats:n.stats;this.hls.trigger(R.FRAG_BUFFERED,{frag:n,part:i,stats:c,id:n.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(a,s).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(t,r){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([t])=>{if(t){let r=this.tracks[t];if(r)return!r.ended||r.ending}return!1})}onBufferEos(t,r){var n;this.sourceBuffers.forEach(([s])=>{if(s){let o=this.tracks[s];(!r.type||r.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} buffer reached EOS`)))}});let i=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([s])=>{var o;return s&&!((o=this.tracks[s])!=null&&o.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();let{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream(),this.hls.trigger(R.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(R.BUFFERED_TO_END,void 0)):r.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([t])=>{if(t!==null){let r=this.tracks[t];r&&(r.ending=!1)}})}onLevelUpdated(t,{details:r}){r.fragments.length&&(this.details=r,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{let t=this.getDurationAndRange();t&&this.updateMediaSource(t)})}onError(t,r){if(r.details===Q.BUFFER_APPEND_ERROR&&r.frag){var n;let i=(n=r.errorAction)==null?void 0:n.nextAutoLevel;ke(i)&&i!==r.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){let{hls:t,details:r,media:n}=this;if(!n||r===null||!this.sourceBufferCount)return;let i=t.config,s=n.currentTime,o=r.levelTargetDuration,a=r.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(ke(a)&&a>=0){let c=Math.max(a,o),u=Math.floor(s/o)*o-c;this.flushBackBuffer(s,o,u)}let l=i.frontBufferFlushThreshold;if(ke(l)&&l>0){let c=Math.max(i.maxBufferLength,l),u=Math.max(c,o),d=Math.floor(s/o)*o+u;this.flushFrontBuffer(s,o,d)}}flushBackBuffer(t,r,n){this.sourceBuffers.forEach(([i,s])=>{if(s){let a=Qe.getBuffered(s);if(a.length>0&&n>a.start(0)){var o;this.hls.trigger(R.BACK_BUFFER_REACHED,{bufferEnd:n});let l=this.tracks[i];if((o=this.details)!=null&&o.live)this.hls.trigger(R.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(l!=null&&l.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(R.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:i})}}})}flushFrontBuffer(t,r,n){this.sourceBuffers.forEach(([i,s])=>{if(s){let o=Qe.getBuffered(s),a=o.length;if(a<2)return;let l=o.start(a-1),c=o.end(a-1);if(n>l||t>=l&&t<=c)return;this.hls.trigger(R.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:i})}})}getDurationAndRange(){var t;let{details:r,mediaSource:n}=this;if(!r||!this.media||n?.readyState!=="open")return null;let i=r.edge;if(r.live&&this.hls.config.liveDurationInfinity){if(r.fragments.length&&n.setLiveSeekableRange){let l=Math.max(0,r.fragmentStart),c=Math.max(l,i);return{duration:1/0,start:l,end:c}}return{duration:1/0}}let s=(t=this.overrides)==null?void 0:t.duration;if(s)return ke(s)?{duration:s}:null;let o=this.media.duration,a=ke(n.duration)?n.duration:0;return i>a&&i>o||!ke(o)?{duration:i}:null}updateMediaSource({duration:t,start:r,end:n}){let i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==t&&(ke(t)&&this.log(`Updating MediaSource duration to ${t.toFixed(3)}`),i.duration=t),r!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${r}-${n}.`),i.setLiveSeekableRange(r,n)))}get tracksReady(){let t=this.pendingTrackCount;return t>0&&(t>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){let{bufferCodecEventsTotal:t,pendingTrackCount:r,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${r} codec events expected: ${t}) ${vt(n)}`),this.tracksReady){var i;let s=(i=this.transferData)==null?void 0:i.tracks;s&&Object.keys(s).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){let t={};this.sourceBuffers.forEach(([r,n])=>{if(r){let i=this.tracks[r];t[r]={buffer:n,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(R.BUFFER_CREATED,{tracks:t}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([r])=>{this.executeNext(r)})}else{let t=new Error("could not create source buffer for media codec(s)");this.hls.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:t,reason:t.message})}}createSourceBuffers(){let{tracks:t,sourceBuffers:r,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(let s in t){let o=s,a=t[o];if(this.isPending(a)){let l=this.getTrackCodec(a,o),c=`${a.container};codecs=${l}`;a.codec=l,this.log(`creating sourceBuffer(${c})${this.currentOp(o)?" Queued":""} ${vt(a)}`);try{let u=n.addSourceBuffer(c),d=C0(o),h=[o,u];r[d]=h,a.buffer=u}catch(u){var i;this.error(`error while trying to add sourceBuffer: ${u.message}`),this.shiftAndExecuteNext(o),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[o],this.hls.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,sourceBufferName:o,mimeType:c,parent:a.id});return}this.trackSourceBuffer(o,a)}}this.bufferCreated()}getTrackCodec(t,r){let n=t.supplemental,i=t.codec;n&&(r==="video"||r==="audiovideo")&&Yu(n,"video")&&(i=joe(i,n));let s=tp(i,t.levelCodec);return s?r.slice(0,5)==="audio"?Up(s,this.appendSource):s:""}trackSourceBuffer(t,r){let n=r.buffer;if(!n)return;let i=this.getTrackCodec(r,t);this.tracks[t]={buffer:n,codec:i,container:r.container,levelCodec:r.levelCodec,supplemental:r.supplemental,metadata:r.metadata,id:r.id,listeners:[]},this.removeBufferListeners(t),this.addBufferListener(t,"updatestart",this.onSBUpdateStart),this.addBufferListener(t,"updateend",this.onSBUpdateEnd),this.addBufferListener(t,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(t,"bufferedchange",(s,o)=>{let a=o.removedRanges;a!=null&&a.length&&this.hls.trigger(R.BUFFER_FLUSHED,{type:s})})}get mediaSrc(){var t,r;let n=((t=this.media)==null||(r=t.querySelector)==null?void 0:r.call(t,"source"))||this.media;return n?.src}onSBUpdateStart(t){let r=this.currentOp(t);r&&r.onStart()}onSBUpdateEnd(t){var r;if(((r=this.mediaSource)==null?void 0:r.readyState)==="closed"){this.resetBuffer(t);return}let n=this.currentOp(t);n&&(n.onComplete(),this.shiftAndExecuteNext(t))}onSBUpdateError(t,r){var n;let i=new Error(`${t} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,r),this.hls.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.BUFFER_APPENDING_ERROR,sourceBufferName:t,error:i,fatal:!1});let s=this.currentOp(t);s&&s.onError(i)}updateTimestampOffset(t,r,n,i,s,o){let a=r-t.timestampOffset;Math.abs(a)>=n&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${r} (sn: ${s} cc: ${o})`),t.timestampOffset=r)}removeExecutor(t,r,n){let{media:i,mediaSource:s}=this,o=this.tracks[t],a=o?.buffer;if(!i||!s||!a){this.warn(`Attempting to remove from the ${t} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(t);return}let l=ke(i.duration)?i.duration:1/0,c=ke(s.duration)?s.duration:1/0,u=Math.max(0,r),d=Math.min(n,l,c);d>u&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${u},${d}] from the ${t} SourceBuffer`),a.remove(u,d)):this.shiftAndExecuteNext(t)}appendExecutor(t,r){let n=this.tracks[r],i=n?.buffer;if(!i)throw new sS(`Attempting to append to the ${r} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,i.appendBuffer(t)}blockUntilOpen(t){if(this.isUpdating()||this.isQueued())this.blockBuffers(t).catch(r=>{this.warn(`SourceBuffer blocked callback ${r}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{t()}catch(r){this.warn(`Callback run without blocking ${this.operationQueue} ${r}`)}}isUpdating(){return this.sourceBuffers.some(([t,r])=>t&&r.updating)}isQueued(){return this.sourceBuffers.some(([t])=>t&&!!this.currentOp(t))}isPending(t){return!!t&&!t.buffer}blockBuffers(t,r=this.sourceBufferTypes){if(!r.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(t);let{operationQueue:n}=this,i=r.map(s=>this.appendBlocker(s));return r.length>1&&this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(s=>{n===this.operationQueue&&(t(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(t){t.forEach(r=>{var n;let i=(n=this.tracks[r])==null?void 0:n.buffer;!i||i.updating||this.shiftAndExecuteNext(r)})}append(t,r,n){this.operationQueue&&this.operationQueue.append(t,r,n)}appendBlocker(t){if(this.operationQueue)return this.operationQueue.appendBlocker(t)}currentOp(t){return this.operationQueue?this.operationQueue.current(t):null}executeNext(t){t&&this.operationQueue&&this.operationQueue.executeNext(t)}shiftAndExecuteNext(t){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(t)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((t,r)=>t+(this.isPending(this.tracks[r])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((t,[r])=>t+(r?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([t])=>t).filter(t=>!!t)}addBufferListener(t,r,n){let i=this.tracks[t];if(!i)return;let s=i.buffer;if(!s)return;let o=n.bind(this,t);i.listeners.push({event:r,listener:o}),s.addEventListener(r,o)}removeBufferListeners(t){let r=this.tracks[t];if(!r)return;let n=r.buffer;n&&(r.listeners.forEach(i=>{n.removeEventListener(i.event,i.listener)}),r.listeners.length=0)}};function __(e){let t=e.querySelectorAll("source");[].slice.call(t).forEach(r=>{e.removeChild(r)})}function Lle(e,t){let r=self.document.createElement("source");r.type="video/mp4",r.src=t,e.appendChild(r)}function C0(e){return e==="audio"?1:0}var aS=class e{constructor(t){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(t){this.streamController=t}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){let{hls:t}=this;t.on(R.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(R.MANIFEST_PARSED,this.onManifestParsed,this),t.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(R.BUFFER_CODECS,this.onBufferCodecs,this),t.on(R.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){let{hls:t}=this;t.off(R.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(R.MANIFEST_PARSED,this.onManifestParsed,this),t.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(R.BUFFER_CODECS,this.onBufferCodecs,this),t.off(R.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(t,r){let n=this.hls.levels[r.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(t,r){this.media=r.media instanceof HTMLVideoElement?r.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(t,r){let n=this.hls;this.restrictedLevels=[],this.firstLevel=r.firstLevel,n.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onLevelsUpdated(t,r){this.timer&&ke(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(t,r){this.hls.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}let t=this.hls.levels;if(t.length){let r=this.hls,n=this.getMaxLevel(t.length-1);n!==this.autoLevelCapping&&r.logger.log(`Setting autoLevelCapping to ${n}: ${t[n].height}p@${t[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),r.autoLevelCapping=n,r.autoLevelEnabled&&r.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=r.autoLevelCapping}}}getMaxLevel(t){let r=this.hls.levels;if(!r.length)return-1;let n=r.filter((i,s)=>this.isLevelAllowed(i)&&s<=t);return this.clientRect=null,e.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;let t=this.media,r={width:0,height:0};if(t){let n=t.getBoundingClientRect();r.width=n.width,r.height=n.height,!r.width&&!r.height&&(r.width=n.right-n.left||t.width||0,r.height=n.bottom-n.top||t.height||0)}return this.clientRect=r,r}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let t=1;if(!this.hls.config.ignoreDevicePixelRatio)try{t=self.devicePixelRatio}catch{}return Math.min(t,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(t){return!this.restrictedLevels.some(r=>t.bitrate===r.bitrate&&t.width===r.width&&t.height===r.height)}static getMaxLevelByMediaSize(t,r,n){if(!(t!=null&&t.length))return-1;let i=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0,s=t.length-1,o=Math.max(r,n);for(let a=0;a<t.length;a+=1){let l=t[a];if((l.width>=o||l.height>=o)&&i(l,t[a+1])){s=a;break}}return s}},Ple={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Wr=Ple,Dle={HLS:"h"},Ole=Dle,es=class e{constructor(t,r){Array.isArray(t)&&(t=t.map(n=>n instanceof e?n:new e(n))),this.value=t,this.params=r}},Nle="Dict";function Mle(e){return Array.isArray(e)?JSON.stringify(e):e instanceof Map?"Map{}":e instanceof Set?"Set{}":typeof e=="object"?JSON.stringify(e):String(e)}function Fle(e,t,r,n){return new Error(`failed to ${e} "${Mle(t)}" as ${r}`,{cause:n})}function bi(e,t,r){return Fle("serialize",e,t,r)}var tg=class{constructor(t){this.description=t}},L_="Bare Item",Ble="Boolean";function Ule(e){if(typeof e!="boolean")throw bi(e,Ble);return e?"?1":"?0"}function Hle(e){return btoa(String.fromCharCode(...e))}var zle="Byte Sequence";function $le(e){if(ArrayBuffer.isView(e)===!1)throw bi(e,zle);return`:${Hle(e)}:`}var Gle="Integer";function jle(e){return e<-999999999999999||999999999999999<e}function cB(e){if(jle(e))throw bi(e,Gle);return e.toString()}function Vle(e){return`@${cB(e.getTime()/1e3)}`}function uB(e,t){if(e<0)return-uB(-e,t);let r=Math.pow(10,t);if(Math.abs(e*r%1-.5)<Number.EPSILON){let n=Math.floor(e*r);return(n%2===0?n:n+1)/r}else return Math.round(e*r)/r}var Wle="Decimal";function qle(e){let t=uB(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw bi(e,Wle);let r=t.toString();return r.includes(".")?r:`${r}.0`}var Kle="String",Yle=/[\x00-\x1f\x7f]+/;function Xle(e){if(Yle.test(e))throw bi(e,Kle);return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Qle(e){return e.description||e.toString().slice(7,-1)}var Zle="Token";function P_(e){let t=Qle(e);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t)===!1)throw bi(t,Zle);return t}function lS(e){switch(typeof e){case"number":if(!ke(e))throw bi(e,L_);return Number.isInteger(e)?cB(e):qle(e);case"string":return Xle(e);case"symbol":return P_(e);case"boolean":return Ule(e);case"object":if(e instanceof Date)return Vle(e);if(e instanceof Uint8Array)return $le(e);if(e instanceof tg)return P_(e);default:throw bi(e,L_)}}var Jle="Key";function cS(e){if(/^[a-z*][a-z0-9\-_.*]*$/.test(e)===!1)throw bi(e,Jle);return e}function Ab(e){return e==null?"":Object.entries(e).map(([t,r])=>r===!0?`;${cS(t)}`:`;${cS(t)}=${lS(r)}`).join("")}function dB(e){return e instanceof es?`${lS(e.value)}${Ab(e.params)}`:lS(e)}function ece(e){return`(${e.value.map(dB).join(" ")})${Ab(e.params)}`}function tce(e,t={whitespace:!0}){if(typeof e!="object"||e==null)throw bi(e,Nle);let r=e instanceof Map?e.entries():Object.entries(e),n=t!=null&&t.whitespace?" ":"";return Array.from(r).map(([i,s])=>{s instanceof es||(s=new es(s));let o=cS(i);return s.value===!0?o+=Ab(s.params):(o+="=",Array.isArray(s.value)?o+=ece(s):o+=dB(s)),o}).join(`,${n}`)}function hB(e,t){return tce(e,t)}var li="CMCD-Object",$t="CMCD-Request",Co="CMCD-Session",Ns="CMCD-Status",rce={br:li,ab:li,d:li,ot:li,tb:li,tpb:li,lb:li,tab:li,lab:li,url:li,pb:$t,bl:$t,tbl:$t,dl:$t,ltc:$t,mtp:$t,nor:$t,nrr:$t,rc:$t,sn:$t,sta:$t,su:$t,ttfb:$t,ttfbb:$t,ttlb:$t,cmsdd:$t,cmsds:$t,smrt:$t,df:$t,cs:$t,ts:$t,cid:Co,pr:Co,sf:Co,sid:Co,st:Co,v:Co,msd:Co,bs:Ns,bsd:Ns,cdn:Ns,rtp:Ns,bg:Ns,pt:Ns,ec:Ns,e:Ns},nce={REQUEST:$t};function ice(e){return Object.keys(e).reduce((t,r)=>{var n;return(n=e[r])===null||n===void 0||n.forEach(i=>t[i]=r),t},{})}function sce(e,t){let r={};if(!e)return r;let n=Object.keys(e),i=t?ice(t):{};return n.reduce((s,o)=>{var a;let l=rce[o]||i[o]||nce.REQUEST,c=(a=s[l])!==null&&a!==void 0?a:s[l]={};return c[o]=e[o],s},r)}function oce(e){return["ot","sf","st","e","sta"].includes(e)}function ace(e){return typeof e=="number"?ke(e):e!=null&&e!==""&&e!==!1}var fB="event";function lce(e,t){let r=new URL(e),n=new URL(t);if(r.origin!==n.origin)return e;let i=r.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")+r.search+r.hash}var sp=e=>Math.round(e),uS=(e,t)=>Array.isArray(e)?e.map(r=>uS(r,t)):e instanceof es&&typeof e.value=="string"?new es(uS(e.value,t),e.params):(t.baseUrl&&(e=lce(e,t.baseUrl)),t.version===1?encodeURIComponent(e):e),Of=e=>sp(e/100)*100,cce=(e,t)=>{let r=e;return t.version>=2&&(e instanceof es&&typeof e.value=="string"?r=new es([e]):typeof e=="string"&&(r=[e])),uS(r,t)},uce={br:sp,d:sp,bl:Of,dl:Of,mtp:Of,nor:cce,rtp:Of,tb:sp},pB="request",gB="response",kb=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],dce=["e"],hce=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Yg(e){return hce.test(e)}function fce(e){return kb.includes(e)||dce.includes(e)||Yg(e)}var mB=["d","dl","nor","ot","rtp","su"];function pce(e){return kb.includes(e)||mB.includes(e)||Yg(e)}var gce=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function mce(e){return kb.includes(e)||mB.includes(e)||gce.includes(e)||Yg(e)}var vce=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function yce(e){return vce.includes(e)||Yg(e)}var Ece={[gB]:mce,[fB]:fce,[pB]:pce};function vB(e,t={}){let r={};if(e==null||typeof e!="object")return r;let n=t.version||e.v||1,i=t.reportingMode||pB,s=n===1?yce:Ece[i],o=Object.keys(e).filter(s),a=t.filter;typeof a=="function"&&(o=o.filter(a));let l=i===gB||i===fB;l&&!o.includes("ts")&&o.push("ts"),n>1&&!o.includes("v")&&o.push("v");let c=gt({},uce,t.formatters),u={version:n,reportingMode:i,baseUrl:t.baseUrl};return o.sort().forEach(d=>{let h=e[d],f=c[d];if(typeof f=="function"&&(h=f(h,u)),d==="v"){if(n===1)return;h=n}d=="pr"&&h===1||(l&&d==="ts"&&!ke(h)&&(h=Date.now()),ace(h)&&(oce(d)&&typeof h=="string"&&(h=new tg(h)),r[d]=h))}),r}function Tce(e,t={}){let r={};if(!e)return r;let n=vB(e,t),i=sce(n,t?.customHeaderMap);return Object.entries(i).reduce((s,[o,a])=>{let l=hB(a,{whitespace:!1});return l&&(s[o]=l),s},r)}function Sce(e,t,r){return gt(e,Tce(t,r))}var bce="CMCD";function wce(e,t={}){return e?hB(vB(e,t),{whitespace:!1}):""}function Ace(e,t={}){if(!e)return"";let r=wce(e,t);return encodeURIComponent(r)}function kce(e,t={}){if(!e)return"";let r=Ace(e,t);return`${bce}=${r}`}var D_=/CMCD=[^&#]+/;function Cce(e,t,r){let n=kce(t,r);if(!n)return e;if(D_.test(e))return e.replace(D_,n);let i=e.includes("?")?"&":"?";return`${e}${i}${n}`}var dS=class{constructor(t){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Wr.MANIFEST,su:!this.initialized})}catch(s){this.hls.logger.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{let{frag:s,part:o}=i,a=this.hls.levels[s.level],l=this.getObjectType(s),c={d:(o||s).duration*1e3,ot:l};(l===Wr.VIDEO||l===Wr.AUDIO||l==Wr.MUXED)&&(c.br=a.bitrate/1e3,c.tb=this.getTopBandwidth(l)/1e3,c.bl=this.getBufferLength(l));let u=o?this.getNextPart(o):this.getNextFrag(s);u!=null&&u.url&&u.url!==s.url&&(c.nor=u.url),this.apply(i,c)}catch(s){this.hls.logger.warn("Could not generate segment CMCD data.",s)}},this.hls=t;let r=this.config=t.config,{cmcd:n}=r;n!=null&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||t.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){let t=this.hls;t.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(R.MEDIA_DETACHED,this.onMediaDetached,this),t.on(R.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){let t=this.hls;t.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(R.MEDIA_DETACHED,this.onMediaDetached,this),t.off(R.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(t,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(t,r){var n,i;this.audioBuffer=(n=r.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=r.tracks.video)==null?void 0:i.buffer}createData(){var t;return{v:1,sf:Ole.HLS,sid:this.sid,cid:this.cid,pr:(t=this.media)==null?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(t,r={}){gt(r,this.createData());let n=r.ot===Wr.INIT||r.ot===Wr.VIDEO||r.ot===Wr.MUXED;this.starved&&n&&(r.bs=!0,r.su=!0,this.starved=!1),r.su==null&&(r.su=this.buffering);let{includeKeys:i}=this;i&&(r=Object.keys(r).reduce((o,a)=>(i.includes(a)&&(o[a]=r[a]),o),{}));let s={baseUrl:t.url};this.useHeaders?(t.headers||(t.headers={}),Sce(t.headers,r,s)):t.url=Cce(t.url,r,s)}getNextFrag(t){var r;let n=(r=this.hls.levels[t.level])==null?void 0:r.details;if(n){let i=t.sn-n.startSN;return n.fragments[i+1]}}getNextPart(t){var r;let{index:n,fragment:i}=t,s=(r=this.hls.levels[i.level])==null||(r=r.details)==null?void 0:r.partList;if(s){let{sn:o}=i;for(let a=s.length-1;a>=0;a--){let l=s[a];if(l.index===n&&l.fragment.sn===o)return s[a+1]}}}getObjectType(t){let{type:r}=t;if(r==="subtitle")return Wr.TIMED_TEXT;if(t.sn==="initSegment")return Wr.INIT;if(r==="audio")return Wr.AUDIO;if(r==="main")return this.hls.audioTracks.length?Wr.VIDEO:Wr.MUXED}getTopBandwidth(t){let r=0,n,i=this.hls;if(t===Wr.AUDIO)n=i.audioTracks;else{let s=i.maxAutoLevel,o=s>-1?s+1:i.levels.length;n=i.levels.slice(0,o)}return n.forEach(s=>{s.bitrate>r&&(r=s.bitrate)}),r>0?r:NaN}getBufferLength(t){let r=this.media,n=t===Wr.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!r?NaN:Qe.bufferInfo(n,r.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){let{pLoader:t}=this.config,r=this.applyPlaylistData,n=t||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new n(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,s,o){r(i),this.loader.load(i,s,o)}}}createFragmentLoader(){let{fLoader:t}=this.config,r=this.applyFragmentData,n=t||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new n(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,s,o){r(i),this.loader.load(i,s,o)}}}},xce=3e5,hS=class extends Jr{constructor(t){super("content-steering",t.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=t,this.registerListeners()}registerListeners(){let t=this.hls;t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(R.MANIFEST_PARSED,this.onManifestParsed,this),t.on(R.ERROR,this.onError,this)}unregisterListeners(){let t=this.hls;t&&(t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(R.MANIFEST_PARSED,this.onManifestParsed,this),t.off(R.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((t,r)=>(t.indexOf(r.pathwayId)===-1&&t.push(r.pathwayId),t),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(t){this.updatePathwayPriority(t)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){let t=this.timeToLoad*1e3-(performance.now()-this.updated);if(t>0){this.scheduleRefresh(this.uri,t);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(t){let r=this.levels;r&&(this.levels=r.filter(n=>n!==t))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(t,r){let{contentSteering:n}=r;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(t,r){this.audioTracks=r.audioTracks,this.subtitleTracks=r.subtitleTracks}onError(t,r){let{errorAction:n}=r;if(n?.action===mr.SendAlternateToPenaltyBox&&n.flags===fn.MoveAllAlternatesMatchingHost){let i=this.levels,s=this._pathwayPriority,o=this.pathwayId;if(r.context){let{groupId:a,pathwayId:l,type:c}=r.context;a&&i?o=this.getPathwayForGroupId(a,c,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!s&&i&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),n.resolved=this.pathwayId!==o),r.details===Q.BUFFER_APPEND_ERROR&&!r.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${r.details} ("${r.error.message}") with content-steering for Pathway: ${o} levels: ${i&&i.length} priorities: ${vt(s)} penalized: ${vt(this.penalizedPathways)}`)}}filterParsedLevels(t){this.levels=t;let r=this.getLevelsForPathway(this.pathwayId);if(r.length===0){let n=t[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),r=this.getLevelsForPathway(n),this.pathwayId=n}return r.length!==t.length&&this.log(`Found ${r.length}/${t.length} levels in Pathway "${this.pathwayId}"`),r}getLevelsForPathway(t){return this.levels===null?[]:this.levels.filter(r=>t===r.pathwayId)}updatePathwayPriority(t){this._pathwayPriority=t;let r,n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(s=>{i-n[s]>xce&&delete n[s]});for(let s=0;s<t.length;s++){let o=t[s];if(o in n)continue;if(o===this.pathwayId)return;let a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(r=this.getLevelsForPathway(o),r.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,z2(r),this.hls.trigger(R.LEVELS_UPDATED,{levels:r});let c=this.hls.levels[a];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(t,r,n){let i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(r===et.AUDIO_TRACK&&i[s].hasAudioGroup(t)||r===et.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(t))return i[s].pathwayId;return n}clonePathways(t){let r=this.levels;if(!r)return;let n={},i={};t.forEach(s=>{let{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=s;if(r.some(u=>u.pathwayId===o))return;let c=this.getLevelsForPathway(a).map(u=>{let d=new Bt(u.attrs);d["PATHWAY-ID"]=o;let h=d.AUDIO&&`${d.AUDIO}_clone_${o}`,f=d.SUBTITLES&&`${d.SUBTITLES}_clone_${o}`;h&&(n[d.AUDIO]=h,d.AUDIO=h),f&&(i[d.SUBTITLES]=f,d.SUBTITLES=f);let p=yB(u.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),g=new Yo({attrs:d,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:p,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let v=1;v<u.audioGroups.length;v++)g.addGroupId("audio",`${u.audioGroups[v]}_clone_${o}`);if(u.subtitleGroups)for(let v=1;v<u.subtitleGroups.length;v++)g.addGroupId("text",`${u.subtitleGroups[v]}_clone_${o}`);return g});r.push(...c),O_(this.audioTracks,n,l,o),O_(this.subtitleTracks,i,l,o)})}loadSteeringManifest(t){let r=this.hls.config,n=r.loader;this.loader&&this.loader.destroy(),this.loader=new n(r);let i;try{i=new self.URL(t)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${t}`);return}if(i.protocol!=="data:"){let u=(this.hls.bandwidthEstimate||r.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+u)}let s={responseType:"json",url:i.href},o=r.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(u,d,h,f)=>{this.log(`Loaded steering manifest: "${i}"`);let p=u.data;if(p?.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;let{"RELOAD-URI":g,"PATHWAY-CLONES":v,"PATHWAY-PRIORITY":m}=p;if(g)try{this.uri=new self.URL(g,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||h.url),v&&this.clonePathways(v);let y={steeringManifest:p,url:i.toString()};this.hls.trigger(R.STEERING_MANIFEST_LOADED,y),m&&this.updatePathwayPriority(m)},onError:(u,d,h,f)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(u.code===429){let g=this.loader;if(typeof g?.getResponseHeader=="function"){let v=g.getResponseHeader("Retry-After");v&&(p=parseFloat(v)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(u,d,h)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,l,c)}scheduleRefresh(t,r=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;let i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(t);return}this.scheduleRefresh(t,this.timeToLoad*1e3)},r)}};function O_(e,t,r,n){e&&Object.keys(t).forEach(i=>{let s=e.filter(o=>o.groupId===i).map(o=>{let a=gt({},o);return a.details=void 0,a.attrs=new Bt(a.attrs),a.url=a.attrs.URI=yB(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),a.groupId=a.attrs["GROUP-ID"]=t[i],a.attrs["PATHWAY-ID"]=n,a});e.push(...s)})}function yB(e,t,r,n){let{HOST:i,PARAMS:s,[r]:o}=n,a;t&&(a=o?.[t],a&&(e=a));let l=new self.URL(e);return i&&!a&&(l.host=i),s&&Object.keys(s).sort().forEach(c=>{c&&l.searchParams.set(c,s[c])}),l.href}var rg=class e extends Jr{constructor(t){super("eme",t.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=e.CDMCleanupPromise?[e.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=r=>{let{initDataType:n,initData:i}=r,s=`"${r.type}" event: init data type: "${n}"`;if(this.debug(s),i!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=lu(this.config));let a=o.map(E0).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(a)}this.keyFormatPromise.then(o=>{let a=np(o);if(n!=="sinf"||a!==Ut.FAIRPLAY){this.log(`Ignoring "${r.type}" event with init data type: "${n}" for selected key-system ${a}`);return}let l;try{let f=tr(new Uint8Array(i)),p=vb(JSON.parse(f).sinf),g=y2(p);if(!g)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(g.subarray(8,24))}catch(f){this.warn(`${s} Failed to parse sinf: ${f}`);return}let c=Fr(l),{keyIdToKeySessionPromise:u,mediaKeySessions:d}=this,h=u[c];for(let f=0;f<d.length;f++){let p=d[f],g=p.decryptdata;if(!g.keyId)continue;let v=Fr(g.keyId);if(qp(l,g.keyId)||g.uri.replace(/-/g,"").indexOf(c)!==-1){if(h=u[v],!h)continue;if(g.pssh)break;delete u[v],g.pssh=new Uint8Array(i),g.keyId=l,h=u[c]=h.then(()=>this.generateRequestWithPreferredKeySession(p,n,i,"encrypted-event-key-match")),h.catch(m=>this.handleError(m));break}}h||this.handleError(new Error(`Key ID ${c} not encountered in playlist. Key-system sessions ${d.length}.`))}).catch(o=>this.handleError(o))}},this.onWaitingForKey=r=>{this.log(`"${r.type}" event`)},this.hls=t,this.config=t.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();let t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(R.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(R.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(R.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(R.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(t){let{drmSystems:r,widevineLicenseUrl:n}=this.config,i=r?.[t];if(i)return i.licenseUrl;if(t===Ut.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(t){let r=this.getLicenseServerUrl(t);if(r===void 0)throw new Error(`no license server URL configured for key-system "${t}"`);return r}getServerCertificateUrl(t){let{drmSystems:r}=this.config,n=r?.[t];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${t}"]`)}attemptKeySystemAccess(t){let r=this.hls.levels,n=(o,a,l)=>!!o&&l.indexOf(o)===a,i=r.map(o=>o.audioCodec).filter(n),s=r.map(o=>o.videoCodec).filter(n);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((o,a)=>{let l=c=>{let u=c.shift();this.getMediaKeysPromise(u,i,s).then(d=>o({keySystem:u,mediaKeys:d})).catch(d=>{c.length?l(c):d instanceof Nr?a(d):a(new Nr({type:Oe.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(t)})}requestMediaKeySystemAccess(t,r){let{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return D2===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(t,r)}getMediaKeysPromise(t,r,n){var i;let s=kae(t,r,n,this.config.drmSystemOptions||{}),o=this.keySystemAccessPromises[t],a=(i=o)==null?void 0:i.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${t}" key-system access with config: ${vt(s)}`),a=this.requestMediaKeySystemAccess(t,s);let l=o=this.keySystemAccessPromises[t]={keySystemAccess:a};return a.catch(c=>{this.log(`Failed to obtain access to key-system "${t}": ${c}`)}),a.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);let u=this.fetchServerCertificate(t);this.log(`Create media-keys for "${t}"`);let d=l.mediaKeys=c.createMediaKeys().then(h=>(this.log(`Media-keys created for "${t}"`),l.hasMediaKeys=!0,u.then(f=>f?this.setMediaKeysServerCertificate(h,t,f):h)));return d.catch(h=>{this.error(`Failed to create media-keys for "${t}"}: ${h}`)}),d})}return a.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:t,keySystem:r,mediaKeys:n}){this.log(`Creating key-system session "${r}" keyId: ${Fr(t.keyId||[])} keyUri: ${t.uri}`);let i=n.createSession(),s={decryptdata:t,keySystem:r,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(t){let r=t.decryptdata;if(r.pssh){let n=this.createMediaKeySessionContext(t),i=Nf(r),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,s,r.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)}updateKeySession(t,r){let n=t.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${Fr(t.decryptdata.keyId||[])}
      } (data length: ${r.byteLength})`),n.update(r)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(t=>({keySystem:t,hasMediaKeys:this.keySystemAccessPromises[t].hasMediaKeys})).filter(({hasMediaKeys:t})=>!!t).map(({keySystem:t})=>E0(t)).filter(t=>!!t)}getKeySystemAccess(t){return this.getKeySystemSelectionPromise(t).then(({keySystem:r,mediaKeys:n})=>this.attemptSetMediaKeys(r,n))}selectKeySystem(t){return new Promise((r,n)=>{this.getKeySystemSelectionPromise(t).then(({keySystem:i})=>{let s=E0(i);s?r(s):n(new Error(`Unable to find format for key-system "${i}"`))}).catch(n)})}selectKeySystemFormat(t){let r=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${t.sn} ${t.type}: ${t.level}) key formats ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)),this.keyFormatPromise}getKeyFormatPromise(t){let r=lu(this.config),n=t.map(np).filter(i=>!!i&&r.indexOf(i)!==-1);return this.selectKeySystem(n)}getKeyStatus(t){let{mediaKeySessions:r}=this;for(let n=0;n<r.length;n++){let i=Rce(t,r[n]);if(i)return i}}loadKey(t){let r=t.keyInfo.decryptdata,n=Nf(r),i=this.bannedKeyIds[n];if(i||this.getKeyStatus(r)==="internal-error"){let a=N_(i||"internal-error",r);return this.handleError(a,t.frag),Promise.reject(a)}let s=`(keyId: ${n} format: "${r.keyFormat}" method: ${r.method} uri: ${r.uri})`;this.log(`Starting session for key ${s}`);let o=this.keyIdToKeySessionPromise[n];if(!o){let a=this.getKeySystemForKeyPromise(r).then(({keySystem:l,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${t.frag.sn} ${t.frag.type}: ${t.frag.level} using key ${s}`),this.attemptSetMediaKeys(l,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:c,decryptdata:r}))))).then(l=>{let c="cenc",u=r.pssh?r.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,c,u,"playlist-key")});return a.catch(l=>this.handleError(l,t.frag)),this.keyIdToKeySessionPromise[n]=a,a}return o.catch(a=>{if(a instanceof Nr){let l=ct({},a.data);this.getKeyStatus(r)==="internal-error"&&(l.decryptdata=r);let c=new Nr(l,a.message);this.handleError(c,t.frag)}}),o}throwIfDestroyed(t="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(t,r){if(this.hls)if(t instanceof Nr){r&&(t.data.frag=r);let n=t.data.decryptdata;this.error(`${t.message}${n?` (${Fr(n.keyId||[])})`:""}`),this.hls.trigger(R.ERROR,t.data)}else this.error(t.message),this.hls.trigger(R.ERROR,{type:Oe.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0})}getKeySystemForKeyPromise(t){let r=Nf(t),n=this.keyIdToKeySessionPromise[r];if(!n){let i=np(t.keyFormat),s=i?[i]:lu(this.config);return this.attemptKeySystemAccess(s)}return n}getKeySystemSelectionPromise(t){if(t.length||(t=lu(this.config)),t.length===0)throw new Nr({type:Oe.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${vt({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(t)}attemptSetMediaKeys(t,r){if(this.mediaKeys===r)return Promise.resolve();let n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${t}"`);let i=Promise.all(n).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(r)});return this.mediaKeys=r,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${t}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>n.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(t,r,n,i){var s;let o=(s=this.config.drmSystems)==null||(s=s[t.keySystem])==null?void 0:s.generateRequest;if(o)try{let p=o.call(this.hls,r,n,t);if(!p)throw new Error("Invalid response from configured generateRequest filter");r=p.initDataType,n=p.initData?p.initData:null,t.decryptdata.pssh=n?new Uint8Array(n):null}catch(p){if(this.warn(p.message),this.hls&&this.hls.config.debug)throw p}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(t);let a=Nf(t.decryptdata),l=t.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${a} URI: ${l} (init data type: ${r} length: ${n.byteLength})`);let c=new yb,u=t._onmessage=p=>{let g=t.mediaKeysSession;if(!g){c.emit("error",new Error("invalid state"));return}let{messageType:v,message:m}=p;this.log(`"${v}" message event for session "${g.sessionId}" message size: ${m.byteLength}`),v==="license-request"||v==="license-renewal"?this.renewLicense(t,m).catch(y=>{c.eventNames().length?c.emit("error",y):this.handleError(y)}):v==="license-release"?t.keySystem===Ut.FAIRPLAY&&this.updateKeySession(t,BT("acknowledged")).then(()=>this.removeSession(t)).catch(y=>this.handleError(y)):this.warn(`unhandled media key message type "${v}"`)},d=(p,g)=>{g.keyStatus=p;let v;p.startsWith("usable")?c.emit("resolved"):p==="internal-error"||p==="output-restricted"||p==="output-downscaled"?v=N_(p,g.decryptdata):p==="expired"?v=new Error(`key expired (keyId: ${a})`):p==="released"?v=new Error("key released"):p==="status-pending"||this.warn(`unhandled key status change "${p}" (keyId: ${a})`),v&&(c.eventNames().length?c.emit("error",v):this.handleError(v))},h=t._onkeystatuseschange=p=>{if(!t.mediaKeysSession){c.emit("error",new Error("invalid state"));return}let g=this.getKeyStatuses(t);if(!Object.keys(g).some(y=>g[y]!=="status-pending"))return;if(g[a]==="expired"){this.log(`Expired key ${vt(g)} in key-session "${t.mediaKeysSession.sessionId}"`),this.renewKeySession(t);return}let v=g[a];if(v)d(v,t);else{var m;t.keyStatusTimeouts||(t.keyStatusTimeouts={}),(m=t.keyStatusTimeouts)[a]||(m[a]=self.setTimeout(()=>{if(!t.mediaKeysSession||!this.mediaKeys)return;let y=this.getKeyStatus(t.decryptdata);if(y&&y!=="status-pending")return this.log(`No status for keyId ${a} in key-session "${t.mediaKeysSession.sessionId}". Using session key-status ${y} from other session.`),d(y,t);this.log(`key status for ${a} in key-session "${t.mediaKeysSession.sessionId}" timed out after 1000ms`),v="internal-error",d(v,t)},1e3)),this.log(`No status for keyId ${a} (${vt(g)}).`)}};Br(t.mediaKeysSession,"message",u),Br(t.mediaKeysSession,"keystatuseschange",h);let f=new Promise((p,g)=>{c.on("error",g),c.on("resolved",p)});return t.mediaKeysSession.generateRequest(r,n).then(()=>{this.log(`Request generated for key-session "${t.mediaKeysSession.sessionId}" keyId: ${a} URI: ${l}`)}).catch(p=>{throw new Nr({type:Oe.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_NO_SESSION,error:p,decryptdata:t.decryptdata,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>f).catch(p=>(c.removeAllListeners(),this.removeSession(t).then(()=>{throw p}))).then(()=>(c.removeAllListeners(),t))}getKeyStatuses(t){let r={};return t.mediaKeysSession.keyStatuses.forEach((n,i)=>{if(typeof i=="string"&&typeof n=="object"){let a=i;i=n,n=a}let s="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);t.keySystem===Ut.PLAYREADY&&s.length===16&&L2(s);let o=Fr(s);n==="internal-error"&&(this.bannedKeyIds[o]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${o} key-session "${t.mediaKeysSession.sessionId}"`),r[o]=n}),r}fetchServerCertificate(t){let r=this.config,n=r.loader,i=new n(r),s=this.getServerCertificateUrl(t);return s?(this.log(`Fetching server certificate for "${t}"`),new Promise((o,a)=>{let l={responseType:"arraybuffer",url:s},c=r.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,g)=>{o(h.data)},onError:(h,f,p,g)=>{a(new Nr({type:Oe.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:ct({url:l.url,data:void 0},h)},`"${t}" certificate request failed (${s}). Status: ${h.code} (${h.text})`))},onTimeout:(h,f,p)=>{a(new Nr({type:Oe.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${t}" certificate request timed out (${s})`))},onAbort:(h,f,p)=>{a(new Error("aborted"))}};i.load(l,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(t,r,n){return new Promise((i,s)=>{t.setServerCertificate(n).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${n.byteLength}) on "${r}"`),i(t)}).catch(o=>{s(new Nr({type:Oe.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(t,r){return this.requestLicense(t,new Uint8Array(r)).then(n=>this.updateKeySession(t,new Uint8Array(n)).catch(i=>{throw new Nr({type:Oe.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:t.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(t,r){let n=String.fromCharCode.apply(null,new Uint16Array(r.buffer));if(!n.includes("PlayReadyKeyMessage"))return t.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r;let i=new DOMParser().parseFromString(n,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let u;for(let d=0,h=s.length;d<h;d++){var o,a;u=s[d];let f=(o=u.querySelector("name"))==null?void 0:o.textContent,p=(a=u.querySelector("value"))==null?void 0:a.textContent;f&&p&&t.setRequestHeader(f,p)}}let l=i.querySelector("Challenge"),c=l?.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return BT(atob(c))}setupLicenseXHR(t,r,n,i){let s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return s.call(this.hls,t,r,n,i)}).catch(o=>{if(!n.decryptdata)throw o;return t.open("POST",r,!0),s.call(this.hls,t,r,n,i)}).then(o=>(t.readyState||t.open("POST",r,!0),{xhr:t,licenseChallenge:o||i})):(t.open("POST",r,!0),Promise.resolve({xhr:t,licenseChallenge:i}))}requestLicense(t,r){let n=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{let o=this.getLicenseServerUrlOrThrow(t.keySystem);this.log(`Sending license request to URL: ${o}`);let a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!t.mediaKeysSession)return s(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);let c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,a,o,t)}catch(u){this.error(u)}i(l)}else{let l=n.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||a.status>=400&&a.status<500)s(new Nr({type:Oe.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:t.decryptdata,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{let u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(t,r).then(i,s)}}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=a,this.setupLicenseXHR(a,o,t,r).then(({xhr:l,licenseChallenge:c})=>{t.keySystem==Ut.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)}).catch(s)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(t,r){if(!this.config.emeEnabled)return;let n=r.media;this.media=n,Br(n,"encrypted",this.onMediaEncrypted),Br(n,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){let t=this.media;t&&(Yr(t,"encrypted",this.onMediaEncrypted),Yr(t,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var t;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={},!this.mediaKeys&&!this.mediaKeySessions.length)return;let r=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Ju.clearKeyUriToKeyIdMap();let i=n.length;e.CDMCleanupPromise=Promise.all(n.map(s=>this.removeSession(s)).concat((r==null||(t=r.setMediaKeys(null))==null?void 0:t.catch(s=>{this.log(`Could not clear media keys: ${s}`),this.hls&&this.hls.trigger(R.ERROR,{type:Oe.OTHER_ERROR,details:Q.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${s}`)})}))||Promise.resolve())).catch(s=>{this.log(`Could not close sessions and clear media keys: ${s}`),this.hls&&this.hls.trigger(R.ERROR,{type:Oe.OTHER_ERROR,details:Q.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${s}`)})}).then(()=>{i&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null,this.bannedKeyIds={}}onManifestLoaded(t,{sessionKeys:r}){if(!(!r||!this.config.emeEnabled)&&!this.keyFormatPromise){let n=r.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(t){let{mediaKeysSession:r,licenseXhr:n,decryptdata:i}=t;if(r){this.log(`Remove licenses and keys and close session "${r.sessionId}" keyId: ${Fr(i?.keyId||[])}`),t._onmessage&&(r.removeEventListener("message",t._onmessage),t._onmessage=void 0),t._onkeystatuseschange&&(r.removeEventListener("keystatuseschange",t._onkeystatuseschange),t._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;let s=this.mediaKeySessions.indexOf(t);s>-1&&this.mediaKeySessions.splice(s,1);let{keyStatusTimeouts:o}=t;o&&Object.keys(o).forEach(l=>self.clearTimeout(o[l]));let{drmSystemOptions:a}=this.config;return(xae(a)?new Promise((l,c)=>{self.setTimeout(()=>c(new Error("MediaKeySession.remove() timeout")),8e3),r.remove().then(l).catch(c)}):Promise.resolve()).catch(l=>{this.log(`Could not remove session: ${l}`),this.hls&&this.hls.trigger(R.ERROR,{type:Oe.OTHER_ERROR,details:Q.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${l}`)})}).then(()=>r.close()).catch(l=>{this.log(`Could not close session: ${l}`),this.hls&&this.hls.trigger(R.ERROR,{type:Oe.OTHER_ERROR,details:Q.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${l}`)})})}return Promise.resolve()}};rg.CDMCleanupPromise=void 0;function Nf(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Fr(e.keyId)}function Rce(e,t){if(e.keyId&&t.mediaKeysSession.keyStatuses.has(e.keyId))return t.mediaKeysSession.keyStatuses.get(e.keyId);if(e.matches(t.decryptdata))return t.keyStatus}var Nr=class extends Error{constructor(t,r){super(r),this.data=void 0,t.error||(t.error=new Error(r)),this.data=t,t.err=t.error}};function N_(e,t){let r=e==="output-restricted",n=r?Q.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:Q.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new Nr({type:Oe.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:t},r?"HDCP level output restricted":`key status changed to "${e}"`)}var fS=class{constructor(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}setStreamController(t){this.streamController=t}registerListeners(){this.hls.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(R.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(R.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(t,r){let n=this.hls.config;if(n.capLevelOnFPSDrop){let i=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(t,r,n){let i=performance.now();if(r){if(this.lastTime){let s=i-this.lastTime,o=n-this.lastDroppedFrames,a=r-this.lastDecodedFrames,l=1e3*o/s,c=this.hls;if(c.trigger(R.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:n}),l>0&&o>c.config.fpsDroppedMonitoringThreshold*a){let u=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(R.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=r}}checkFPSInterval(){let t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){let r=t.getVideoPlaybackQuality();this.checkFPS(t,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)}};function EB(e,t){let r;try{r=new Event("addtrack")}catch{r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function TB(e,t){let r=e.mode;if(r==="disabled"&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(n){ut.debug(`[texttrack-utils]: ${n}`);try{let i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}catch(i){ut.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}r==="disabled"&&(e.mode=r)}function hl(e,t){let r=e.mode;if(r==="disabled"&&(e.mode="hidden"),e.cues)for(let n=e.cues.length;n--;)t&&e.cues[n].removeEventListener("enter",t),e.removeCue(e.cues[n]);r==="disabled"&&(e.mode=r)}function pS(e,t,r,n){let i=e.mode;if(i==="disabled"&&(e.mode="hidden"),e.cues&&e.cues.length>0){let s=_ce(e.cues,t,r);for(let o=0;o<s.length;o++)(!n||n(s[o]))&&e.removeCue(s[o])}i==="disabled"&&(e.mode=i)}function Ice(e,t){if(t<=e[0].startTime)return 0;let r=e.length-1;if(t>e[r].endTime)return-1;let n=0,i=r,s;for(;n<=i;)if(s=Math.floor((i+n)/2),t<e[s].startTime)i=s-1;else if(t>e[s].startTime&&n<r)n=s+1;else return s;return e[n].startTime-t<t-e[i].startTime?n:i}function _ce(e,t,r){let n=[],i=Ice(e,t);if(i>-1)for(let s=i,o=e.length;s<o;s++){let a=e[s];if(a.startTime>=t&&a.endTime<=r)n.push(a);else if(a.startTime>r)return n}return n}function op(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&t.push(e[r])}return t}var gS=class extends sd{constructor(t){super(t,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let r=null,n=op(this.media.textTracks);for(let s=0;s<n.length;s++)if(n[s].mode==="hidden")r=n[s];else if(n[s].mode==="showing"){r=n[s];break}let i=this.findTrackForTextTrack(r);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(t){this._subtitleDisplay=t,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){let{hls:t}=this;t.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.MANIFEST_PARSED,this.onManifestParsed,this),t.on(R.LEVEL_LOADING,this.onLevelLoading,this),t.on(R.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(R.ERROR,this.onError,this)}unregisterListeners(){let{hls:t}=this;t.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.MANIFEST_PARSED,this.onManifestParsed,this),t.off(R.LEVEL_LOADING,this.onLevelLoading,this),t.off(R.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(R.ERROR,this.onError,this)}onMediaAttached(t,r){this.media=r.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,t)}onMediaDetaching(t,r){let n=this.media;if(!n)return;let i=!!r.transferMedia;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,!i&&op(n.textTracks).forEach(s=>{hl(s)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(t,r){this.tracks=r.subtitleTracks}onSubtitleTrackLoaded(t,r){let{id:n,groupId:i,details:s}=r,o=this.tracksInGroup[n];if(!o||o.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${o?.groupId}`);return}let a=o.details;o.details=r.details,this.log(`Subtitle track ${n} "${o.name}" lang:${o.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,a)}onLevelLoading(t,r){this.switchLevel(r.level)}onLevelSwitching(t,r){this.switchLevel(r.level)}switchLevel(t){let r=this.hls.levels[t];if(!r)return;let n=r.subtitleGroups||null,i=this.groupIds,s=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(o=>i?.indexOf(o)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;let o=this.tracks.filter(u=>!n||n.indexOf(u.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(u=>u.default)&&(this.selectDefaultTrack=!1),o.forEach((u,d)=>{u.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;let a=this.hls.config.subtitlePreference;if(!s&&a){this.selectDefaultTrack=!1;let u=vi(a,o);if(u>-1)s=o[u];else{let d=vi(a,this.tracks);s=this.tracks[d]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));let c={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(R.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(t){let r=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<r.length;i++){let s=r[i];if(!(n&&!s.default||!n&&!t)&&(!t||Go(s,t)))return i}if(t){for(let i=0;i<r.length;i++){let s=r[i];if(od(t.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<r.length;i++){let s=r[i];if(od(t.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(t){if(t){let r=this.tracksInGroup;for(let n=0;n<r.length;n++){let i=r[n];if(rS(i,t))return n}}return-1}onError(t,r){r.fatal||!r.context||r.context.type===et.SUBTITLE_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(t){this.selectDefaultTrack=!1,this.setSubtitleTrack(t)}setSubtitleOption(t){if(this.hls.config.subtitlePreference=t,t){if(t.id===-1)return this.setSubtitleTrack(-1),null;let r=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,r.length){let n=this.currentTrack;if(n&&Go(t,n))return n;let i=vi(t,this.tracksInGroup);if(i>-1){let s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(n)return null;{let s=vi(t,r);if(s>-1)return r[s]}}}}return null}loadPlaylist(t){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,t)}loadingPlaylist(t,r){super.loadingPlaylist(t,r);let n=t.id,i=t.groupId,s=this.getUrlWithDirectives(t.url,r),o=t.details,a=o?.age;this.log(`Loading subtitle ${n} "${t.name}" lang:${t.lang} group:${i}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${s}`),this.hls.trigger(R.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:r||null,track:t})}toggleTrackModes(){let{media:t}=this;if(!t)return;let r=op(t.textTracks),n=this.currentTrack,i;if(n&&(i=r.filter(s=>rS(n,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(r).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){let s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(t){let r=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=t;return}if(t<-1||t>=r.length||!ke(t)){this.warn(`Invalid subtitle track id: ${t}`);return}this.selectDefaultTrack=!1;let n=this.currentTrack,i=r[t]||null;if(this.trackId=t,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(R.SUBTITLE_TRACK_SWITCH,{id:t});return}let s=!!i.details&&!i.details.live;if(t===this.trackId&&i===n&&s)return;this.log(`Switching to subtitle-track ${t}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));let{id:o,groupId:a="",name:l,type:c,url:u}=i;this.hls.trigger(R.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:c,url:u});let d=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(d)}};function Lce(){try{return crypto.randomUUID()}catch{try{let e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let r=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(t=="x"?r:r&3|8).toString(16)})}}}function ku(e){let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return(t>>>0).toString()}var Al=.025,ng=(function(e){return e[e.Point=0]="Point",e[e.Range=1]="Range",e})({});function Pce(e,t,r){return`${e.identifier}-${r+1}-${ku(t)}`}var mS=class{constructor(t,r){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=r,this.dateRange=t,this.setDateRange(t)}setDateRange(t){this.dateRange=t,this.resumeOffset=t.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=t.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=t.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=t.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var t;this.appendInPlaceStarted=!1,(t=this.assetListLoader)==null||t.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(t){var r;if(t>0&&t>=this.assetList.length)return!0;let n=this.playoutLimit;return t<=0||isNaN(n)?!1:n===0?!0:(((r=this.assetList[t])==null?void 0:r.startOffset)||0)>n}findAssetIndex(t){return this.assetList.indexOf(t)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){let t=this.dateRange.startTime;if(this.snapOptions.out){let r=this.dateRange.tagAnchor;if(r)return x0(t,r)}return t}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;let t=this.dateRange.tagAnchor;if(t){let r=this.dateRange.startTime,n=x0(r,t);return r-n<.1}return!1}get resumptionOffset(){let t=this.resumeOffset,r=ke(t)?t:this.duration;return this.cumulativeDuration+r}get resumeTime(){let t=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){let r=this.resumeAnchor;if(r)return x0(t,r)}return t}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Al))}set appendInPlace(t){if(this.appendInPlaceStarted){this.resetOnResume=!t;return}this.appendInPlaceDisabled=!t}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(t){this._timelineStart=t}get duration(){let t=this.playoutLimit,r;return this._duration!==null?r=this._duration:this.dateRange.duration?r=this.dateRange.duration:r=this.dateRange.plannedDuration||0,!isNaN(t)&&t<r&&(r=t),r}set duration(t){this._duration=t}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?ng.Range:ng.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return Dce(this)}};function x0(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<Al)?t.start:t.start+t.duration}function SB(e,t,r){let n=new self.URL(e,r);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",t),n}function R0(e,t){for(;(r=e.assetList[++t])!=null&&r.error;)var r;return t}function Dce(e){return`["${e.identifier}" ${e.cue.pre?"<pre>":e.cue.post?"<post>":""}${e.timelineStart.toFixed(2)}-${e.resumeTime.toFixed(2)}]`}function ll(e){let t=e.timelineStart,r=e.duration||0;return`["${e.identifier}" ${t.toFixed(2)}-${(t+r).toFixed(2)}]`}var vS=class{constructor(t,r,n,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(R.PLAYOUT_LIMIT_REACHED,{})};let s=this.hls=new t(r);this.interstitial=n,this.assetItem=i;let o=()=>{this.hasDetails=!0};s.once(R.LEVEL_LOADED,o),s.once(R.AUDIO_TRACK_LOADED,o),s.once(R.SUBTITLE_TRACK_LOADED,o),s.on(R.MEDIA_ATTACHING,(a,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&s.on(R.BUFFER_APPENDED,()=>{let c=this.bufferedEnd;this.reachedPlayout(c)&&(this._bufferedEosTime=c,s.trigger(R.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){let t=this.hls;if(t)if(t.url)t.levels.length&&!t.started&&t.startLoad(-1,!0);else{let r=this.assetItem.uri;try{r=SB(r,t.config.primarySessionId||"").href}catch{}t.loadSource(r)}}bufferedInPlaceToEnd(t){var r;if(!this.appendInPlace)return!1;if((r=this.hls)!=null&&r.bufferedToEnd)return!0;if(!t)return!1;let n=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,s=Qe.bufferInfo(t,i,0);return this.getAssetTime(s.end)>=n-.02}reachedPlayout(t){let r=this.interstitial.playoutLimit;return this.startOffset+t>=r}get destroyed(){var t;return!((t=this.hls)!=null&&t.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var t;return((t=this.hls)==null?void 0:t.media)||null}get bufferedEnd(){let t=this.media||this.mediaAttached;if(!t)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;let r=Qe.bufferInfo(t,t.currentTime,.001);return this.getAssetTime(r.end)}get currentTime(){let t=this.media||this.mediaAttached;return t?this.getAssetTime(t.currentTime):this._currentTime||0}get duration(){let t=this.assetItem.duration;if(!t)return 0;let r=this.interstitial.playoutLimit;if(r){let n=r-this.startOffset;if(n>0&&n<t)return n}return t}get remaining(){let t=this.duration;return t?Math.max(0,t-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var t;return((t=this.hls)==null?void 0:t.config.timelineOffset)||0}set timelineOffset(t){let r=this.timelineOffset;if(t!==r){let n=t-r;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=t}}}getAssetTime(t){let r=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,t-r),n)}removeMediaListeners(){let t=this.mediaAttached;t&&(this._currentTime=t.currentTime,this.bufferSnapShot(),t.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var t;(t=this.hls)!=null&&t.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(t){var r;this.loadSource(),(r=this.hls)==null||r.attachMedia(t)}detachMedia(){var t;this.removeMediaListeners(),this.mediaAttached=null,(t=this.hls)==null||t.detachMedia()}resumeBuffering(){var t;(t=this.hls)==null||t.resumeBuffering()}pauseBuffering(){var t;(t=this.hls)==null||t.pauseBuffering()}transferMedia(){var t;return this.bufferSnapShot(),((t=this.hls)==null?void 0:t.transferMedia())||null}resetDetails(){let t=this.hls;if(t&&this.hasDetails){t.stopLoad();let r=n=>delete n.details;t.levels.forEach(r),t.allAudioTracks.forEach(r),t.allSubtitleTracks.forEach(r),this.hasDetails=!1}}on(t,r,n){var i;(i=this.hls)==null||i.on(t,r)}once(t,r,n){var i;(i=this.hls)==null||i.once(t,r)}off(t,r,n){var i;(i=this.hls)==null||i.off(t,r)}toString(){var t;return`HlsAssetPlayer: ${ll(this.assetItem)} ${(t=this.hls)==null?void 0:t.sessionId} ${this.appendInPlace?"append-in-place":""}`}},M_=.033,yS=class extends Jr{constructor(t,r){super("interstitials-sched",r),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=t}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(t=>t.reset()),this.events=this.items=null}resetErrorsInRange(t,r){return this.events?this.events.reduce((n,i)=>t<=i.startOffset&&r>i.startOffset?(delete i.error,n+1):n,0):0}get duration(){let t=this.items;return t?t[t.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(t){return t&&this.eventMap[t]||null}hasEvent(t){return t in this.eventMap}findItemIndex(t,r){if(t.event)return this.findEventIndex(t.event.identifier);let n=-1;t.nextEvent?n=this.findEventIndex(t.nextEvent.identifier)-1:t.previousEvent&&(n=this.findEventIndex(t.previousEvent.identifier)+1);let i=this.items;if(i)for(i[n]||(r===void 0&&(r=t.start),n=this.findItemIndexAtTime(r));n>=0&&(s=i[n])!=null&&s.event;){var s;n--}return n}findItemIndexAtTime(t,r){let n=this.items;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(r&&r!=="primary"&&(s=s[r]),t===s.start||t>s.start&&t<s.end)return i}return-1}findJumpRestrictedIndex(t,r){let n=this.items;if(n)for(let i=t;i<=r&&n[i];i++){let s=n[i].event;if(s!=null&&s.restrictions.jump&&!s.appendInPlace)return i}return-1}findEventIndex(t){let r=this.items;if(r)for(let i=r.length;i--;){var n;if(((n=r[i].event)==null?void 0:n.identifier)===t)return i}return-1}findAssetIndex(t,r){let n=t.assetList,i=n.length;if(i>1)for(let s=0;s<i;s++){let o=n[s];if(!o.error){let a=o.timelineStart;if(r===a||r>a&&(r<a+(o.duration||0)||s===i-1))return s}}return 0}get assetIdAtEnd(){var t;let r=(t=this.items)==null||(t=t[this.length-1])==null?void 0:t.event;if(r){let n=r.assetList,i=n[n.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(t,r){let n=t.main.details,{dateRanges:i}=n,s=this.events,o=this.parseDateRanges(i,{url:n.url},r),a=Object.keys(i),l=s?s.filter(c=>!a.includes(c.identifier)):[];o.length&&o.sort((c,u)=>{let d=c.cue.pre,h=c.cue.post,f=u.cue.pre,p=u.cue.post;if(d&&!f)return-1;if(f&&!d||h&&!p)return 1;if(p&&!h)return-1;if(!d&&!f&&!h&&!p){let g=c.startTime,v=u.startTime;if(g!==v)return g-v}return c.dateRange.tagOrder-u.dateRange.tagOrder}),this.events=o,l.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(t,l)}updateSchedule(t,r=[],n=!1){let i=this.events||[];if(i.length||r.length||this.length<2){let s=this.items,o=this.parseSchedule(i,t);(n||r.length||s?.length!==o.length||o.some((a,l)=>Math.abs(a.playout.start-s[l].playout.start)>.005||Math.abs(a.playout.end-s[l].playout.end)>.005))&&(this.items=o,this.onScheduleUpdate(r,s))}}parseDateRanges(t,r,n){let i=[],s=Object.keys(t);for(let o=0;o<s.length;o++){let a=s[o],l=t[a];if(l.isInterstitial){let c=this.eventMap[a];c?c.setDateRange(l):(c=new mS(l,r),this.eventMap[a]=c,n===!1&&(c.appendInPlace=n)),i.push(c)}}return i}parseSchedule(t,r){let n=[],i=r.main.details,s=i.live?1/0:i.edge,o=0;if(t=t.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),t.length){this.resolveOffsets(t,r);let l=0,c=0;if(t.forEach((u,d)=>{let h=u.cue.pre,f=u.cue.post,p=t[d-1]||null,g=u.appendInPlace,v=f?s:u.startOffset,m=u.duration,y=u.timelineOccupancy===ng.Range?m:0,E=u.resumptionOffset,S=p?.startTime===v,b=v+u.cumulativeDuration,w=g?b+m:v+E;if(h||!f&&v<=0){let D=c;c+=y,u.timelineStart=b;let N=o;o+=m,n.push({event:u,start:b,end:w,playout:{start:N,end:o},integrated:{start:D,end:c}})}else if(v<=s){if(!S){let C=v-l;if(C>M_){let P=l,U=c;c+=C;let G=o;o+=C;let K={previousEvent:t[d-1]||null,nextEvent:u,start:P,end:P+C,playout:{start:G,end:o},integrated:{start:U,end:c}};n.push(K)}else C>0&&p&&(p.cumulativeDuration+=C,n[n.length-1].end=v)}f&&(w=b),u.timelineStart=b;let D=c;c+=y;let N=o;o+=m,n.push({event:u,start:b,end:w,playout:{start:N,end:o},integrated:{start:D,end:c}})}else return;let x=u.resumeTime;f||x>s?l=s:l=x}),l<s){var a;let u=l,d=c,h=s-l;c+=h;let f=o;o+=h,n.push({previousEvent:((a=n[n.length-1])==null?void 0:a.event)||null,nextEvent:null,start:l,end:u+h,playout:{start:f,end:o},integrated:{start:d,end:c}})}this.setDurations(s,o,c)}else n.push({previousEvent:null,nextEvent:null,start:0,end:s,playout:{start:0,end:s},integrated:{start:0,end:s}}),this.setDurations(s,s,s);return n}setDurations(t,r,n){this.durations={primary:t,playout:r,integrated:n}}resolveOffsets(t,r){let n=r.main.details,i=n.live?1/0:n.edge,s=0,o=-1;t.forEach((a,l)=>{let c=a.cue.pre,u=a.cue.post,d=c?0:u?i:a.startTime;this.updateAssetDurations(a),o===d?a.cumulativeDuration=s:(s=0,o=d),!u&&a.snapOptions.in&&(a.resumeAnchor=Xo(null,n.fragments,a.startOffset+a.resumptionOffset,0,0)||void 0),a.appendInPlace&&!a.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(a,r)||(a.appendInPlace=!1)),!a.appendInPlace&&l+1<t.length&&t[l+1].startTime-t[l].resumeTime<M_&&(t[l+1].appendInPlace=!1,t[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${a}`));let h=ke(a.resumeOffset)?a.resumeOffset:a.duration;s+=h})}primaryCanResumeInPlaceAt(t,r){let n=t.resumeTime,i=t.startTime+t.resumptionOffset;return Math.abs(n-i)>Al?(this.log(`"${t.identifier}" resumption ${n} not aligned with estimated timeline end ${i}`),!1):!Object.keys(r).some(s=>{let o=r[s].details,a=o.edge;if(n>=a)return this.log(`"${t.identifier}" resumption ${n} past ${s} playlist end ${a}`),!1;let l=Xo(null,o.fragments,n);if(!l)return this.log(`"${t.identifier}" resumption ${n} does not align with any fragments in ${s} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;let c=s==="audio"?.175:0;return Math.abs(l.start-n)<Al+c||Math.abs(l.end-n)<Al+c?!1:(this.log(`"${t.identifier}" resumption ${n} not aligned with ${s} fragment bounds (${l.start}-${l.end} sn: ${l.sn} cc: ${l.cc})`),!0)})}updateAssetDurations(t){if(!t.assetListLoaded)return;let r=t.timelineStart,n=0,i=!1,s=!1;for(let o=0;o<t.assetList.length;o++){let a=t.assetList[o],l=r+n;a.startOffset=n,a.timelineStart=l,i||(i=a.duration===null),s||(s=!!a.error);let c=a.error?0:a.duration||0;n+=c}i&&!s?t.duration=Math.max(n,t.duration):t.duration=n}removeEvent(t){t.reset(),delete this.eventMap[t.identifier]}};function $n(e){return`[${e.event?'"'+e.event.identifier+'"':"primary"}: ${e.start.toFixed(2)}-${e.end.toFixed(2)}]`}var ES=class{constructor(t){this.hls=void 0,this.hls=t}destroy(){this.hls=null}loadAssetList(t,r){let n=t.assetListUrl,i;try{i=SB(n,this.hls.sessionId,t.baseUrl)}catch(h){let f=this.assignAssetListError(t,Q.ASSET_LIST_LOAD_ERROR,h,n);this.hls.trigger(R.ERROR,f);return}r&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+r);let s=this.hls.config,o=s.loader,a=new o(s),l={responseType:"json",url:i.href},c=s.interstitialAssetListLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,g)=>{let v=h.data,m=v?.ASSETS;if(!Array.isArray(m)){let y=this.assignAssetListError(t,Q.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),p.url,f,g);this.hls.trigger(R.ERROR,y);return}t.assetListResponse=v,this.hls.trigger(R.ASSET_LIST_LOADED,{event:t,assetListResponse:v,networkDetails:g})},onError:(h,f,p,g)=>{let v=this.assignAssetListError(t,Q.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${h.code} ${h.text} (${f.url})`),f.url,g,p);this.hls.trigger(R.ERROR,v)},onTimeout:(h,f,p)=>{let g=this.assignAssetListError(t,Q.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${f.url})`),f.url,h,p);this.hls.trigger(R.ERROR,g)}};return a.load(l,u,d),this.hls.trigger(R.ASSET_LIST_LOADING,{event:t}),a}assignAssetListError(t,r,n,i,s,o){return t.error=n,{type:Oe.NETWORK_ERROR,details:r,fatal:!1,interstitial:t,url:i,error:n,networkDetails:o,stats:s}}};function F_(e){e?.play().catch(()=>{})}function Mf(e,t){return`[${e}] Advancing timeline position to ${t}`}var TS=class extends Jr{constructor(t,r){super("interstitials",t.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{let n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;let i=n-this.timelinePos;if(Math.abs(i)<1/7056e5)return;let s=i<=-.01;this.timelinePos=n,this.bufferedPos=n;let o=this.playingItem;if(!o){this.checkBuffer();return}if(s&&this.schedule.resetErrorsInRange(n,n-i)&&this.updateSchedule(!0),this.checkBuffer(),s&&n<o.start||n>=o.end){var a;let h=this.findItemIndex(o),f=this.schedule.findItemIndexAtTime(n);if(f===-1&&(f=h+(s?-1:1),this.log(`seeked ${s?"back ":""}to position not covered by schedule ${n} (resolving from ${h} to ${f})`)),!this.isInterstitial(o)&&(a=this.media)!=null&&a.paused&&(this.shouldPlay=!1),!s&&f>h){let p=this.schedule.findJumpRestrictedIndex(h+1,f);if(p>h){this.setSchedulePosition(p);return}}this.setSchedulePosition(f);return}let l=this.playingAsset;if(!l){if(this.playingLastItem&&this.isInterstitial(o)){let h=o.event.assetList[0];h&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,h))}return}let c=l.timelineStart,u=l.duration||0;if(s&&n<c||n>=c+u){var d;(d=o.event)!=null&&d.appendInPlace&&(this.clearInterstitial(o.event,o),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,l)}},this.onTimeupdate=()=>{let n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;let i=this.playingItem;if(!i||this.playingLastItem)return;if(n>=i.end){this.timelinePos=i.end;let a=this.findItemIndex(i);this.setSchedulePosition(a+1)}let s=this.playingAsset;if(!s)return;let o=s.timelineStart+(s.duration||0);n>=o&&this.setScheduleToAssetAtTime(n,s)},this.onScheduleUpdate=(n,i)=>{let s=this.schedule;if(!s)return;let o=this.playingItem,a=s.events||[],l=s.items||[],c=s.durations,u=n.map(g=>g.identifier),d=!!(a.length||u.length);(d||i)&&this.log(`INTERSTITIALS_UPDATED (${a.length}): ${a}
Schedule: ${l.map(g=>$n(g))} pos: ${this.timelinePos}`),u.length&&this.log(`Removed events ${u}`);let h=null,f=null;o&&(h=this.updateItem(o,this.timelinePos),this.itemsMatch(o,h)?this.playingItem=h:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);let p=this.bufferingItem;if(p&&(f=this.updateItem(p,this.bufferedPos),this.itemsMatch(p,f)?this.bufferingItem=f:p.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(p.event,null))),n.forEach(g=>{g.assetList.forEach(v=>{this.clearAssetPlayer(v.identifier,null)})}),this.playerQueue.forEach(g=>{if(g.interstitial.appendInPlace){let v=g.assetItem.timelineStart,m=g.timelineOffset-v;if(m)try{g.timelineOffset=v}catch(y){Math.abs(m)>Al&&this.warn(`${y} ("${g.assetId}" ${g.timelineOffset}->${v})`)}}}),d||i){if(this.hls.trigger(R.INTERSTITIALS_UPDATED,{events:a.slice(0),schedule:l.slice(0),durations:c,removedIds:u}),this.isInterstitial(o)&&u.includes(o.event.identifier)){this.warn(`Interstitial "${o.event.identifier}" removed while playing`),this.primaryFallback(o.event);return}o&&this.trimInPlace(h,o),p&&f!==h&&this.trimInPlace(f,p),this.checkBuffer()}},this.hls=t,this.HlsPlayerClass=r,this.assetListLoader=new ES(t),this.schedule=new yS(this.onScheduleUpdate,t.logger),this.registerListeners()}registerListeners(){let t=this.hls;t&&(t.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(R.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),t.on(R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(R.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),t.on(R.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),t.on(R.ASSET_LIST_LOADED,this.onAssetListLoaded,this),t.on(R.BUFFER_APPENDED,this.onBufferAppended,this),t.on(R.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(R.BUFFERED_TO_END,this.onBufferedToEnd,this),t.on(R.MEDIA_ENDED,this.onMediaEnded,this),t.on(R.ERROR,this.onError,this),t.on(R.DESTROYING,this.onDestroying,this))}unregisterListeners(){let t=this.hls;t&&(t.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(R.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),t.off(R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(R.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),t.off(R.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),t.off(R.ASSET_LIST_LOADED,this.onAssetListLoaded,this),t.off(R.BUFFER_CODECS,this.onBufferCodecs,this),t.off(R.BUFFER_APPENDED,this.onBufferAppended,this),t.off(R.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(R.BUFFERED_TO_END,this.onBufferedToEnd,this),t.off(R.MEDIA_ENDED,this.onMediaEnded,this),t.off(R.ERROR,this.onError,this),t.off(R.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var t;(t=this.getBufferingPlayer())==null||t.resumeBuffering()}pauseBuffering(){var t;(t=this.getBufferingPlayer())==null||t.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){let t=this.primaryMedia||this.media;t&&this.removeMediaListeners(t)}removeMediaListeners(t){Yr(t,"play",this.onPlay),Yr(t,"pause",this.onPause),Yr(t,"seeking",this.onSeeking),Yr(t,"timeupdate",this.onTimeupdate)}onMediaAttaching(t,r){let n=this.media=r.media;Br(n,"seeking",this.onSeeking),Br(n,"timeupdate",this.onTimeupdate),Br(n,"play",this.onPlay),Br(n,"pause",this.onPause)}onMediaAttached(t,r){let n=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!i){this.clearScheduleState();let s=this.findItemIndex(n);this.setSchedulePosition(s)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(t,r){let n=!!r.transferMedia,i=this.media;if(this.media=null,!n&&(i&&this.removeMediaListeners(i),this.detachedData)){let s=this.getBufferingPlayer();s&&(this.log(`Removing schedule state for detachedData and ${s}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,s.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;let t=this,r=()=>t.bufferingItem||t.waitingItem,n=d=>d&&t.getAssetPlayer(d.identifier),i=(d,h,f,p,g)=>{if(d){let v=d[h].start,m=d.event;if(m){if(h==="playout"||m.timelineOccupancy!==ng.Point){let y=n(f);y?.interstitial===m&&(v+=y.assetItem.startOffset+y[g])}}else{let y=p==="bufferedPos"?o():t[p];v+=y-d.start}return v}return 0},s=(d,h)=>{var f;if(d!==0&&h!=="primary"&&(f=t.schedule)!=null&&f.length){var p;let g=t.schedule.findItemIndexAtTime(d),v=(p=t.schedule.items)==null?void 0:p[g];if(v){let m=v[h].start-v.start;return d+m}}return d},o=()=>{let d=t.bufferedPos;return d===Number.MAX_VALUE?a("primary"):Math.max(d,0)},a=d=>{var h,f;return(h=t.primaryDetails)!=null&&h.live?t.primaryDetails.edge:((f=t.schedule)==null?void 0:f.durations[d])||0},l=(d,h)=>{var f,p;let g=t.effectivePlayingItem;if(g!=null&&(f=g.event)!=null&&f.restrictions.skip||!t.schedule)return;t.log(`seek to ${d} "${h}"`);let v=t.effectivePlayingItem,m=t.schedule.findItemIndexAtTime(d,h),y=(p=t.schedule.items)==null?void 0:p[m],E=t.getBufferingPlayer(),S=E?.interstitial,b=S?.appendInPlace,w=v&&t.itemsMatch(v,y);if(v&&(b||w)){let x=n(t.playingAsset),D=x?.media||t.primaryMedia;if(D){let N=h==="primary"?D.currentTime:i(v,h,t.playingAsset,"timelinePos","currentTime"),C=d-N,P=(b?N:D.currentTime)+C;if(P>=0&&(!x||b||P<=x.duration)){D.currentTime=P;return}}}if(y){let x=d;if(h!=="primary"){let N=y[h].start,C=d-N;x=y.start+C}let D=!t.isInterstitial(y);if((!t.isInterstitial(v)||v.event.appendInPlace)&&(D||y.event.appendInPlace)){let N=t.media||(b?E?.media:null);N&&(N.currentTime=x)}else if(v){let N=t.findItemIndex(v);if(m>N){let P=t.schedule.findJumpRestrictedIndex(N+1,m);if(P>N){t.setSchedulePosition(P);return}}let C=0;if(D)t.timelinePos=x,t.checkBuffer();else{let P=y.event.assetList,U=d-(y[h]||y).start;for(let G=P.length;G--;){let K=P[G];if(K.duration&&U>=K.startOffset&&U<K.startOffset+K.duration){C=G;break}}}t.setSchedulePosition(m,C)}}},c=()=>{let d=t.effectivePlayingItem;if(t.isInterstitial(d))return d;let h=r();return t.isInterstitial(h)?h:null},u={get bufferedEnd(){let d=r(),h=t.bufferingItem;if(h&&h===d){var f;return i(h,"playout",t.bufferingAsset,"bufferedPos","bufferedEnd")-h.playout.start||((f=t.bufferingAsset)==null?void 0:f.startOffset)||0}return 0},get currentTime(){let d=c(),h=t.effectivePlayingItem;return h&&h===d?i(h,"playout",t.effectivePlayingAsset,"timelinePos","currentTime")-h.playout.start:0},set currentTime(d){let h=c(),f=t.effectivePlayingItem;f&&f===h&&l(d+f.playout.start,"playout")},get duration(){let d=c();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;let h=(d=c())==null?void 0:d.event.assetList;return h?h.map(f=>t.getAssetPlayer(f.identifier)):[]},get playingIndex(){var d;let h=(d=c())==null?void 0:d.event;return h&&t.effectivePlayingAsset?h.findAssetIndex(t.effectivePlayingAsset):-1},get scheduleItem(){return c()}};return this.manager={get events(){var d;return((d=t.schedule)==null||(d=d.events)==null?void 0:d.slice(0))||[]},get schedule(){var d;return((d=t.schedule)==null||(d=d.items)==null?void 0:d.slice(0))||[]},get interstitialPlayer(){return c()?u:null},get playerQueue(){return t.playerQueue.slice(0)},get bufferingAsset(){return t.bufferingAsset},get bufferingItem(){return r()},get bufferingIndex(){let d=r();return t.findItemIndex(d)},get playingAsset(){return t.effectivePlayingAsset},get playingItem(){return t.effectivePlayingItem},get playingIndex(){let d=t.effectivePlayingItem;return t.findItemIndex(d)},primary:{get bufferedEnd(){return o()},get currentTime(){let d=t.timelinePos;return d>0?d:0},set currentTime(d){l(d,"primary")},get duration(){return a("primary")},get seekableStart(){var d;return((d=t.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(r(),"integrated",t.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(t.effectivePlayingItem,"integrated",t.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){l(d,"integrated")},get duration(){return a("integrated")},get seekableStart(){var d;return s(((d=t.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{let d=t.effectivePlayingItem,h=d?.event;if(h&&!h.restrictions.skip){let f=t.findItemIndex(d);if(h.appendInPlace){let p=d.playout.start+d.event.duration;l(p+.001,"playout")}else t.advanceAfterAssetEnded(h,f,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var t;let r=this.playingItem,n=(t=this.schedule)==null?void 0:t.items;return!this.playbackStarted||!r||!n?!1:this.findItemIndex(r)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var t,r;if(this.mediaSelection===null)return;let n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let i=this.media;!i&&(t=this.bufferingItem)!=null&&(t=t.event)!=null&&t.appendInPlace&&(i=this.primaryMedia);let s=(r=i)==null?void 0:r.currentTime;if(!(s===void 0||!ke(s)))return s}get primaryMedia(){var t;return this.media||((t=this.detachedData)==null?void 0:t.media)||null}isInterstitial(t){return!!(t!=null&&t.event)}retreiveMediaSource(t,r){let n=this.getAssetPlayer(t);n&&this.transferMediaFromPlayer(n,r)}transferMediaFromPlayer(t,r){let n=t.interstitial.appendInPlace,i=t.media;if(n&&i===this.primaryMedia){if(this.bufferingAsset=null,(!r||this.isInterstitial(r)&&!r.event.appendInPlace)&&r&&i){this.detachedData={media:i};return}let s=t.transferMedia();this.log(`transfer MediaSource from ${t} ${vt(s)}`),this.detachedData=s}else r&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(t,r){var n,i;if(t.media===r)return;let s=null,o=this.hls,a=t!==o,l=a&&t.interstitial.appendInPlace,c=(n=this.detachedData)==null?void 0:n.mediaSource,u;if(o.media)l&&(s=o.transferMedia(),this.detachedData=s),u="Primary";else if(c){let p=this.getBufferingPlayer();p?(s=p.transferMedia(),u=`${p}`):u="detached MediaSource"}else u="detached media";if(!s){if(c)s=this.detachedData,this.log(`using detachedData: MediaSource ${vt(s)}`);else if(!this.detachedData||o.media===r){let p=this.playerQueue;p.length>1&&p.forEach(g=>{if(a&&g.interstitial.appendInPlace!==l){let v=g.interstitial;this.clearInterstitial(g.interstitial,null),v.appendInPlace=!1,v.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${v}`)}}),this.hls.detachMedia(),this.detachedData={media:r}}}let d=s&&"mediaSource"in s&&((i=s.mediaSource)==null?void 0:i.readyState)!=="closed",h=d&&s?s:r;this.log(`${d?"transfering MediaSource":"attaching media"} to ${a?t:"Primary"} from ${u} (media.currentTime: ${r.currentTime})`);let f=this.schedule;if(h===s&&f){let p=a&&t.assetId===f.assetIdAtEnd;h.overrides={duration:f.duration,endOfStream:!a||p,cueRemoval:!a}}t.attachMedia(h)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){let t=this.schedule,r=t?.events;if(!r||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);let n=this.timelinePos,i=this.effectivePlayingItem;if(n===-1){let s=this.hls.startPosition;if(this.log(Mf("checkStart",s)),this.timelinePos=s,r.length&&r[0].cue.pre){let o=t.findEventIndex(r[0].identifier);this.setSchedulePosition(o)}else if(s>=0||!this.primaryLive){let o=this.timelinePos=s>0?s:0,a=t.findItemIndexAtTime(o);this.setSchedulePosition(a)}}else if(i&&!this.playingItem){let s=t.findItemIndex(i);this.setSchedulePosition(s)}}advanceAssetBuffering(t,r){let n=t.event,i=n.findAssetIndex(r),s=R0(n,i);if(!n.isAssetPastPlayoutLimit(s))this.bufferedToEvent(t,s);else if(this.schedule){var o;let a=(o=this.schedule.items)==null?void 0:o[this.findItemIndex(t)+1];a&&this.bufferedToItem(a)}}advanceAfterAssetEnded(t,r,n){let i=R0(t,n);if(t.isAssetPastPlayoutLimit(i)){if(this.schedule){let s=this.schedule.items;if(s){let o=r+1,a=s.length;if(o>=a){this.setSchedulePosition(-1);return}let l=t.resumeTime;this.timelinePos<l&&(this.log(Mf("advanceAfterAssetEnded",l)),this.timelinePos=l,t.appendInPlace&&this.advanceInPlace(l),this.checkBuffer(this.bufferedPos<l)),this.setSchedulePosition(o)}}}else{if(t.appendInPlace){let s=t.assetList[i];s&&this.advanceInPlace(s.timelineStart)}this.setSchedulePosition(r,i)}}setScheduleToAssetAtTime(t,r){let n=this.schedule;if(!n)return;let i=r.parentIdentifier,s=n.getEvent(i);if(s){let o=n.findEventIndex(i),a=n.findAssetIndex(s,t);this.advanceAfterAssetEnded(s,o,a-1)}}setSchedulePosition(t,r){var n;let i=(n=this.schedule)==null?void 0:n.items;if(!i||this.playbackDisabled)return;let s=t>=0?i[t]:null;this.log(`setSchedulePosition ${t}, ${r} (${s&&$n(s)}) pos: ${this.timelinePos}`);let o=this.waitingItem||this.playingItem,a=this.playingLastItem;if(this.isInterstitial(o)){let u=o.event,d=this.playingAsset,h=d?.identifier,f=h?this.getAssetPlayer(h):null;if(f&&h&&(!this.eventItemsMatch(o,s)||r!==void 0&&h!==u.assetList[r].identifier)){var l;let p=u.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${p+1}/${u.assetList.length} ${ll(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(R.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:p,event:u,schedule:i.slice(0),scheduleIndex:t,player:f}),o!==this.playingItem){this.itemsMatch(o,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(u,this.findItemIndex(this.playingItem),p);return}this.retreiveMediaSource(h,s),f.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&f.detachMedia()}if(!this.eventItemsMatch(o,s)&&(this.endedItem=o,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${u} ${$n(o)}`),u.hasPlayed=!0,this.hls.trigger(R.INTERSTITIAL_ENDED,{event:u,schedule:i.slice(0),scheduleIndex:t}),u.cue.once)){var c;this.updateSchedule();let p=(c=this.schedule)==null?void 0:c.items;if(s&&p){let g=this.findItemIndex(s);this.advanceSchedule(g,p,r,o,a)}return}}this.advanceSchedule(t,i,r,o,a)}advanceSchedule(t,r,n,i,s){let o=this.schedule;if(!o)return;let a=r[t]||null,l=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(u=>{let d=u.interstitial,h=o.findEventIndex(d.identifier);(h<t||h>t+1)&&this.clearInterstitial(d,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);let u=a.event;if(n===void 0){n=o.findAssetIndex(u,this.timelinePos);let p=R0(u,n-1);if(u.isAssetPastPlayoutLimit(p)||u.appendInPlace&&this.timelinePos===a.end){this.advanceAfterAssetEnded(u,t,n);return}n=p}let d=this.waitingItem;this.assetsBuffered(a,l)||this.setBufferingItem(a);let h=this.preloadAssets(u,n);if(this.eventItemsMatch(a,d||i)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${$n(a)} ${u.appendInPlace?"append in place":""}`),this.hls.trigger(R.INTERSTITIAL_STARTED,{event:u,schedule:r.slice(0),scheduleIndex:t})),!u.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${u}`);return}if(u.assetListLoader&&(u.assetListLoader.destroy(),u.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${u}`);return}this.waitingItem=this.endedItem=null,this.playingItem=a;let f=u.assetList[n];if(!f){this.advanceAfterAssetEnded(u,t,n||0);return}if(h||(h=this.getAssetPlayer(f.identifier)),h===null||h.destroyed){let p=u.assetList.length;this.warn(`asset ${n+1}/${p} player destroyed ${u}`),h=this.createAssetPlayer(u,f,n),h.loadSource()}if(!this.eventItemsMatch(a,this.bufferingItem)&&u.appendInPlace&&this.isAssetBuffered(f))return;this.startAssetPlayer(h,n,r,t,l),this.shouldPlay&&F_(h.media)}else a?(this.resumePrimary(a,t,i),this.shouldPlay&&F_(this.hls.media)):s&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(o.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var t;return(t=this.mediaSelection)==null?void 0:t.main.details}get primaryLive(){var t;return!!((t=this.primaryDetails)!=null&&t.live)}resumePrimary(t,r,n){var i,s;if(this.playingItem=t,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(t),this.log(`resuming ${$n(t)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let a=this.timelinePos;(a<t.start||a>=t.end)&&(a=this.getPrimaryResumption(t,r),this.log(Mf("resumePrimary",a)),this.timelinePos=a),this.attachPrimary(a,t)}if(!n)return;let o=(s=this.schedule)==null?void 0:s.items;o&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${$n(t)}`),this.hls.trigger(R.INTERSTITIALS_PRIMARY_RESUMED,{schedule:o.slice(0),scheduleIndex:r}),this.checkBuffer())}getPrimaryResumption(t,r){let n=t.start;if(this.primaryLive){let i=this.primaryDetails;if(r===0)return this.hls.startPosition;if(i&&(n<i.fragmentStart||n>i.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(t){let r=this.getAssetPlayer(t.identifier);return r!=null&&r.hls?r.hls.bufferedToEnd:Qe.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=t.timelineStart+(t.duration||0)}attachPrimary(t,r,n){r?this.setBufferingItem(r):this.bufferingItem=this.playingItem,this.bufferingAsset=null;let i=this.primaryMedia;if(!i)return;let s=this.hls;s.media?this.checkBuffer():(this.transferMediaTo(s,i),n&&this.startLoadingPrimaryAt(t,n)),n||(this.log(Mf("attachPrimary",t)),this.timelinePos=t,this.startLoadingPrimaryAt(t,n))}startLoadingPrimaryAt(t,r){var n;let i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((n=i.mainForwardBufferInfo)==null?void 0:n.start)||i.media.currentTime)-t)>.5?i.startLoad(t,r):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var t;this.stopLoad(),(t=this.schedule)==null||t.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(R.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(R.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(t,r){if(r.level===-1||!this.schedule)return;let n=this.hls.levels[r.level];if(!n.details)return;let i=ct(ct({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(t,r){let n=this.hls.audioTracks[r.id],i=this.mediaSelection;if(!i){this.altSelection=ct(ct({},this.altSelection),{},{audio:n});return}let s=ct(ct({},i),{},{audio:n});this.mediaSelection=s}onSubtitleTrackUpdated(t,r){let n=this.hls.subtitleTracks[r.id],i=this.mediaSelection;if(!i){this.altSelection=ct(ct({},this.altSelection),{},{subtitles:n});return}let s=ct(ct({},i),{},{subtitles:n});this.mediaSelection=s}onAudioTrackSwitching(t,r){let n=WI(r);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(r)||i.setAudioOption(n)))}onSubtitleTrackSwitch(t,r){let n=WI(r);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(r)||r.id!==-1&&i.setSubtitleOption(n)))}onBufferCodecs(t,r){let n=r.tracks;n&&(this.requiredTracks=n)}onBufferAppended(t,r){this.checkBuffer()}onBufferFlushed(t,r){let n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){let i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(t){if(!this.schedule)return;let r=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&r){for(let i=0;i<r.length;i++){let s=r[i];if(s.cue.post){var n;let o=this.schedule.findEventIndex(s.identifier),a=(n=this.schedule.items)==null?void 0:n[o];this.isInterstitial(a)&&this.eventItemsMatch(a,this.bufferingItem)&&this.bufferedToItem(a,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(t){let r=this.playingItem;if(!this.playingLastItem&&r){let n=this.findItemIndex(r);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(t,r){var n;let i=(n=this.schedule)==null?void 0:n.items;if(t&&i){let s=this.findItemIndex(t,r);return i[s]||null}return null}trimInPlace(t,r){if(this.isInterstitial(t)&&t.event.appendInPlace&&r.end-t.end>.25){t.event.assetList.forEach((s,o)=>{t.event.isAssetPastPlayoutLimit(o)&&this.clearAssetPlayer(s.identifier,null)});let n=t.end+.25,i=Qe.bufferInfo(this.primaryMedia,n,0);(i.end>n||(i.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${$n(t)} (was ${$n(r)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(t,r){return!!r&&(t===r||t.event&&r.event&&this.eventItemsMatch(t,r)||!t.event&&!r.event&&this.findItemIndex(t)===this.findItemIndex(r))}eventItemsMatch(t,r){var n;return!!r&&(t===r||t.event.identifier===((n=r.event)==null?void 0:n.identifier))}findItemIndex(t,r){return t&&this.schedule?this.schedule.findItemIndex(t,r):-1}updateSchedule(t=!1){var r;let n=this.mediaSelection;n&&((r=this.schedule)==null||r.updateSchedule(n,[],t))}checkBuffer(t){var r;let n=(r=this.schedule)==null?void 0:r.items;if(!n)return;let i=Qe.bufferInfo(this.primaryMedia,this.timelinePos,0);t&&(this.bufferedPos=this.timelinePos),t||(t=i.len<1),this.updateBufferedPos(i.end,n,t)}updateBufferedPos(t,r,n){let i=this.schedule,s=this.bufferingItem;if(this.bufferedPos>t||!i)return;if(r.length===1&&this.itemsMatch(r[0],s)){this.bufferedPos=t;return}let o=this.playingItem,a=this.findItemIndex(o),l=i.findItemIndexAtTime(t);if(this.bufferedPos<t){var c;let u=this.findItemIndex(s),d=Math.min(u+1,r.length-1),h=r[d];if((l===-1&&s&&t>=s.end||(c=h.event)!=null&&c.appendInPlace&&t+.01>=h.start)&&(l=d),this.isInterstitial(s)){let f=s.event;if(d-a>1&&f.appendInPlace===!1||f.assetList.length===0&&f.assetListLoader)return}if(this.bufferedPos=t,l>u&&l>a)this.bufferedToItem(h);else{let f=this.primaryDetails;this.primaryLive&&f&&t>f.edge-f.targetduration&&h.start<f.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(h)&&this.preloadAssets(h.event,0)}}else n&&o&&!this.itemsMatch(o,s)&&(l===a?this.bufferedToItem(o):l===a+1&&this.bufferedToItem(r[l]))}assetsBuffered(t,r){return t.event.assetList.length===0?!1:!t.event.assetList.some(n=>{let i=this.getAssetPlayer(n.identifier);return!(i!=null&&i.bufferedInPlaceToEnd(r))})}setBufferingItem(t){let r=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(t,r)&&n){let{items:i,events:s}=n;if(!i||!s)return r;let o=this.isInterstitial(t),a=this.getBufferingPlayer();this.bufferingItem=t,this.bufferedPos=Math.max(t.start,Math.min(t.end,this.timelinePos));let l=a?a.remaining:r?r.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${$n(t)}`+(r?` (${l.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(o){let c=n.findAssetIndex(t.event,this.bufferedPos);t.event.assetList.forEach((u,d)=>{let h=this.getAssetPlayer(u.identifier);h&&(d===c&&h.loadSource(),h.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering());this.hls.trigger(R.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:s.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(t),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==t&&(this.bufferingItem=t);return r}bufferedToItem(t,r=0){let n=this.setBufferingItem(t);if(!this.playbackDisabled){if(this.isInterstitial(t))this.bufferedToEvent(t,r);else if(n!==null){this.bufferingAsset=null;let i=this.detachedData;i?i.mediaSource?this.attachPrimary(t.start,t,!0):this.preloadPrimary(t):this.preloadPrimary(t)}}}preloadPrimary(t){let r=this.findItemIndex(t),n=this.getPrimaryResumption(t,r);this.startLoadingPrimaryAt(n)}bufferedToEvent(t,r){let n=t.event,i=n.assetList.length===0&&!n.assetListLoader,s=n.cue.once;if(i||!s){let o=this.preloadAssets(n,r);if(o!=null&&o.interstitial.appendInPlace){let a=this.primaryMedia;a&&this.bufferAssetPlayer(o,a)}}}preloadAssets(t,r){let n=t.assetUrl,i=t.assetList.length,s=i===0&&!t.assetListLoader,o=t.cue.once;if(s){let l=t.timelineStart;if(t.appendInPlace){var a;let h=this.playingItem;!this.isInterstitial(h)&&(h==null||(a=h.nextEvent)==null?void 0:a.identifier)===t.identifier&&this.flushFrontBuffer(l+.25)}let c,u=0;if(!this.playingItem&&this.primaryLive&&(u=this.hls.startPosition,u===-1&&(u=this.hls.liveSyncPosition||0)),u&&!(t.cue.pre||t.cue.post)){let h=u-l;h>0&&(c=Math.round(h*1e3)/1e3)}if(this.log(`Load interstitial asset ${r+1}/${n?1:i} ${t}${c?` live-start: ${u} start-offset: ${c}`:""}`),n)return this.createAsset(t,0,0,l,t.duration,n);let d=this.assetListLoader.loadAssetList(t,c);d&&(t.assetListLoader=d)}else if(!o&&i){for(let c=r;c<i;c++){let u=t.assetList[c],d=this.getAssetPlayerQueueIndex(u.identifier);(d===-1||this.playerQueue[d].destroyed)&&!u.error&&this.createAssetPlayer(t,u,c)}let l=t.assetList[r];if(l){let c=this.getAssetPlayer(l.identifier);return c&&c.loadSource(),c}}return null}flushFrontBuffer(t){let r=this.requiredTracks;r&&(this.log(`Removing front buffer starting at ${t}`),Object.keys(r).forEach(n=>{this.hls.trigger(R.BUFFER_FLUSHING,{startOffset:t,endOffset:1/0,type:n})}))}getAssetPlayerQueueIndex(t){let r=this.playerQueue;for(let n=0;n<r.length;n++)if(t===r[n].assetId)return n;return-1}getAssetPlayer(t){let r=this.getAssetPlayerQueueIndex(t);return this.playerQueue[r]||null}getBufferingPlayer(){let{playerQueue:t,primaryMedia:r}=this;if(r){for(let n=0;n<t.length;n++)if(t[n].media===r)return t[n]}return null}createAsset(t,r,n,i,s,o){let a={parentIdentifier:t.identifier,identifier:Pce(t,o,r),duration:s,startOffset:n,timelineStart:i,uri:o};return this.createAssetPlayer(t,a,r)}createAssetPlayer(t,r,n){let i=this.hls,s=i.userConfig,o=s.videoPreference,a=i.loadLevelObj||i.levels[i.currentLevel];(o||a)&&(o=gt({},o),a.videoCodec&&(o.videoCodec=a.videoCodec),a.videoRange&&(o.allowedVideoRanges=[a.videoRange]));let l=i.audioTracks[i.audioTrack],c=i.subtitleTracks[i.subtitleTrack],u=0;if(this.primaryLive||t.appendInPlace){let S=this.timelinePos-r.timelineStart;if(S>1){let b=r.duration;b&&S<b&&(u=S)}}let d=r.identifier,h=ct(ct({},s),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:u,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:o,audioPreference:l||s.audioPreference,subtitlePreference:c||s.subtitlePreference});t.appendInPlace&&(t.appendInPlaceStarted=!0,r.timelineStart&&(h.timelineOffset=r.timelineStart));let f=h.cmcd;f!=null&&f.sessionId&&f.contentId&&(h.cmcd=gt({},f,{contentId:ku(r.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${t} and asset ${d}`);let p=new vS(this.HlsPlayerClass,h,t,r);this.playerQueue.push(p),t.assetList[n]=r;let g=!0,v=S=>{if(S.live){var b;let D=new Error(`Interstitials MUST be VOD assets ${t}`),N={fatal:!0,type:Oe.OTHER_ERROR,details:Q.INTERSTITIAL_ASSET_ITEM_ERROR,error:D},C=((b=this.schedule)==null?void 0:b.findEventIndex(t.identifier))||-1;this.handleAssetItemError(N,t,C,n,D.message);return}let w=S.edge-S.fragmentStart,x=r.duration;(g||x===null||w>x)&&(g=!1,this.log(`Interstitial asset "${d}" duration change ${x} > ${w}`),r.duration=w,this.updateSchedule())};p.on(R.LEVEL_UPDATED,(S,{details:b})=>v(b)),p.on(R.LEVEL_PTS_UPDATED,(S,{details:b})=>v(b)),p.on(R.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());let m=(S,b)=>{let w=this.getAssetPlayer(d);if(w&&b.tracks){w.off(R.BUFFER_CODECS,m),w.tracks=b.tracks;let x=this.primaryMedia;this.bufferingAsset===w.assetItem&&x&&!w.media&&this.bufferAssetPlayer(w,x)}};p.on(R.BUFFER_CODECS,m);let y=()=>{var S;let b=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${b}`),!b||!this.schedule)return;let w=this.schedule.findEventIndex(t.identifier),x=(S=this.schedule.items)==null?void 0:S[w];this.isInterstitial(x)&&this.advanceAssetBuffering(x,r)};p.on(R.BUFFERED_TO_END,y);let E=S=>()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;this.shouldPlay=!0;let b=this.schedule.findEventIndex(t.identifier);this.advanceAfterAssetEnded(t,b,S)};return p.once(R.MEDIA_ENDED,E(n)),p.once(R.PLAYOUT_LIMIT_REACHED,E(1/0)),p.on(R.ERROR,(S,b)=>{if(!this.schedule)return;let w=this.getAssetPlayer(d);if(b.details===Q.BUFFER_STALLED_ERROR){if(w!=null&&w.appendInPlace){this.handleInPlaceStall(t);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(b,t,this.schedule.findEventIndex(t.identifier),n,`Asset player error ${b.error} ${t}`)}),p.on(R.DESTROYING,()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;let S=new Error(`Asset player destroyed unexpectedly ${d}`),b={fatal:!0,type:Oe.OTHER_ERROR,details:Q.INTERSTITIAL_ASSET_ITEM_ERROR,error:S};this.handleAssetItemError(b,t,this.schedule.findEventIndex(t.identifier),n,S.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${ll(r)}`),this.hls.trigger(R.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:r,assetListIndex:n,event:t,player:p}),p}clearInterstitial(t,r){t.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,r)}),t.reset()}resetAssetPlayer(t){let r=this.getAssetPlayerQueueIndex(t);if(r!==-1){this.log(`reset asset player "${t}" after error`);let n=this.playerQueue[r];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(t,r){let n=this.getAssetPlayerQueueIndex(t);if(n!==-1){let i=this.playerQueue[n];this.log(`clear ${i} toSegment: ${r&&$n(r)}`),this.transferMediaFromPlayer(i,r),this.playerQueue.splice(n,1),i.destroy()}}emptyPlayerQueue(){let t;for(;t=this.playerQueue.pop();)t.destroy();this.playerQueue=[]}startAssetPlayer(t,r,n,i,s){let{interstitial:o,assetItem:a,assetId:l}=t,c=o.assetList.length,u=this.playingAsset;this.endedAsset=null,this.playingAsset=a,(!u||u.identifier!==l)&&(u&&(this.clearAssetPlayer(u.identifier,n[i]),delete u.error),this.log(`INTERSTITIAL_ASSET_STARTED ${r+1}/${c} ${ll(a)}`),this.hls.trigger(R.INTERSTITIAL_ASSET_STARTED,{asset:a,assetListIndex:r,event:o,schedule:n.slice(0),scheduleIndex:i,player:t})),this.bufferAssetPlayer(t,s)}bufferAssetPlayer(t,r){var n,i;if(!this.schedule)return;let{interstitial:s,assetItem:o}=t,a=this.schedule.findEventIndex(s.identifier),l=(n=this.schedule.items)==null?void 0:n[a];if(!l)return;t.loadSource(),this.setBufferingItem(l),this.bufferingAsset=o;let c=this.getBufferingPlayer();if(c===t)return;let u=s.appendInPlace;if(u&&c?.interstitial.appendInPlace===!1)return;let d=c?.tracks||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(u&&o!==this.playingAsset){if(!t.tracks){this.log(`Waiting for track info before buffering ${t}`);return}if(d&&!u2(d,t.tracks)){let h=new Error(`Asset ${ll(o)} SourceBuffer tracks ('${Object.keys(t.tracks)}') are not compatible with primary content tracks ('${Object.keys(d)}')`),f={fatal:!0,type:Oe.OTHER_ERROR,details:Q.INTERSTITIAL_ASSET_ITEM_ERROR,error:h},p=s.findAssetIndex(o);this.handleAssetItemError(f,s,a,p,h.message);return}}this.transferMediaTo(t,r)}handleInPlaceStall(t){let r=this.schedule,n=this.primaryMedia;if(!r||!n)return;let i=n.currentTime,s=r.findAssetIndex(t,i),o=t.assetList[s];if(o){let a=this.getAssetPlayer(o.identifier);if(a){let l=a.currentTime||i-o.timelineStart,c=a.duration-l;if(this.warn(`Stalled at ${l} of ${l+c} in ${a} ${t} (media.currentTime: ${i})`),l&&(c/n.playbackRate<.5||a.bufferedInPlaceToEnd(n))&&a.hls){let u=r.findEventIndex(t.identifier);this.advanceAfterAssetEnded(t,u,s)}}}}advanceInPlace(t){let r=this.primaryMedia;r&&r.currentTime<t&&(r.currentTime=t)}handleAssetItemError(t,r,n,i,s){if(t.details===Q.BUFFER_STALLED_ERROR)return;let o=r.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${o&&ll(o)} ${t.error}`),!this.schedule)return;let a=o?.identifier||"",l=this.getAssetPlayerQueueIndex(a),c=this.playerQueue[l]||null,u=this.schedule.items,d=gt({},t,{fatal:!1,errorAction:Sl(!0),asset:o,assetListIndex:i,event:r,schedule:u,scheduleIndex:n,player:c});if(this.hls.trigger(R.INTERSTITIAL_ASSET_ERROR,d),!t.fatal)return;let h=this.playingAsset,f=this.bufferingAsset,p=new Error(s);if(o&&(this.clearAssetPlayer(a,null),o.error=p),!r.assetList.some(g=>!g.error))r.error=p;else for(let g=i;g<r.assetList.length;g++)this.resetAssetPlayer(r.assetList[g].identifier);this.updateSchedule(!0),r.error?this.primaryFallback(r):h&&h.identifier===a?this.advanceAfterAssetEnded(r,n,i):f&&f.identifier===a&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,f)}primaryFallback(t){let r=t.timelineStart,n=this.effectivePlayingItem;if(n){this.log(`Fallback to primary from event "${t.identifier}" start: ${r} pos: ${this.timelinePos} playing: ${$n(n)} error: ${t.error}`);let i=this.timelinePos;i===-1&&(i=this.hls.startPosition);let s=this.updateItem(n,i);if(this.itemsMatch(n,s)&&this.clearInterstitial(t,null),t.appendInPlace&&(this.attachPrimary(r,null),this.flushFrontBuffer(r)),!this.schedule)return;let o=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(o)}else this.checkStart()}onAssetListLoaded(t,r){var n,i;let s=r.event,o=s.identifier,a=r.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(o)))return;let l=s.timelineStart,c=s.duration,u=0;a.forEach((g,v)=>{let m=parseFloat(g.DURATION);this.createAsset(s,v,u,l+u,m,g.URI),u+=m}),s.duration=u,this.log(`Loaded asset-list with duration: ${u} (was: ${c}) ${s}`);let d=this.waitingItem,h=d?.event.identifier===o;this.updateSchedule();let f=(i=this.bufferingItem)==null?void 0:i.event;if(h){var p;let g=this.schedule.findEventIndex(o),v=(p=this.schedule.items)==null?void 0:p[g];if(v){if(!this.playingItem&&this.timelinePos>v.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==g){s.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${s}`),this.updateSchedule(!0),this.primaryFallback(s);return}this.setBufferingItem(v)}this.setSchedulePosition(g)}else if(f?.identifier===o){let g=s.assetList[0];if(g){let v=this.getAssetPlayer(g.identifier);if(f.appendInPlace){let m=this.primaryMedia;v&&m&&this.bufferAssetPlayer(v,m)}else v&&v.loadSource()}}}onError(t,r){if(this.schedule)switch(r.details){case Q.ASSET_LIST_PARSING_ERROR:case Q.ASSET_LIST_LOAD_ERROR:case Q.ASSET_LIST_LOAD_TIMEOUT:{let n=r.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case Q.BUFFER_STALLED_ERROR:{let n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}},B_=500,SS=class extends ed{constructor(t,r,n){super(t,r,n,"subtitle-stream-controller",Re.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();let{hls:t}=this;t.on(R.LEVEL_LOADED,this.onLevelLoaded,this),t.on(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(R.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();let{hls:t}=this;t.off(R.LEVEL_LOADED,this.onLevelLoaded,this),t.off(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(R.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(t,r){this.stopLoad(),this.state=ae.IDLE,this.setInterval(B_),this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=r?-1:t,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(t,r){this.tracksBuffered=[],super.onMediaDetaching(t,r)}onLevelLoaded(t,r){this.mainDetails=r.details}onSubtitleFragProcessed(t,r){let{frag:n,success:i}=r;if(this.fragContextChanged(n)||(Zt(n)&&(this.fragPrevious=n),this.state=ae.IDLE),!i)return;let s=this.tracksBuffered[this.currentTrackId];if(!s)return;let o,a=n.start;for(let c=0;c<s.length;c++)if(a>=s[c].start&&a<=s[c].end){o=s[c];break}let l=n.start+n.duration;o?o.end=l:(o={start:a,end:l},s.push(o)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(t,r){let{startOffset:n,endOffset:i}=r;if(n===0&&i!==Number.POSITIVE_INFINITY){let s=i-1;if(s<=0)return;r.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=s){o.shift();continue}else if(o[a].start<s)o[a].start=s;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(n,s,Re.SUBTITLE)}}onError(t,r){let n=r.frag;n?.type===Re.SUBTITLE&&(r.details===Q.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ae.STOPPED&&(this.state=ae.IDLE))}onSubtitleTracksUpdated(t,{subtitleTracks:r}){if(this.levels&&aB(this.levels,r)){this.levels=r.map(n=>new Yo(n));return}this.tracksBuffered=[],this.levels=r.map(n=>{let i=new Yo(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Re.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(t,r){var n;if(this.currentTrackId=r.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}let i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==ae.STOPPED&&this.setInterval(B_)}onSubtitleTrackLoaded(t,r){var n;let{currentTrackId:i,levels:s}=this,{details:o,id:a}=r;if(!s){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}let l=s[a];if(a>=s.length||!l)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(o.live||(n=l.details)!=null&&n.live){if(o.deltaUpdateFailed)return;let d=this.mainDetails;if(!d){this.startFragRequested=!1;return}let h=d.fragments[0];if(!l.details)o.hasProgramDateTime&&d.hasProgramDateTime?(Yp(o,d),c=o.fragmentStart):h&&(c=h.start,HT(o,c));else{var u;c=this.alignPlaylists(o,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&h&&(c=h.start,HT(o,c))}d&&!this.startFragRequested&&this.setStartPosition(d,c)}l.details=o,this.levelLastLoaded=l,a===i&&(this.hls.trigger(R.SUBTITLE_TRACK_UPDATED,{details:o,id:a,groupId:r.groupId}),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===ae.IDLE&&(Xo(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(t){let{frag:r,payload:n}=t,i=r.decryptdata,s=this.hls;if(!this.fragContextChanged(r)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&bl(i.method)){let o=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,mb(i.method)).catch(a=>{throw s.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:r}),a}).then(a=>{let l=performance.now();s.trigger(R.FRAG_DECRYPTED,{frag:r,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=ae.IDLE})}}doTick(){if(!this.media){this.state=ae.IDLE;return}if(this.state===ae.IDLE){let{currentTrackId:t,levels:r}=this,n=r?.[t];if(!n||!r.length||!n.details||this.waitForLive(n))return;let{config:i}=this,s=this.getLoadPosition(),o=Qe.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:a,len:l}=o,c=n.details,u=this.hls.maxBufferLength+c.levelTargetDuration;if(l>u)return;let d=c.fragments,h=d.length,f=c.edge,p=null,g=this.fragPrevious;if(a<f){let y=i.maxFragLookUpTolerance,E=a>f-y?0:y;p=Xo(g,d,Math.max(d[0].start,a),E),!p&&g&&g.start<d[0].start&&(p=d[0])}else p=d[h-1];if(p=this.filterReplacedPrimary(p,n.details),!p)return;let v=p.sn-c.startSN,m=d[v-1];if(m&&m.cc===p.cc&&this.fragmentTracker.getState(m)===nr.NOT_LOADED&&(p=m),this.fragmentTracker.getState(p)===nr.NOT_LOADED){let y=this.mapToInitFragWhenRequired(p);y&&this.loadFragment(y,n,a)}}}loadFragment(t,r,n){Zt(t)?super.loadFragment(t,r,n):this._loadInitSegment(t,r)}get mediaBufferTimeRanges(){return new bS(this.tracksBuffered[this.currentTrackId]||[])}},bS=class{constructor(t){this.buffered=void 0;let r=(n,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return t[i][n]};this.buffered={get length(){return t.length},end(n){return r("end",n,t.length)},start(n){return r("start",n,t.length)}}}},Oce={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},bB=e=>String.fromCharCode(Oce[e]||e),Gn=15,ji=100,Nce={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Mce={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Fce={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Bce={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Uce=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],wS=class{constructor(){this.time=null,this.verboseLevel=0}log(t,r){if(this.verboseLevel>=t){let n=typeof r=="function"?r():r;ut.log(`${this.time} [${t}] ${n}`)}}},xo=function(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(16));return t},ig=class{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(t){let r=["foreground","underline","italics","background","flash"];for(let n=0;n<r.length;n++){let i=r[n];t.hasOwnProperty(i)&&(this[i]=t[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash}copy(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}},AS=class{constructor(){this.uchar=" ",this.penState=new ig}reset(){this.uchar=" ",this.penState.reset()}setChar(t,r){this.uchar=t,this.penState.copy(r)}setPenState(t){this.penState.copy(t)}equals(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)}copy(t){this.uchar=t.uchar,this.penState.copy(t.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}},kS=class{constructor(t){this.chars=[],this.pos=0,this.currPenState=new ig,this.cueStartTime=null,this.logger=void 0;for(let r=0;r<ji;r++)this.chars.push(new AS);this.logger=t}equals(t){for(let r=0;r<ji;r++)if(!this.chars[r].equals(t.chars[r]))return!1;return!0}copy(t){for(let r=0;r<ji;r++)this.chars[r].copy(t.chars[r])}isEmpty(){let t=!0;for(let r=0;r<ji;r++)if(!this.chars[r].isEmpty()){t=!1;break}return t}setCursor(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ji&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ji)}moveCursor(t){let r=this.pos+t;if(t>1)for(let n=this.pos+1;n<r+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(r)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(t){t>=144&&this.backSpace();let r=bB(t);if(this.pos>=ji){this.logger.log(0,()=>"Cannot insert "+t.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1)}clearFromPos(t){let r;for(r=t;r<ji;r++)this.chars[r].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){let t=[],r=!0;for(let n=0;n<ji;n++){let i=this.chars[n].uchar;i!==" "&&(r=!1),t.push(i)}return r?"":t.join("")}setPenStyles(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)}},Cu=class{constructor(t){this.rows=[],this.currRow=Gn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let r=0;r<Gn;r++)this.rows.push(new kS(t));this.logger=t}reset(){for(let t=0;t<Gn;t++)this.rows[t].clear();this.currRow=Gn-1}equals(t){let r=!0;for(let n=0;n<Gn;n++)if(!this.rows[n].equals(t.rows[n])){r=!1;break}return r}copy(t){for(let r=0;r<Gn;r++)this.rows[r].copy(t.rows[r])}isEmpty(){let t=!0;for(let r=0;r<Gn;r++)if(!this.rows[r].isEmpty()){t=!1;break}return t}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(t){this.rows[this.currRow].insertChar(t)}setPen(t){this.rows[this.currRow].setPenStyles(t)}moveCursor(t){this.rows[this.currRow].moveCursor(t)}setCursor(t){this.logger.log(2,"setCursor: "+t),this.rows[this.currRow].setCursor(t)}setPAC(t){this.logger.log(2,()=>"pacData = "+vt(t));let r=t.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(let a=0;a<Gn;a++)this.rows[a].clear();let s=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){let a=o.rows[s].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[r-this.nrRollUpRows+c+1].copy(o.rows[s+c])}}this.currRow=r;let n=this.rows[this.currRow];if(t.indent!==null){let s=t.indent,o=Math.max(s-1,0);n.setCursor(t.indent),t.color=n.chars[o].penState.foreground}let i={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(t){this.logger.log(2,()=>"bkgData = "+vt(t)),this.backSpace(),this.setPen(t),this.insertChar(32)}setRollUpRows(t){this.nrRollUpRows=t}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());let t=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(t,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}getDisplayText(t){t=t||!1;let r=[],n="",i=-1;for(let s=0;s<Gn;s++){let o=this.rows[s].getTextString();o&&(i=s+1,t?r.push("Row "+i+": '"+o+"'"):r.push(o.trim()))}return r.length>0&&(t?n="["+r.join(" | ")+"]":n=r.join(`
`)),n}getTextAndFormat(){return this.rows}},sg=class{constructor(t,r,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new Cu(n),this.nonDisplayedMemory=new Cu(n),this.lastOutputScreen=new Cu(n),this.currRollUpRow=this.displayedMemory.rows[Gn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Gn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(t){this.outputFilter=t}setPAC(t){this.writeScreen.setPAC(t)}setBkgData(t){this.writeScreen.setBkgData(t)}setMode(t){t!==this.mode&&(this.mode=t,this.logger.log(2,()=>"MODE="+t),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)}insertChars(t){for(let n=0;n<t.length;n++)this.writeScreen.insertChar(t[n]);let r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>r+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){let t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)}ccMIDROW(t){let r={flash:!1};if(r.underline=t%2===1,r.italics=t>=46,r.italics)r.foreground="white";else{let n=Math.floor(t/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];r.foreground=i[n]}this.logger.log(2,"MIDROW: "+vt(r)),this.writeScreen.setPen(r)}outputDataUpdate(t=!1){let r=this.logger.time;r!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=r:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}},og=class{constructor(t,r,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=zce(),this.logger=void 0;let i=this.logger=new wS;this.channels=[null,new sg(t,r,i),new sg(t+1,n,i)]}getHandler(t){return this.channels[t].getHandler()}setHandler(t,r){this.channels[t].setHandler(r)}addData(t,r){this.logger.time=t;for(let n=0;n<r.length;n+=2){let i=r[n]&127,s=r[n+1]&127,o=!1,a=null;if(i===0&&s===0)continue;this.logger.log(3,()=>"["+xo([r[n],r[n+1]])+"] -> ("+xo([i,s])+")");let l=this.cmdHistory;if(i>=16&&i<=31){if(Hce(i,s,l)){Ff(null,null,l),this.logger.log(3,()=>"Repeated command ("+xo([i,s])+") is dropped");continue}Ff(i,s,this.cmdHistory),o=this.parseCmd(i,s),o||(o=this.parseMidrow(i,s)),o||(o=this.parsePAC(i,s)),o||(o=this.parseBackgroundAttributes(i,s))}else Ff(null,null,l);if(!o&&(a=this.parseChars(i,s),a)){let c=this.currentChannel;c&&c>0?this.channels[c].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+xo([i,s])+" orig: "+xo([r[n],r[n+1]]))}}parseCmd(t,r){let n=(t===20||t===28||t===21||t===29)&&r>=32&&r<=47,i=(t===23||t===31)&&r>=33&&r<=35;if(!(n||i))return!1;let s=t===20||t===21||t===23?1:2,o=this.channels[s];return t===20||t===21||t===28||t===29?r===32?o.ccRCL():r===33?o.ccBS():r===34?o.ccAOF():r===35?o.ccAON():r===36?o.ccDER():r===37?o.ccRU(2):r===38?o.ccRU(3):r===39?o.ccRU(4):r===40?o.ccFON():r===41?o.ccRDC():r===42?o.ccTR():r===43?o.ccRTD():r===44?o.ccEDM():r===45?o.ccCR():r===46?o.ccENM():r===47&&o.ccEOC():o.ccTO(r-32),this.currentChannel=s,!0}parseMidrow(t,r){let n=0;if((t===17||t===25)&&r>=32&&r<=47){if(t===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;let i=this.channels[n];return i?(i.ccMIDROW(r),this.logger.log(3,()=>"MIDROW ("+xo([t,r])+")"),!0):!1}return!1}parsePAC(t,r){let n,i=(t>=17&&t<=23||t>=25&&t<=31)&&r>=64&&r<=127,s=(t===16||t===24)&&r>=64&&r<=95;if(!(i||s))return!1;let o=t<=23?1:2;r>=64&&r<=95?n=o===1?Nce[t]:Fce[t]:n=o===1?Mce[t]:Bce[t];let a=this.channels[o];return a?(a.setPAC(this.interpretPAC(n,r)),this.currentChannel=o,!0):!1}interpretPAC(t,r){let n,i={color:null,italics:!1,indent:null,underline:!1,row:t};return r>95?n=r-96:n=r-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(t,r){let n,i=null,s=null;if(t>=25?(n=2,s=t-8):(n=1,s=t),s>=17&&s<=19){let o;s===17?o=r+80:s===18?o=r+112:o=r+144,this.logger.log(2,()=>"Special char '"+bB(o)+"' in channel "+n),i=[o]}else t>=32&&t<=127&&(i=r===0?[t]:[t,r]);return i&&this.logger.log(3,()=>"Char codes =  "+xo(i).join(",")),i}parseBackgroundAttributes(t,r){let n=(t===16||t===24)&&r>=32&&r<=47,i=(t===23||t===31)&&r>=45&&r<=47;if(!(n||i))return!1;let s,o={};t===16||t===24?(s=Math.floor((r-32)/2),o.background=Uce[s],r%2===1&&(o.background=o.background+"_semi")):r===45?o.background="transparent":(o.foreground="black",r===47&&(o.underline=!0));let a=t<=23?1:2;return this.channels[a].setBkgData(o),!0}reset(){for(let t=0;t<Object.keys(this.channels).length;t++){let r=this.channels[t];r&&r.reset()}Ff(null,null,this.cmdHistory)}cueSplitAtTime(t){for(let r=0;r<this.channels.length;r++){let n=this.channels[r];n&&n.cueSplitAtTime(t)}}};function Ff(e,t,r){r.a=e,r.b=t}function Hce(e,t,r){return r.a===e&&r.b===t}function zce(){return{a:null,b:null}}var Cb=(function(){if(Kp!=null&&Kp.VTTCue)return self.VTTCue;let e=["","lr","rl"],t=["start","middle","end","left","right"];function r(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;let c=l.toLowerCase();return~a.indexOf(c)?c:!1}function n(a){return r(e,a)}function i(a){return r(t,a)}function s(a,...l){let c=1;for(;c<arguments.length;c++){let u=arguments[c];for(let d in u)a[d]=u[d]}return a}function o(a,l,c){let u=this,d={enumerable:!0};u.hasBeenReset=!1;let h="",f=!1,p=a,g=l,v=c,m=null,y="",E=!0,S="auto",b="start",w=50,x="middle",D=50,N="middle";Object.defineProperty(u,"id",s({},d,{get:function(){return h},set:function(C){h=""+C}})),Object.defineProperty(u,"pauseOnExit",s({},d,{get:function(){return f},set:function(C){f=!!C}})),Object.defineProperty(u,"startTime",s({},d,{get:function(){return p},set:function(C){if(typeof C!="number")throw new TypeError("Start time must be set to a number.");p=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",s({},d,{get:function(){return g},set:function(C){if(typeof C!="number")throw new TypeError("End time must be set to a number.");g=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",s({},d,{get:function(){return v},set:function(C){v=""+C,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",s({},d,{get:function(){return m},set:function(C){m=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",s({},d,{get:function(){return y},set:function(C){let P=n(C);if(P===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=P,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",s({},d,{get:function(){return E},set:function(C){E=!!C,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",s({},d,{get:function(){return S},set:function(C){if(typeof C!="number"&&C!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");S=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",s({},d,{get:function(){return b},set:function(C){let P=i(C);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");b=P,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",s({},d,{get:function(){return w},set:function(C){if(C<0||C>100)throw new Error("Position must be between 0 and 100.");w=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",s({},d,{get:function(){return x},set:function(C){let P=i(C);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");x=P,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",s({},d,{get:function(){return D},set:function(C){if(C<0||C>100)throw new Error("Size must be between 0 and 100.");D=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",s({},d,{get:function(){return N},set:function(C){let P=i(C);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");N=P,this.hasBeenReset=!0}})),u.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o})(),CS=class{decode(t,r){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}};function wB(e){function t(n,i,s,o){return(n|0)*3600+(i|0)*60+(s|0)+parseFloat(o||0)}let r=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?t(r[2],r[3],0,r[4]):t(r[1],r[2],r[3],r[4]):null}var xS=class{constructor(){this.values=Object.create(null)}set(t,r){!this.get(t)&&r!==""&&(this.values[t]=r)}get(t,r,n){return n?this.has(t)?this.values[t]:r[n]:this.has(t)?this.values[t]:r}has(t){return t in this.values}alt(t,r,n){for(let i=0;i<n.length;++i)if(r===n[i]){this.set(t,r);break}}integer(t,r){/^-?\d+$/.test(r)&&this.set(t,parseInt(r,10))}percent(t,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){let n=parseFloat(r);if(n>=0&&n<=100)return this.set(t,n),!0}return!1}};function AB(e,t,r,n){let i=n?e.split(n):[e];for(let s in i){if(typeof i[s]!="string")continue;let o=i[s].split(r);if(o.length!==2)continue;let a=o[0],l=o[1];t(a,l)}}var RS=new Cb(0,0,""),Bf=RS.align==="middle"?"middle":"center";function $ce(e,t,r){let n=e;function i(){let a=wB(e);if(a===null)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),a}function s(a,l){let c=new xS;AB(a,function(h,f){let p;switch(h){case"region":for(let g=r.length-1;g>=0;g--)if(r[g].id===f){c.set(h,r[g].region);break}break;case"vertical":c.alt(h,f,["rl","lr"]);break;case"line":p=f.split(","),c.integer(h,p[0]),c.percent(h,p[0])&&c.set("snapToLines",!1),c.alt(h,p[0],["auto"]),p.length===2&&c.alt("lineAlign",p[1],["start",Bf,"end"]);break;case"position":p=f.split(","),c.percent(h,p[0]),p.length===2&&c.alt("positionAlign",p[1],["start",Bf,"end","line-left","line-right","auto"]);break;case"size":c.percent(h,f);break;case"align":c.alt(h,f,["start",Bf,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&RS.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",Bf);let d=c.get("position","auto");d==="auto"&&RS.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),e.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);e=e.slice(3),o(),t.endTime=i(),o(),s(e,t)}function kB(e){return e.replace(/<br(?: \/)?>/gi,`
`)}var IS=class{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new CS,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(t){let r=this;t&&(r.buffer+=r.decoder.decode(t,{stream:!0}));function n(){let s=r.buffer,o=0;for(s=kB(s);o<s.length&&s[o]!=="\r"&&s[o]!==`
`;)++o;let a=s.slice(0,o);return s[o]==="\r"&&++o,s[o]===`
`&&++o,r.buffer=s.slice(o),a}function i(s){AB(s,function(o,a){},/:/)}try{let s="";if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;s=n();let a=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");r.state="HEADER"}let o=!1;for(;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(o?o=!1:s=n(),r.state){case"HEADER":/:/.test(s)?i(s):s||(r.state="ID");continue;case"NOTE":s||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){r.state="NOTE";break}if(!s)continue;if(r.cue=new Cb(0,0,""),r.state="CUE",s.indexOf("-->")===-1){r.cue.id=s;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{$ce(s,r.cue,r.regionList)}catch{r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":{let a=s.indexOf("-->")!==-1;if(!s||a&&(o=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(r.cue===null)continue;r.cue.text&&(r.cue.text+=`
`),r.cue.text+=s}continue;case"BADCUE":s||(r.state="ID")}}}catch{r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){let t=this;try{if((t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL"||t.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(r){t.onparsingerror&&t.onparsingerror(r)}return t.onflush&&t.onflush(),this}},Gce=/\r\n|\n\r|\n|\r/g,I0=function(e,t,r=0){return e.slice(r,r+t.length)===t},jce=function(e){let t=parseInt(e.slice(-3)),r=parseInt(e.slice(-6,-4)),n=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!ke(t)||!ke(r)||!ke(n)||!ke(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*r,t+=60*1e3*n,t+=3600*1e3*i,t};function xb(e,t,r){return ku(e.toString())+ku(t.toString())+ku(r)}var Vce=function(e,t,r){let n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new){e.ccOffset=e.presentationOffset=n.start,n.new=!1;return}for(;(s=i)!=null&&s.new;){var s;e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC]}e.presentationOffset=r};function Wce(e,t,r,n,i,s,o){let a=new IS,l=yn(new Uint8Array(e)).trim().replace(Gce,`
`).split(`
`),c=[],u=t?wle(t.baseTime,t.timescale):0,d="00:00.000",h=0,f=0,p,g=!0;a.oncue=function(v){let m=r[n],y=r.ccOffset,E=(h-u)/9e4;if(m!=null&&m.new&&(f!==void 0?y=r.ccOffset=m.start:Vce(r,n,E)),E){if(!t){p=new Error("Missing initPTS for VTT MPEGTS");return}y=E-r.presentationOffset}let S=v.endTime-v.startTime,b=pn((v.startTime+y-f)*9e4,i*9e4)/9e4;v.startTime=Math.max(b,0),v.endTime=Math.max(b+S,0);let w=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(w)),v.id||(v.id=xb(v.startTime,v.endTime,w)),v.endTime>0&&c.push(v)},a.onparsingerror=function(v){p=v},a.onflush=function(){if(p){o(p);return}s(c)},l.forEach(v=>{if(g)if(I0(v,"X-TIMESTAMP-MAP=")){g=!1,v.slice(16).split(",").forEach(m=>{I0(m,"LOCAL:")?d=m.slice(6):I0(m,"MPEGTS:")&&(h=parseInt(m.slice(7)))});try{f=jce(d)/1e3}catch(m){p=m}return}else v===""&&(g=!1);a.parse(v+`
`)}),a.flush()}var _0="stpp.ttml.im1t",CB=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,xB=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,qce={left:"start",center:"center",right:"end",start:"start",end:"end"};function U_(e,t,r,n){let i=Ze(new Uint8Array(e),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}let s=i.map(a=>yn(a)),o=ble(t.baseTime,1,t.timescale);try{s.forEach(a=>r(Kce(a,o)))}catch(a){n(a)}}function Kce(e,t){let r=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");let n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(n).reduce((c,u)=>(c[u]=r.getAttribute(`ttp:${u}`)||n[u],c),{}),s=r.getAttribute("xml:space")!=="preserve",o=H_(L0(r,"styling","style")),a=H_(L0(r,"layout","region")),l=L0(r,"body","[begin]");return[].map.call(l,c=>{let u=RB(c,s);if(!u||!c.hasAttribute("begin"))return null;let d=D0(c.getAttribute("begin"),i),h=D0(c.getAttribute("dur"),i),f=D0(c.getAttribute("end"),i);if(d===null)throw z_(c);if(f===null){if(h===null)throw z_(c);f=d+h}let p=new Cb(d-t,f-t,u);p.id=xb(p.startTime,p.endTime,p.text);let g=a[c.getAttribute("region")],v=o[c.getAttribute("style")],m=Yce(g,v,o),{textAlign:y}=m;if(y){let E=qce[y];E&&(p.lineAlign=E),p.align=y}return gt(p,m),p}).filter(c=>c!==null)}function L0(e,t,r){let n=e.getElementsByTagName(t)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function H_(e){return e.reduce((t,r)=>{let n=r.getAttribute("xml:id");return n&&(t[n]=r),t},{})}function RB(e,t){return[].slice.call(e.childNodes).reduce((r,n,i)=>{var s;return n.nodeName==="br"&&i?r+`
`:(s=n.childNodes)!=null&&s.length?RB(n,t):t?r+n.textContent.trim().replace(/\s+/g," "):r+n.textContent},"")}function Yce(e,t,r){let n="http://www.w3.org/ns/ttml#styling",i=null,s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=e!=null&&e.hasAttribute("style")?e.getAttribute("style"):null;return o&&r.hasOwnProperty(o)&&(i=r[o]),s.reduce((a,l)=>{let c=P0(t,n,l)||P0(e,n,l)||P0(i,n,l);return c&&(a[l]=c),a},{})}function P0(e,t,r){return e&&e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function z_(e){return new Error(`Could not parse ttml timestamp ${e}`)}function D0(e,t){if(!e)return null;let r=wB(e);return r===null&&(CB.test(e)?r=Xce(e,t):xB.test(e)&&(r=Qce(e,t))),r}function Xce(e,t){let r=CB.exec(e),n=(r[4]|0)+(r[5]|0)/t.subFrameRate;return(r[1]|0)*3600+(r[2]|0)*60+(r[3]|0)+n/t.frameRate}function Qce(e,t){let r=xB.exec(e),n=Number(r[1]);switch(r[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/t.frameRate;case"t":return n/t.tickRate}return n}var fl=class{constructor(t,r){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=r}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(t,r,n){(this.startTime===null||this.startTime>t)&&(this.startTime=t),this.endTime=r,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}},_S=class{constructor(t){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=G_(),this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},t.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(R.FRAG_LOADING,this.onFragLoading,this),t.on(R.FRAG_LOADED,this.onFragLoaded,this),t.on(R.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(R.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(R.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(R.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){let{hls:t}=this;t.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(R.FRAG_LOADING,this.onFragLoading,this),t.off(R.FRAG_LOADED,this.onFragLoaded,this),t.off(R.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(R.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(R.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(R.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){let t=new fl(this,"textTrack1"),r=new fl(this,"textTrack2"),n=new fl(this,"textTrack3"),i=new fl(this,"textTrack4");this.cea608Parser1=new og(1,t,r),this.cea608Parser2=new og(3,n,i)}addCues(t,r,n,i,s){let o=!1;for(let a=s.length;a--;){let l=s[a],c=Zce(l[0],l[1],r,n);if(c>=0&&(l[0]=Math.min(l[0],r),l[1]=Math.max(l[1],n),o=!0,c/(n-r)>.5))return}if(o||s.push([r,n]),this.config.renderTextTracksNatively){let a=this.captionsTracks[t];this.Cues.newCue(a,r,n,i)}else{let a=this.Cues.newCue(null,r,n,i);this.hls.trigger(R.CUES_PARSED,{type:"captions",cues:a,track:t})}}onInitPtsFound(t,{frag:r,id:n,initPTS:i,timescale:s,trackId:o}){let{unparsedVttFrags:a}=this;n===Re.MAIN&&(this.initPTS[r.cc]={baseTime:i,timescale:s,trackId:o}),a.length&&(this.unparsedVttFrags=[],a.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded(R.FRAG_LOADED,l):this.hls.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(t,r){let{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){let s=n.textTracks[i];if($_(s,{name:t,lang:r,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return s}return null}createCaptionsTrack(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)}createNativeTrack(t){if(this.captionsTracks[t])return;let{captionsProperties:r,captionsTracks:n,media:i}=this,{label:s,languageCode:o}=r[t],a=this.getExistingTrack(s,o);if(a)n[t]=a,hl(n[t]),EB(n[t],i);else{let l=this.createTextTrack("captions",s,o);l&&(l[t]=!0,n[t]=l)}}createNonNativeTrack(t){if(this.nonNativeCaptionsTracks[t])return;let r=this.captionsProperties[t];if(!r)return;let n=r.label,i={_id:t,label:n,kind:"captions",default:r.media?!!r.media.default:!1,closedCaptions:r.media};this.nonNativeCaptionsTracks[t]=i,this.hls.trigger(R.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(t,r,n){let i=this.media;if(i)return i.addTextTrack(t,r,n)}onMediaAttaching(t,r){this.media=r.media,r.mediaSource||this._cleanTracks()}onMediaDetaching(t,r){let n=!!r.transferMedia;if(this.media=null,n)return;let{captionsTracks:i}=this;Object.keys(i).forEach(s=>{hl(i[s]),delete i[s]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=G_(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){let{media:t}=this;if(!t)return;let r=t.textTracks;if(r)for(let n=0;n<r.length;n++)hl(r[n])}onSubtitleTracksUpdated(t,r){let n=r.subtitleTracks||[],i=n.some(s=>s.textCodec===_0);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(aB(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){let s=this.media,o=s?op(s.textTracks):null;if(this.tracks.forEach((a,l)=>{let c;if(o){let u=null;for(let d=0;d<o.length;d++)if(o[d]&&$_(o[d],a)){u=o[d],o[d]=null;break}u&&(c=u)}if(c)hl(c);else{let u=IB(a);c=this.createTextTrack(u,a.name,a.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),o!=null&&o.length){let a=o.filter(l=>l!==null).map(l=>l.label);a.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${a.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){let s=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(R.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}}onManifestLoaded(t,r){this.config.enableCEA708Captions&&r.captions&&r.captions.forEach(n=>{let i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;let s=`textTrack${i[1]}`,o=this.captionsProperties[s];o&&(o.label=n.name,n.lang&&(o.languageCode=n.lang),o.media=n)})}closedCaptionsForLevel(t){let r=this.hls.levels[t.level];return r?.attrs["CLOSED-CAPTIONS"]}onFragLoading(t,r){if(this.enabled&&r.frag.type===Re.MAIN){var n,i;let{cea608Parser1:s,cea608Parser2:o,lastSn:a}=this,{cc:l,sn:c}=r.frag,u=(n=(i=r.part)==null?void 0:i.index)!=null?n:-1;s&&o&&(c!==a+1||c===a&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(s.reset(),o.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(t,r){let{frag:n,payload:i}=r;if(n.type===Re.SUBTITLE)if(i.byteLength){let s=n.decryptdata,o="stats"in r;if(s==null||!s.encrypted||o){let a=this.tracks[n.level],l=this.vttCCs;l[n.cc]||(l[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),a&&a.textCodec===_0?this._parseIMSC1(n,i):this._parseVTTs(r)}}else this.hls.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(t,r){let n=this.hls;U_(r,this.initPTS[t.cc],i=>{this._appendCues(i,t.level),n.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},i=>{n.logger.log(`Failed to parse IMSC1: ${i}`),n.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:i})})}_parseVTTs(t){var r;let{frag:n,payload:i}=t,{initPTS:s,unparsedVttFrags:o}=this,a=s.length-1;if(!s[n.cc]&&a===-1){o.push(t);return}let l=this.hls,c=(r=n.initSegment)!=null&&r.data?Pn(n.initSegment.data,new Uint8Array(i)).buffer:i;Wce(c,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,u=>{this._appendCues(u,n.level),l.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},u=>{let d=u.message==="Missing initPTS for VTT MPEGTS";d?o.push(t):this._fallbackToIMSC1(n,i),l.logger.log(`Failed to parse VTT cue: ${u}`),!(d&&a>n.cc)&&l.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:u})})}_fallbackToIMSC1(t,r){let n=this.tracks[t.level];n.textCodec||U_(r,this.initPTS[t.cc],()=>{n.textCodec=_0,this._parseIMSC1(t,r)},()=>{n.textCodec="wvtt"})}_appendCues(t,r){let n=this.hls;if(this.config.renderTextTracksNatively){let i=this.textTracks[r];if(!i||i.mode==="disabled")return;t.forEach(s=>TB(i,s))}else{let i=this.tracks[r];if(!i)return;let s=i.default?"default":"subtitles"+r;n.trigger(R.CUES_PARSED,{type:"subtitles",cues:t,track:s})}}onFragDecrypted(t,r){let{frag:n}=r;n.type===Re.SUBTITLE&&this.onFragLoaded(R.FRAG_LOADED,r)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(t,r){if(!this.enabled||!this.config.enableCEA708Captions)return;let{frag:n,samples:i}=r;if(!(n.type===Re.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let s=0;s<i.length;s++){let o=i[s].bytes;if(o){this.cea608Parser1||this.initCea608Parsers();let a=this.extractCea608Data(o);this.cea608Parser1.addData(i[s].pts,a[0]),this.cea608Parser2.addData(i[s].pts,a[1])}}}onBufferFlushing(t,{startOffset:r,endOffset:n,endOffsetSubtitles:i,type:s}){let{media:o}=this;if(!(!o||o.currentTime<n)){if(!s||s==="video"){let{captionsTracks:a}=this;Object.keys(a).forEach(l=>pS(a[l],r,n))}if(this.config.renderTextTracksNatively&&r===0&&i!==void 0){let{textTracks:a}=this;Object.keys(a).forEach(l=>pS(a[l],r,i))}}}extractCea608Data(t){let r=[[],[]],n=t[0]&31,i=2;for(let s=0;s<n;s++){let o=t[i++],a=127&t[i++],l=127&t[i++];if(!(a===0&&l===0)&&(4&o)!==0){let c=3&o;(c===0||c===1)&&(r[c].push(a),r[c].push(l))}}return r}};function IB(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function $_(e,t){return!!e&&e.kind===IB(t)&&rS(t,e)}function Zce(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}function G_(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}var Jce=/\s/,eue={newCue(e,t,r,n){let i=[],s,o,a,l,c,u=self.VTTCue||self.TextTrackCue;for(let h=0;h<n.rows.length;h++)if(s=n.rows[h],a=!0,l=0,c="",!s.isEmpty()){var d;for(let g=0;g<s.chars.length;g++)Jce.test(s.chars[g].uchar)&&a?l++:(c+=s.chars[g].uchar,a=!1);s.cueStartTime=t,t===r&&(r+=1e-4),l>=16?l--:l++;let f=kB(c.trim()),p=xb(t,r,f);e!=null&&(d=e.cues)!=null&&d.getCueById(p)||(o=new u(t,r,f),o.id=p,o.line=h+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(o))}return e&&i.length&&(i.sort((h,f)=>h.line==="auto"||f.line==="auto"?0:h.line>8&&f.line>8?f.line-h.line:h.line-f.line),i.forEach(h=>TB(e,h))),i}};function tue(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var rue=/(\d+)-(\d+)\/(\d+)/,ag=class{constructor(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||oue,this.controller=new self.AbortController,this.stats=new Ku}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var t;this.abortInternal(),(t=this.callbacks)!=null&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(t,r,n){let i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();let s=nue(t,this.controller.signal),o=t.responseType==="arraybuffer",a=o?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=r.loadPolicy;this.context=t,this.config=r,this.callbacks=n,this.request=this.fetchSetup(t,s),self.clearTimeout(this.requestTimeout),r.timeout=l&&ke(l)?l:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,t,this.response))},r.timeout),(id(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(u=>{var d;this.response=this.loader=u;let h=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),r.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,t,this.response))},c-(h-i.loading.start)),!u.ok){let{status:p,statusText:g}=u;throw new LS(g||"fetch, bad network response",p,u)}i.loading.first=h,i.total=sue(u.headers)||i.total;let f=(d=this.callbacks)==null?void 0:d.onProgress;return f&&ke(r.highWaterMark)?this.loadProgressively(u,i,t,r.highWaterMark,f):o?u.arrayBuffer():t.responseType==="json"?u.json():u.text()}).then(u=>{var d,h;let f=this.response;if(!f)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);let p=u[a];p&&(i.loaded=i.total=p);let g={url:f.url,data:u,code:f.status},v=(d=this.callbacks)==null?void 0:d.onProgress;v&&!ke(r.highWaterMark)&&v(i,t,u,f),(h=this.callbacks)==null||h.onSuccess(g,i,t,f)}).catch(u=>{var d;if(self.clearTimeout(this.requestTimeout),i.aborted)return;let h=u&&u.code||0,f=u?u.message:null;(d=this.callbacks)==null||d.onError({code:h,text:f},t,u?u.details:null,i)})}getCacheAge(){let t=null;if(this.response){let r=this.response.headers.get("age");t=r?parseFloat(r):null}return t}getResponseHeader(t){return this.response?this.response.headers.get(t):null}loadProgressively(t,r,n,i=0,s){let o=new Xp,a=t.body.getReader(),l=()=>a.read().then(c=>{if(c.done)return o.dataLength&&s(r,n,o.flush().buffer,t),Promise.resolve(new ArrayBuffer(0));let u=c.value,d=u.length;return r.loaded+=d,d<i||o.dataLength?(o.push(u),o.dataLength>=i&&s(r,n,o.flush().buffer,t)):s(r,n,u.buffer,t),l()}).catch(()=>Promise.reject());return l()}};function nue(e,t){let r={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(gt({},e.headers))};return e.rangeEnd&&r.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),r}function iue(e){let t=rue.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}function sue(e){let t=e.get("Content-Range");if(t){let n=iue(t);if(ke(n))return n}let r=e.get("Content-Length");if(r)return parseInt(r)}function oue(e,t){return new self.Request(e.url,t)}var LS=class extends Error{constructor(t,r,n){super(t),this.code=void 0,this.details=void 0,this.code=r,this.details=n}},aue=/^age:\s*[\d.]+\s*$/im,lg=class{constructor(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=t&&t.xhrSetup||null,this.stats=new Ku,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){let t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,t.readyState!==4&&(this.stats.aborted=!0,t.abort()))}abort(){var t;this.abortInternal(),(t=this.callbacks)!=null&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(t,r,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=r,this.callbacks=n,this.loadInternal()}loadInternal(){let{config:t,context:r}=this;if(!t||!r)return;let n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;let s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return s(n,r.url)}).catch(o=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",r.url,!0),s(n,r.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,r,t)}).catch(o=>{var a;(a=this.callbacks)==null||a.onError({code:n.status,text:o.message},r,n,i)}):this.openAndSendXhr(n,r,t)}openAndSendXhr(t,r,n){t.readyState||t.open("GET",r.url,!0);let i=r.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:o}=n.loadPolicy;if(i)for(let a in i)t.setRequestHeader(a,i[a]);r.rangeEnd&&t.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=r.responseType,self.clearTimeout(this.requestTimeout),n.timeout=s&&ke(s)?s:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),t.send()}readystatechange(){let{context:t,loader:r,stats:n}=this;if(!t||!r)return;let i=r.readyState,s=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),r.onreadystatechange=null,r.onprogress=null;let c=r.status,u=r.responseType==="text"?r.responseText:null;if(c>=200&&c<300){let p=u??r.response;if(p!=null){var o,a;n.loading.end=Math.max(self.performance.now(),n.loading.first);let g=r.responseType==="arraybuffer"?p.byteLength:p.length;n.loaded=n.total=g,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);let v=(o=this.callbacks)==null?void 0:o.onProgress;v&&v(n,t,p,r);let m={url:r.responseURL,data:p,code:c};(a=this.callbacks)==null||a.onSuccess(m,n,t,r);return}}let d=s.loadPolicy.errorRetry,h=n.retry,f={url:t.url,data:void 0,code:c};if(jp(d,h,!1,f))this.retry(d);else{var l;ut.error(`${c} while loading ${t.url}`),(l=this.callbacks)==null||l.onError({code:c,text:r.statusText},t,r,n)}}}loadtimeout(){if(!this.config)return;let t=this.config.loadPolicy.timeoutRetry,r=this.stats.retry;if(jp(t,r,!0))this.retry(t);else{var n;ut.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);let i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(t){let{context:r,stats:n}=this;this.retryDelay=gb(t,n.retry),n.retry++,ut.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${r?.url}, retrying ${n.retry}/${t.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(t){let r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total)}getCacheAge(){let t=null;if(this.loader&&aue.test(this.loader.getAllResponseHeaders())){let r=this.loader.getResponseHeader("age");t=r?parseFloat(r):null}return t}getResponseHeader(t){return this.loader&&new RegExp(`^${t}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(t):null}},lue={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},cue=ct(ct({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:lg,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:RT,bufferController:oS,capLevelController:aS,errorController:_T,fpsController:fS,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:D2,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:lue},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},uue()),{},{subtitleStreamController:SS,subtitleTrackController:gS,timelineController:_S,audioStreamController:tS,audioTrackController:nS,emeController:rg,cmcdController:dS,contentSteeringController:hS,interstitialsController:TS});function uue(){return{cueHandler:eue,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function due(e,t,r){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(t.liveMaxLatencyDurationCount!==void 0&&(t.liveSyncDurationCount===void 0||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(t.liveMaxLatencyDuration!==void 0&&(t.liveSyncDuration===void 0||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');let n=PS(e),i=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(o=>{let a=`${o==="level"?"playlist":o}LoadPolicy`,l=t[a]===void 0,c=[];s.forEach(u=>{let d=`${o}Loading${u}`,h=t[d];if(h!==void 0&&l){c.push(d);let f=n[a].default;switch(t[a]={default:f},u){case"TimeOut":f.maxLoadTimeMs=h,f.maxTimeToFirstByteMs=h;break;case"MaxRetry":f.errorRetry.maxNumRetry=h,f.timeoutRetry.maxNumRetry=h;break;case"RetryDelay":f.errorRetry.retryDelayMs=h,f.timeoutRetry.retryDelayMs=h;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=h,f.timeoutRetry.maxRetryDelayMs=h;break}}}),c.length&&r.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${a}": ${vt(t[a])}`)}),ct(ct({},n),t)}function PS(e){return e&&typeof e=="object"?Array.isArray(e)?e.map(PS):Object.keys(e).reduce((t,r)=>(t[r]=PS(e[r]),t),{}):e}function hue(e,t){let r=e.loader;r!==ag&&r!==lg?(t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):tue()&&(e.loader=ag,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}var ap=2,fue=.1,pue=.05,gue=100,DS=class extends Vp{constructor(t,r){super("gap-controller",t.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(R.MEDIA_ENDED,{stalled:!1})}},this.hls=t,this.fragmentTracker=r,this.registerListeners()}registerListeners(){let{hls:t}=this;t&&(t.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(R.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){let{hls:t}=this;t&&(t.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(R.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(t,r){this.setInterval(gue),this.mediaSource=r.mediaSource;let n=this.media=r.media;Br(n,"playing",this.onMediaPlaying),Br(n,"waiting",this.onMediaWaiting),Br(n,"ended",this.onMediaEnded)}onMediaDetaching(t,r){this.clearInterval();let{media:n}=this;n&&(Yr(n,"playing",this.onMediaPlaying),Yr(n,"waiting",this.onMediaWaiting),Yr(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(t,r){this.buffered=r.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var t;if(!((t=this.media)!=null&&t.readyState)||!this.hasBuffered)return;let r=this.media.currentTime;this.poll(r,this.lastCurrentTime),this.lastCurrentTime=r}poll(t,r){var n,i;let s=(n=this.hls)==null?void 0:n.config;if(!s)return;let o=this.media;if(!o)return;let{seeking:a}=o,l=this.seeking&&!a,c=!this.seeking&&a,u=o.paused&&!a||o.ended||o.playbackRate===0;if(this.seeking=a,t!==r){r&&(this.ended=0),this.moved=!0,a||(this.nudgeRetry=0,s.nudgeOnVideoHole&&!u&&t>r&&this.nudgeOnVideoHole(t,r)),this.waiting===0&&this.stallResolved(t);return}if(c||l){l&&this.stallResolved(t);return}if(u){this.nudgeRetry=0,this.stallResolved(t),!this.ended&&o.ended&&this.hls&&(this.ended=t||1,this.hls.trigger(R.MEDIA_ENDED,{stalled:!1}));return}if(!Qe.getBuffered(o).length){this.nudgeRetry=0;return}let d=Qe.bufferInfo(o,t,0),h=d.nextStart||0,f=this.fragmentTracker;if(a&&f&&this.hls){let w=j_(this.hls.inFlightFragments,t),x=d.len>ap,D=!h||w||h-t>ap&&!f.getPartialFragment(t);if(x||D)return;this.moved=!1}let p=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&f){if(!(d.len>0)&&!h)return;let w=Math.max(h,d.start||0)-t,x=p!=null&&p.live?p.targetduration*2:ap,D=Uf(t,f);if(w>0&&(w<=x||D)){o.paused||this._trySkipBufferHole(D);return}}let g=s.detectStallWithCurrentTimeMs,v=self.performance.now(),m=this.waiting,y=this.stalled;if(y===null)if(m>0&&v-m<g)y=this.stalled=m;else{this.stalled=v;return}let E=v-y;if(!a&&(E>=g||m)&&this.hls){var S;if(((S=this.mediaSource)==null?void 0:S.readyState)==="ended"&&!(p!=null&&p.live)&&Math.abs(t-(p?.edge||0))<1){if(this.ended)return;this.ended=t||1,this.hls.trigger(R.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(d),!this.media||!this.hls)return}let b=Qe.bufferInfo(o,t,s.maxBufferHole);this._tryFixBufferStall(b,E,t)}stallResolved(t){let r=this.stalled;if(r&&this.hls&&(this.stalled=null,this.stallReported)){let n=self.performance.now()-r;this.log(`playback not stuck anymore @${t}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(R.STALL_RESOLVED,{})}}nudgeOnVideoHole(t,r){var n;let i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&i&&i.length>1&&t>i.end(0)){let s=Qe.bufferedInfo(Qe.timeRangesToArray(this.buffered.audio),t,0);if(s.len>1&&r>=s.start){let o=Qe.timeRangesToArray(i),a=Qe.bufferedInfo(o,r,0).bufferedIndex;if(a>-1&&a<o.length-1){let l=Qe.bufferedInfo(o,t,0).bufferedIndex,c=o[a].end,u=o[a+1].start;if((l===-1||l>a)&&u-c<1&&t-c<2){let d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${t} hole: ${c} -> ${u} buffered index: ${l}`);this.warn(d.message),this.media.currentTime+=1e-6;let h=Uf(t,this.fragmentTracker);h&&"fragment"in h?h=h.fragment:h||(h=void 0);let f=Qe.bufferInfo(this.media,t,0);this.hls.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:h,buffer:f.len,bufferInfo:f})}}}}}_tryFixBufferStall(t,r,n){var i,s;let{fragmentTracker:o,media:a}=this,l=(i=this.hls)==null?void 0:i.config;if(!a||!o||!l)return;let c=(s=this.hls)==null?void 0:s.latestLevelDetails,u=Uf(n,o);if((u||c!=null&&c.live&&n<c.fragmentStart)&&(this._trySkipBufferHole(u)||!this.media))return;let d=t.buffered,h=this.adjacentTraversal(t,n);(d&&d.length>1&&t.len>l.maxBufferHole||t.nextStart&&(t.nextStart-n<l.maxBufferHole||h))&&(r>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(t))}adjacentTraversal(t,r){let n=this.fragmentTracker,i=t.nextStart;if(n&&i){let s=n.getFragAtPos(r,Re.MAIN),o=n.getFragAtPos(i,Re.MAIN);if(s&&o)return o.sn-s.sn<2}return!1}_reportStall(t){let{hls:r,media:n,stallReported:i,stalled:s}=this;if(!i&&s!==null&&n&&r){this.stallReported=!0;let o=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${vt(t)})`);this.warn(o.message),r.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.BUFFER_STALLED_ERROR,fatal:!1,error:o,buffer:t.len,bufferInfo:t,stalled:{start:s}})}}_trySkipBufferHole(t){var r;let{fragmentTracker:n,media:i}=this,s=(r=this.hls)==null?void 0:r.config;if(!i||!n||!s)return 0;let o=i.currentTime,a=Qe.bufferInfo(i,o,0),l=o<a.start?a.start:a.nextStart;if(l&&this.hls){let u=a.len<=s.maxBufferHole,d=a.len>0&&a.len<1&&i.readyState<3,h=l-o;if(h>0&&(u||d)){if(h>s.maxBufferHole){let p=!1;if(o===0){let g=n.getAppendedFrag(0,Re.MAIN);g&&l<g.end&&(p=!0)}if(!p&&t){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||j_(this.hls.inFlightFragments,l))return 0;let g=!1,v=t.end;for(;v<l;){let m=Uf(v,n);if(m)v+=m.duration;else{g=!0;break}}if(g)return 0}}let f=Math.max(l+pue,o+fue);if(this.warn(`skipping hole, adjusting currentTime from ${o} to ${f}`),this.moved=!0,i.currentTime=f,!(t!=null&&t.gap)){let p=new Error(`fragment loaded with buffer holes, seeking from ${o} to ${f}`),g={type:Oe.MEDIA_ERROR,details:Q.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,buffer:a.len,bufferInfo:a};t&&("fragment"in t?g.part=t:g.frag=t),this.hls.trigger(R.ERROR,g)}return f}}return 0}_tryNudgeBuffer(t){let{hls:r,media:n,nudgeRetry:i}=this,s=r?.config;if(!n||!s)return 0;let o=n.currentTime;if(this.nudgeRetry++,i<s.nudgeMaxRetry){let a=o+(i+1)*s.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${o} to ${a}`);this.warn(l.message),n.currentTime=a,r.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:t.len,bufferInfo:t})}else{let a=new Error(`Playhead still not moving while enough data buffered @${o} after ${s.nudgeMaxRetry} nudges`);this.error(a.message),r.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.BUFFER_STALLED_ERROR,error:a,fatal:!0,buffer:t.len,bufferInfo:t})}}};function j_(e,t){let r=V_(e.main);if(r&&r.start<=t)return r;let n=V_(e.audio);return n&&n.start<=t?n:null}function V_(e){if(!e)return null;switch(e.state){case ae.IDLE:case ae.STOPPED:case ae.ENDED:case ae.ERROR:return null}return e.frag}function Uf(e,t){return t.getAppendedFrag(e,Re.MAIN)||t.getPartialFragment(e)}var mue=.25;function OS(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function O0(e,t,r,n,i){let s=new e(t,r,"");try{s.value=n,i&&(s.type=i)}catch{s=new e(t,r,vt(i?ct({type:i},n):n))}return s}var Hf=(()=>{let e=OS();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})(),NS=class{constructor(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(R.EVENT_CUE_ENTER,{})},this.hls=t,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){let{hls:t}=this;t&&(t.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(R.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(R.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){let{hls:t}=this;t&&(t.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(R.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(R.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(t,r){var n;this.media=r.media,((n=r.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var t;let r=(t=this.hls)==null?void 0:t.latestLevelDetails;r&&this.updateDateRangeCues(r)}onMediaDetaching(t,r){this.media=null,!r.transferMedia&&(this.id3Track&&(this.removeCues&&hl(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(t){let r=this.getID3Track(t.textTracks);return r.mode="hidden",r}getID3Track(t){if(this.media){for(let r=0;r<t.length;r++){let n=t[r];if(n.kind==="metadata"&&n.label==="id3")return EB(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(t,r){if(!this.media||!this.hls)return;let{enableEmsgMetadataCues:n,enableID3MetadataCues:i}=this.hls.config;if(!n&&!i)return;let{samples:s}=r;this.id3Track||(this.id3Track=this.createTrack(this.media));let o=OS();if(o)for(let a=0;a<s.length;a++){let l=s[a].type;if(l===gn.emsg&&!n||!i)continue;let c=X2(s[a].data),u=s[a].pts,d=u+s[a].duration;d>Hf&&(d=Hf),d-u<=0&&(d=u+mue);for(let h=0;h<c.length;h++){let f=c[h];if(!Q2(f)){this.updateId3CueEnds(u,l);let p=O0(o,u,d,f,l);p&&this.id3Track.addCue(p)}}}}updateId3CueEnds(t,r){var n;let i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let s=i.length;s--;){let o=i[s];o.type===r&&o.startTime<t&&o.endTime===Hf&&(o.endTime=t)}}onBufferFlushing(t,{startOffset:r,endOffset:n,type:i}){let{id3Track:s,hls:o}=this;if(!o)return;let{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(s&&(a||l)){let c;i==="audio"?c=u=>u.type===gn.audioId3&&l:i==="video"?c=u=>u.type===gn.emsg&&a:c=u=>u.type===gn.audioId3&&l||u.type===gn.emsg&&a,pS(s,r,n,c)}}onLevelUpdated(t,{details:r}){this.updateDateRangeCues(r,!0)}onLevelPtsUpdated(t,r){Math.abs(r.drift)>.01&&this.updateDateRangeCues(r.details)}updateDateRangeCues(t,r){if(!this.hls||!this.media)return;let{assetPlayerId:n,timelineOffset:i,enableDateRangeMetadataCues:s,interstitialsController:o}=this.hls.config;if(!s)return;let a=OS();if(n&&i&&!o){let{fragmentStart:g,fragmentEnd:v}=t,m=this.assetCue;m?(m.startTime=g,m.endTime=v):a&&(m=this.assetCue=O0(a,g,v,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),m&&(m.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(m),m.addEventListener("enter",this.onEventCueEnter)))}if(!t.hasProgramDateTime)return;let{id3Track:l}=this,{dateRanges:c}=t,u=Object.keys(c),d=this.dateRangeCuesAppended;if(l&&r){var h;if((h=l.cues)!=null&&h.length){let g=Object.keys(d).filter(v=>!u.includes(v));for(let v=g.length;v--;){var f;let m=g[v],y=(f=d[m])==null?void 0:f.cues;delete d[m],y&&Object.keys(y).forEach(E=>{let S=y[E];if(S){S.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(S)}catch{}}})}}else d=this.dateRangeCuesAppended={}}let p=t.fragments[t.fragments.length-1];if(!(u.length===0||!ke(p?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let g=0;g<u.length;g++){let v=u[g],m=c[v],y=m.startTime,E=d[v],S=E?.cues||{},b=E?.durationKnown||!1,w=Hf,{duration:x,endDate:D}=m;if(D&&x!==null)w=y+x,b=!0;else if(m.endOnNext&&!b){let C=u.reduce((P,U)=>{if(U!==m.id){let G=c[U];if(G.class===m.class&&G.startDate>m.startDate&&(!P||m.startDate<P.startDate))return G}return P},null);C&&(w=C.startTime,b=!0)}let N=Object.keys(m.attr);for(let C=0;C<N.length;C++){let P=N[C];if(!Sae(P))continue;let U=S[P];if(U)b&&!(E!=null&&E.durationKnown)?U.endTime=w:Math.abs(U.startTime-y)>.01&&(U.startTime=y,U.endTime=w);else if(a){let G=m.attr[P];bae(P)&&(G=d2(G));let K=O0(a,y,w,{key:P,data:G},gn.dateRange);K&&(K.id=v,this.id3Track.addCue(K),S[P]=K,o&&(P==="X-ASSET-LIST"||P==="X-ASSET-URL")&&K.addEventListener("enter",this.onEventCueEnter))}}d[v]={cues:S,dateRange:m,durationKnown:b}}}}},MS=class{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{let{media:r}=this,n=this.levelDetails;if(!r||!n)return;this.currentTime=r.currentTime;let i=this.computeLatency();if(i===null)return;this._latency=i;let{lowLatencyMode:s,maxLiveSyncPlaybackRate:o}=this.config;if(!s||o===1||!n.live)return;let a=this.targetLatency;if(a===null)return;let l=i-a,c=Math.min(this.maxLatency,a+n.targetduration);if(l<c&&l>.05&&this.forwardBufferLength>1){let u=Math.min(2,Math.max(1,o)),d=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,h=Math.min(u,Math.max(1,d));this.changeMediaPlaybackRate(r,h)}else r.playbackRate!==1&&r.playbackRate!==0&&this.changeMediaPlaybackRate(r,1)},this.hls=t,this.config=t.config,this.registerListeners()}get levelDetails(){var t;return((t=this.hls)==null?void 0:t.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){let{config:t}=this;if(t.liveMaxLatencyDuration!==void 0)return t.liveMaxLatencyDuration;let r=this.levelDetails;return r?t.liveMaxLatencyDurationCount*r.targetduration:0}get targetLatency(){let t=this.levelDetails;if(t===null||this.hls===null)return null;let{holdBack:r,partHoldBack:n,targetduration:i}=t,{liveSyncDuration:s,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig,c=a&&n||r;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=s!==void 0?s:o*i);let u=i;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,u)}set targetLatency(t){this.stallCount=0,this.config.liveSyncDuration=t,this._targetLatencyUpdated=!0}get liveSyncPosition(){let t=this.estimateLiveEdge(),r=this.targetLatency;if(t===null||r===null)return null;let n=this.levelDetails;if(n===null)return null;let i=n.edge,s=t-r-this.edgeStalled,o=i-n.totalduration,a=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(o,s),a)}get drift(){let t=this.levelDetails;return t===null?1:t.drift}get edgeStalled(){let t=this.levelDetails;if(t===null)return 0;let r=(this.config.lowLatencyMode&&t.partTarget||t.targetduration)*3;return Math.max(t.age-r,0)}get forwardBufferLength(){let{media:t}=this,r=this.levelDetails;if(!t||!r)return 0;let n=t.buffered.length;return(n?t.buffered.end(n-1):r.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){let{hls:t}=this;t&&(t.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(R.ERROR,this.onError,this))}unregisterListeners(){let{hls:t}=this;t&&(t.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(R.ERROR,this.onError,this))}onMediaAttached(t,r){this.media=r.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(t,{details:r}){r.advanced&&this.onTimeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(t,r){var n;r.details===Q.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(t,r){var n,i;t.playbackRate!==r&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${t.playbackRate} to ${r}`),t.playbackRate=r)}estimateLiveEdge(){let t=this.levelDetails;return t===null?null:t.edge+t.age}computeLatency(){let t=this.estimateLiveEdge();return t===null?null:t-this.currentTime}},FS=class extends sd{constructor(t,r){super(t,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=r,this._registerListeners()}_registerListeners(){let{hls:t}=this;t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(R.LEVEL_LOADED,this.onLevelLoaded,this),t.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(R.FRAG_BUFFERED,this.onFragBuffered,this),t.on(R.ERROR,this.onError,this)}_unregisterListeners(){let{hls:t}=this;t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(R.LEVEL_LOADED,this.onLevelLoaded,this),t.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(R.FRAG_BUFFERED,this.onFragBuffered,this),t.off(R.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(t,r){this.resetLevels()}onManifestLoaded(t,r){let n=this.hls.config.preferManagedMediaSource,i=[],s={},o={},a=!1,l=!1,c=!1;r.levels.forEach(u=>{let d=u.attrs,{audioCodec:h,videoCodec:f}=u;h&&(u.audioCodec=h=Up(h,n)||void 0),f&&(f=u.videoCodec=Voe(f));let{width:p,height:g,unknownCodecs:v}=u,m=v?.length||0;if(a||(a=!!(p&&g)),l||(l=!!f),c||(c=!!h),m||h&&!this.isAudioSupported(h)||f&&!this.isVideoSupported(f)){this.log(`Some or all CODECS not supported "${d.CODECS}"`);return}let{CODECS:y,"FRAME-RATE":E,"HDCP-LEVEL":S,"PATHWAY-ID":b,RESOLUTION:w,"VIDEO-RANGE":x}=d,D=`${`${b||"."}-`}${u.bitrate}-${w}-${E}-${y}-${x}-${S}`;if(s[D])if(s[D].uri!==u.url&&!u.attrs["PATHWAY-ID"]){let N=o[D]+=1;u.attrs["PATHWAY-ID"]=new Array(N+1).join(".");let C=this.createLevel(u);s[D]=C,i.push(C)}else s[D].addGroupId("audio",d.AUDIO),s[D].addGroupId("text",d.SUBTITLES);else{let N=this.createLevel(u);s[D]=N,o[D]=1,i.push(N)}}),this.filterAndSortMediaOptions(i,r,a,l,c)}createLevel(t){let r=new Yo(t),n=t.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){let i=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(i.message),r.supportedResult=b2(i,[])}return r}isAudioSupported(t){return Yu(t,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(t){return Yu(t,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(t,r,n,i,s){var o;let a=[],l=[],c=t,u=((o=r.stats)==null?void 0:o.parsing)||{};if((n||i)&&s&&(c=c.filter(({videoCodec:y,videoRange:E,width:S,height:b})=>(!!y||!!(S&&b))&&tae(E))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let y="no level with compatible codecs found in manifest",E=y;r.levels.length&&(E=`one or more CODECS in variant not supported: ${vt(r.levels.map(b=>b.attrs.CODECS).filter((b,w,x)=>x.indexOf(b)===w))}`,this.warn(E),y+=` (${E})`);let S=new Error(y);this.hls.trigger(R.ERROR,{type:Oe.MEDIA_ERROR,details:Q.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:r.url,error:S,reason:E})}}),u.end=performance.now();return}r.audioTracks&&(a=r.audioTracks.filter(y=>!y.audioCodec||this.isAudioSupported(y.audioCodec)),W_(a)),r.subtitles&&(l=r.subtitles,W_(l));let d=c.slice(0);c.sort((y,E)=>{if(y.attrs["HDCP-LEVEL"]!==E.attrs["HDCP-LEVEL"])return(y.attrs["HDCP-LEVEL"]||"")>(E.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&y.height!==E.height)return y.height-E.height;if(y.frameRate!==E.frameRate)return y.frameRate-E.frameRate;if(y.videoRange!==E.videoRange)return Hp.indexOf(y.videoRange)-Hp.indexOf(E.videoRange);if(y.videoCodec!==E.videoCodec){let S=zI(y.videoCodec),b=zI(E.videoCodec);if(S!==b)return b-S}if(y.uri===E.uri&&y.codecSet!==E.codecSet){let S=Bp(y.codecSet),b=Bp(E.codecSet);if(S!==b)return b-S}return y.averageBitrate!==E.averageBitrate?y.averageBitrate-E.averageBitrate:0});let h=d[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==d.length)){for(let y=0;y<d.length;y++)if(d[y].pathwayId===c[0].pathwayId){h=d[y];break}}this._levels=c;for(let y=0;y<c.length;y++)if(c[y]===h){var f;this._firstLevel=y;let E=h.bitrate,S=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${E}`),((f=this.hls.userConfig)==null?void 0:f.abrEwmaDefaultEstimate)===void 0){let b=Math.min(E,this.hls.config.abrEwmaDefaultEstimateMax);b>S&&S===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=b)}break}let p=s&&!i,g=this.hls.config,v=!!(g.audioStreamController&&g.audioTrackController),m={levels:c,audioTracks:a,subtitleTracks:l,sessionData:r.sessionData,sessionKeys:r.sessionKeys,firstLevel:this._firstLevel,stats:r.stats,audio:s,video:i,altAudio:v&&!p&&a.some(y=>!!y.url)};u.end=performance.now(),this.hls.trigger(R.MANIFEST_PARSED,m)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(t){let r=this._levels;if(r.length===0)return;if(t<0||t>=r.length){let u=new Error("invalid level idx"),d=t<0;if(this.hls.trigger(R.ERROR,{type:Oe.OTHER_ERROR,details:Q.LEVEL_SWITCH_ERROR,level:t,fatal:d,error:u,reason:u.message}),d)return;t=Math.min(t,r.length-1)}let n=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,o=r[t],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=t,this.currentLevel=o,n===t&&i&&s===a)return;this.log(`Switching to level ${t} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${n}${s?" with Pathway "+s:""}`);let l={level:t,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(R.LEVEL_SWITCHING,l);let c=o.details;if(!c||c.live){let u=this.switchParams(o.uri,i?.details,c);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(t){this.manualLevelIndex=t,this._startLevel===void 0&&(this._startLevel=t),t!==-1&&(this.level=t)}get firstLevel(){return this._firstLevel}set firstLevel(t){this._firstLevel=t}get startLevel(){if(this._startLevel===void 0){let t=this.hls.config.startLevel;return t!==void 0?t:this.hls.firstAutoLevel}return this._startLevel}set startLevel(t){this._startLevel=t}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(t){if(this.steering){let r=this.steering.pathways(),n=t.filter(i=>r.indexOf(i)!==-1);if(t.length<1){this.warn(`pathwayPriority ${t} should contain at least one pathway from list: ${r}`);return}this.steering.pathwayPriority=n}}onError(t,r){r.fatal||!r.context||r.context.type===et.LEVEL&&r.context.level===this.level&&this.checkRetry(r)}onFragBuffered(t,{frag:r}){if(r!==void 0&&r.type===Re.MAIN){let n=r.elementaryStreams;if(!Object.keys(n).some(s=>!!n[s]))return;let i=this._levels[r.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(t,r){var n;let{level:i,details:s}=r,o=r.levelInfo;if(!o){var a;this.warn(`Invalid level index ${i}`),(a=r.deliveryDirectives)!=null&&a.skip&&(s.deltaUpdateFailed=!0);return}if(o===this.currentLevel||r.withoutMultiVariant){o.fragmentError===0&&(o.loadError=0);let l=o.details;l===r.details&&l.advanced&&(l=void 0),this.playlistLoaded(i,r,l)}else(n=r.deliveryDirectives)!=null&&n.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(t){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,t)}loadingPlaylist(t,r){super.loadingPlaylist(t,r);let n=this.getUrlWithDirectives(t.uri,r),i=this.currentLevelIndex,s=t.attrs["PATHWAY-ID"],o=t.details,a=o?.age;this.log(`Loading level index ${i}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${s?" Pathway "+s:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${n}`),this.hls.trigger(R.LEVEL_LOADING,{url:n,level:i,levelInfo:t,pathwayId:t.attrs["PATHWAY-ID"],id:0,deliveryDirectives:r||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}removeLevel(t){var r;if(this._levels.length===1)return;let n=this._levels.filter((s,o)=>o!==t?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(a=>a.level=-1)),!1));z2(n),this._levels=n,this.currentLevelIndex>-1&&(r=this.currentLevel)!=null&&r.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);let i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(R.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(t,{levels:r}){this._levels=r}checkMaxAutoUpdated(){let{autoLevelCapping:t,maxAutoLevel:r,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==r&&(this._maxAutoLevel=r,this.hls.trigger(R.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:t,levels:this.levels,maxAutoLevel:r,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}};function W_(e){let t={};e.forEach(r=>{let n=r.groupId||"";r.id=t[n]=t[n]||0,t[n]++})}function _B(){return self.SourceBuffer||self.WebKitSourceBuffer}function LB(){if(!Ks())return!1;let e=_B();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function vue(){if(!LB())return!1;let e=Ks();return typeof e?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>e.isTypeSupported(Xu(t,"video")))||["mp4a.40.2","fLaC"].some(t=>e.isTypeSupported(Xu(t,"audio"))))}function yue(){var e;let t=_B();return typeof(t==null||(e=t.prototype)==null?void 0:e.changeType)=="function"}var Eue=100,BS=class extends ed{constructor(t,r,n){super(t,r,n,"stream-controller",Re.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{let i=this.media,s=i?i.currentTime:null;if(s===null||!ke(s)||(this.log(`Media seeked to ${s.toFixed(3)}`),!this.getBufferedFrag(s)))return;let o=this.getFwdBufferInfoAtPos(i,s,Re.MAIN,0);if(o===null||o.len===0){this.warn(`Main forward buffer length at ${s} on "seeked" event ${o?o.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();let{hls:t}=this;t.on(R.MANIFEST_PARSED,this.onManifestParsed,this),t.on(R.LEVEL_LOADING,this.onLevelLoading,this),t.on(R.LEVEL_LOADED,this.onLevelLoaded,this),t.on(R.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(R.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(R.BUFFER_CREATED,this.onBufferCreated,this),t.on(R.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(R.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();let{hls:t}=this;t.off(R.MANIFEST_PARSED,this.onManifestParsed,this),t.off(R.LEVEL_LOADED,this.onLevelLoaded,this),t.off(R.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(R.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(R.BUFFER_CREATED,this.onBufferCreated,this),t.off(R.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(R.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(t,r){if(this.levels){let{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(Eue),this.level=-1,!this.startFragRequested){let s=i.startLevel;s===-1&&(i.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=i.firstAutoLevel),i.nextLoadLevel=s,this.level=i.loadLevel,this._hasEnoughToStart=!!r}n>0&&t===-1&&!r&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),t=n),this.state=ae.IDLE,this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=r?-1:t,this.tick()}else this._forceStartLoad=!0,this.state=ae.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ae.WAITING_LEVEL:{let{levels:t,level:r}=this,n=t?.[r],i=n?.details;if(i&&(!i.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(i))break;this.state=ae.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ae.IDLE;break}break}case ae.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===ae.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var t;super.onTickEnd(),(t=this.media)!=null&&t.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){let{hls:t,levelLastLoaded:r,levels:n,media:i}=this;if(r===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!t.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;let s=this.buffering?t.nextLoadLevel:t.loadLevel;if(!(n!=null&&n[s]))return;let o=n[s],a=this.getMainFwdBufferInfo();if(a===null)return;let l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){let g={};this.altAudio===2&&(g.type="video"),this.hls.trigger(R.BUFFER_EOS,g),this.state=ae.ENDED;return}if(!this.buffering)return;t.loadLevel!==s&&t.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=t.nextLoadLevel=s;let c=o.details;if(!c||this.state===ae.WAITING_LEVEL||this.waitForLive(o)){this.level=s,this.state=ae.WAITING_LEVEL,this.startFragRequested=!1;return}let u=a.len,d=this.getMaxBufferLength(o.maxBitrate);if(u>=d)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);let h=this.backtrackFragment?this.backtrackFragment.start:a.end,f=this.getNextFragment(h,c);if(this.couldBacktrack&&!this.fragPrevious&&f&&Zt(f)&&this.fragmentTracker.getState(f)!==nr.OK){var p;let g=((p=this.backtrackFragment)!=null?p:f).sn-c.startSN,v=c.fragments[g-1];v&&f.cc===v.cc&&(f=v,this.fragmentTracker.removeFragment(v))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){let g=this.audioOnly&&!this.altAudio?mt.AUDIO:mt.VIDEO,v=(g===mt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;v&&this.afterBufferFlushed(v,g,Re.MAIN)}f=this.getNextFragmentLoopLoading(f,c,a,Re.MAIN,d)}f&&(f.initSegment&&!f.initSegment.data&&!this.bitrateTest&&(f=f.initSegment),this.loadFragment(f,o,h))}loadFragment(t,r,n){let i=this.fragmentTracker.getState(t);i===nr.NOT_LOADED||i===nr.PARTIAL?Zt(t)?this.bitrateTest?(this.log(`Fragment ${t.sn} of level ${t.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(t,r)):super.loadFragment(t,r,n):this._loadInitSegment(t,r):this.clearTrackerIfNeeded(t)}getBufferedFrag(t){return this.fragmentTracker.getBufferedFrag(t,Re.MAIN)}followingBufferedFrag(t){return t?this.getBufferedFrag(t.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){let{levels:t,media:r}=this;if(r!=null&&r.readyState){let n,i=this.getAppendedFrag(r.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);let s=this.getLevelDetails();if(s!=null&&s.live){let a=this.getMainFwdBufferInfo();if(!a||a.len<s.targetduration*2)return}if(!r.paused&&t){let a=this.hls.nextLoadLevel,l=t[a],c=this.fragLastKbps;c&&this.fragCurrent?n=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:n=0}else n=0;let o=this.getBufferedFrag(r.currentTime+n);if(o){let a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();let l=a.maxStartPTS?a.maxStartPTS:a.start,c=a.duration,u=Math.max(o.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){let t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case ae.KEY_LOADING:case ae.FRAG_LOADING:case ae.FRAG_LOADING_WAITING_RETRY:case ae.PARSING:case ae.PARSED:this.state=ae.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(t,r){super.flushMainBuffer(t,r,this.altAudio===2?"video":null)}onMediaAttached(t,r){super.onMediaAttached(t,r);let n=r.media;Br(n,"playing",this.onMediaPlaying),Br(n,"seeked",this.onMediaSeeked)}onMediaDetaching(t,r){let{media:n}=this;n&&(Yr(n,"playing",this.onMediaPlaying),Yr(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(t,r),!r.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(R.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(t,r){let n=!1,i=!1;for(let s=0;s<r.levels.length;s++){let o=r.levels[s].audioCodec;o&&(n=n||o.indexOf("mp4a.40.2")!==-1,i=i||o.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&i&&!yue(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=r.levels,this.startFragRequested=!1}onLevelLoading(t,r){let{levels:n}=this;if(!n||this.state!==ae.IDLE)return;let i=r.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=ae.WAITING_LEVEL)}onLevelLoaded(t,r){var n;let{levels:i,startFragRequested:s}=this,o=r.level,a=r.details,l=a.totalduration;if(!i){this.warn(`Levels were reset while loading level ${o}`);return}this.log(`Level ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${l}`);let c=r.levelInfo,u=this.fragCurrent;u&&(this.state===ae.FRAG_LOADING||this.state===ae.FRAG_LOADING_WAITING_RETRY)&&u.level!==r.level&&u.loader&&this.abortCurrentFrag();let d=0;if(a.live||(n=c.details)!=null&&n.live){var h;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;d=this.alignPlaylists(a,c.details,(h=this.levelLastLoaded)==null?void 0:h.details)}if(c.details=a,this.levelLastLoaded=c,s||this.setStartPosition(a,d),this.hls.trigger(R.LEVEL_UPDATED,{details:a,level:o}),this.state===ae.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=ae.IDLE}s&&a.live&&this.synchronizeToLiveEdge(a),this.tick()}synchronizeToLiveEdge(t){let{config:r,media:n}=this;if(!n)return;let i=this.hls.liveSyncPosition,s=this.getLoadPosition(),o=t.fragmentStart,a=t.edge,l=s>=o-r.maxFragLookUpTolerance&&s<=a;if(i!==null&&n.duration>i&&(s<i||!l)){let u=r.liveMaxLatencyDuration!==void 0?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*t.targetduration;if((!l&&n.readyState<4||s<a-u)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),n.readyState))if(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var c;let d=Qe.bufferInfo(n,i,0);if(!((c=d.buffered)!=null&&c.length)){n.currentTime=i;return}if(d.start<=s){n.currentTime=i;return}let{nextStart:h}=Qe.bufferedInfo(d.buffered,s,0);h&&(n.currentTime=h)}else n.currentTime=i}}_handleFragmentLoadProgress(t){var r;let n=t.frag,{part:i,payload:s}=t,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}let a=o[n.level];if(!a){this.warn(`Level ${n.level} not found on progress`);return}let l=a.details;if(!l){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}let c=a.videoCodec,u=l.PTSKnown||!l.live,d=(r=n.initSegment)==null?void 0:r.data,h=this._getAudioCodec(a),f=this.transmuxer=this.transmuxer||new eg(this.hls,Re.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=i?i.index:-1,g=p!==-1,v=new Zu(n.level,n.sn,n.stats.chunkCount,s.byteLength,p,g),m=this.initPTS[n.cc];f.push(s,d,h,c,n,i,l.totalduration,u,v,m)}onAudioTrackSwitching(t,r){let n=this.hls,i=this.altAudio===2;if($p(r.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;let s=this.fragCurrent;s&&(this.log("Switching to main audio track, cancel main fragment load"),s.abortRequests(),this.fragmentTracker.removeFragment(s)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.fragmentTracker.removeAllFragments(),n.once(R.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(R.AUDIO_TRACK_SWITCHED,r)}),n.trigger(R.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(R.AUDIO_TRACK_SWITCHED,r)}}onAudioTrackSwitched(t,r){let n=$p(r.url,this.hls);if(n){let i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n?2:0,this.tick()}onBufferCreated(t,r){let n=r.tracks,i,s,o=!1;for(let a in n){let l=n[a];if(l.id==="main"){if(s=a,i=l,a==="video"){let c=n[a];c&&(this.videoBuffer=c.buffer)}}else o=!0}o&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(t,r){let{frag:n,part:i}=r,s=n.type===Re.MAIN;if(s){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ae.PARSED&&(this.state=ae.IDLE);return}let a=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),Zt(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}let o=this.media;o&&(!this._hasEnoughToStart&&Qe.getBuffered(o).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),s&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(t,r){var n;if(r.fatal){this.state=ae.ERROR;return}switch(r.details){case Q.FRAG_GAP:case Q.FRAG_PARSING_ERROR:case Q.FRAG_DECRYPT_ERROR:case Q.FRAG_LOAD_ERROR:case Q.FRAG_LOAD_TIMEOUT:case Q.KEY_LOAD_ERROR:case Q.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Re.MAIN,r);break;case Q.LEVEL_LOAD_ERROR:case Q.LEVEL_LOAD_TIMEOUT:case Q.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===ae.WAITING_LEVEL&&((n=r.context)==null?void 0:n.type)===et.LEVEL&&(this.state=ae.IDLE);break;case Q.BUFFER_ADD_CODEC_ERROR:case Q.BUFFER_APPEND_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&this.resetLoadingState();break;case Q.BUFFER_FULL_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case Q.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onFragLoadEmergencyAborted(){this.state=ae.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(t,{type:r}){if(r!==mt.AUDIO||!this.altAudio){let n=(r===mt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,r,Re.MAIN),this.tick())}}onLevelsUpdated(t,r){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=r.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){let{media:t}=this;if(!t)return;let r=t.currentTime,n=this.startPosition;if(n>=0&&r<n){if(t.seeking){this.log(`could not seek to ${n}, already seeking at ${r}`);return}let i=this.timelineOffset;i&&n&&(n+=i);let s=this.getLevelDetails(),o=Qe.getBuffered(t),a=o.length?o.start(0):0,l=a-n,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<c||this.loadingParts&&l<2*(s?.partTarget||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),n+=l,this.startPosition=n),r<n&&(this.log(`seek to target start position ${n} from current time ${r} buffer start ${a}`),t.currentTime=n)}}_getAudioCodec(t){let r=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&r&&(this.log("Swapping audio codec"),r.indexOf("mp4a.40.5")!==-1?r="mp4a.40.2":r="mp4a.40.5"),r}_loadBitrateTestFrag(t,r){t.bitrateTest=!0,this._doFragLoad(t,r).then(n=>{let{hls:i}=this,s=n?.frag;if(!s||this.fragContextChanged(s))return;r.fragmentError=0,this.state=ae.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;let o=s.stats;o.parsing.start=o.parsing.end=o.buffering.start=o.buffering.end=self.performance.now(),i.trigger(R.FRAG_LOADED,n),s.bitrateTest=!1}).catch(n=>{this.state===ae.STOPPED||this.state===ae.ERROR||(this.warn(n),this.resetFragmentLoading(t))})}_handleTransmuxComplete(t){let r=this.playlistType,{hls:n}=this,{remuxResult:i,chunkMeta:s}=t,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}let{frag:a,part:l,level:c}=o,{video:u,text:d,id3:h,initSegment:f}=i,{details:p}=c,g=this.altAudio?void 0:i.audio;if(this.fragContextChanged(a)){this.fragmentTracker.removeFragment(a);return}if(this.state=ae.PARSING,f){let v=f.tracks;if(v){let S=a.initSegment||a;if(this.unhandledEncryptionError(f,a))return;this._bufferInitSegment(c,v,S,s),n.trigger(R.FRAG_PARSING_INIT_SEGMENT,{frag:S,id:r,tracks:v})}let m=f.initPTS,y=f.timescale,E=this.initPTS[a.cc];if(ke(m)&&(!E||E.baseTime!==m||E.timescale!==y)){let S=f.trackId;this.initPTS[a.cc]={baseTime:m,timescale:y,trackId:S},n.trigger(R.INIT_PTS_FOUND,{frag:a,id:r,initPTS:m,timescale:y,trackId:S})}}if(u&&p){g&&u.type==="audiovideo"&&this.logMuxedErr(a);let v=p.fragments[a.sn-1-p.startSN],m=a.sn===p.startSN,y=!v||a.cc>v.cc;if(i.independent!==!1){let{startPTS:E,endPTS:S,startDTS:b,endDTS:w}=u;if(l)l.elementaryStreams[u.type]={startPTS:E,endPTS:S,startDTS:b,endDTS:w};else if(u.firstKeyFrame&&u.independent&&s.id===1&&!y&&(this.couldBacktrack=!0),u.dropped&&u.independent){let x=this.getMainFwdBufferInfo(),D=(x?x.end:this.getLoadPosition())+this.config.maxBufferHole,N=u.firstKeyFramePTS?u.firstKeyFramePTS:E;if(!m&&D<N-this.config.maxBufferHole&&!y){this.backtrack(a);return}else y&&(a.gap=!0);a.setElementaryStreamInfo(u.type,a.start,S,a.start,w,!0)}else m&&E-(p.appliedTimelineOffset||0)>ap&&(a.gap=!0);a.setElementaryStreamInfo(u.type,E,S,b,w),this.backtrackFragment&&(this.backtrackFragment=a),this.bufferFragmentData(u,a,l,s,m||y)}else if(m||y)a.gap=!0;else{this.backtrack(a);return}}if(g){let{startPTS:v,endPTS:m,startDTS:y,endDTS:E}=g;l&&(l.elementaryStreams[mt.AUDIO]={startPTS:v,endPTS:m,startDTS:y,endDTS:E}),a.setElementaryStreamInfo(mt.AUDIO,v,m,y,E),this.bufferFragmentData(g,a,l,s)}if(p&&h!=null&&h.samples.length){let v={id:r,frag:a,details:p,samples:h.samples};n.trigger(R.FRAG_PARSING_METADATA,v)}if(p&&d){let v={id:r,frag:a,details:p,samples:d.samples};n.trigger(R.FRAG_PARSING_USERDATA,v)}}logMuxedErr(t){this.warn(`${Zt(t)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${t.url}`)}_bufferInitSegment(t,r,n,i){if(this.state!==ae.PARSING)return;this.audioOnly=!!r.audio&&!r.video,this.altAudio&&!this.audioOnly&&(delete r.audio,r.audiovideo&&this.logMuxedErr(n));let{audio:s,video:o,audiovideo:a}=r;if(s){let c=t.audioCodec,u=tp(s.codec,c);u==="mp4a"&&(u="mp4a.40.5");let d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){u&&(u.indexOf("mp4a.40.5")!==-1?u="mp4a.40.2":u="mp4a.40.5");let h=s.metadata;h&&"channelCount"in h&&(h.channelCount||1)!==1&&d.indexOf("firefox")===-1&&(u="mp4a.40.5")}u&&u.indexOf("mp4a.40.5")!==-1&&d.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(u="mp4a.40.2",this.log(`Android: force audio codec to ${u}`)),c&&c!==u&&this.log(`Swapping manifest audio codec "${c}" for "${u}"`),s.levelCodec=u,s.id=Re.MAIN,this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${u||""}/${c||""}/${s.codec}]`),delete r.audiovideo}if(o){o.levelCodec=t.videoCodec,o.id=Re.MAIN;let c=o.codec;if(c?.length===4)switch(c){case"hvc1":case"hev1":o.codec="hvc1.1.6.L120.90";break;case"av01":o.codec="av01.0.04M.08";break;case"avc1":o.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${t.videoCodec||""}/${c}]${o.codec!==c?" parsed-corrected="+o.codec:""}${o.supplemental?" supplemental="+o.supplemental:""}`),delete r.audiovideo}a&&(this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${t.codecs}/${a.codec}]`),delete r.video,delete r.audio);let l=Object.keys(r);if(l.length){if(this.hls.trigger(R.BUFFER_CODECS,r),!this.hls)return;l.forEach(c=>{let u=r[c].initSegment;u!=null&&u.byteLength&&this.hls.trigger(R.BUFFER_APPENDING,{type:c,data:u,frag:n,part:null,chunkMeta:i,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){let t=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(t,Re.MAIN)}get maxBufferLength(){let{levels:t,level:r}=this,n=t?.[r];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=ae.IDLE}checkFragmentChanged(){let t=this.media,r=null;if(t&&t.readyState>1&&t.seeking===!1){let n=t.currentTime;if(Qe.isBuffered(t,n)?r=this.getAppendedFrag(n):Qe.isBuffered(t,n+.1)&&(r=this.getAppendedFrag(n+.1)),r){this.backtrackFragment=null;let i=this.fragPlaying,s=r.level;(!i||r.sn!==i.sn||i.level!==s)&&(this.fragPlaying=r,this.hls.trigger(R.FRAG_CHANGED,{frag:r}),(!i||i.level!==s)&&this.hls.trigger(R.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){let t=this.nextBufferedFrag;return t?t.level:-1}get currentFrag(){var t;if(this.fragPlaying)return this.fragPlaying;let r=((t=this.media)==null?void 0:t.currentTime)||this.lastCurrentTime;return ke(r)?this.getAppendedFrag(r):null}get currentProgramDateTime(){var t;let r=((t=this.media)==null?void 0:t.currentTime)||this.lastCurrentTime;if(ke(r)){let n=this.getLevelDetails(),i=this.currentFrag||(n?Xo(null,n.fragments,r):null);if(i){let s=i.programDateTime;if(s!==null){let o=s+(r-i.start)*1e3;return new Date(o)}}}return null}get currentLevel(){let t=this.currentFrag;return t?t.level:-1}get nextBufferedFrag(){let t=this.currentFrag;return t?this.followingBufferedFrag(t):null}get forceStartLoad(){return this._forceStartLoad}},US=class extends Jr{constructor(t,r){super("key-loader",r),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=t}abort(t){for(let n in this.keyIdToKeyInfo){let i=this.keyIdToKeyInfo[n].loader;if(i){var r;if(t&&t!==((r=i.context)==null?void 0:r.frag.type))return;i.abort()}}}detach(){for(let t in this.keyIdToKeyInfo){let r=this.keyIdToKeyInfo[t];(r.mediaKeySessionContext||r.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[t]}}destroy(){this.detach();for(let t in this.keyIdToKeyInfo){let r=this.keyIdToKeyInfo[t].loader;r&&r.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(t,r=Q.KEY_LOAD_ERROR,n,i,s){return new Wn({type:Oe.NETWORK_ERROR,details:r,fatal:!1,frag:t,response:s,error:n,networkDetails:i})}loadClear(t,r,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(r.length)for(let i=0,s=r.length;i<s;i++){let o=r[i];if(t.cc<=o.cc&&(!Zt(t)||!Zt(o)||t.sn<o.sn)||!n&&i==s-1)return this.emeController.selectKeySystemFormat(o).then(a=>{if(!this.emeController)return;o.setKeyFormat(a);let l=np(a);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){let i=lu(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(t){return!t.decryptdata&&t.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(t).then(r=>this.loadInternal(t,r)):this.loadInternal(t)}loadInternal(t,r){var n,i;r&&t.setKeyFormat(r);let s=t.decryptdata;if(!s){let c=new Error(r?`Expected frag.decryptdata to be defined after setting format ${r}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(t,Q.KEY_LOAD_ERROR,c))}let o=s.uri;if(!o)return Promise.reject(this.createKeyLoadError(t,Q.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=N0(s),l=this.keyIdToKeyInfo[a];if((n=l)!=null&&n.decryptdata.key)return s.key=l.decryptdata.key,Promise.resolve({frag:t,keyInfo:l});if(this.emeController&&(i=l)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(l.decryptdata)){case"usable":case"usable-in-future":return l.keyLoadPromise.then(c=>{let{keyInfo:u}=c;return s.key=u.decryptdata.key,{frag:t,keyInfo:u}})}switch(this.log(`${this.keyIdToKeyInfo[a]?"Rel":"L"}oading${s.keyId?" keyId: "+Fr(s.keyId):""} URI: ${s.uri} from ${t.type} ${t.level}`),l=this.keyIdToKeyInfo[a]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(l,t):this.loadKeyEME(l,t);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,t);default:return Promise.reject(this.createKeyLoadError(t,Q.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(t,r){let n={frag:r,keyInfo:t};if(this.emeController&&this.config.emeEnabled){var i;if(!t.decryptdata.keyId&&(i=r.initSegment)!=null&&i.data){let o=Doe(r.initSegment.data);if(o.length){let a=o[0];a.some(l=>l!==0)&&(this.log(`Using keyId found in init segment ${Fr(a)}`),t.decryptdata.keyId=a,Ju.setKeyIdForUri(t.decryptdata.uri,a))}}let s=this.emeController.loadKey(n);return(t.keyLoadPromise=s.then(o=>(t.mediaKeySessionContext=o,n))).catch(o=>{throw t.keyLoadPromise=null,"data"in o&&(o.data.frag=r),o})}return Promise.resolve(n)}loadKeyHTTP(t,r){let n=this.config,i=n.loader,s=new i(n);return r.keyLoader=t.loader=s,t.keyLoadPromise=new Promise((o,a)=>{let l={keyInfo:t,frag:r,responseType:"arraybuffer",url:t.decryptdata.uri},c=n.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,g)=>{let{frag:v,keyInfo:m}=p,y=N0(m.decryptdata);if(!v.decryptdata||m!==this.keyIdToKeyInfo[y])return a(this.createKeyLoadError(v,Q.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));m.decryptdata.key=v.decryptdata.key=new Uint8Array(h.data),v.keyLoader=null,m.loader=null,o({frag:v,keyInfo:m})},onError:(h,f,p,g)=>{this.resetLoader(f),a(this.createKeyLoadError(r,Q.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),p,ct({url:l.url,data:void 0},h)))},onTimeout:(h,f,p)=>{this.resetLoader(f),a(this.createKeyLoadError(r,Q.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(h,f,p)=>{this.resetLoader(f),a(this.createKeyLoadError(r,Q.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};s.load(l,u,d)})}resetLoader(t){let{frag:r,keyInfo:n,url:i}=t,s=n.loader;r.keyLoader===s&&(r.keyLoader=null,n.loader=null);let o=N0(n.decryptdata)||i;delete this.keyIdToKeyInfo[o],s&&s.destroy()}};function N0(e){if(e.keyFormat!==vr.FAIRPLAY){let t=e.keyId;if(t)return Fr(t)}return e.uri}function q_(e){let{type:t}=e;switch(t){case et.AUDIO_TRACK:return Re.AUDIO;case et.SUBTITLE_TRACK:return Re.SUBTITLE;default:return Re.MAIN}}function M0(e,t){let r=e.url;return(r===void 0||r.indexOf("data:")===0)&&(r=t.url),r}var HS=class{constructor(t){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=t,this.registerListeners()}startLoad(t){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){let{hls:t}=this;t.on(R.MANIFEST_LOADING,this.onManifestLoading,this),t.on(R.LEVEL_LOADING,this.onLevelLoading,this),t.on(R.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(R.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),t.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){let{hls:t}=this;t.off(R.MANIFEST_LOADING,this.onManifestLoading,this),t.off(R.LEVEL_LOADING,this.onLevelLoading,this),t.off(R.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(R.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),t.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(t){let r=this.hls.config,n=r.pLoader,i=r.loader,s=n||i,o=new s(r);return this.loaders[t.type]=o,o}getInternalLoader(t){return this.loaders[t.type]}resetInternalLoader(t){this.loaders[t]&&delete this.loaders[t]}destroyInternalLoaders(){for(let t in this.loaders){let r=this.loaders[t];r&&r.destroy(),this.resetInternalLoader(t)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(t,r){let{url:n}=r;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:et.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(t,r){let{id:n,level:i,pathwayId:s,url:o,deliveryDirectives:a,levelInfo:l}=r;this.load({id:n,level:i,pathwayId:s,responseType:"text",type:et.LEVEL,url:o,deliveryDirectives:a,levelOrTrack:l})}onAudioTrackLoading(t,r){let{id:n,groupId:i,url:s,deliveryDirectives:o,track:a}=r;this.load({id:n,groupId:i,level:null,responseType:"text",type:et.AUDIO_TRACK,url:s,deliveryDirectives:o,levelOrTrack:a})}onSubtitleTrackLoading(t,r){let{id:n,groupId:i,url:s,deliveryDirectives:o,track:a}=r;this.load({id:n,groupId:i,level:null,responseType:"text",type:et.SUBTITLE_TRACK,url:s,deliveryDirectives:o,levelOrTrack:a})}onLevelsUpdated(t,r){let n=this.loaders[et.LEVEL];if(n){let i=n.context;i&&!r.levels.some(s=>s===i.levelOrTrack)&&(n.abort(),delete this.loaders[et.LEVEL])}}load(t){var r;let n=this.hls.config,i=this.getInternalLoader(t);if(i){let c=this.hls.logger,u=i.context;if(u&&u.levelOrTrack===t.levelOrTrack&&(u.url===t.url||u.deliveryDirectives&&!t.deliveryDirectives)){u.url===t.url?c.log(`[playlist-loader]: ignore ${t.url} ongoing request`):c.log(`[playlist-loader]: ignore ${t.url} in favor of ${u.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${t.type}`),i.abort()}let s;if(t.type===et.MANIFEST?s=n.manifestLoadPolicy.default:s=gt({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(t),ke((r=t.deliveryDirectives)==null?void 0:r.part)){let c;if(t.type===et.LEVEL&&t.level!==null?c=this.hls.levels[t.level].details:t.type===et.AUDIO_TRACK&&t.id!==null?c=this.hls.audioTracks[t.id].details:t.type===et.SUBTITLE_TRACK&&t.id!==null&&(c=this.hls.subtitleTracks[t.id].details),c){let u=c.partTarget,d=c.targetduration;if(u&&d){let h=Math.max(u*3,d*.8)*1e3;s=gt({},s,{maxTimeToFirstByteMs:Math.min(h,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,s.maxTimeToFirstByteMs)})}}}let o=s.errorRetry||s.timeoutRetry||{},a={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(c,u,d,h)=>{let f=this.getInternalLoader(d);this.resetInternalLoader(d.type);let p=c.data;u.parsing.start=performance.now(),Fo.isMediaPlaylist(p)||d.type!==et.MANIFEST?this.handleTrackOrLevelPlaylist(c,u,d,h||null,f):this.handleMasterPlaylist(c,u,d,h)},onError:(c,u,d,h)=>{this.handleNetworkError(u,d,!1,c,h)},onTimeout:(c,u,d)=>{this.handleNetworkError(u,d,!0,void 0,c)}};i.load(t,a,l)}checkAutostartLoad(){if(!this.hls)return;let{config:{autoStartLoad:t,startPosition:r},forceStartLoad:n}=this.hls;(t||n)&&(this.hls.logger.log(`${t?"auto":"force"} startLoad with configured startPosition ${r}`),this.hls.startLoad(r))}handleMasterPlaylist(t,r,n,i){let s=this.hls,o=t.data,a=M0(t,n),l=Fo.parseMasterPlaylist(o,a);if(l.playlistParsingError){r.parsing.end=performance.now(),this.handleManifestParsingError(t,n,l.playlistParsingError,i,r);return}let{contentSteering:c,levels:u,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p}=l;this.variableList=p,u.forEach(y=>{let{unknownCodecs:E}=y;if(E){let{preferManagedMediaSource:S}=this.hls.config,{audioCodec:b,videoCodec:w}=y;for(let x=E.length;x--;){let D=E[x];Yu(D,"audio",S)?(y.audioCodec=b=b?`${b},${D}`:D,Nl.audio[b.substring(0,4)]=2,E.splice(x,1)):Yu(D,"video",S)&&(y.videoCodec=w=w?`${w},${D}`:D,Nl.video[w.substring(0,4)]=2,E.splice(x,1))}}});let{AUDIO:g=[],SUBTITLES:v,"CLOSED-CAPTIONS":m}=Fo.parseMasterPlaylistMedia(o,a,l);g.length&&!g.some(y=>!y.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Bt({}),bitrate:0,url:""})),s.trigger(R.MANIFEST_LOADED,{levels:u,audioTracks:g,subtitles:v,captions:m,contentSteering:c,url:a,stats:r,networkDetails:i,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p})}handleTrackOrLevelPlaylist(t,r,n,i,s){let o=this.hls,{id:a,level:l,type:c}=n,u=M0(t,n),d=ke(l)?l:ke(a)?a:0,h=q_(n),f=Fo.parseLevelPlaylist(t.data,u,d,h,0,this.variableList);if(c===et.MANIFEST){let p={attrs:new Bt({}),bitrate:0,details:f,name:"",url:u};f.requestScheduled=r.loading.start+B2(f,0),o.trigger(R.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:u,stats:r,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}r.parsing.end=performance.now(),n.levelDetails=f,this.handlePlaylistLoaded(f,t,r,n,i,s)}handleManifestParsingError(t,r,n,i,s){this.hls.trigger(R.ERROR,{type:Oe.NETWORK_ERROR,details:Q.MANIFEST_PARSING_ERROR,fatal:r.type===et.MANIFEST,url:t.url,err:n,error:n,reason:n.message,response:t,context:r,networkDetails:i,stats:s})}handleNetworkError(t,r,n=!1,i,s){let o=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${t.type}`;t.type===et.LEVEL?o+=`: ${t.level} id: ${t.id}`:(t.type===et.AUDIO_TRACK||t.type===et.SUBTITLE_TRACK)&&(o+=` id: ${t.id} group-id: "${t.groupId}"`);let a=new Error(o);this.hls.logger.warn(`[playlist-loader]: ${o}`);let l=Q.UNKNOWN,c=!1,u=this.getInternalLoader(t);switch(t.type){case et.MANIFEST:l=n?Q.MANIFEST_LOAD_TIMEOUT:Q.MANIFEST_LOAD_ERROR,c=!0;break;case et.LEVEL:l=n?Q.LEVEL_LOAD_TIMEOUT:Q.LEVEL_LOAD_ERROR,c=!1;break;case et.AUDIO_TRACK:l=n?Q.AUDIO_TRACK_LOAD_TIMEOUT:Q.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case et.SUBTITLE_TRACK:l=n?Q.SUBTITLE_TRACK_LOAD_TIMEOUT:Q.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(t.type);let d={type:Oe.NETWORK_ERROR,details:l,fatal:c,url:t.url,loader:u,context:t,error:a,networkDetails:r,stats:s};if(i){let h=r?.url||t.url;d.response=ct({url:h,data:void 0},i)}this.hls.trigger(R.ERROR,d)}handlePlaylistLoaded(t,r,n,i,s,o){let a=this.hls,{type:l,level:c,levelOrTrack:u,id:d,groupId:h,deliveryDirectives:f}=i,p=M0(r,i),g=q_(i),v=typeof i.level=="number"&&g===Re.MAIN?c:void 0,m=t.playlistParsingError;if(m){if(this.hls.logger.warn(`${m} ${t.url}`),!a.config.ignorePlaylistParsingErrors){a.trigger(R.ERROR,{type:Oe.NETWORK_ERROR,details:Q.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:m,reason:m.message,response:r,context:i,level:v,parent:g,networkDetails:s,stats:n});return}t.playlistParsingError=null}if(!t.fragments.length){let y=t.playlistParsingError=new Error("No Segments found in Playlist");a.trigger(R.ERROR,{type:Oe.NETWORK_ERROR,details:Q.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:y,reason:y.message,response:r,context:i,level:v,parent:g,networkDetails:s,stats:n});return}switch(t.live&&o&&(o.getCacheAge&&(t.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(t.ageHeader))&&(t.ageHeader=0)),l){case et.MANIFEST:case et.LEVEL:if(v){if(!u)v=0;else if(u!==a.levels[v]){let y=a.levels.indexOf(u);y>-1&&(v=y)}}a.trigger(R.LEVEL_LOADED,{details:t,levelInfo:u||a.levels[0],level:v||0,id:d||0,stats:n,networkDetails:s,deliveryDirectives:f,withoutMultiVariant:l===et.MANIFEST});break;case et.AUDIO_TRACK:a.trigger(R.AUDIO_TRACK_LOADED,{details:t,track:u,id:d||0,groupId:h||"",stats:n,networkDetails:s,deliveryDirectives:f});break;case et.SUBTITLE_TRACK:a.trigger(R.SUBTITLE_TRACK_LOADED,{details:t,track:u,id:d||0,groupId:h||"",stats:n,networkDetails:s,deliveryDirectives:f});break}}},vn=class e{static get version(){return td}static isMSESupported(){return LB()}static isSupported(){return vue()}static getMediaSource(){return Ks()}static get Events(){return R}static get MetadataSchema(){return gn}static get ErrorTypes(){return Oe}static get ErrorDetails(){return Q}static get DefaultConfig(){return e.defaultConfig?e.defaultConfig:cue}static set DefaultConfig(t){e.defaultConfig=t}constructor(t={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new yb,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;let r=this.logger=boe(t.debug||!1,"Hls instance",t.assetPlayerId),n=this.config=due(e.DefaultConfig,t,r);this.userConfig=t,n.progressive&&hue(n,r);let{abrController:i,bufferController:s,capLevelController:o,errorController:a,fpsController:l}=n,c=new a(this),u=this.abrController=new i(this),d=new LT(this),h=n.interstitialsController,f=h?this.interstitialsController=new h(this,e):null,p=this.bufferController=new s(this,d),g=this.capLevelController=new o(this),v=new l(this),m=new HS(this),y=n.contentSteeringController,E=y?new y(this):null,S=this.levelController=new FS(this,E),b=new NS(this),w=new US(this.config,this.logger),x=this.streamController=new BS(this,d,w),D=this.gapController=new DS(this,d);g.setStreamController(x),v.setStreamController(x);let N=[m,S,x];f&&N.splice(1,0,f),E&&N.splice(1,0,E),this.networkControllers=N;let C=[u,p,D,g,v,b,d];this.audioTrackController=this.createController(n.audioTrackController,N);let P=n.audioStreamController;P&&N.push(this.audioStreamController=new P(this,d,w)),this.subtitleTrackController=this.createController(n.subtitleTrackController,N);let U=n.subtitleStreamController;U&&N.push(this.subtititleStreamController=new U(this,d,w)),this.createController(n.timelineController,C),w.emeController=this.emeController=this.createController(n.emeController,C),this.cmcdController=this.createController(n.cmcdController,C),this.latencyController=this.createController(MS,C),this.coreComponents=C,N.push(c);let G=c.onErrorOut;typeof G=="function"&&this.on(R.ERROR,G,c),this.on(R.MANIFEST_LOADED,m.onManifestLoaded,m)}createController(t,r){if(t){let n=new t(this);return r&&r.push(n),n}return null}on(t,r,n=this){this._emitter.on(t,r,n)}once(t,r,n=this){this._emitter.once(t,r,n)}removeAllListeners(t){this._emitter.removeAllListeners(t)}off(t,r,n=this,i){this._emitter.off(t,r,n,i)}listeners(t){return this._emitter.listeners(t)}emit(t,r,n){return this._emitter.emit(t,r,n)}trigger(t,r){if(this.config.debug)return this.emit(t,t,r);try{return this.emit(t,t,r)}catch(n){if(this.logger.error("An internal error happened while handling event "+t+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;let i=t===R.ERROR;this.trigger(R.ERROR,{type:Oe.OTHER_ERROR,details:Q.INTERNAL_EXCEPTION,fatal:i,event:t,error:n}),this.triggeringException=!1}}return!1}listenerCount(t){return this._emitter.listenerCount(t)}destroy(){this.logger.log("destroy"),this.trigger(R.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(r=>r.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(r=>r.destroy()),this.coreComponents.length=0;let t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null}attachMedia(t){if(!t||"media"in t&&!t.media){let s=new Error(`attachMedia failed: invalid argument (${t})`);this.trigger(R.ERROR,{type:Oe.OTHER_ERROR,details:Q.ATTACH_MEDIA_ERROR,fatal:!0,error:s});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());let r="media"in t,n=r?t.media:t,i=r?t:{media:n};this._media=n,this.trigger(R.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(R.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;let t=this.bufferController.transferMedia();return this.trigger(R.MEDIA_DETACHING,{transferMedia:t}),t}loadSource(t){this.stopLoad();let r=this.media,n=this._url,i=this._url=db.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),r&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(r)),this.trigger(R.MANIFEST_LOADING,{url:t})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(t=-1,r){this.logger.log(`startLoad(${t+(r?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(t,r),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].stopLoad(),!(this.started||!this.networkControllers));t++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(t=>{t.resumeBuffering&&t.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(t=>{t.pauseBuffering&&t.pauseBuffering()}))}get inFlightFragments(){let t={[Re.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(t[Re.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(t[Re.SUBTITLE]=this.subtititleStreamController.inFlightFrag),t}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");let t=this._media,r=t?.currentTime;this.detachMedia(),t&&(this.attachMedia(t),r&&this.startLoad(r))}removeLevel(t){this.levelController.removeLevel(t)}get sessionId(){let t=this._sessionId;return t||(t=this._sessionId=Lce()),t}get levels(){return this.levelController.levels||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(t){this.logger.log(`set currentLevel:${t}`),this.levelController.manualLevel=t,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(t){this.logger.log(`set nextLevel:${t}`),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(t){this.logger.log(`set loadLevel:${t}`),this.levelController.manualLevel=t}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(t){this.levelController.nextLoadLevel=t}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(t){this.logger.log(`set firstLevel:${t}`),this.levelController.firstLevel=t}get startLevel(){let t=this.levelController.startLevel;return t===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:t}set startLevel(t){this.logger.log(`set startLevel:${t}`),t!==-1&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(t){let r=!!t;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){let{bwEstimator:t}=this.abrController;return t?t.getEstimate():NaN}set bandwidthEstimate(t){this.abrController.resetEstimator(t)}get abrEwmaDefaultEstimate(){let{bwEstimator:t}=this.abrController;return t?t.defaultEstimate:NaN}get ttfbEstimate(){let{bwEstimator:t}=this.abrController;return t?t.getEstimateTTFB():NaN}set autoLevelCapping(t){this._autoLevelCapping!==t&&(this.logger.log(`set autoLevelCapping:${t}`),this._autoLevelCapping=t,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(t){eae(t)&&this._maxHdcpLevel!==t&&(this._maxHdcpLevel=t,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){let{levels:t,config:{minAutoBitrate:r}}=this;if(!t)return 0;let n=t.length;for(let i=0;i<n;i++)if(t[i].maxBitrate>=r)return i;return 0}get maxAutoLevel(){let{levels:t,autoLevelCapping:r,maxHdcpLevel:n}=this,i;if(r===-1&&t!=null&&t.length?i=t.length-1:i=r,n)for(let s=i;s--;){let o=t[s].attrs["HDCP-LEVEL"];if(o&&o<=n)return s}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(t){this.abrController.nextAutoLevel=t}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(t){var r;return((r=this.audioTrackController)==null?void 0:r.setAudioOption(t))||null}setSubtitleOption(t){var r;return((r=this.subtitleTrackController)==null?void 0:r.setSubtitleOption(t))||null}get allAudioTracks(){let t=this.audioTrackController;return t?t.allAudioTracks:[]}get audioTracks(){let t=this.audioTrackController;return t?t.audioTracks:[]}get audioTrack(){let t=this.audioTrackController;return t?t.audioTrack:-1}set audioTrack(t){let r=this.audioTrackController;r&&(r.audioTrack=t)}get allSubtitleTracks(){let t=this.subtitleTrackController;return t?t.allSubtitleTracks:[]}get subtitleTracks(){let t=this.subtitleTrackController;return t?t.subtitleTracks:[]}get subtitleTrack(){let t=this.subtitleTrackController;return t?t.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(t){let r=this.subtitleTrackController;r&&(r.subtitleTrack=t)}get subtitleDisplay(){let t=this.subtitleTrackController;return t?t.subtitleDisplay:!1}set subtitleDisplay(t){let r=this.subtitleTrackController;r&&(r.subtitleDisplay=t)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(t){this.config.lowLatencyMode=t}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(t){this.latencyController.targetLatency=t}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(t){this.levelController.pathwayPriority=t}get bufferedToEnd(){var t;return!!((t=this.bufferController)!=null&&t.bufferedToEnd)}get interstitialsManager(){var t;return((t=this.interstitialsController)==null?void 0:t.interstitialsManager)||null}getMediaDecodingInfo(t,r=this.allAudioTracks){let n=k2(r);return w2(t,n,navigator.mediaCapabilities)}};vn.defaultConfig=void 0;var Tue=(e,t="200,",r="full")=>{Array.isArray(e)&&(e=e[0]);let{id:n,service:i}=e,s;if(!i)return n;if(Array.isArray(e.service)&&e.service.length>0&&(s=i[0]),s){if(s["@id"])return`${s["@id"]}/${r}/${t}/0/default.jpg`;if(s.id)return`${s.id}/${r}/${t}/0/default.jpg`}},K_=be("img",{objectFit:"cover"}),Sue=e=>{let t=(0,k.useRef)(null),{contentResource:r,altAsLabel:n,region:i="full"}=e,s;n&&(s=Tn(n));let o=Ii(e,["contentResource","altAsLabel"]),{type:a,id:l,width:c=200,height:u=200,duration:d}=r;(0,k.useEffect)(()=>{if(!l&&!t.current||["Image"].includes(a)||!l.includes("m3u8"))return;let p=new vn;return t.current&&(p.attachMedia(t.current),p.on(vn.Events.MEDIA_ATTACHED,function(){p.loadSource(l)})),p.on(vn.Events.ERROR,function(g,v){if(v.fatal)switch(v.type){case vn.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${g} network error encountered, try to recover`),p.startLoad();break;case vn.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${g} media error encountered, try to recover`),p.recoverMediaError();break;default:p.destroy();break}}),()=>{p&&(p.detachMedia(),p.destroy())}},[l,a]);let h=(0,k.useCallback)(()=>{if(!t.current)return;let p=0,g=30;if(d&&(g=d),!l.split("#t=")&&d&&(p=d*.1),l.split("#t=").pop()){let m=l.split("#t=").pop();m&&(p=parseInt(m.split(",")[0]))}let v=t.current;v.autoplay=!0,v.currentTime=p,setTimeout(()=>h(),g*1e3)},[d,l]);(0,k.useEffect)(()=>h(),[h]);let f=Tue(r,`${c},${u}`,i);switch(a){case"Image":return I.createElement(K_,{as:"img",alt:s,css:{width:c,height:u},key:l,src:f,...o});case"Video":return I.createElement(K_,{as:"video",css:{width:c,height:u},disablePictureInPicture:!0,key:l,loop:!0,muted:!0,onPause:h,ref:t,src:l});default:return console.warn(`Resource type: ${a} is not valid or not yet supported in Primitives.`),I.createElement(I.Fragment,null)}},bue=be("a",{}),wue=e=>{let{children:t,homepage:r}=e,n=Ii(e,["children","homepage"]);return I.createElement(I.Fragment,null,r&&r.map(i=>{let s=Tn(i.label,n.lang);return I.createElement(bue,{"aria-label":t?s:void 0,href:i.id,key:i.id,...n},t||s)}))},Aue={delimiter:", "},Rb=(0,k.createContext)(void 0),PB=()=>{let e=(0,k.useContext)(Rb);if(e===void 0)throw new Error("usePrimitivesContext must be used with a PrimitivesProvider");return e},Ib=({children:e,initialState:t=Aue})=>{let r=kue(t,"delimiter");return I.createElement(Rb.Provider,{value:{delimiter:r}},e)},kue=(e,t)=>Object.hasOwn(e,t)?e[t].toString():void 0,Cue=be("span",{}),Y_=e=>{let{as:t,markup:r}=e,{delimiter:n}=PB();if(!r)return I.createElement(I.Fragment,null);let i=Ii(e,["as","markup"]),s=hoe(Tn(r,i.lang,n));return I.createElement(Cue,{as:t,...i,dangerouslySetInnerHTML:s})},DB=e=>I.useContext(Rb)?I.createElement(Y_,{...e}):I.createElement(Ib,null,I.createElement(Y_,{...e})),xue=({as:e="dd",lang:t,value:r})=>I.createElement(DB,{markup:r,as:e,lang:t}),Rue=be("span",{}),Iue=({as:e="dd",customValueContent:t,lang:r,value:n})=>{var i;let{delimiter:s}=PB(),o=(i=JM(n,r))==null?void 0:i.map(a=>(0,k.cloneElement)(t,{value:a}));return I.createElement(Rue,{as:e,lang:r},o?.map((a,l)=>[l>0&&`${s}`,I.createElement(k.Fragment,{key:l},a)]))},OB=e=>{var t;let{item:r,lang:n,customValueContent:i}=e,{label:s,value:o}=r,a=(t=Tn(s))==null?void 0:t.replace(" ","-").toLowerCase();return I.createElement("div",{role:"group","data-label":a},I.createElement(cs,{as:"dt",label:s,lang:n}),i?I.createElement(Iue,{as:"dd",customValueContent:i,value:o,lang:n}):I.createElement(xue,{as:"dd",value:o,lang:n}))};function _ue(e,t){let r=t.filter(n=>{let{matchingLabel:i}=n,s=Object.keys(n.matchingLabel)[0],o=Tn(i,s);if(Tn(e,s)===o)return!0}).map(n=>n.Content);if(Array.isArray(r))return r[0]}var Lue=be("dl",{}),Pue=e=>{let{as:t,customValueContent:r,metadata:n}=e;if(!Array.isArray(n))return I.createElement(I.Fragment,null);let i=iD(e,"customValueDelimiter"),s=Ii(e,["as","customValueContent","customValueDelimiter","metadata"]);return I.createElement(Ib,{...typeof i=="string"?{initialState:{delimiter:i}}:void 0},n.length>0&&I.createElement(Lue,{as:t,...s},n.map((o,a)=>{let l=r?_ue(o.label,r):void 0;return I.createElement(OB,{customValueContent:l,item:o,key:a,lang:s?.lang})})))};be("li",{});be("ul",{});var Due=be("li",{}),Oue=be("ul",{}),Nue=e=>{let{as:t,rendering:r}=e,n=Ii(e,["as","rendering"]);return I.createElement(Oue,{as:t},r&&r.map(i=>{let s=Tn(i.label,n.lang);return I.createElement(Due,{key:i.id},I.createElement("a",{href:i.id,...n,target:"_blank"},s||i.id))}))},Mue=be("dl",{}),Fue=e=>{let{as:t,requiredStatement:r}=e;if(!r)return I.createElement(I.Fragment,null);let n=iD(e,"customValueDelimiter"),i=Ii(e,["as","customValueDelimiter","requiredStatement"]);return I.createElement(Ib,{...typeof n=="string"?{initialState:{delimiter:n}}:void 0},I.createElement(Mue,{as:t,...i},I.createElement(OB,{item:r,lang:i.lang})))},Bue=be("li",{}),Uue=be("ul",{}),Hue=e=>{let{as:t,seeAlso:r}=e,n=Ii(e,["as","seeAlso"]);return I.createElement(Uue,{as:t},r&&r.map(i=>{let s=Tn(i.label,n.lang);return I.createElement(Bue,{key:i.id},I.createElement("a",{href:i.id,...n},s||i.id))}))},zue=e=>{let{as:t,summary:r}=e,n=Ii(e,["as","customValueDelimiter","summary"]);return I.createElement(DB,{as:t,markup:r,...n})},NB=e=>{let{thumbnail:t,region:r}=e,n=Ii(e,["thumbnail"]);return I.createElement(I.Fragment,null,t&&t.map(i=>I.createElement(Sue,{contentResource:i,key:i.id,region:r,...n})))},$ue=({annotationPage:e})=>{var t,r,n,i,s,o;let a=It(),{vault:l}=a;if(!e||!e.items||((t=e.items)==null?void 0:t.length)===0)return I.createElement(I.Fragment,null);let c=e.items.map(p=>l.get(p.id));if(!c)return I.createElement(I.Fragment,null);let u=c.reduce((p,g)=>(p.canvas=g.target.source.id,p.annotations=[],p.annotations.push(g?.id),p),{}),d=l.get(u.canvas),h=Ws(l,d.id),f=(r=h?.[0])!=null&&r.service?((i=(n=h?.[0])==null?void 0:n.service[0])==null?void 0:i.id)||((o=(s=h?.[0])==null?void 0:s.service[0])==null?void 0:o["@id"]):void 0;return I.createElement(h1,{"data-testid":"annotation-page"},d&&I.createElement("header",null,I.createElement(cs,{label:d.label})),I.createElement("div",{"data-testid":"annotation-page-items"},c?.map(p=>I.createElement(j1,{annotation:p,targetResource:f,key:p.id}))))};function ts(){return ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ts.apply(null,arguments)}function xu(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),r===!1||!n.defaultPrevented)return t?.(n)}}function Gue(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function MB(...e){return t=>e.forEach(r=>Gue(r,t))}function FB(...e){return(0,k.useCallback)(MB(...e),e)}function jue(e,t=[]){let r=[];function n(s,o){let a=(0,k.createContext)(o),l=r.length;r=[...r,o];function c(d){let{scope:h,children:f,...p}=d,g=h?.[e][l]||a,v=(0,k.useMemo)(()=>p,Object.values(p));return(0,k.createElement)(g.Provider,{value:v},f)}function u(d,h){let f=h?.[e][l]||a,p=(0,k.useContext)(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}let i=()=>{let s=r.map(o=>(0,k.createContext)(o));return function(o){let a=o?.[e]||s;return(0,k.useMemo)(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return i.scopeName=e,[n,Vue(i,...t)]}function Vue(...e){let t=e[0];if(e.length===1)return t;let r=()=>{let n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){let s=n.reduce((o,{useScope:a,scopeName:l})=>{let c=a(i)[`__scope${l}`];return{...o,...c}},{});return(0,k.useMemo)(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}var Wue=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},que=k.useId||(()=>{}),Kue=0;function Yue(e){let[t,r]=k.useState(que());return Wue(()=>{r(n=>n??String(Kue++))},[e]),t?`radix-${t}`:""}var BB=(0,k.forwardRef)((e,t)=>{let{children:r,...n}=e,i=k.Children.toArray(r),s=i.find(Que);if(s){let o=s.props.children,a=i.map(l=>l===s?k.Children.count(o)>1?k.Children.only(null):(0,k.isValidElement)(o)?o.props.children:null:l);return(0,k.createElement)(zS,ts({},n,{ref:t}),(0,k.isValidElement)(o)?(0,k.cloneElement)(o,void 0,a):null)}return(0,k.createElement)(zS,ts({},n,{ref:t}),r)});BB.displayName="Slot";var zS=(0,k.forwardRef)((e,t)=>{let{children:r,...n}=e;return(0,k.isValidElement)(r)?(0,k.cloneElement)(r,{...Zue(n,r.props),ref:t?MB(t,r.ref):r.ref}):k.Children.count(r)>1?k.Children.only(null):null});zS.displayName="SlotClone";var Xue=({children:e})=>(0,k.createElement)(k.Fragment,null,e);function Que(e){return(0,k.isValidElement)(e)&&e.type===Xue}function Zue(e,t){let r={...t};for(let n in t){let i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...o)=>{s(...o),i(...o)}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}var Jue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Xg=Jue.reduce((e,t)=>{let r=(0,k.forwardRef)((n,i)=>{let{asChild:s,...o}=n,a=s?BB:t;return(0,k.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,k.createElement)(a,ts({},o,{ref:i}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),[_b]=jue("Form"),UB="Form",[ede,HB]=_b(UB),[tde,rde]=_b(UB),nde=(0,k.forwardRef)((e,t)=>{let{__scopeForm:r,onClearServerErrors:n=()=>{},...i}=e,s=(0,k.useRef)(null),o=FB(t,s),[a,l]=(0,k.useState)({}),c=(0,k.useCallback)(C=>a[C],[a]),u=(0,k.useCallback)((C,P)=>l(U=>{var G;return{...U,[C]:{...(G=U[C])!==null&&G!==void 0?G:{},...P}}}),[]),d=(0,k.useCallback)(C=>{l(P=>({...P,[C]:void 0})),y(P=>({...P,[C]:{}}))},[]),[h,f]=(0,k.useState)({}),p=(0,k.useCallback)(C=>{var P;return(P=h[C])!==null&&P!==void 0?P:[]},[h]),g=(0,k.useCallback)((C,P)=>{f(U=>{var G;return{...U,[C]:[...(G=U[C])!==null&&G!==void 0?G:[],P]}})},[]),v=(0,k.useCallback)((C,P)=>{f(U=>{var G;return{...U,[C]:((G=U[C])!==null&&G!==void 0?G:[]).filter(K=>K.id!==P)}})},[]),[m,y]=(0,k.useState)({}),E=(0,k.useCallback)(C=>{var P;return(P=m[C])!==null&&P!==void 0?P:{}},[m]),S=(0,k.useCallback)((C,P)=>{y(U=>{var G;return{...U,[C]:{...(G=U[C])!==null&&G!==void 0?G:{},...P}}})},[]),[b,w]=(0,k.useState)({}),x=(0,k.useCallback)((C,P)=>{w(U=>{let G=new Set(U[C]).add(P);return{...U,[C]:G}})},[]),D=(0,k.useCallback)((C,P)=>{w(U=>{let G=new Set(U[C]);return G.delete(P),{...U,[C]:G}})},[]),N=(0,k.useCallback)(C=>{var P;return Array.from((P=b[C])!==null&&P!==void 0?P:[]).join(" ")||void 0},[b]);return(0,k.createElement)(ede,{scope:r,getFieldValidity:c,onFieldValidityChange:u,getFieldCustomMatcherEntries:p,onFieldCustomMatcherEntryAdd:g,onFieldCustomMatcherEntryRemove:v,getFieldCustomErrors:E,onFieldCustomErrorsChange:S,onFieldValiditionClear:d},(0,k.createElement)(tde,{scope:r,onFieldMessageIdAdd:x,onFieldMessageIdRemove:D,getFieldDescription:N},(0,k.createElement)(Xg.form,ts({},i,{ref:o,onInvalid:xu(e.onInvalid,C=>{let P=$B(C.currentTarget);P===C.target&&P.focus(),C.preventDefault()}),onSubmit:xu(e.onSubmit,n,{checkForDefaultPrevented:!1}),onReset:xu(e.onReset,n)}))))}),zB="FormField",[ide,sde]=_b(zB),ode=(0,k.forwardRef)((e,t)=>{let{__scopeForm:r,name:n,serverInvalid:i=!1,...s}=e,o=HB(zB,r).getFieldValidity(n),a=Yue();return(0,k.createElement)(ide,{scope:r,id:a,name:n,serverInvalid:i},(0,k.createElement)(Xg.div,ts({"data-valid":GB(o,i),"data-invalid":jB(o,i)},s,{ref:t})))}),F0="FormControl",ade=(0,k.forwardRef)((e,t)=>{let{__scopeForm:r,...n}=e,i=HB(F0,r),s=sde(F0,r),o=rde(F0,r),a=(0,k.useRef)(null),l=FB(t,a),c=n.name||s.name,u=n.id||s.id,d=i.getFieldCustomMatcherEntries(c),{onFieldValidityChange:h,onFieldCustomErrorsChange:f,onFieldValiditionClear:p}=i,g=(0,k.useCallback)(async y=>{if(gde(y.validity)){let U=B0(y.validity);h(c,U);return}let E=y.form?new FormData(y.form):new FormData,S=[y.value,E],b=[],w=[];d.forEach(U=>{hde(U,S)?w.push(U):fde(U)&&b.push(U)});let x=b.map(({id:U,match:G})=>[U,G(...S)]),D=Object.fromEntries(x),N=Object.values(D).some(Boolean),C=N;y.setCustomValidity(C?X_:"");let P=B0(y.validity);if(h(c,P),f(c,D),!N&&w.length>0){let U=w.map(({id:W,match:X})=>X(...S).then(Y=>[W,Y])),G=await Promise.all(U),K=Object.fromEntries(G),B=Object.values(K).some(Boolean);y.setCustomValidity(B?X_:"");let V=B0(y.validity);h(c,V),f(c,K)}},[d,c,f,h]);(0,k.useEffect)(()=>{let y=a.current;if(y){let E=()=>g(y);return y.addEventListener("change",E),()=>y.removeEventListener("change",E)}},[g]);let v=(0,k.useCallback)(()=>{let y=a.current;y&&(y.setCustomValidity(""),p(c))},[c,p]);(0,k.useEffect)(()=>{var y;let E=(y=a.current)===null||y===void 0?void 0:y.form;if(E)return E.addEventListener("reset",v),()=>E.removeEventListener("reset",v)},[v]),(0,k.useEffect)(()=>{let y=a.current,E=y?.closest("form");if(E&&s.serverInvalid){let S=$B(E);S===y&&S.focus()}},[s.serverInvalid]);let m=i.getFieldValidity(c);return(0,k.createElement)(Xg.input,ts({"data-valid":GB(m,s.serverInvalid),"data-invalid":jB(m,s.serverInvalid),"aria-invalid":s.serverInvalid?!0:void 0,"aria-describedby":o.getFieldDescription(c),title:""},n,{ref:l,id:u,name:c,onInvalid:xu(e.onInvalid,y=>{let E=y.currentTarget;g(E)}),onChange:xu(e.onChange,y=>{v()})}))}),X_="This value is not valid",lde=(0,k.forwardRef)((e,t)=>{let{__scopeForm:r,...n}=e;return(0,k.createElement)(Xg.button,ts({type:"submit"},n,{ref:t}))});function B0(e){let t={};for(let r in e)t[r]=e[r];return t}function cde(e){return e instanceof HTMLElement}function ude(e){return"validity"in e}function dde(e){return ude(e)&&(e.validity.valid===!1||e.getAttribute("aria-invalid")==="true")}function $B(e){let t=e.elements,[r]=Array.from(t).filter(cde).filter(dde);return r}function hde(e,t){return e.match.constructor.name==="AsyncFunction"||pde(e.match,t)}function fde(e){return e.match.constructor.name==="Function"}function pde(e,t){return e(...t)instanceof Promise}function gde(e){let t=!1;for(let r in e){let n=r;if(n!=="valid"&&n!=="customError"&&e[n]){t=!0;break}}return t}function GB(e,t){if(e?.valid===!0&&!t)return!0}function jB(e,t){if(e?.valid===!1||t)return!0}var mde=nde,vde=ode,yde=ade,Ede=lde,Tde=be("div",{form:{display:"flex",alignItems:"center",width:"100%",height:"100%",gap:"1rem",padding:"0 1.618rem 1.618rem",".content-search-input":{flexGrow:"1",input:{width:"100%",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"1rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0001","&::placeholder":{color:"#0006"}}}}}),Sde=be("button",{display:"flex",background:"none",border:"none",width:"2rem",height:"2rem",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),bde=({searchServiceUrl:e,setContentSearchResource:t,setLoading:r})=>{let{t:n}=Ai(),[i,s]=(0,k.useState)(),o=It(),{openSeadragonViewer:a,vault:l}=o;async function c(h){if(h.preventDefault(),!!a&&e){if(!i||i.trim()===""){t({});return}r(!0),vD(l,e,{q:i}).then(f=>{t(f),r(!1)})}}let u=h=>{h.preventDefault(),s(h.target.value)},d=n("contentSearchPlaceholder");return I.createElement(Tde,null,I.createElement(mde,{onSubmit:c,className:"content-search-form"},I.createElement(vde,{className:"content-search-input",name:"searchTerms",onChange:u},I.createElement(yde,{placeholder:d})),I.createElement(Ede,{asChild:!0},I.createElement(Sde,{type:"submit"},I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I.createElement("title",null,n("informationPanelTabsSearch")),I.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"}))))))},wde=({searchServiceUrl:e,setContentSearchResource:t,activeCanvas:r,annotationPage:n})=>{let i=It(),{vault:s}=i,{t:o}=Ai(),[a,l]=(0,k.useState)(!1),[c,u]=(0,k.useState)({});(0,k.useEffect)(()=>{var h;if(!(n!=null&&n.items))return;let f=((h=n?.items)==null?void 0:h.map(p=>s.get(p.id))).reduce((p,g)=>{let v=g.target.source.id;return p[v]||(p[v]=[]),p[v].push(g.id),p},{});u(f)},[n]);let d;return I.createElement(I.Fragment,null,I.createElement(bde,{searchServiceUrl:e,setContentSearchResource:t,activeCanvas:r,setLoading:l}),a?I.createElement("span",null,o("contentSearchLoading")):c&&Object.keys(c).length>0&&Object.keys(c).map(h=>(d=s.get(h),I.createElement(h1,{key:h,"data-testid":"annotation-page"},d&&I.createElement("header",null,I.createElement(cs,{label:d.label})),c[h].map(f=>{var p,g,v,m,y;let E=s.get(f),S=Ws(s,d.id),b=(p=S?.[0])!=null&&p.service?((v=(g=S?.[0])==null?void 0:g.service[0])==null?void 0:v.id)||((y=(m=S?.[0])==null?void 0:m.service[0])==null?void 0:y["@id"]):void 0;return I.createElement(j1,{annotation:E,targetResource:b,key:E.id,isContentSearch:!0})})))))},Ade=be("div",{width:"100%",padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"auto",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.47em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),kde=be("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),Cde=({homepage:e})=>e?.length===0?I.createElement(I.Fragment,null):I.createElement(I.Fragment,null,I.createElement("span",{className:"manifest-property-title"},"Homepage"),I.createElement(wue,{homepage:e})),xde=({id:e,htmlLabel:t,parent:r="manifest"})=>I.createElement(I.Fragment,null,I.createElement("span",{className:"manifest-property-title"},t),I.createElement("a",{href:e,target:"_blank",id:`iiif-${r}-id`},e)),Rde=({metadata:e,parent:t="manifest"})=>e?I.createElement(I.Fragment,null,I.createElement(Pue,{metadata:e,id:`iiif-${t}-metadata`})):I.createElement(I.Fragment,null),Ide=({rendering:e})=>e?.length===0?I.createElement(I.Fragment,null):I.createElement(I.Fragment,null,I.createElement("span",{className:"manifest-property-title"},"Alternate formats"),I.createElement(Nue,{rendering:e})),_de=({requiredStatement:e,parent:t="manifest"})=>e?I.createElement(I.Fragment,null,I.createElement(Fue,{requiredStatement:e,id:`iiif-${t}-required-statement`})):I.createElement(I.Fragment,null),Lde=({rights:e})=>e?I.createElement(I.Fragment,null,I.createElement("span",{className:"manifest-property-title"},"Rights"),I.createElement("a",{href:e,target:"_blank"},e)):I.createElement(I.Fragment,null),Pde=({seeAlso:e})=>e?.length===0?I.createElement(I.Fragment,null):I.createElement(I.Fragment,null,I.createElement("span",{className:"manifest-property-title"},"See Also"),I.createElement(Hue,{seeAlso:e})),Dde=({summary:e,parent:t="manifest"})=>e?I.createElement(I.Fragment,null,I.createElement(zue,{summary:e,as:"p",id:`iiif-${t}-summary`})):I.createElement(I.Fragment,null),Ode=({label:e,thumbnail:t})=>t?.length===0?I.createElement(I.Fragment,null):I.createElement(I.Fragment,null,I.createElement(NB,{altAsLabel:e||{none:["resource"]},thumbnail:t,style:{backgroundColor:"#6663",objectFit:"cover"}})),Nde=()=>{let e=It(),{activeManifest:t,vault:r}=e,[n,i]=(0,k.useState)(),[s,o]=(0,k.useState)([]),[a,l]=(0,k.useState)([]),[c,u]=(0,k.useState)([]),[d,h]=(0,k.useState)([]);return(0,k.useEffect)(()=>{var f,p,g,v;let m=r.get(t);m&&(i(m),((f=m.homepage)==null?void 0:f.length)>0&&o(r.get(m.homepage)),((p=m.seeAlso)==null?void 0:p.length)>0&&l(r.get(m.seeAlso)),((g=m.rendering)==null?void 0:g.length)>0&&u(r.get(m.rendering)),((v=m.thumbnail)==null?void 0:v.length)>0&&h(r.get(m.thumbnail)))},[t,r]),n?I.createElement(kde,null,I.createElement(Ade,null,I.createElement(Ode,{thumbnail:d,label:n.label}),I.createElement(Dde,{summary:n.summary}),I.createElement(Rde,{metadata:n.metadata}),I.createElement(_de,{requiredStatement:n.requiredStatement}),I.createElement(Lde,{rights:n.rights}),I.createElement(Cde,{homepage:s}),I.createElement(Pde,{seeAlso:a}),I.createElement(Ide,{rendering:c}),I.createElement(xde,{id:n.id,htmlLabel:"IIIF Manifest"}))):I.createElement(I.Fragment,null)};function Mde(e){let t=[];return e.forEach(r=>{var n;(n=r.informationPanel)!=null&&n.component&&t.push(r)}),{pluginsWithInfoPanel:t}}var Fde=({contentStateAnnotation:e})=>{var t,r,n,i,s,o;let a=It(),{vault:l}=a;if(!e)return I.createElement(I.Fragment,null);let c=((t=e?.target)==null?void 0:t.source)||e?.target,u=l.get(c?.id),d=Ws(l,u.id),h=(r=d?.[0])!=null&&r.service?((i=(n=d?.[0])==null?void 0:n.service[0])==null?void 0:i.id)||((o=(s=d?.[0])==null?void 0:s.service[0])==null?void 0:o["@id"]):void 0;return I.createElement(h1,{"data-testid":"annotation-page"},u&&I.createElement("header",null,I.createElement(cs,{label:u.label})," ",I.createElement("em",null,"(Shared)")),I.createElement("div",{"data-testid":"annotation-page-items"},I.createElement(j1,{annotation:e,targetResource:h,key:e.id,isContentState:!0})))},Bde=1500,Ude=({activeCanvas:e,annotationResources:t,searchServiceUrl:r,setContentSearchResource:n,contentSearchResource:i})=>{var s;let{t:o}=Ai(),a=Zr(),l=It(),{contentStateAnnotation:c,informationPanelResource:u,isAutoScrolling:d,isUserScrolling:h,vault:f,configOptions:p,plugins:g}=l,{informationPanel:v}=p,m=v?.renderAbout,y=v?.renderAnnotation,E=f.get({id:e,type:"Canvas"}),S=v?.renderContentSearch,b=v?.renderToggle,w=((s=c?.target)==null?void 0:s.source)||c?.target,x=!!c&&w.id===e,D=!!(t!=null&&t.length)||x,{pluginsWithInfoPanel:N}=Mde(g);function C(K,B){var V,W;let X=(V=K?.informationPanel)==null?void 0:V.component;return X===void 0?I.createElement(I.Fragment,null):I.createElement(nf,{key:B,value:K.id},I.createElement(Pu,{FallbackComponent:u1},I.createElement(X,{...(W=K?.informationPanel)==null?void 0:W.componentProps,canvas:E,useViewerDispatch:Zr,useViewerState:It})))}let P=()=>{a({type:"updateInformationOpen",isInformationOpen:!1})};(0,k.useEffect)(()=>{["manifest-about","manifest-annotations","manifest-content-search"].includes(String(v?.defaultTab))?a({type:"updateInformationPanelResource",informationPanelResource:v?.defaultTab}):a(x?{type:"updateInformationPanelResource",informationPanelResource:"manifest-annotations"}:{type:"updateInformationPanelResource",informationPanelResource:"manifest-about"})},[]),(0,k.useEffect)(()=>{D||a({type:"updateInformationPanelResource",informationPanelResource:"manifest-about"})},[D]);function U(){if(!d){clearTimeout(h);let K=setTimeout(()=>{a({type:"updateUserScrolling",isUserScrolling:void 0})},Bde);a({type:"updateUserScrolling",isUserScrolling:K})}}let G=K=>{a({type:"updateInformationPanelResource",informationPanelResource:K})};return I.createElement(YV,{"data-testid":"information-panel",defaultValue:u,onValueChange:G,orientation:"horizontal",value:u,className:"clover-viewer-information-panel"},I.createElement(XV,{"aria-label":o("informationPanelTabs"),"data-testid":"information-panel-list"},b&&I.createElement(Yc,{value:"manifest-back","data-value":"manifest-back",onClick:P,as:"button"},o("informationPanelTabsClose")),m&&I.createElement(Yc,{value:"manifest-about"},o("informationPanelTabsAbout")),S&&i&&I.createElement(Yc,{value:"manifest-content-search"},o("informationPanelTabsSearch")),y&&D&&I.createElement(Yc,{value:"manifest-annotations"},v?.annotationTabLabel||o("informationPanelTabsAnnotations")),N&&N.map((K,B)=>{var V;return I.createElement(Yc,{key:B,value:K.id},I.createElement(cs,{label:(V=K.informationPanel)==null?void 0:V.label}))})),I.createElement(ZV,{handleScroll:U},m&&I.createElement(nf,{value:"manifest-about"},I.createElement(Nde,null)),S&&i&&I.createElement(nf,{value:"manifest-content-search"},I.createElement(wde,{searchServiceUrl:r,setContentSearchResource:n,activeCanvas:e,annotationPage:i})),y&&t&&I.createElement(nf,{value:"manifest-annotations"},c&&x&&I.createElement(Fde,{contentStateAnnotation:c}),t.map(K=>I.createElement($ue,{key:K.id,annotationPage:K}))),N&&N.map((K,B)=>C(K,B))))},Hde=()=>I.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),zde=()=>I.createElement(I.Fragment,null,I.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),I.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),I.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),$de=()=>I.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),Gde=()=>I.createElement(I.Fragment,null,I.createElement("path",{d:"M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),I.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 272l80 80 80-80M256 48v288"})),jde=()=>I.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),Vde=()=>I.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"}),VB=be("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),Wde=({children:e})=>I.createElement("title",null,e),Ar=e=>I.createElement(VB,{...e,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},e.children);Ar.Title=Wde;Ar.Add=Hde;Ar.Audio=zde;Ar.Close=$de;Ar.Download=Gde;Ar.Image=jde;Ar.Video=Vde;function qde(e,t=globalThis?.document){let r=qs(e);k.useEffect(()=>{let n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Kde="DismissableLayer",$S="dismissableLayer.update",Yde="dismissableLayer.pointerDownOutside",Xde="dismissableLayer.focusOutside",Q_,WB=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lb=k.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,c=k.useContext(WB),[u,d]=k.useState(null),h=u?.ownerDocument??globalThis?.document,[,f]=k.useState({}),p=yt(t,x=>d(x)),g=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),m=g.indexOf(v),y=u?g.indexOf(u):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,S=y>=m,b=Jde(x=>{let D=x.target,N=[...c.branches].some(C=>C.contains(D));!S||N||(i?.(x),o?.(x),x.defaultPrevented||a==null||a())},h),w=ehe(x=>{let D=x.target;[...c.branches].some(N=>N.contains(D))||(s?.(x),o?.(x),x.defaultPrevented||a==null||a())},h);return qde(x=>{y===c.layers.size-1&&(n?.(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))},h),k.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Q_=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Z_(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Q_)}},[u,h,r,c]),k.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Z_())},[u,c]),k.useEffect(()=>{let x=()=>f({});return document.addEventListener($S,x),()=>document.removeEventListener($S,x)},[]),(0,oe.jsx)(rt.div,{...l,ref:p,style:{pointerEvents:E?S?"auto":"none":void 0,...e.style},onFocusCapture:Je(e.onFocusCapture,w.onFocusCapture),onBlurCapture:Je(e.onBlurCapture,w.onBlurCapture),onPointerDownCapture:Je(e.onPointerDownCapture,b.onPointerDownCapture)})});Lb.displayName=Kde;var Qde="DismissableLayerBranch",Zde=k.forwardRef((e,t)=>{let r=k.useContext(WB),n=k.useRef(null),i=yt(t,n);return k.useEffect(()=>{let s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),(0,oe.jsx)(rt.div,{...e,ref:i})});Zde.displayName=Qde;function Jde(e,t=globalThis?.document){let r=qs(e),n=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{let s=a=>{if(a.target&&!n.current){let l=function(){qB(Yde,r,c,{discrete:!0})},c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function ehe(e,t=globalThis?.document){let r=qs(e),n=k.useRef(!1);return k.useEffect(()=>{let i=s=>{s.target&&!n.current&&qB(Xde,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Z_(){let e=new CustomEvent($S);document.dispatchEvent(e)}function qB(e,t,r,{discrete:n}){let i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Nj(i,s):i.dispatchEvent(s)}var U0=0;function KB(){k.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??J_()),document.body.insertAdjacentElement("beforeend",e[1]??J_()),U0++,()=>{U0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),U0--}},[])}function J_(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var H0="focusScope.autoFocusOnMount",z0="focusScope.autoFocusOnUnmount",eL={bubbles:!1,cancelable:!0},the="FocusScope",Pb=k.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[a,l]=k.useState(null),c=qs(i),u=qs(s),d=k.useRef(null),h=yt(t,g=>l(g)),f=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(n){let g=function(E){if(f.paused||!a)return;let S=E.target;a.contains(S)?d.current=S:Bs(d.current,{select:!0})},v=function(E){if(f.paused||!a)return;let S=E.relatedTarget;S!==null&&(a.contains(S)||Bs(d.current,{select:!0}))},m=function(E){if(document.activeElement===document.body)for(let S of E)S.removedNodes.length>0&&Bs(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);let y=new MutationObserver(m);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),y.disconnect()}}},[n,a,f.paused]),k.useEffect(()=>{if(a){rL.add(f);let g=document.activeElement;if(!a.contains(g)){let v=new CustomEvent(H0,eL);a.addEventListener(H0,c),a.dispatchEvent(v),v.defaultPrevented||(rhe(ahe(YB(a)),{select:!0}),document.activeElement===g&&Bs(a))}return()=>{a.removeEventListener(H0,c),setTimeout(()=>{let v=new CustomEvent(z0,eL);a.addEventListener(z0,u),a.dispatchEvent(v),v.defaultPrevented||Bs(g??document.body,{select:!0}),a.removeEventListener(z0,u),rL.remove(f)},0)}}},[a,c,u,f]);let p=k.useCallback(g=>{if(!r&&!n||f.paused)return;let v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,m=document.activeElement;if(v&&m){let y=g.currentTarget,[E,S]=nhe(y);E&&S?!g.shiftKey&&m===S?(g.preventDefault(),r&&Bs(E,{select:!0})):g.shiftKey&&m===E&&(g.preventDefault(),r&&Bs(S,{select:!0})):m===y&&g.preventDefault()}},[r,n,f.paused]);return(0,oe.jsx)(rt.div,{tabIndex:-1,...o,ref:h,onKeyDown:p})});Pb.displayName=the;function rhe(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(Bs(n,{select:t}),document.activeElement!==r)return}function nhe(e){let t=YB(e),r=tL(t,e),n=tL(t.reverse(),e);return[r,n]}function YB(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{let i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function tL(e,t){for(let r of e)if(!ihe(r,{upTo:t}))return r}function ihe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function she(e){return e instanceof HTMLInputElement&&"select"in e}function Bs(e,{select:t=!1}={}){if(e&&e.focus){let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&she(e)&&t&&e.select()}}var rL=ohe();function ohe(){let e=[];return{add(t){let r=e[0];t!==r&&r?.pause(),e=nL(e,t),e.unshift(t)},remove(t){var r;e=nL(e,t),(r=e[0])==null||r.resume()}}}function nL(e,t){let r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function ahe(e){return e.filter(t=>t.tagName!=="A")}var lhe=["top","right","bottom","left"],Xs=Math.min,mn=Math.max,cg=Math.round,zf=Math.floor,Ti=e=>({x:e,y:e}),che={left:"right",right:"left",bottom:"top",top:"bottom"},uhe={start:"end",end:"start"};function GS(e,t,r){return mn(e,Xs(t,r))}function rs(e,t){return typeof e=="function"?e(t):e}function ns(e){return e.split("-")[0]}function Yl(e){return e.split("-")[1]}function Db(e){return e==="x"?"y":"x"}function Ob(e){return e==="y"?"height":"width"}var dhe=new Set(["top","bottom"]);function yi(e){return dhe.has(ns(e))?"y":"x"}function Nb(e){return Db(yi(e))}function hhe(e,t,r){r===void 0&&(r=!1);let n=Yl(e),i=Nb(e),s=Ob(i),o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=ug(o)),[o,ug(o)]}function fhe(e){let t=ug(e);return[jS(e),t,jS(t)]}function jS(e){return e.replace(/start|end/g,t=>uhe[t])}var iL=["left","right"],sL=["right","left"],phe=["top","bottom"],ghe=["bottom","top"];function mhe(e,t,r){switch(e){case"top":case"bottom":return r?t?sL:iL:t?iL:sL;case"left":case"right":return t?phe:ghe;default:return[]}}function vhe(e,t,r,n){let i=Yl(e),s=mhe(ns(e),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(jS)))),s}function ug(e){return e.replace(/left|right|bottom|top/g,t=>che[t])}function yhe(e){return{top:0,right:0,bottom:0,left:0,...e}}function XB(e){return typeof e!="number"?yhe(e):{top:e,right:e,bottom:e,left:e}}function dg(e){let{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function oL(e,t,r){let{reference:n,floating:i}=e,s=yi(t),o=Nb(t),a=Ob(o),l=ns(t),c=s==="y",u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[a]/2-i[a]/2,f;switch(l){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-i.width,y:d};break;default:f={x:n.x,y:n.y}}switch(Yl(t)){case"start":f[o]-=h*(r&&c?-1:1);break;case"end":f[o]+=h*(r&&c?-1:1);break}return f}var Ehe=async(e,t,r)=>{let{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t)),c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=oL(c,n,l),h=n,f={},p=0;for(let g=0;g<a.length;g++){let{name:v,fn:m}=a[g],{x:y,y:E,data:S,reset:b}=await m({x:u,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:e,floating:t}});u=y??u,d=E??d,f={...f,[v]:{...f[v],...S}},b&&p<=50&&(p++,typeof b=="object"&&(b.placement&&(h=b.placement),b.rects&&(c=b.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),{x:u,y:d}=oL(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function ad(e,t){var r;t===void 0&&(t={});let{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=rs(t,e),p=XB(f),g=a[h?d==="floating"?"reference":"floating":d],v=dg(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(g)))==null||r?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),m=d==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},S=dg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:y,strategy:l}):m);return{top:(v.top-S.top+p.top)/E.y,bottom:(S.bottom-v.bottom+p.bottom)/E.y,left:(v.left-S.left+p.left)/E.x,right:(S.right-v.right+p.right)/E.x}}var The=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=rs(e,t)||{};if(c==null)return{};let d=XB(u),h={x:r,y:n},f=Nb(i),p=Ob(f),g=await o.getDimensions(c),v=f==="y",m=v?"top":"left",y=v?"bottom":"right",E=v?"clientHeight":"clientWidth",S=s.reference[p]+s.reference[f]-h[f]-s.floating[p],b=h[f]-s.reference[f],w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c)),x=w?w[E]:0;(!x||!await(o.isElement==null?void 0:o.isElement(w)))&&(x=a.floating[E]||s.floating[p]);let D=S/2-b/2,N=x/2-g[p]/2-1,C=Xs(d[m],N),P=Xs(d[y],N),U=C,G=x-g[p]-P,K=x/2-g[p]/2+D,B=GS(U,K,G),V=!l.arrow&&Yl(i)!=null&&K!==B&&s.reference[p]/2-(K<U?C:P)-g[p]/2<0,W=V?K<U?K-U:K-G:0;return{[f]:h[f]+W,data:{[f]:B,centerOffset:K-B-W,...V&&{alignmentOffset:W}},reset:V}}}),She=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;let{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...v}=rs(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};let m=ns(i),y=yi(a),E=ns(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=h||(E||!g?[ug(a)]:fhe(a)),w=p!=="none";!h&&w&&b.push(...vhe(a,g,p,S));let x=[a,...b],D=await ad(t,v),N=[],C=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&N.push(D[m]),d){let K=hhe(i,o,S);N.push(D[K[0]],D[K[1]])}if(C=[...C,{placement:i,overflows:N}],!N.every(K=>K<=0)){var P,U;let K=(((P=s.flip)==null?void 0:P.index)||0)+1,B=x[K];if(B&&(!(d==="alignment"&&y!==yi(B))||C.every(W=>yi(W.placement)===y?W.overflows[0]>0:!0)))return{data:{index:K,overflows:C},reset:{placement:B}};let V=(U=C.filter(W=>W.overflows[0]<=0).sort((W,X)=>W.overflows[1]-X.overflows[1])[0])==null?void 0:U.placement;if(!V)switch(f){case"bestFit":{var G;let W=(G=C.filter(X=>{if(w){let Y=yi(X.placement);return Y===y||Y==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(Y=>Y>0).reduce((Y,O)=>Y+O,0)]).sort((X,Y)=>X[1]-Y[1])[0])==null?void 0:G[0];W&&(V=W);break}case"initialPlacement":V=a;break}if(i!==V)return{reset:{placement:V}}}return{}}}};function aL(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function lL(e){return lhe.some(t=>e[t]>=0)}var bhe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:n="referenceHidden",...i}=rs(e,t);switch(n){case"referenceHidden":{let s=await ad(t,{...i,elementContext:"reference"}),o=aL(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:lL(o)}}}case"escaped":{let s=await ad(t,{...i,altBoundary:!0}),o=aL(s,r.floating);return{data:{escapedOffsets:o,escaped:lL(o)}}}default:return{}}}}},QB=new Set(["left","top"]);async function whe(e,t){let{placement:r,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=ns(r),a=Yl(r),l=yi(r)==="y",c=QB.has(o)?-1:1,u=s&&l?-1:1,d=rs(t,e),{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}var Ahe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;let{x:i,y:s,placement:o,middlewareData:a}=t,l=await whe(t,e);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},khe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:m,y}=v;return{x:m,y}}},...l}=rs(e,t),c={x:r,y:n},u=await ad(t,l),d=yi(ns(i)),h=Db(d),f=c[h],p=c[d];if(s){let v=h==="y"?"top":"left",m=h==="y"?"bottom":"right",y=f+u[v],E=f-u[m];f=GS(y,f,E)}if(o){let v=d==="y"?"top":"left",m=d==="y"?"bottom":"right",y=p+u[v],E=p-u[m];p=GS(y,p,E)}let g=a.fn({...t,[h]:f,[d]:p});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:s,[d]:o}}}}}},Che=function(e){return e===void 0&&(e={}),{options:e,fn(t){let{x:r,y:n,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=rs(e,t),u={x:r,y:n},d=yi(i),h=Db(d),f=u[h],p=u[d],g=rs(a,t),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){let E=h==="y"?"height":"width",S=s.reference[h]-s.floating[E]+v.mainAxis,b=s.reference[h]+s.reference[E]-v.mainAxis;f<S?f=S:f>b&&(f=b)}if(c){var m,y;let E=h==="y"?"width":"height",S=QB.has(ns(i)),b=s.reference[d]-s.floating[E]+(S&&((m=o.offset)==null?void 0:m[d])||0)+(S?0:v.crossAxis),w=s.reference[d]+s.reference[E]+(S?0:((y=o.offset)==null?void 0:y[d])||0)-(S?v.crossAxis:0);p<b?p=b:p>w&&(p=w)}return{[h]:f,[d]:p}}}},xhe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;let{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=rs(e,t),u=await ad(t,c),d=ns(i),h=Yl(i),f=yi(i)==="y",{width:p,height:g}=s.floating,v,m;d==="top"||d==="bottom"?(v=d,m=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(m=d,v=h==="end"?"top":"bottom");let y=g-u.top-u.bottom,E=p-u.left-u.right,S=Xs(g-u[v],y),b=Xs(p-u[m],E),w=!t.middlewareData.shift,x=S,D=b;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(D=E),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(x=y),w&&!h){let C=mn(u.left,0),P=mn(u.right,0),U=mn(u.top,0),G=mn(u.bottom,0);f?D=p-2*(C!==0||P!==0?C+P:mn(u.left,u.right)):x=g-2*(U!==0||G!==0?U+G:mn(u.top,u.bottom))}await l({...t,availableWidth:D,availableHeight:x});let N=await o.getDimensions(a.floating);return p!==N.width||g!==N.height?{reset:{rects:!0}}:{}}}};function Qg(){return typeof window<"u"}function Xl(e){return ZB(e)?(e.nodeName||"").toLowerCase():"#document"}function En(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function _i(e){var t;return(t=(ZB(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ZB(e){return Qg()?e instanceof Node||e instanceof En(e).Node:!1}function Xn(e){return Qg()?e instanceof Element||e instanceof En(e).Element:!1}function wi(e){return Qg()?e instanceof HTMLElement||e instanceof En(e).HTMLElement:!1}function cL(e){return!Qg()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof En(e).ShadowRoot}var Rhe=new Set(["inline","contents"]);function Ad(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=Qn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Rhe.has(i)}var Ihe=new Set(["table","td","th"]);function _he(e){return Ihe.has(Xl(e))}var Lhe=[":popover-open",":modal"];function Zg(e){return Lhe.some(t=>{try{return e.matches(t)}catch{return!1}})}var Phe=["transform","translate","scale","rotate","perspective"],Dhe=["transform","translate","scale","rotate","perspective","filter"],Ohe=["paint","layout","strict","content"];function Mb(e){let t=Fb(),r=Xn(e)?Qn(e):e;return Phe.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Dhe.some(n=>(r.willChange||"").includes(n))||Ohe.some(n=>(r.contain||"").includes(n))}function Nhe(e){let t=Qs(e);for(;wi(t)&&!Fl(t);){if(Mb(t))return t;if(Zg(t))return null;t=Qs(t)}return null}function Fb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}var Mhe=new Set(["html","body","#document"]);function Fl(e){return Mhe.has(Xl(e))}function Qn(e){return En(e).getComputedStyle(e)}function Jg(e){return Xn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qs(e){if(Xl(e)==="html")return e;let t=e.assignedSlot||e.parentNode||cL(e)&&e.host||_i(e);return cL(t)?t.host:t}function JB(e){let t=Qs(e);return Fl(t)?e.ownerDocument?e.ownerDocument.body:e.body:wi(t)&&Ad(t)?t:JB(t)}function ld(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);let i=JB(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),o=En(i);if(s){let a=VS(o);return t.concat(o,o.visualViewport||[],Ad(i)?i:[],a&&r?ld(a):[])}return t.concat(i,ld(i,[],r))}function VS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eU(e){let t=Qn(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=wi(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=cg(r)!==s||cg(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function Bb(e){return Xn(e)?e:e.contextElement}function kl(e){let t=Bb(e);if(!wi(t))return Ti(1);let r=t.getBoundingClientRect(),{width:n,height:i,$:s}=eU(t),o=(s?cg(r.width):r.width)/n,a=(s?cg(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}var Fhe=Ti(0);function tU(e){let t=En(e);return!Fb()||!t.visualViewport?Fhe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Bhe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==En(e)?!1:t}function Qo(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);let i=e.getBoundingClientRect(),s=Bb(e),o=Ti(1);t&&(n?Xn(n)&&(o=kl(n)):o=kl(e));let a=Bhe(s,r,n)?tU(s):Ti(0),l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){let h=En(s),f=n&&Xn(n)?En(n):n,p=h,g=VS(p);for(;g&&n&&f!==p;){let v=kl(g),m=g.getBoundingClientRect(),y=Qn(g),E=m.left+(g.clientLeft+parseFloat(y.paddingLeft))*v.x,S=m.top+(g.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=E,c+=S,p=En(g),g=VS(p)}}return dg({width:u,height:d,x:l,y:c})}function em(e,t){let r=Jg(e).scrollLeft;return t?t.left+r:Qo(_i(e)).left+r}function rU(e,t){let r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-em(e,r),i=r.top+t.scrollTop;return{x:n,y:i}}function Uhe(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e,s=i==="fixed",o=_i(n),a=t?Zg(t.floating):!1;if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},c=Ti(1),u=Ti(0),d=wi(n);if((d||!d&&!s)&&((Xl(n)!=="body"||Ad(o))&&(l=Jg(n)),wi(n))){let f=Qo(n);c=kl(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}let h=o&&!d&&!s?rU(o,l):Ti(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:r.y*c.y-l.scrollTop*c.y+u.y+h.y}}function Hhe(e){return Array.from(e.getClientRects())}function zhe(e){let t=_i(e),r=Jg(e),n=e.ownerDocument.body,i=mn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=mn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),o=-r.scrollLeft+em(e),a=-r.scrollTop;return Qn(n).direction==="rtl"&&(o+=mn(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}var uL=25;function $he(e,t){let r=En(e),n=_i(e),i=r.visualViewport,s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;let u=Fb();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}let c=em(n);if(c<=0){let u=n.ownerDocument,d=u.body,h=getComputedStyle(d),f=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,p=Math.abs(n.clientWidth-d.clientWidth-f);p<=uL&&(s-=p)}else c<=uL&&(s+=c);return{width:s,height:o,x:a,y:l}}var Ghe=new Set(["absolute","fixed"]);function jhe(e,t){let r=Qo(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=wi(e)?kl(e):Ti(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:o,height:a,x:l,y:c}}function dL(e,t,r){let n;if(t==="viewport")n=$he(e,r);else if(t==="document")n=zhe(_i(e));else if(Xn(t))n=jhe(t,r);else{let i=tU(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return dg(n)}function nU(e,t){let r=Qs(e);return r===t||!Xn(r)||Fl(r)?!1:Qn(r).position==="fixed"||nU(r,t)}function Vhe(e,t){let r=t.get(e);if(r)return r;let n=ld(e,[],!1).filter(a=>Xn(a)&&Xl(a)!=="body"),i=null,s=Qn(e).position==="fixed",o=s?Qs(e):e;for(;Xn(o)&&!Fl(o);){let a=Qn(o),l=Mb(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&i&&Ghe.has(i.position)||Ad(o)&&!l&&nU(e,o))?n=n.filter(c=>c!==o):i=a,o=Qs(o)}return t.set(e,n),n}function Whe(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e,s=[...r==="clippingAncestors"?Zg(t)?[]:Vhe(t,this._c):[].concat(r),n],o=s[0],a=s.reduce((l,c)=>{let u=dL(t,c,i);return l.top=mn(u.top,l.top),l.right=Xs(u.right,l.right),l.bottom=Xs(u.bottom,l.bottom),l.left=mn(u.left,l.left),l},dL(t,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function qhe(e){let{width:t,height:r}=eU(e);return{width:t,height:r}}function Khe(e,t,r){let n=wi(t),i=_i(t),s=r==="fixed",o=Qo(e,!0,s,t),a={scrollLeft:0,scrollTop:0},l=Ti(0);function c(){l.x=em(i)}if(n||!n&&!s)if((Xl(t)!=="body"||Ad(i))&&(a=Jg(t)),n){let f=Qo(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else i&&c();s&&!n&&i&&c();let u=i&&!n&&!s?rU(i,a):Ti(0),d=o.left+a.scrollLeft-l.x-u.x,h=o.top+a.scrollTop-l.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function $0(e){return Qn(e).position==="static"}function hL(e,t){if(!wi(e)||Qn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return _i(e)===r&&(r=r.ownerDocument.body),r}function iU(e,t){let r=En(e);if(Zg(e))return r;if(!wi(e)){let i=Qs(e);for(;i&&!Fl(i);){if(Xn(i)&&!$0(i))return i;i=Qs(i)}return r}let n=hL(e,t);for(;n&&_he(n)&&$0(n);)n=hL(n,t);return n&&Fl(n)&&$0(n)&&!Mb(n)?r:n||Nhe(e)||r}var Yhe=async function(e){let t=this.getOffsetParent||iU,r=this.getDimensions,n=await r(e.floating);return{reference:Khe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Xhe(e){return Qn(e).direction==="rtl"}var Qhe={convertOffsetParentRelativeRectToViewportRelativeRect:Uhe,getDocumentElement:_i,getClippingRect:Whe,getOffsetParent:iU,getElementRects:Yhe,getClientRects:Hhe,getDimensions:qhe,getScale:kl,isElement:Xn,isRTL:Xhe};function sU(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Zhe(e,t){let r=null,n,i=_i(e);function s(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();let c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(a||t(),!h||!f)return;let p=zf(d),g=zf(i.clientWidth-(u+h)),v=zf(i.clientHeight-(d+f)),m=zf(u),y={rootMargin:-p+"px "+-g+"px "+-v+"px "+-m+"px",threshold:mn(0,Xs(1,l))||1},E=!0;function S(b){let w=b[0].intersectionRatio;if(w!==l){if(!E)return o();w?o(!1,w):n=setTimeout(()=>{o(!1,1e-7)},1e3)}w===1&&!sU(c,e.getBoundingClientRect())&&o(),E=!1}try{r=new IntersectionObserver(S,{...y,root:i.ownerDocument})}catch{r=new IntersectionObserver(S,y)}r.observe(e)}return o(!0),s}function Jhe(e,t,r,n){n===void 0&&(n={});let{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Bb(e),u=i||s?[...c?ld(c):[],...ld(t)]:[];u.forEach(m=>{i&&m.addEventListener("scroll",r,{passive:!0}),s&&m.addEventListener("resize",r)});let d=c&&a?Zhe(c,r):null,h=-1,f=null;o&&(f=new ResizeObserver(m=>{let[y]=m;y&&y.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var E;(E=f)==null||E.observe(t)})),r()}),c&&!l&&f.observe(c),f.observe(t));let p,g=l?Qo(e):null;l&&v();function v(){let m=Qo(e);g&&!sU(g,m)&&r(),g=m,p=requestAnimationFrame(v)}return r(),()=>{var m;u.forEach(y=>{i&&y.removeEventListener("scroll",r),s&&y.removeEventListener("resize",r)}),d?.(),(m=f)==null||m.disconnect(),f=null,l&&cancelAnimationFrame(p)}}var efe=Ahe,tfe=khe,rfe=She,nfe=xhe,ife=bhe,fL=The,sfe=Che,ofe=(e,t,r)=>{let n=new Map,i={platform:Qhe,...r},s={...i.platform,_c:n};return Ehe(e,t,{...i,platform:s})},afe=typeof document<"u",lfe=function(){},lp=afe?k.useLayoutEffect:lfe;function hg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!hg(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){let s=i[n];if(!(s==="_owner"&&e.$$typeof)&&!hg(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function oU(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function pL(e,t){let r=oU(e);return Math.round(t*r)/r}function G0(e){let t=k.useRef(e);return lp(()=>{t.current=e}),t}function cfe(e){e===void 0&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=k.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=k.useState(n);hg(h,n)||f(n);let[p,g]=k.useState(null),[v,m]=k.useState(null),y=k.useCallback(X=>{X!==w.current&&(w.current=X,g(X))},[]),E=k.useCallback(X=>{X!==x.current&&(x.current=X,m(X))},[]),S=s||p,b=o||v,w=k.useRef(null),x=k.useRef(null),D=k.useRef(u),N=l!=null,C=G0(l),P=G0(i),U=G0(c),G=k.useCallback(()=>{if(!w.current||!x.current)return;let X={placement:t,strategy:r,middleware:h};P.current&&(X.platform=P.current),ofe(w.current,x.current,X).then(Y=>{let O={...Y,isPositioned:U.current!==!1};K.current&&!hg(D.current,O)&&(D.current=O,jr.flushSync(()=>{d(O)}))})},[h,t,r,P,U]);lp(()=>{c===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,d(X=>({...X,isPositioned:!1})))},[c]);let K=k.useRef(!1);lp(()=>(K.current=!0,()=>{K.current=!1}),[]),lp(()=>{if(S&&(w.current=S),b&&(x.current=b),S&&b){if(C.current)return C.current(S,b,G);G()}},[S,b,G,C,N]);let B=k.useMemo(()=>({reference:w,floating:x,setReference:y,setFloating:E}),[y,E]),V=k.useMemo(()=>({reference:S,floating:b}),[S,b]),W=k.useMemo(()=>{let X={position:r,left:0,top:0};if(!V.floating)return X;let Y=pL(V.floating,u.x),O=pL(V.floating,u.y);return a?{...X,transform:"translate("+Y+"px, "+O+"px)",...oU(V.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Y,top:O}},[r,a,V.floating,u.x,u.y]);return k.useMemo(()=>({...u,update:G,refs:B,elements:V,floatingStyles:W}),[u,G,B,V,W])}var ufe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){let{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?fL({element:n.current,padding:i}).fn(r):{}:n?fL({element:n,padding:i}).fn(r):{}}}},dfe=(e,t)=>({...efe(e),options:[e,t]}),hfe=(e,t)=>({...tfe(e),options:[e,t]}),ffe=(e,t)=>({...sfe(e),options:[e,t]}),pfe=(e,t)=>({...rfe(e),options:[e,t]}),gfe=(e,t)=>({...nfe(e),options:[e,t]}),mfe=(e,t)=>({...ife(e),options:[e,t]}),vfe=(e,t)=>({...ufe(e),options:[e,t]}),yfe="Arrow",aU=k.forwardRef((e,t)=>{let{children:r,width:n=10,height:i=5,...s}=e;return(0,oe.jsx)(rt.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,oe.jsx)("polygon",{points:"0,0 30,0 15,10"})})});aU.displayName=yfe;var Efe=aU,Ub="Popper",[lU,tm]=Ci(Ub),[Tfe,cU]=lU(Ub),uU=e=>{let{__scopePopper:t,children:r}=e,[n,i]=k.useState(null);return(0,oe.jsx)(Tfe,{scope:t,anchor:n,onAnchorChange:i,children:r})};uU.displayName=Ub;var dU="PopperAnchor",hU=k.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:n,...i}=e,s=cU(dU,r),o=k.useRef(null),a=yt(t,o),l=k.useRef(null);return k.useEffect(()=>{let c=l.current;l.current=n?.current||o.current,c!==l.current&&s.onAnchorChange(l.current)}),n?null:(0,oe.jsx)(rt.div,{...i,ref:a})});hU.displayName=dU;var Hb="PopperContent",[Sfe,bfe]=lU(Hb),fU=k.forwardRef((e,t)=>{var r,n,i,s,o,a;let{__scopePopper:l,side:c="bottom",sideOffset:u=0,align:d="center",alignOffset:h=0,arrowPadding:f=0,avoidCollisions:p=!0,collisionBoundary:g=[],collisionPadding:v=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:E="optimized",onPlaced:S,...b}=e,w=cU(Hb,l),[x,D]=k.useState(null),N=yt(t,Ve=>D(Ve)),[C,P]=k.useState(null),U=z1(C),G=U?.width??0,K=U?.height??0,B=c+(d!=="center"?"-"+d:""),V=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},W=Array.isArray(g)?g:[g],X=W.length>0,Y={padding:V,boundary:W.filter(Afe),altBoundary:X},{refs:O,floatingStyles:ie,placement:le,isPositioned:F,middlewareData:te}=cfe({strategy:"fixed",placement:B,whileElementsMounted:(...Ve)=>Jhe(...Ve,{animationFrame:E==="always"}),elements:{reference:w.anchor},middleware:[dfe({mainAxis:u+K,alignmentAxis:h}),p&&hfe({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?ffe():void 0,...Y}),p&&pfe({...Y}),gfe({...Y,apply:({elements:Ve,rects:_t,availableWidth:Ct,availableHeight:Gt})=>{let{width:A,height:H}=_t.reference,J=Ve.floating.style;J.setProperty("--radix-popper-available-width",`${Ct}px`),J.setProperty("--radix-popper-available-height",`${Gt}px`),J.setProperty("--radix-popper-anchor-width",`${A}px`),J.setProperty("--radix-popper-anchor-height",`${H}px`)}}),C&&vfe({element:C,padding:f}),kfe({arrowWidth:G,arrowHeight:K}),y&&mfe({strategy:"referenceHidden",...Y})]}),[ge,Ce]=mU(le),de=qs(S);yr(()=>{F&&de?.()},[F,de]);let we=(r=te.arrow)==null?void 0:r.x,Le=(n=te.arrow)==null?void 0:n.y,Pe=((i=te.arrow)==null?void 0:i.centerOffset)!==0,[Se,Ue]=k.useState();return yr(()=>{x&&Ue(window.getComputedStyle(x).zIndex)},[x]),(0,oe.jsx)("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:F?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Se,"--radix-popper-transform-origin":[(s=te.transformOrigin)==null?void 0:s.x,(o=te.transformOrigin)==null?void 0:o.y].join(" "),...((a=te.hide)==null?void 0:a.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,oe.jsx)(Sfe,{scope:l,placedSide:ge,onArrowChange:P,arrowX:we,arrowY:Le,shouldHideArrow:Pe,children:(0,oe.jsx)(rt.div,{"data-side":ge,"data-align":Ce,...b,ref:N,style:{...b.style,animation:F?void 0:"none"}})})})});fU.displayName=Hb;var pU="PopperArrow",wfe={top:"bottom",right:"left",bottom:"top",left:"right"},gU=k.forwardRef(function(e,t){let{__scopePopper:r,...n}=e,i=bfe(pU,r),s=wfe[i.placedSide];return(0,oe.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,oe.jsx)(Efe,{...n,ref:t,style:{...n.style,display:"block"}})})});gU.displayName=pU;function Afe(e){return e!==null}var kfe=e=>({name:"transformOrigin",options:e,fn(t){var r,n,i;let{placement:s,rects:o,middlewareData:a}=t,l=((r=a.arrow)==null?void 0:r.centerOffset)!==0,c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[d,h]=mU(s),f={start:"0%",center:"50%",end:"100%"}[h],p=(((n=a.arrow)==null?void 0:n.x)??0)+c/2,g=(((i=a.arrow)==null?void 0:i.y)??0)+u/2,v="",m="";return d==="bottom"?(v=l?f:`${p}px`,m=`${-u}px`):d==="top"?(v=l?f:`${p}px`,m=`${o.floating.height+u}px`):d==="right"?(v=`${-u}px`,m=l?f:`${g}px`):d==="left"&&(v=`${o.floating.width+u}px`,m=l?f:`${g}px`),{data:{x:v,y:m}}}});function mU(e){let[t,r="center"]=e.split("-");return[t,r]}var vU=uU,zb=hU,yU=fU,EU=gU,Cfe="Portal",TU=k.forwardRef((e,t)=>{var r;let{container:n,...i}=e,[s,o]=k.useState(!1);yr(()=>o(!0),[]);let a=n||s&&((r=globalThis?.document)==null?void 0:r.body);return a?Iy.createPortal((0,oe.jsx)(rt.div,{...i,ref:t}),a):null});TU.displayName=Cfe;var xfe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},tl=new WeakMap,$f=new WeakMap,Gf={},j0=0,SU=function(e){return e&&(e.host||SU(e.parentNode))},Rfe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=SU(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Ife=function(e,t,r,n){var i=Rfe(t,Array.isArray(e)?e:[e]);Gf[r]||(Gf[r]=new WeakMap);var s=Gf[r],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var f=h.getAttribute(n),p=f!==null&&f!=="false",g=(tl.get(h)||0)+1,v=(s.get(h)||0)+1;tl.set(h,g),s.set(h,v),o.push(h),g===1&&p&&$f.set(h,!0),v===1&&h.setAttribute(r,"true"),p||h.setAttribute(n,"true")}catch(m){console.error("aria-hidden: cannot operate on ",h,m)}})};return u(t),a.clear(),j0++,function(){o.forEach(function(d){var h=tl.get(d)-1,f=s.get(d)-1;tl.set(d,h),s.set(d,f),h||($f.has(d)||d.removeAttribute(n),$f.delete(d)),f||d.removeAttribute(r)}),j0--,j0||(tl=new WeakMap,tl=new WeakMap,$f=new WeakMap,Gf={})}},bU=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=xfe(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),Ife(n,i,r,"aria-hidden")):function(){return null}},gi=function(){return gi=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},gi.apply(this,arguments)};function wU(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function _fe(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var cp="right-scroll-bar-position",up="width-before-scroll-bar",Lfe="with-scroll-bars-hidden",Pfe="--removed-body-scroll-bar-size";function V0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Dfe(e,t){var r=(0,k.useState)(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var Ofe=typeof window<"u"?k.useLayoutEffect:k.useEffect,gL=new WeakMap;function Nfe(e,t){var r=Dfe(null,function(n){return e.forEach(function(i){return V0(i,n)})});return Ofe(function(){var n=gL.get(r);if(n){var i=new Set(n),s=new Set(e),o=r.current;i.forEach(function(a){s.has(a)||V0(a,null)}),s.forEach(function(a){i.has(a)||V0(a,o)})}gL.set(r,e)},[e]),r}function Mfe(e){return e}function Ffe(e,t){t===void 0&&(t=Mfe);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var o=t(s,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(n=!0;r.length;){var o=r;r=[],o.forEach(s)}r={push:function(a){return s(a)},filter:function(){return r}}},assignMedium:function(s){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(s),o=r}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),r}}}};return i}function Bfe(e){e===void 0&&(e={});var t=Ffe(null);return t.options=gi({async:!0,ssr:!1},e),t}var AU=function(e){var t=e.sideCar,r=wU(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return k.createElement(n,gi({},r))};AU.isSideCarExport=!0;function Ufe(e,t){return e.useMedium(t),AU}var kU=Bfe(),W0=function(){},rm=k.forwardRef(function(e,t){var r=k.useRef(null),n=k.useState({onScrollCapture:W0,onWheelCapture:W0,onTouchMoveCapture:W0}),i=n[0],s=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,f=e.noRelative,p=e.noIsolation,g=e.inert,v=e.allowPinchZoom,m=e.as,y=m===void 0?"div":m,E=e.gapMode,S=wU(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=h,w=Nfe([r,t]),x=gi(gi({},S),i);return k.createElement(k.Fragment,null,u&&k.createElement(b,{sideCar:kU,removeScrollBar:c,shards:d,noRelative:f,noIsolation:p,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:r,gapMode:E}),o?k.cloneElement(k.Children.only(a),gi(gi({},x),{ref:w})):k.createElement(y,gi({},x,{className:l,ref:w}),a))});rm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rm.classNames={fullWidth:up,zeroRight:cp};var Hfe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zfe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Hfe();return t&&e.setAttribute("nonce",t),e}function $fe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Gfe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var jfe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=zfe())&&($fe(t,r),Gfe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Vfe=function(){var e=jfe();return function(t,r){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},CU=function(){var e=Vfe(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},Wfe={left:0,top:0,right:0,gap:0},q0=function(e){return parseInt(e||"",10)||0},qfe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[q0(r),q0(n),q0(i)]},Kfe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Wfe;var t=qfe(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Yfe=CU(),Cl="data-scroll-locked",Xfe=function(e,t,r,n){var i=e.left,s=e.top,o=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Lfe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Cl,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cp,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(up,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(cp," .").concat(cp,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(up," .").concat(up,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Cl,`] {
    `).concat(Pfe,": ").concat(a,`px;
  }
`)},mL=function(){var e=parseInt(document.body.getAttribute(Cl)||"0",10);return isFinite(e)?e:0},Qfe=function(){k.useEffect(function(){return document.body.setAttribute(Cl,(mL()+1).toString()),function(){var e=mL()-1;e<=0?document.body.removeAttribute(Cl):document.body.setAttribute(Cl,e.toString())}},[])},Zfe=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;Qfe();var s=k.useMemo(function(){return Kfe(i)},[i]);return k.createElement(Yfe,{styles:Xfe(s,!t,i,r?"":"!important")})},WS=!1;if(typeof window<"u")try{su=Object.defineProperty({},"passive",{get:function(){return WS=!0,!0}}),window.addEventListener("test",su,su),window.removeEventListener("test",su,su)}catch{WS=!1}var su,rl=WS?{passive:!1}:!1,Jfe=function(e){return e.tagName==="TEXTAREA"},xU=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Jfe(e)&&r[t]==="visible")},epe=function(e){return xU(e,"overflowY")},tpe=function(e){return xU(e,"overflowX")},vL=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=RU(e,n);if(i){var s=IU(e,n),o=s[1],a=s[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},rpe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},npe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},RU=function(e,t){return e==="v"?epe(t):tpe(t)},IU=function(e,t){return e==="v"?rpe(t):npe(t)},ipe=function(e,t){return e==="h"&&t==="rtl"?-1:1},spe=function(e,t,r,n,i){var s=ipe(e,window.getComputedStyle(t).direction),o=s*n,a=r.target,l=t.contains(a),c=!1,u=o>0,d=0,h=0;do{if(!a)break;var f=IU(e,a),p=f[0],g=f[1],v=f[2],m=g-v-s*p;(p||m)&&RU(e,a)&&(d+=m,h+=p);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},jf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},yL=function(e){return[e.deltaX,e.deltaY]},EL=function(e){return e&&"current"in e?e.current:e},ope=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ape=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lpe=0,nl=[];function cpe(e){var t=k.useRef([]),r=k.useRef([0,0]),n=k.useRef(),i=k.useState(lpe++)[0],s=k.useState(CU)[0],o=k.useRef(e);k.useEffect(function(){o.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=_fe([e.lockRef.current],(e.shards||[]).map(EL),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var m=jf(g),y=r.current,E="deltaX"in g?g.deltaX:y[0]-m[0],S="deltaY"in g?g.deltaY:y[1]-m[1],b,w=g.target,x=Math.abs(E)>Math.abs(S)?"h":"v";if("touches"in g&&x==="h"&&w.type==="range")return!1;var D=vL(x,w);if(!D)return!0;if(D?b=x:(b=x==="v"?"h":"v",D=vL(x,w)),!D)return!1;if(!n.current&&"changedTouches"in g&&(E||S)&&(n.current=b),!b)return!0;var N=n.current||b;return spe(N,v,g,N==="h"?E:S)},[]),l=k.useCallback(function(g){var v=g;if(!(!nl.length||nl[nl.length-1]!==s)){var m="deltaY"in v?yL(v):jf(v),y=t.current.filter(function(b){return b.name===v.type&&(b.target===v.target||v.target===b.shadowParent)&&ope(b.delta,m)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var E=(o.current.shards||[]).map(EL).filter(Boolean).filter(function(b){return b.contains(v.target)}),S=E.length>0?a(v,E[0]):!o.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),c=k.useCallback(function(g,v,m,y){var E={name:g,delta:v,target:m,should:y,shadowParent:upe(m)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(S){return S!==E})},1)},[]),u=k.useCallback(function(g){r.current=jf(g),n.current=void 0},[]),d=k.useCallback(function(g){c(g.type,yL(g),g.target,a(g,e.lockRef.current))},[]),h=k.useCallback(function(g){c(g.type,jf(g),g.target,a(g,e.lockRef.current))},[]);k.useEffect(function(){return nl.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,rl),document.addEventListener("touchmove",l,rl),document.addEventListener("touchstart",u,rl),function(){nl=nl.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,rl),document.removeEventListener("touchmove",l,rl),document.removeEventListener("touchstart",u,rl)}},[]);var f=e.removeScrollBar,p=e.inert;return k.createElement(k.Fragment,null,p?k.createElement(s,{styles:ape(i)}):null,f?k.createElement(Zfe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function upe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}var dpe=Ufe(kU,cpe),$b=k.forwardRef(function(e,t){return k.createElement(rm,gi({},e,{ref:t,sideCar:dpe}))});$b.classNames=rm.classNames;var nm="Popover",[_U]=Ci(nm,[tm]),kd=tm(),[hpe,ca]=_U(nm),LU=e=>{let{__scopePopover:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:o=!1}=e,a=kd(t),l=k.useRef(null),[c,u]=k.useState(!1),[d,h]=Vs({prop:n,defaultProp:i??!1,onChange:s,caller:nm});return(0,oe.jsx)(vU,{...a,children:(0,oe.jsx)(hpe,{scope:t,contentId:ea(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:k.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:c,onCustomAnchorAdd:k.useCallback(()=>u(!0),[]),onCustomAnchorRemove:k.useCallback(()=>u(!1),[]),modal:o,children:r})})};LU.displayName=nm;var PU="PopoverAnchor",fpe=k.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,i=ca(PU,r),s=kd(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return k.useEffect(()=>(o(),()=>a()),[o,a]),(0,oe.jsx)(zb,{...s,...n,ref:t})});fpe.displayName=PU;var DU="PopoverTrigger",OU=k.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,i=ca(DU,r),s=kd(r),o=yt(t,i.triggerRef),a=(0,oe.jsx)(rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":HU(i.open),...n,ref:o,onClick:Je(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:(0,oe.jsx)(zb,{asChild:!0,...s,children:a})});OU.displayName=DU;var ppe="PopoverPortal",[uve,gpe]=_U(ppe,{forceMount:void 0}),Bl="PopoverContent",NU=k.forwardRef((e,t)=>{let r=gpe(Bl,e.__scopePopover),{forceMount:n=r.forceMount,...i}=e,s=ca(Bl,e.__scopePopover);return(0,oe.jsx)(ud,{present:n||s.open,children:s.modal?(0,oe.jsx)(vpe,{...i,ref:t}):(0,oe.jsx)(ype,{...i,ref:t})})});NU.displayName=Bl;var mpe=Lu("PopoverContent.RemoveScroll"),vpe=k.forwardRef((e,t)=>{let r=ca(Bl,e.__scopePopover),n=k.useRef(null),i=yt(t,n),s=k.useRef(!1);return k.useEffect(()=>{let o=n.current;if(o)return bU(o)},[]),(0,oe.jsx)($b,{as:mpe,allowPinchZoom:!0,children:(0,oe.jsx)(MU,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Je(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Je(e.onPointerDownOutside,o=>{let a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Je(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),ype=k.forwardRef((e,t)=>{let r=ca(Bl,e.__scopePopover),n=k.useRef(!1),i=k.useRef(!1);return(0,oe.jsx)(MU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=e.onInteractOutside)==null||o.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));let l=s.target;(a=r.triggerRef.current)!=null&&a.contains(l)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),MU=k.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,h=ca(Bl,r),f=kd(r);return KB(),(0,oe.jsx)(Pb,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:(0,oe.jsx)(Lb,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:(0,oe.jsx)(yU,{"data-state":HU(h.open),role:"dialog",id:h.contentId,...f,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),FU="PopoverClose",BU=k.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,i=ca(FU,r);return(0,oe.jsx)(rt.button,{type:"button",...n,ref:t,onClick:Je(e.onClick,()=>i.onOpenChange(!1))})});BU.displayName=FU;var Epe="PopoverArrow",UU=k.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,i=kd(r);return(0,oe.jsx)(EU,{...i,...n,ref:t})});UU.displayName=Epe;function HU(e){return e?"open":"closed"}var Tpe=LU,Spe=OU,bpe=NU,wpe=BU,Ape=UU,kpe=bD({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),Cpe=bD({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),zU=be(Ape,{fill:"$secondaryAlt"}),xpe=be(wpe,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),Rpe=be(bpe,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:Cpe},'&[data-side="bottom"]':{animationName:kpe},'&[data-align="end"]':{[`& ${zU}`]:{margin:"0 0.7rem"}}}),Ipe=be(Spe,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),_pe=be(Tpe,{boxSizing:"content-box"}),Lpe=e=>I.createElement(Ipe,{...e},e.children),Ppe=e=>I.createElement(Rpe,{...e,sideOffset:5,collisionPadding:21},I.createElement(zU,null),I.createElement(xpe,null,I.createElement(Ar,{isSmall:!0},I.createElement(Ar.Close,null))),e.children),ua=({children:e})=>I.createElement(_pe,null,e);ua.Trigger=Lpe;ua.Content=Ppe;var fg=be("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"2px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${VB}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),dp=be("span",{background:"transparent",opacity:"0",border:"3px solid transparent",position:"absolute",width:"100%",height:"100%",zIndex:"0",left:"0",top:"0",transition:"$all"}),$U=be("span",{display:"flex"}),Dpe=be("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),Ope=be("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),hp=be("div",{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",".media-thumbnail-lazyload":{width:"100%",height:"100%",borderRadius:"3px"},img:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"top center",filter:"blur(0)",transform:"scale3d(1, 1, 1)",borderRadius:"3px",transition:"$all",color:"transparent"},[`& ${$U}`]:{position:"absolute",right:"0",bottom:"0",[`& ${fg}`]:{display:"none",margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}}),qS=be(XM,{display:"flex",flexShrink:"0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left",figure:{margin:"0",width:"161.8px",figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}}}),Npe=be(YM,{display:"flex",flexDirection:"row",flexGrow:"1",overflowX:"scroll",position:"relative",zIndex:"0",gap:"1rem",padding:"1.618rem 0"}),Mpe=be("div",{display:"flex",flexDirection:"row","&[data-active='true']":{[`& ${qS}`]:{figcaption:{fontWeight:"700"},[`& ${fg}`]:{backgroundColor:"$accent"},[`& ${dp}`]:{background:"#0003",opacity:"1",borderBottom:"3px solid $accent"},"&:first-of-type":{[`& ${dp}`]:{borderRight:"unset"}},"&:last-of-type":{[`& ${dp}`]:{borderLeft:"unset"}}}},[`& ${qS}`]:{[`& ${hp}`]:{borderRadius:"unset"},"&:first-of-type":{[`& ${hp}`]:{borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"}},"&:last-of-type":{[`& ${hp}`]:{borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},[`& ${fg}`]:{display:"flex"}}}}),GU=be("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),Fpe=be("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0001","&::placeholder":{color:"$primaryMuted"}}),K0=be("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),Bpe=be("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem",fontWeight:"bold",gap:"0.25rem",em:{opacity:"0.25"}}}),Upe=be("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${GU}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),Hpe=(e,t)=>{(0,k.useEffect)(()=>{function r(n){n.key===e&&t()}return window.addEventListener("keyup",r),()=>window.removeEventListener("keyup",r)},[])},zpe=({title:e})=>I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I.createElement("title",null,e),I.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),$pe=({title:e})=>I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I.createElement("title",null,e),I.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),Gpe=({title:e})=>I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I.createElement("title",null,e),I.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),jpe=({title:e})=>I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I.createElement("title",null,e),I.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),Vpe=({handleCanvasToggle:e,handleFilter:t,activeIndex:r,canvasLength:n})=>{let[i,s]=(0,k.useState)(!1),[o,a]=(0,k.useState)(!1),[l,c]=(0,k.useState)(!1),{t:u}=Ai();(0,k.useEffect)(()=>{c(r===0),r===n-1?a(!0):a(!1)},[r,n]),Hpe("Escape",()=>{s(!1),t("")});let d=()=>{s(f=>!f),t("")},h=f=>t(f.target.value);return I.createElement(Upe,{isToggle:i,className:"clover-viewer-media-controls"},I.createElement(GU,null,i&&I.createElement(Fpe,{autoFocus:!0,onChange:h,placeholder:u("commonSearchPlaceholder")}),!i&&I.createElement(Bpe,{className:"clover-viewer-media-navigation"},I.createElement(K0,{onClick:()=>e(-1),disabled:l,type:"button"},I.createElement(zpe,{title:u("commonPrevious")})),I.createElement("span",null,r+1," ",I.createElement("em",null,"/")," ",n),I.createElement(K0,{onClick:()=>e(1),disabled:o,type:"button"},I.createElement($pe,{title:u("commonNext")}))),I.createElement(K0,{onClick:d,type:"button",className:"clover-viewer-media-search"},i?I.createElement(Gpe,{title:u("commonClose")}):I.createElement(jpe,{title:u("commonSearch")}))))},Wpe=({children:e,rootMargin:t="100px",attributes:r={},isVisibleCallback:n=()=>{}})=>{let i=(0,k.useRef)(null),[s,o]=(0,k.useState)(!1);return(0,k.useEffect)(()=>{let a=i.current;if(!a)return;let l=new IntersectionObserver(([c])=>{c.isIntersecting&&(n(!0),o(!0),l.disconnect())},{rootMargin:t});return l.observe(a),()=>l.disconnect()},[i]),I.createElement("div",{ref:i,...r},s?e:null)},qpe=({type:e})=>{switch(e){case"Sound":return I.createElement(Ar.Audio,null);case"Image":return I.createElement(Ar.Image,null);case"Video":return I.createElement(Ar.Video,null);default:return I.createElement(Ar.Image,null)}},Kpe=({canvas:e,canvasIndex:t,isActive:r,type:n,handleChange:i})=>{let[s,o]=(0,k.useState)(!1),[a,l]=(0,k.useState)(),c=It(),{vault:u}=c,d=200,h=e!=null&&e.label?Tn(e?.label):String(t+1);(0,k.useEffect)(()=>{s&&(async()=>{var p,g;try{if(((p=e?.thumbnail)==null?void 0:p.length)!==0)l((g=e?.thumbnail[0])==null?void 0:g.id);else{let{best:v}=await Ej(e,{vault:u,dereference:!0,width:d,height:d});l(v?.id)}}catch(v){console.error("Error fetching thumbnail",v)}})()},[e,s]);let f=p=>{o(p)};return I.createElement(qS,{"aria-checked":r,"data-testid":"media-thumbnail","data-canvas":t,onClick:()=>i(e.id),value:e.id},I.createElement("figure",null,I.createElement(hp,null,I.createElement(Wpe,{isVisibleCallback:f,attributes:{className:"media-thumbnail-lazyload","data-lazyload":String(s),"data-testid":"media-thumbnail-lazyload"}},a&&I.createElement("img",{alt:h,"data-testid":"media-thumbnail-image",src:a})),I.createElement(dp,null),I.createElement($U,null,I.createElement(fg,{isIcon:!0,"data-testid":"thumbnail-tag"},I.createElement(Dpe,null),I.createElement(Ar,{"aria-label":n},I.createElement(qpe,{type:n})),["Video","Sound"].includes(n)&&I.createElement(Ope,null,tD(e.duration))))),I.createElement("figcaption",{"data-testid":"fig-caption"},e.label?I.createElement(cs,{label:e.label}):(t+1).toString())))},Ype=e=>e.body?e.body.type:"Image",Xpe=({items:e})=>{let{t}=Ai(),r=Zr(),n=It(),{activeCanvas:i,vault:s,sequence:o}=n,[a,l]=(0,k.useState)(""),[c,u]=(0,k.useState)([]),[d,h]=(0,k.useState)(0),f=I.useRef(null),p="painting",g=y=>{i!==y&&r({type:"updateActiveCanvas",canvasId:y})};(0,k.useEffect)(()=>{if(!c.length){let y=["Image","Sound","Video"],E=e.map(S=>yD(s,S,p,y)).filter(S=>S.annotations.length>0);u(E)}},[e,c.length,s]),(0,k.useEffect)(()=>{c.forEach((y,E)=>{y!=null&&y.canvas&&y.canvas.id===i&&h(E)})},[i,c]),(0,k.useEffect)(()=>{let y=document.querySelector(`[data-canvas="${d}"]`);if(y instanceof HTMLElement&&f.current){let E=y.offsetLeft-f.current.offsetWidth/2+y.offsetWidth/2;f.current.scrollTo({left:E,behavior:"smooth"})}},[d]);let v=y=>l(y),m=y=>{let E=o[1].findIndex(x=>x.includes(d)),S=E+y>=0?E+y:o[1].length-1;if(!o[1][S])return;let b=o[1][S][0],w=o[0][b].id;w&&g(w)};return I.createElement(I.Fragment,null,I.createElement(Vpe,{handleFilter:v,handleCanvasToggle:m,activeIndex:d,canvasLength:e.length}),I.createElement(Npe,{"aria-label":t("media.selectItem"),"data-testid":"media","data-active-canvas":e[d].id,"data-canvas-length":e.length,"data-filter":a,ref:f},o[1].filter(y=>y.some(E=>{var S;let b=o[0][E].id,w=c.find(D=>{var N;return((N=D?.canvas)==null?void 0:N.id)===b});if(!w)return!1;let x=Tn((S=w?.canvas)==null?void 0:S.label)||"";return!(a&&!x.toLowerCase().includes(a.toLowerCase()))})).map((y,E)=>{let S=y.map(b=>o[0][b].id).includes(i);return I.createElement(Mpe,{"data-active":S,key:E},y.map(b=>{var w,x;let D=o[0][b].id,N=c.find(C=>{var P;return((P=C?.canvas)==null?void 0:P.id)===D});return N?I.createElement(Kpe,{canvas:N.canvas,canvasIndex:c.findIndex(C=>C===N),handleChange:g,isActive:i===((w=N?.canvas)==null?void 0:w.id),key:(x=N?.canvas)==null?void 0:x.id,type:Ype(N.annotations[0])}):null}))})))},jU=be("button",{position:"absolute",background:"none",border:"none",cursor:"zoom-in",margin:"0",padding:"0",width:"100%",height:"100%",transition:"$all",opacity:1,display:"flex",alignItems:"center",justifyContent:"center",img:{width:"100%",height:"100%",objectFit:"contain",color:"transparent",aspectRatio:"auto"},"&[data-paged=true]":{"img:first-child ":{objectPosition:"100% 50%"},"img:last-child":{objectPosition:"0 50%"}},"&[data-active=false]":{opacity:0,objectPosition:"50% 50%"},variants:{isMedia:{true:{cursor:"pointer"}}}}),VU=be("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),WU=be(VU,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),Qpe=be("div",{position:"relative",display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",gap:"1rem",zIndex:"0",overflow:"hidden","&:hover":{[`${WU}`]:{backgroundColor:"$accent"},[`${jU}`]:{backgroundColor:"#6662"}}}),Zpe=be("div",{width:"100%",height:"100%"});function TL(e,[t,r]){return Math.min(r,Math.max(t,e))}var qU=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Jpe="VisuallyHidden",ege=k.forwardRef((e,t)=>(0,oe.jsx)(rt.span,{...e,ref:t,style:{...qU,...e.style}}));ege.displayName=Jpe;var tge=[" ","Enter","ArrowUp","ArrowDown"],rge=[" ","Enter"],Zo="Select",[im,sm,nge]=kD(Zo),[Ql]=Ci(Zo,[nge,tm]),om=tm(),[ige,no]=Ql(Zo),[sge,oge]=Ql(Zo),KU=e=>{let{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:f,form:p}=e,g=om(t),[v,m]=k.useState(null),[y,E]=k.useState(null),[S,b]=k.useState(!1),w=Sg(c),[x,D]=Vs({prop:n,defaultProp:i??!1,onChange:s,caller:Zo}),[N,C]=Vs({prop:o,defaultProp:a,onChange:l,caller:Zo}),P=k.useRef(null),U=v?p||!!v.closest("form"):!0,[G,K]=k.useState(new Set),B=Array.from(G).map(V=>V.props.value).join(";");return(0,oe.jsx)(vU,{...g,children:(0,oe.jsxs)(ige,{required:f,scope:t,trigger:v,onTriggerChange:m,valueNode:y,onValueNodeChange:E,valueNodeHasChildren:S,onValueNodeHasChildrenChange:b,contentId:ea(),value:N,onValueChange:C,open:x,onOpenChange:D,dir:w,triggerPointerDownPosRef:P,disabled:h,children:[(0,oe.jsx)(im.Provider,{scope:t,children:(0,oe.jsx)(sge,{scope:e.__scopeSelect,onNativeOptionAdd:k.useCallback(V=>{K(W=>new Set(W).add(V))},[]),onNativeOptionRemove:k.useCallback(V=>{K(W=>{let X=new Set(W);return X.delete(V),X})},[]),children:r})}),U?(0,oe.jsxs)(yH,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:d,value:N,onChange:V=>C(V.target.value),disabled:h,form:p,children:[N===void 0?(0,oe.jsx)("option",{value:""}):null,Array.from(G)]},B):null]})})};KU.displayName=Zo;var YU="SelectTrigger",XU=k.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:n=!1,...i}=e,s=om(r),o=no(YU,r),a=o.disabled||n,l=yt(t,o.onTriggerChange),c=sm(r),u=k.useRef("touch"),[d,h,f]=TH(g=>{let v=c().filter(E=>!E.disabled),m=v.find(E=>E.value===o.value),y=SH(v,g,m);y!==void 0&&o.onValueChange(y.value)}),p=g=>{a||(o.onOpenChange(!0),f()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return(0,oe.jsx)(zb,{asChild:!0,...s,children:(0,oe.jsx)(rt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":EH(o.value)?"":void 0,...i,ref:l,onClick:Je(i.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&p(g)}),onPointerDown:Je(i.onPointerDown,g=>{u.current=g.pointerType;let v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:Je(i.onKeyDown,g=>{let v=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(v&&g.key===" ")&&tge.includes(g.key)&&(p(),g.preventDefault())})})})});XU.displayName=YU;var QU="SelectValue",ZU=k.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:i,children:s,placeholder:o="",...a}=e,l=no(QU,r),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=yt(t,l.onValueNodeChange);return yr(()=>{c(u)},[c,u]),(0,oe.jsx)(rt.span,{...a,ref:d,style:{pointerEvents:"none"},children:EH(l.value)?(0,oe.jsx)(oe.Fragment,{children:o}):s})});ZU.displayName=QU;var age="SelectIcon",JU=k.forwardRef((e,t)=>{let{__scopeSelect:r,children:n,...i}=e;return(0,oe.jsx)(rt.span,{"aria-hidden":!0,...i,ref:t,children:n||"\u25BC"})});JU.displayName=age;var lge="SelectPortal",eH=e=>(0,oe.jsx)(TU,{asChild:!0,...e});eH.displayName=lge;var Jo="SelectContent",tH=k.forwardRef((e,t)=>{let r=no(Jo,e.__scopeSelect),[n,i]=k.useState();if(yr(()=>{i(new DocumentFragment)},[]),!r.open){let s=n;return s?jr.createPortal((0,oe.jsx)(rH,{scope:e.__scopeSelect,children:(0,oe.jsx)(im.Slot,{scope:e.__scopeSelect,children:(0,oe.jsx)("div",{children:e.children})})}),s):null}return(0,oe.jsx)(nH,{...e,ref:t})});tH.displayName=Jo;var jn=10,[rH,io]=Ql(Jo),cge="SelectContentImpl",uge=Lu("SelectContent.RemoveScroll"),nH=k.forwardRef((e,t)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:v,...m}=e,y=no(Jo,r),[E,S]=k.useState(null),[b,w]=k.useState(null),x=yt(t,de=>S(de)),[D,N]=k.useState(null),[C,P]=k.useState(null),U=sm(r),[G,K]=k.useState(!1),B=k.useRef(!1);k.useEffect(()=>{if(E)return bU(E)},[E]),KB();let V=k.useCallback(de=>{let[we,...Le]=U().map(Ue=>Ue.ref.current),[Pe]=Le.slice(-1),Se=document.activeElement;for(let Ue of de)if(Ue===Se||(Ue?.scrollIntoView({block:"nearest"}),Ue===we&&b&&(b.scrollTop=0),Ue===Pe&&b&&(b.scrollTop=b.scrollHeight),Ue?.focus(),document.activeElement!==Se))return},[U,b]),W=k.useCallback(()=>V([D,E]),[V,D,E]);k.useEffect(()=>{G&&W()},[G,W]);let{onOpenChange:X,triggerPointerDownPosRef:Y}=y;k.useEffect(()=>{if(E){let de={x:0,y:0},we=Pe=>{var Se,Ue;de={x:Math.abs(Math.round(Pe.pageX)-(((Se=Y.current)==null?void 0:Se.x)??0)),y:Math.abs(Math.round(Pe.pageY)-(((Ue=Y.current)==null?void 0:Ue.y)??0))}},Le=Pe=>{de.x<=10&&de.y<=10?Pe.preventDefault():E.contains(Pe.target)||X(!1),document.removeEventListener("pointermove",we),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",Le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",Le,{capture:!0})}}},[E,X,Y]),k.useEffect(()=>{let de=()=>X(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[X]);let[O,ie]=TH(de=>{let we=U().filter(Se=>!Se.disabled),Le=we.find(Se=>Se.ref.current===document.activeElement),Pe=SH(we,de,Le);Pe&&setTimeout(()=>Pe.ref.current.focus())}),le=k.useCallback((de,we,Le)=>{let Pe=!B.current&&!Le;(y.value!==void 0&&y.value===we||Pe)&&(N(de),Pe&&(B.current=!0))},[y.value]),F=k.useCallback(()=>E?.focus(),[E]),te=k.useCallback((de,we,Le)=>{let Pe=!B.current&&!Le;(y.value!==void 0&&y.value===we||Pe)&&P(de)},[y.value]),ge=n==="popper"?KS:iH,Ce=ge===KS?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:g,avoidCollisions:v}:{};return(0,oe.jsx)(rH,{scope:r,content:E,viewport:b,onViewportChange:w,itemRefCallback:le,selectedItem:D,onItemLeave:F,itemTextRefCallback:te,focusSelectedItem:W,selectedItemText:C,position:n,isPositioned:G,searchRef:O,children:(0,oe.jsx)($b,{as:uge,allowPinchZoom:!0,children:(0,oe.jsx)(Pb,{asChild:!0,trapped:y.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:Je(i,de=>{var we;(we=y.trigger)==null||we.focus({preventScroll:!0}),de.preventDefault()}),children:(0,oe.jsx)(Lb,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:(0,oe.jsx)(ge,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:de=>de.preventDefault(),...m,...Ce,onPlaced:()=>K(!0),ref:x,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:Je(m.onKeyDown,de=>{let we=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!we&&de.key.length===1&&ie(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let Le=U().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(de.key)&&(Le=Le.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){let Pe=de.target,Se=Le.indexOf(Pe);Le=Le.slice(Se+1)}setTimeout(()=>V(Le)),de.preventDefault()}})})})})})})});nH.displayName=cge;var dge="SelectItemAlignedPosition",iH=k.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:n,...i}=e,s=no(Jo,r),o=io(Jo,r),[a,l]=k.useState(null),[c,u]=k.useState(null),d=yt(t,x=>u(x)),h=sm(r),f=k.useRef(!1),p=k.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:m,focusSelectedItem:y}=o,E=k.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&g&&v&&m){let x=s.trigger.getBoundingClientRect(),D=c.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),C=m.getBoundingClientRect();if(s.dir!=="rtl"){let Pe=C.left-D.left,Se=N.left-Pe,Ue=x.left-Se,Ve=x.width+Ue,_t=Math.max(Ve,D.width),Ct=window.innerWidth-jn,Gt=TL(Se,[jn,Math.max(jn,Ct-_t)]);a.style.minWidth=Ve+"px",a.style.left=Gt+"px"}else{let Pe=D.right-C.right,Se=window.innerWidth-N.right-Pe,Ue=window.innerWidth-x.right-Se,Ve=x.width+Ue,_t=Math.max(Ve,D.width),Ct=window.innerWidth-jn,Gt=TL(Se,[jn,Math.max(jn,Ct-_t)]);a.style.minWidth=Ve+"px",a.style.right=Gt+"px"}let P=h(),U=window.innerHeight-jn*2,G=g.scrollHeight,K=window.getComputedStyle(c),B=parseInt(K.borderTopWidth,10),V=parseInt(K.paddingTop,10),W=parseInt(K.borderBottomWidth,10),X=parseInt(K.paddingBottom,10),Y=B+V+G+X+W,O=Math.min(v.offsetHeight*5,Y),ie=window.getComputedStyle(g),le=parseInt(ie.paddingTop,10),F=parseInt(ie.paddingBottom,10),te=x.top+x.height/2-jn,ge=U-te,Ce=v.offsetHeight/2,de=v.offsetTop+Ce,we=B+V+de,Le=Y-we;if(we<=te){let Pe=P.length>0&&v===P[P.length-1].ref.current;a.style.bottom="0px";let Se=c.clientHeight-g.offsetTop-g.offsetHeight,Ue=Math.max(ge,Ce+(Pe?F:0)+Se+W),Ve=we+Ue;a.style.height=Ve+"px"}else{let Pe=P.length>0&&v===P[0].ref.current;a.style.top="0px";let Se=Math.max(te,B+g.offsetTop+(Pe?le:0)+Ce)+Le;a.style.height=Se+"px",g.scrollTop=we-te+g.offsetTop}a.style.margin=`${jn}px 0`,a.style.minHeight=O+"px",a.style.maxHeight=U+"px",n?.(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,c,g,v,m,s.dir,n]);yr(()=>E(),[E]);let[S,b]=k.useState();yr(()=>{c&&b(window.getComputedStyle(c).zIndex)},[c]);let w=k.useCallback(x=>{x&&p.current===!0&&(E(),y?.(),p.current=!1)},[E,y]);return(0,oe.jsx)(fge,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:w,children:(0,oe.jsx)("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:(0,oe.jsx)(rt.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});iH.displayName=dge;var hge="SelectPopperPosition",KS=k.forwardRef((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:i=jn,...s}=e,o=om(r);return(0,oe.jsx)(yU,{...o,...s,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});KS.displayName=hge;var[fge,Gb]=Ql(Jo,{}),YS="SelectViewport",sH=k.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:n,...i}=e,s=io(YS,r),o=Gb(YS,r),a=yt(t,s.onViewportChange),l=k.useRef(0);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,oe.jsx)(im.Slot,{scope:r,children:(0,oe.jsx)(rt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Je(i.onScroll,c=>{let u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){let f=Math.abs(l.current-u.scrollTop);if(f>0){let p=window.innerHeight-jn*2,g=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),m=Math.max(g,v);if(m<p){let y=m+f,E=Math.min(p,y),S=y-E;d.style.height=E+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});sH.displayName=YS;var oH="SelectGroup",[pge,gge]=Ql(oH),aH=k.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=ea();return(0,oe.jsx)(pge,{scope:r,id:i,children:(0,oe.jsx)(rt.div,{role:"group","aria-labelledby":i,...n,ref:t})})});aH.displayName=oH;var lH="SelectLabel",cH=k.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=gge(lH,r);return(0,oe.jsx)(rt.div,{id:i.id,...n,ref:t})});cH.displayName=lH;var pg="SelectItem",[mge,uH]=Ql(pg),dH=k.forwardRef((e,t)=>{let{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...o}=e,a=no(pg,r),l=io(pg,r),c=a.value===n,[u,d]=k.useState(s??""),[h,f]=k.useState(!1),p=yt(t,y=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,y,n,i)}),g=ea(),v=k.useRef("touch"),m=()=>{i||(a.onValueChange(n),a.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,oe.jsx)(mge,{scope:r,value:n,disabled:i,textId:g,isSelected:c,onItemTextChange:k.useCallback(y=>{d(E=>E||(y?.textContent??"").trim())},[]),children:(0,oe.jsx)(im.ItemSlot,{scope:r,value:n,disabled:i,textValue:u,children:(0,oe.jsx)(rt.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:p,onFocus:Je(o.onFocus,()=>f(!0)),onBlur:Je(o.onBlur,()=>f(!1)),onClick:Je(o.onClick,()=>{v.current!=="mouse"&&m()}),onPointerUp:Je(o.onPointerUp,()=>{v.current==="mouse"&&m()}),onPointerDown:Je(o.onPointerDown,y=>{v.current=y.pointerType}),onPointerMove:Je(o.onPointerMove,y=>{var E;v.current=y.pointerType,i?(E=l.onItemLeave)==null||E.call(l):v.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Je(o.onPointerLeave,y=>{var E;y.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:Je(o.onKeyDown,y=>{var E;((E=l.searchRef)==null?void 0:E.current)!==""&&y.key===" "||(rge.includes(y.key)&&m(),y.key===" "&&y.preventDefault())})})})})});dH.displayName=pg;var cu="SelectItemText",hH=k.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:i,...s}=e,o=no(cu,r),a=io(cu,r),l=uH(cu,r),c=oge(cu,r),[u,d]=k.useState(null),h=yt(t,m=>d(m),l.onItemTextChange,m=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,m,l.value,l.disabled)}),f=u?.textContent,p=k.useMemo(()=>(0,oe.jsx)("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=c;return yr(()=>(g(p),()=>v(p)),[g,v,p]),(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(rt.span,{id:l.textId,...s,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?jr.createPortal(s.children,o.valueNode):null]})});hH.displayName=cu;var fH="SelectItemIndicator",pH=k.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return uH(fH,r).isSelected?(0,oe.jsx)(rt.span,{"aria-hidden":!0,...n,ref:t}):null});pH.displayName=fH;var XS="SelectScrollUpButton",gH=k.forwardRef((e,t)=>{let r=io(XS,e.__scopeSelect),n=Gb(XS,e.__scopeSelect),[i,s]=k.useState(!1),o=yt(t,n.onScrollButtonChange);return yr(()=>{if(r.viewport&&r.isPositioned){let a=function(){let c=l.scrollTop>0;s(c)},l=r.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[r.viewport,r.isPositioned]),i?(0,oe.jsx)(vH,{...e,ref:o,onAutoScroll:()=>{let{viewport:a,selectedItem:l}=r;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});gH.displayName=XS;var QS="SelectScrollDownButton",mH=k.forwardRef((e,t)=>{let r=io(QS,e.__scopeSelect),n=Gb(QS,e.__scopeSelect),[i,s]=k.useState(!1),o=yt(t,n.onScrollButtonChange);return yr(()=>{if(r.viewport&&r.isPositioned){let a=function(){let c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)},l=r.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[r.viewport,r.isPositioned]),i?(0,oe.jsx)(vH,{...e,ref:o,onAutoScroll:()=>{let{viewport:a,selectedItem:l}=r;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});mH.displayName=QS;var vH=k.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:n,...i}=e,s=io("SelectScrollButton",r),o=k.useRef(null),a=sm(r),l=k.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return k.useEffect(()=>()=>l(),[l]),yr(()=>{var c;let u=a().find(d=>d.ref.current===document.activeElement);(c=u?.ref.current)==null||c.scrollIntoView({block:"nearest"})},[a]),(0,oe.jsx)(rt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Je(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Je(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Je(i.onPointerLeave,()=>{l()})})}),vge="SelectSeparator",yge=k.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return(0,oe.jsx)(rt.div,{"aria-hidden":!0,...n,ref:t})});yge.displayName=vge;var ZS="SelectArrow",Ege=k.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=om(r),s=no(ZS,r),o=io(ZS,r);return s.open&&o.position==="popper"?(0,oe.jsx)(EU,{...i,...n,ref:t}):null});Ege.displayName=ZS;var Tge="SelectBubbleInput",yH=k.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{let i=k.useRef(null),s=yt(n,i),o=$1(t);return k.useEffect(()=>{let a=i.current;if(!a)return;let l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&c){let u=new Event("change",{bubbles:!0});c.call(a,t),a.dispatchEvent(u)}},[o,t]),(0,oe.jsx)(rt.select,{...r,style:{...qU,...r.style},ref:s,defaultValue:t})});yH.displayName=Tge;function EH(e){return e===""||e===void 0}function TH(e){let t=qs(e),r=k.useRef(""),n=k.useRef(0),i=k.useCallback(o=>{let a=r.current+o;t(a),(function l(c){r.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))})(a)},[t]),s=k.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function SH(e,t,r){let n=t.length>1&&Array.from(t).every(a=>a===t[0])?t[0]:t,i=r?e.indexOf(r):-1,s=Sge(e,Math.max(i,0));n.length===1&&(s=s.filter(a=>a!==r));let o=s.find(a=>a.textValue.toLowerCase().startsWith(n.toLowerCase()));return o!==r?o:void 0}function Sge(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var bge=KU,wge=XU,Age=tH,kge=cH,Cge=dH,xge=be("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),Rge=be(wge,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}}),Ige=be(Age,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),_ge=be(Cge,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),Lge=be(kge,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),bH=be(bge,{position:"relative",zIndex:"5",width:"100%"}),Y0=({direction:e,title:t})=>{let r=()=>I.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),n=()=>I.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"});return I.createElement(xge,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},I.createElement("title",null,t),e==="up"&&I.createElement(r,null),e==="down"&&I.createElement(n,null))},wH=({children:e,label:t,maxHeight:r,onValueChange:n,value:i})=>I.createElement(bH,{onValueChange:n,value:i},I.createElement(Rge,{"data-testid":"select-button"},I.createElement(ZU,{"data-testid":"select-button-value"}),I.createElement(JU,null,I.createElement(Y0,{direction:"down",title:"select"}))),I.createElement(eH,null,I.createElement(Ige,{css:{maxHeight:`${r} !important`},"data-testid":"select-content"},I.createElement(gH,null,I.createElement(Y0,{direction:"up",title:"scroll up for more"})),I.createElement(sH,null,I.createElement(aH,null,t&&I.createElement(Lge,null,I.createElement(cs,{"data-testid":"select-label",label:t})),e)),I.createElement(mH,null,I.createElement(Y0,{direction:"down",title:"scroll down for more"}))))),AH=e=>I.createElement(_ge,{...e},e.thumbnail&&I.createElement(NB,{thumbnail:e.thumbnail}),I.createElement(hH,null,I.createElement(cs,{label:e.label})),I.createElement(pH,null)),kH={exports:{}};(function(e){function t(r){return new t.Viewer(r)}(function(r){r.version={versionStr:"4.1.1",major:parseInt("4",10),minor:parseInt("1",10),revision:parseInt("1",10)};var n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},i=Object.prototype.toString,s=Object.prototype.hasOwnProperty;r.isFunction=function(o){return r.type(o)==="function"},r.isArray=Array.isArray||function(o){return r.type(o)==="array"},r.isWindow=function(o){return o&&typeof o=="object"&&"setInterval"in o},r.type=function(o){return o==null?String(o):n[i.call(o)]||"object"},r.isPlainObject=function(o){if(!o||t.type(o)!=="object"||o.nodeType||r.isWindow(o)||o.constructor&&!s.call(o,"constructor")&&!s.call(o.constructor.prototype,"isPrototypeOf"))return!1;var a;for(var l in o)a=l;return a===void 0||s.call(o,a)},r.isEmptyObject=function(o){for(var a in o)return!1;return!0},r.freezeObject=function(o){return Object.freeze?r.freezeObject=Object.freeze:r.freezeObject=function(a){return a},r.freezeObject(o)},r.supportsCanvas=(function(){var o=document.createElement("canvas");return!!(r.isFunction(o.getContext)&&o.getContext("2d"))})(),r.isCanvasTainted=function(o){var a=!1;try{o.getContext("2d").getImageData(0,0,1,1)}catch{a=!0}return a},r.supportsAddEventListener=(function(){return!!(document.documentElement.addEventListener&&document.addEventListener)})(),r.supportsRemoveEventListener=(function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)})(),r.supportsEventListenerOptions=(function(){var o=0;if(r.supportsAddEventListener)try{var a={get capture(){return o++,!1},get once(){return o++,!1},get passive(){return o++,!1}};window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch{o=0}return o>=3})(),r.getCurrentPixelDensityRatio=function(){if(r.supportsCanvas){var o=document.createElement("canvas").getContext("2d"),a=window.devicePixelRatio||1,l=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1;return Math.max(a,1)/l}else return 1},r.pixelDensityRatio=r.getCurrentPixelDensityRatio()})(t),(function(r){r.extend=function(){var l,c,u,d,h,f,p=arguments[0]||{},g=arguments.length,v=!1,m=1;for(typeof p=="boolean"&&(v=p,p=arguments[1]||{},m=2),typeof p!="object"&&!t.isFunction(p)&&(p={}),g===m&&(p=this,--m);m<g;m++)if(l=arguments[m],l!==null||l!==void 0)for(c in l){var y=Object.getOwnPropertyDescriptor(l,c);if(y!==void 0){if(y.get||y.set){Object.defineProperty(p,c,y);continue}d=y.value}else{r.console.warn('Could not copy inherited property "'+c+'".');continue}p!==d&&(v&&d&&(t.isPlainObject(d)||(h=t.isArray(d)))?(u=p[c],h?(h=!1,f=u&&t.isArray(u)?u:[]):f=u&&t.isPlainObject(u)?u:{},p[c]=t.extend(v,f,d)):d!==void 0&&(p[c]=d))}return p};var n=function(){if(typeof navigator!="object")return!1;var l=navigator.userAgent;return typeof l!="string"?!1:l.indexOf("iPhone")!==-1||l.indexOf("iPad")!==-1||l.indexOf("iPod")!==-1};r.extend(r,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:n(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},SIGNAL:"----seadragon----",delegate:function(l,c){return function(){var u=arguments;return u===void 0&&(u=[]),c.apply(l,u)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(l){return r._viewers.get(this.getElement(l))},getElement:function(l){return typeof l=="string"&&(l=document.getElementById(l)),l},getElementPosition:function(l){var c=new r.Point,u,d;for(l=r.getElement(l),u=r.getElementStyle(l).position==="fixed",d=a(l,u);d;)c.x+=l.offsetLeft,c.y+=l.offsetTop,u&&(c=c.plus(r.getPageScroll())),l=d,u=r.getElementStyle(l).position==="fixed",d=a(l,u);return c},getElementOffset:function(l){l=r.getElement(l);var c=l&&l.ownerDocument,u,d,h={top:0,left:0};return c?(u=c.documentElement,typeof l.getBoundingClientRect<"u"&&(h=l.getBoundingClientRect()),d=c===c.window?c:c.nodeType===9?c.defaultView||c.parentWindow:!1,new r.Point(h.left+(d.pageXOffset||u.scrollLeft)-(u.clientLeft||0),h.top+(d.pageYOffset||u.scrollTop)-(u.clientTop||0))):new r.Point},getElementSize:function(l){return l=r.getElement(l),new r.Point(l.clientWidth,l.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(l){return l=r.getElement(l),l.currentStyle}:function(l){return l=r.getElement(l),window.getComputedStyle(l,"")},getCssPropertyWithVendorPrefix:function(l){var c={};return r.getCssPropertyWithVendorPrefix=function(u){if(c[u]!==void 0)return c[u];var d=document.createElement("div").style,h=null;if(d[u]!==void 0)h=u;else for(var f=["Webkit","Moz","MS","O","webkit","moz","ms","o"],p=r.capitalizeFirstLetter(u),g=0;g<f.length;g++){var v=f[g]+p;if(d[v]!==void 0){h=v;break}}return c[u]=h,h},r.getCssPropertyWithVendorPrefix(l)},capitalizeFirstLetter:function(l){return l.charAt(0).toUpperCase()+l.slice(1)},positiveModulo:function(l,c){var u=l%c;return u<0&&(u+=c),u},pointInElement:function(l,c){l=r.getElement(l);var u=r.getElementOffset(l),d=r.getElementSize(l);return c.x>=u.x&&c.x<u.x+d.x&&c.y<u.y+d.y&&c.y>=u.y},getMousePosition:function(l){if(typeof l.pageX=="number")r.getMousePosition=function(c){var u=new r.Point;return u.x=c.pageX,u.y=c.pageY,u};else if(typeof l.clientX=="number")r.getMousePosition=function(c){var u=new r.Point;return u.x=c.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,u.y=c.clientY+document.body.scrollTop+document.documentElement.scrollTop,u};else throw new Error("Unknown event mouse position, no known technique.");return r.getMousePosition(l)},getPageScroll:function(){var l=document.documentElement||{},c=document.body||{};if(typeof window.pageXOffset=="number")r.getPageScroll=function(){return new r.Point(window.pageXOffset,window.pageYOffset)};else if(c.scrollLeft||c.scrollTop)r.getPageScroll=function(){return new r.Point(document.body.scrollLeft,document.body.scrollTop)};else if(l.scrollLeft||l.scrollTop)r.getPageScroll=function(){return new r.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new r.Point(0,0);return r.getPageScroll()},setPageScroll:function(l){if(typeof window.scrollTo<"u")r.setPageScroll=function(d){window.scrollTo(d.x,d.y)};else{var c=r.getPageScroll();if(c.x===l.x&&c.y===l.y)return;document.body.scrollLeft=l.x,document.body.scrollTop=l.y;var u=r.getPageScroll();if(u.x!==c.x&&u.y!==c.y){r.setPageScroll=function(d){document.body.scrollLeft=d.x,document.body.scrollTop=d.y};return}if(document.documentElement.scrollLeft=l.x,document.documentElement.scrollTop=l.y,u=r.getPageScroll(),u.x!==c.x&&u.y!==c.y){r.setPageScroll=function(d){document.documentElement.scrollLeft=d.x,document.documentElement.scrollTop=d.y};return}r.setPageScroll=function(d){}}r.setPageScroll(l)},getWindowSize:function(){var l=document.documentElement||{},c=document.body||{};if(typeof window.innerWidth=="number")r.getWindowSize=function(){return new r.Point(window.innerWidth,window.innerHeight)};else if(l.clientWidth||l.clientHeight)r.getWindowSize=function(){return new r.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(c.clientWidth||c.clientHeight)r.getWindowSize=function(){return new r.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return r.getWindowSize()},makeCenteredNode:function(l){l=r.getElement(l);var c=[r.makeNeutralElement("div"),r.makeNeutralElement("div"),r.makeNeutralElement("div")];return r.extend(c[0].style,{display:"table",height:"100%",width:"100%"}),r.extend(c[1].style,{display:"table-row"}),r.extend(c[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),c[0].appendChild(c[1]),c[1].appendChild(c[2]),c[2].appendChild(l),c[0]},makeNeutralElement:function(l){var c=document.createElement(l),u=c.style;return u.background="transparent none",u.border="none",u.margin="0px",u.padding="0px",u.position="static",c},now:function(){return Date.now?r.now=Date.now:r.now=function(){return new Date().getTime()},r.now()},makeTransparentImage:function(l){var c=r.makeNeutralElement("img");return c.src=l,c},setElementOpacity:function(l,c,u){var d,h;l=r.getElement(l),u&&!r.Browser.alpha&&(c=Math.round(c)),r.Browser.opacity?l.style.opacity=c<1?c:"":c<1?(d=Math.round(100*c),h="alpha(opacity="+d+")",l.style.filter=h):l.style.filter=""},setElementTouchActionNone:function(l){l=r.getElement(l),typeof l.style.touchAction<"u"?l.style.touchAction="none":typeof l.style.msTouchAction<"u"&&(l.style.msTouchAction="none")},setElementPointerEvents:function(l,c){l=r.getElement(l),typeof l.style<"u"&&typeof l.style.pointerEvents<"u"&&(l.style.pointerEvents=c)},setElementPointerEventsNone:function(l){r.setElementPointerEvents(l,"none")},addClass:function(l,c){l=r.getElement(l),l.className?(" "+l.className+" ").indexOf(" "+c+" ")===-1&&(l.className+=" "+c):l.className=c},indexOf:function(l,c,u){return Array.prototype.indexOf?this.indexOf=function(d,h,f){return d.indexOf(h,f)}:this.indexOf=function(d,h,f){var p,g=f||0,v;if(!d)throw new TypeError;if(v=d.length,v===0||g>=v)return-1;for(g<0&&(g=v-Math.abs(g)),p=g;p<v;p++)if(d[p]===h)return p;return-1},this.indexOf(l,c,u)},removeClass:function(l,c){var u,d=[],h;for(l=r.getElement(l),u=l.className.split(/\s+/),h=0;h<u.length;h++)u[h]&&u[h]!==c&&d.push(u[h]);l.className=d.join(" ")},normalizeEventListenerOptions:function(l){var c;return typeof l<"u"?typeof l=="boolean"?c=r.supportsEventListenerOptions?{capture:l}:l:c=r.supportsEventListenerOptions?l:typeof l.capture<"u"?l.capture:!1:c=r.supportsEventListenerOptions?{capture:!1}:!1,c},addEvent:(function(){if(r.supportsAddEventListener)return function(l,c,u,d){d=r.normalizeEventListenerOptions(d),l=r.getElement(l),l.addEventListener(c,u,d)};if(document.documentElement.attachEvent&&document.attachEvent)return function(l,c,u){l=r.getElement(l),l.attachEvent("on"+c,u)};throw new Error("No known event model.")})(),removeEvent:(function(){if(r.supportsRemoveEventListener)return function(l,c,u,d){d=r.normalizeEventListenerOptions(d),l=r.getElement(l),l.removeEventListener(c,u,d)};if(document.documentElement.detachEvent&&document.detachEvent)return function(l,c,u){l=r.getElement(l),l.detachEvent("on"+c,u)};throw new Error("No known event model.")})(),cancelEvent:function(l){l.preventDefault()},eventIsCanceled:function(l){return l.defaultPrevented},stopEvent:function(l){l.stopPropagation()},createCallback:function(l,c){var u=[],d;for(d=2;d<arguments.length;d++)u.push(arguments[d]);return function(){var h=u.concat([]),f;for(f=0;f<arguments.length;f++)h.push(arguments[f]);return c.apply(l,h)}},getUrlParameter:function(l){var c=o[l];return c||null},getUrlProtocol:function(l){var c=l.match(/^([a-z]+:)\/\//i);return c===null?window.location.protocol:c[1].toLowerCase()},createAjaxRequest:function(l){var c;try{c=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{c=!1}if(c)window.XMLHttpRequest?r.createAjaxRequest=function(u){return u?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:r.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)r.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return r.createAjaxRequest(l)},makeAjaxRequest:function(l,c,u){var d,h,f,p;r.isPlainObject(l)&&(c=l.success,u=l.error,d=l.withCredentials,h=l.headers,f=l.responseType||null,p=l.postData||null,l=l.url);var g=r.getUrlProtocol(l),v=r.createAjaxRequest(g==="file:");if(!r.isFunction(c))throw new Error("makeAjaxRequest requires a success callback");v.onreadystatechange=function(){v.readyState===4&&(v.onreadystatechange=function(){},v.status>=200&&v.status<300||v.status===0&&g!=="http:"&&g!=="https:"?c(v):r.isFunction(u)?u(v):r.console.error("AJAX request returned %d: %s",v.status,l))};var m=p?"POST":"GET";try{if(v.open(m,l,!0),f&&(v.responseType=f),h)for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&h[y]&&v.setRequestHeader(y,h[y]);d&&(v.withCredentials=!0),v.send(p)}catch(E){r.console.error("%s while making AJAX request: %s",E.name,E.message),v.onreadystatechange=function(){},r.isFunction(u)&&u(v,E)}return v},jsonp:function(l){var c,u=l.url,d=document.head||document.getElementsByTagName("head")[0]||document.documentElement,h=l.callbackName||"openseadragon"+r.now(),f=window[h],p="$1"+h+"$2",g=l.param||"callback",v=l.callback;u=u.replace(/(=)\?(&|$)|\?\?/i,p),u+=(/\?/.test(u)?"&":"?")+g+"="+h,window[h]=function(m){if(f)window[h]=f;else try{delete window[h]}catch{}v&&r.isFunction(v)&&v(m)},c=document.createElement("script"),(l.async!==void 0||l.async!==!1)&&(c.async="async"),l.scriptCharset&&(c.charset=l.scriptCharset),c.src=u,c.onload=c.onreadystatechange=function(m,y){(y||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=void 0)},d.insertBefore(c,d.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(l){if(window.DOMParser)r.parseXml=function(c){var u=null,d;return d=new DOMParser,u=d.parseFromString(c,"text/xml"),u};else if(window.ActiveXObject)r.parseXml=function(c){var u=null;return u=new ActiveXObject("Microsoft.XMLDOM"),u.async=!1,u.loadXML(c),u};else throw new Error("Browser doesn't support XML DOM.");return r.parseXml(l)},parseJSON:function(l){return r.parseJSON=window.JSON.parse,r.parseJSON(l)},imageFormatSupported:function(l){return l=l||"",!!s[l.toLowerCase()]},setImageFormatsSupported:function(l){r.extend(s,l)}});var i=function(l){};r.console=window.console||{log:i,debug:i,info:i,warn:i,error:i,assert:i},r.Browser={vendor:r.BROWSERS.UNKNOWN,version:0,alpha:!0};var s={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},o={};(function(){var l=navigator.appVersion,c=navigator.userAgent,u;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(r.Browser.vendor=r.BROWSERS.IE,r.Browser.version=parseFloat(c.substring(c.indexOf("MSIE")+5,c.indexOf(";",c.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(c.indexOf("Edge")>=0?(r.Browser.vendor=r.BROWSERS.EDGE,r.Browser.version=parseFloat(c.substring(c.indexOf("Edge")+5))):c.indexOf("Edg")>=0?(r.Browser.vendor=r.BROWSERS.CHROMEEDGE,r.Browser.version=parseFloat(c.substring(c.indexOf("Edg")+4))):c.indexOf("Firefox")>=0?(r.Browser.vendor=r.BROWSERS.FIREFOX,r.Browser.version=parseFloat(c.substring(c.indexOf("Firefox")+8))):c.indexOf("Safari")>=0?(r.Browser.vendor=c.indexOf("Chrome")>=0?r.BROWSERS.CHROME:r.BROWSERS.SAFARI,r.Browser.version=parseFloat(c.substring(c.substring(0,c.indexOf("Safari")).lastIndexOf("/")+1,c.indexOf("Safari")))):(u=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),u.exec(c)!==null&&(r.Browser.vendor=r.BROWSERS.IE,r.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":r.Browser.vendor=r.BROWSERS.OPERA,r.Browser.version=parseFloat(l);break}var d=window.location.search.substring(1),h=d.split("&"),f,p,g;for(g=0;g<h.length;g++)if(f=h[g],p=f.indexOf("="),p>0){var v=f.substring(0,p),m=f.substring(p+1);try{o[v]=decodeURIComponent(m)}catch{r.console.error("Ignoring malformed URL parameter: %s=%s",v,m)}}r.Browser.alpha=!(r.Browser.vendor===r.BROWSERS.CHROME&&r.Browser.version<2),r.Browser.opacity=!0,r.Browser.vendor===r.BROWSERS.IE&&r.Browser.version<11&&r.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")})(),(function(l){var c=l.requestAnimationFrame||l.mozRequestAnimationFrame||l.webkitRequestAnimationFrame||l.msRequestAnimationFrame,u=l.cancelAnimationFrame||l.mozCancelAnimationFrame||l.webkitCancelAnimationFrame||l.msCancelAnimationFrame;if(c&&u)r.requestAnimationFrame=function(){return c.apply(l,arguments)},r.cancelAnimationFrame=function(){return u.apply(l,arguments)};else{var d=[],h=[],f=0,p;r.requestAnimationFrame=function(g){return d.push([++f,g]),p||(p=setInterval(function(){if(d.length){var v=r.now(),m=h;for(h=d,d=m;h.length;)h.shift()[1](v)}else clearInterval(p),p=void 0},1e3/50)),f},r.cancelAnimationFrame=function(g){var v,m;for(v=0,m=d.length;v<m;v+=1)if(d[v][0]===g){d.splice(v,1);return}for(v=0,m=h.length;v<m;v+=1)if(h[v][0]===g){h.splice(v,1);return}}}})(window);function a(l,c){return c&&l!==document.body?document.body:l.offsetParent}})(t),(function(r,n){e.exports?e.exports=n():r.OpenSeadragon=n()})(He,function(){return t}),(function(r){var n={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.fullscreenElement},n.requestFullScreen=function(i){return i.requestFullscreen()},n.exitFullScreen=function(){document.exitFullscreen()},n.fullScreenEventName="fullscreenchange",n.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.msFullscreenElement},n.requestFullScreen=function(i){return i.msRequestFullscreen()},n.exitFullScreen=function(){document.msExitFullscreen()},n.fullScreenEventName="MSFullscreenChange",n.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.webkitFullscreenElement},n.requestFullScreen=function(i){return i.webkitRequestFullscreen()},n.exitFullScreen=function(){document.webkitExitFullscreen()},n.fullScreenEventName="webkitfullscreenchange",n.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},n.requestFullScreen=function(i){return i.webkitRequestFullScreen()},n.exitFullScreen=function(){document.webkitCancelFullScreen()},n.fullScreenEventName="webkitfullscreenchange",n.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.mozFullScreenElement},n.requestFullScreen=function(i){return i.mozRequestFullScreen()},n.exitFullScreen=function(){document.mozCancelFullScreen()},n.fullScreenEventName="mozfullscreenchange",n.fullScreenErrorEventName="mozfullscreenerror"),n.isFullScreen=function(){return n.getFullScreenElement()!==null},n.cancelFullScreen=function(){r.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),n.exitFullScreen()},r.extend(r,n)})(t),(function(r){r.EventSource=function(){this.events={}},r.EventSource.prototype={addOnceHandler:function(n,i,s,o,a){var l=this;o=o||1;var c=0,u=function(d){return c++,c===o&&l.removeHandler(n,u),i(d)};this.addHandler(n,u,s,a)},addHandler:function(n,i,s,o){var a=this.events[n];if(a||(this.events[n]=a=[]),i&&r.isFunction(i)){var l=a.length,c={handler:i,userData:s||null,priority:o||0};for(a[l]=c;l>0&&a[l-1].priority<a[l].priority;)a[l]=a[l-1],a[l-1]=c,l--}},removeHandler:function(n,i){var s=this.events[n],o=[],a;if(s&&r.isArray(s)){for(a=0;a<s.length;a++)s[a].handler!==i&&o.push(s[a]);this.events[n]=o}},numberOfHandlers:function(n){var i=this.events[n];return i?i.length:0},removeAllHandlers:function(n){if(n)this.events[n]=[];else for(var i in this.events)this.events[i]=[]},getHandler:function(n){var i=this.events[n];return!i||!i.length?null:(i=i.length===1?[i[0]]:Array.apply(null,i),function(s,o){var a,l=i.length;for(a=0;a<l;a++)i[a]&&(o.eventSource=s,o.userData=i[a].userData,i[a].handler(o))})},raiseEvent:function(n,i){var s=this.getHandler(n);if(s)return s(this,i||{})}}})(t),(function(r){var n={};r.MouseTracker=function(L){var _=arguments;r.isPlainObject(L)||(L={element:_[0],clickTimeThreshold:_[1],clickDistThreshold:_[2]}),this.hash=Math.random(),this.element=r.getElement(L.element),this.clickTimeThreshold=L.clickTimeThreshold||r.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=L.clickDistThreshold||r.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=L.dblClickTimeThreshold||r.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=L.dblClickDistThreshold||r.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=L.userData||null,this.stopDelay=L.stopDelay||50,this.preProcessEventHandler=L.preProcessEventHandler||null,this.contextMenuHandler=L.contextMenuHandler||null,this.enterHandler=L.enterHandler||null,this.leaveHandler=L.leaveHandler||null,this.exitHandler=L.exitHandler||null,this.overHandler=L.overHandler||null,this.outHandler=L.outHandler||null,this.pressHandler=L.pressHandler||null,this.nonPrimaryPressHandler=L.nonPrimaryPressHandler||null,this.releaseHandler=L.releaseHandler||null,this.nonPrimaryReleaseHandler=L.nonPrimaryReleaseHandler||null,this.moveHandler=L.moveHandler||null,this.scrollHandler=L.scrollHandler||null,this.clickHandler=L.clickHandler||null,this.dblClickHandler=L.dblClickHandler||null,this.dragHandler=L.dragHandler||null,this.dragEndHandler=L.dragEndHandler||null,this.pinchHandler=L.pinchHandler||null,this.stopHandler=L.stopHandler||null,this.keyDownHandler=L.keyDownHandler||null,this.keyUpHandler=L.keyUpHandler||null,this.keyHandler=L.keyHandler||null,this.focusHandler=L.focusHandler||null,this.blurHandler=L.blurHandler||null;var M=this;n[this.hash]={click:function($){E(M,$)},dblclick:function($){S(M,$)},keydown:function($){b(M,$)},keyup:function($){w(M,$)},keypress:function($){x(M,$)},focus:function($){D(M,$)},blur:function($){N(M,$)},contextmenu:function($){C(M,$)},wheel:function($){P(M,$)},mousewheel:function($){U(M,$)},DOMMouseScroll:function($){U(M,$)},MozMousePixelScroll:function($){U(M,$)},losecapture:function($){K(M,$)},mouseenter:function($){F(M,$)},mouseleave:function($){te(M,$)},mouseover:function($){ge(M,$)},mouseout:function($){Ce(M,$)},mousedown:function($){de(M,$)},mouseup:function($){we(M,$)},mousemove:function($){Se(M,$)},touchstart:function($){B(M,$)},touchend:function($){V(M,$)},touchmove:function($){W(M,$)},touchcancel:function($){X(M,$)},gesturestart:function($){Y(M,$)},gesturechange:function($){O(M,$)},gotpointercapture:function($){ie(M,$)},lostpointercapture:function($){le(M,$)},pointerenter:function($){F(M,$)},pointerleave:function($){te(M,$)},pointerover:function($){ge(M,$)},pointerout:function($){Ce(M,$)},pointerdown:function($){de(M,$)},pointerup:function($){we(M,$)},pointermove:function($){Se(M,$)},pointercancel:function($){_t(M,$)},pointerupcaptured:function($){Le(M,$)},pointermovecaptured:function($){Ue(M,$)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,r.MouseTracker.havePointerEvents&&r.setElementPointerEvents(this.element,"auto"),this.exitHandler&&r.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),L.startDisabled||this.setTracking(!0)},r.MouseTracker.prototype={destroy:function(){l(this),this.element=null,n[this.hash]=null,delete n[this.hash]},isTracking:function(){return n[this.hash].tracking},setTracking:function(L){return L?a(this):l(this),this},getActivePointersListByType:function(L){var _=n[this.hash],M,$=_.activePointersLists.length,re;for(M=0;M<$;M++)if(_.activePointersLists[M].type===L)return _.activePointersLists[M];return re=new r.MouseTracker.GesturePointList(L),_.activePointersLists.push(re),re},getActivePointerCount:function(){var L=n[this.hash],_,M=L.activePointersLists.length,$=0;for(_=0;_<M;_++)$+=L.activePointersLists[_].getLength();return $},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var i=(function(){try{return window.self!==window.top}catch{return!0}})();function s(L){try{return L.addEventListener&&L.removeEventListener}catch{return!1}}r.MouseTracker.gesturePointVelocityTracker=(function(){var L=[],_=0,M=0,$=function(je,Fe){return je.hash.toString()+Fe.type+Fe.id.toString()},re=function(){var je,Fe=L.length,Ot,or,da=r.now(),Vb,Wb,qb;for(Vb=da-M,M=da,je=0;je<Fe;je++)Ot=L[je],or=Ot.gPoint,or.direction=Math.atan2(or.currentPos.y-Ot.lastPos.y,or.currentPos.x-Ot.lastPos.x),Wb=Ot.lastPos.distanceTo(or.currentPos),Ot.lastPos=or.currentPos,qb=1e3*Wb/(Vb+1),or.speed=.75*qb+.25*or.speed},he=function(je,Fe){var Ot=$(je,Fe);L.push({guid:Ot,gPoint:Fe,lastPos:Fe.currentPos}),L.length===1&&(M=r.now(),_=window.setInterval(re,50))},Me=function(je,Fe){var Ot=$(je,Fe),or,da=L.length;for(or=0;or<da;or++)if(L[or].guid===Ot){L.splice(or,1),da--,da===0&&window.clearInterval(_);break}};return{addPoint:he,removePoint:Me}})(),r.MouseTracker.captureElement=document,r.MouseTracker.wheelEventName=r.Browser.vendor===r.BROWSERS.IE&&r.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",r.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",r.MouseTracker.wheelEventName],r.MouseTracker.wheelEventName==="DOMMouseScroll"&&r.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(r.MouseTracker.havePointerEvents=!0,r.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),r.MouseTracker.havePointerCapture=(function(){var L=document.createElement("div");return r.isFunction(L.setPointerCapture)&&r.isFunction(L.releasePointerCapture)})(),r.MouseTracker.havePointerCapture&&r.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(r.MouseTracker.havePointerEvents=!1,r.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),r.MouseTracker.mousePointerId="legacy-mouse",r.MouseTracker.havePointerCapture=(function(){var L=document.createElement("div");return r.isFunction(L.setCapture)&&r.isFunction(L.releaseCapture)})(),r.MouseTracker.havePointerCapture&&r.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&r.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&r.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),r.MouseTracker.GesturePointList=function(L){this._gPoints=[],this.type=L,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},r.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(L){return this._gPoints.push(L)},removeById:function(L){var _,M=this._gPoints.length;for(_=0;_<M;_++)if(this._gPoints[_].id===L){this._gPoints.splice(_,1);break}return this._gPoints.length},getByIndex:function(L){return L<this._gPoints.length?this._gPoints[L]:null},getById:function(L){var _,M=this._gPoints.length;for(_=0;_<M;_++)if(this._gPoints[_].id===L)return this._gPoints[_];return null},getPrimary:function(L){var _,M=this._gPoints.length;for(_=0;_<M;_++)if(this._gPoints[_].isPrimary)return this._gPoints[_];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(r.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function o(L){var _=n[L.hash],M,$,re,he,Me,je=_.activePointersLists.length;for(M=0;M<je;M++)if(re=_.activePointersLists[M],re.getLength()>0){for(Me=[],he=re.asArray(),$=0;$<he.length;$++)Me.push(he[$]);for($=0;$<Me.length;$++)Gt(L,re,Me[$])}for(M=0;M<je;M++)_.activePointersLists.pop();_.sentDragEvent=!1}function a(L){var _=n[L.hash],M,$;if(!_.tracking){for($=0;$<r.MouseTracker.subscribeEvents.length;$++)M=r.MouseTracker.subscribeEvents[$],r.addEvent(L.element,M,_[M],M===r.MouseTracker.wheelEventName?{passive:!1,capture:!1}:!1);o(L),_.tracking=!0}}function l(L){var _=n[L.hash],M,$;if(_.tracking){for($=0;$<r.MouseTracker.subscribeEvents.length;$++)M=r.MouseTracker.subscribeEvents[$],r.removeEvent(L.element,M,_[M],!1);o(L),_.tracking=!1}}function c(L,_){var M=n[L.hash];if(_==="pointerevent")return{upName:"pointerup",upHandler:M.pointerupcaptured,moveName:"pointermove",moveHandler:M.pointermovecaptured};if(_==="mouse")return{upName:"pointerup",upHandler:M.pointerupcaptured,moveName:"pointermove",moveHandler:M.pointermovecaptured};if(_==="touch")return{upName:"touchend",upHandler:M.touchendcaptured,moveName:"touchmove",moveHandler:M.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function u(L,_){var M;if(r.MouseTracker.havePointerCapture)if(r.MouseTracker.havePointerEvents)try{L.element.setPointerCapture(_.id)}catch{r.console.warn("setPointerCapture() called on invalid pointer ID");return}else L.element.setCapture(!0);else M=c(L,r.MouseTracker.havePointerEvents?"pointerevent":_.type),i&&s(window.top)&&r.addEvent(window.top,M.upName,M.upHandler,!0),r.addEvent(r.MouseTracker.captureElement,M.upName,M.upHandler,!0),r.addEvent(r.MouseTracker.captureElement,M.moveName,M.moveHandler,!0);J(L,_,!0)}function d(L,_){var M,$,re;if(r.MouseTracker.havePointerCapture)if(r.MouseTracker.havePointerEvents){if($=L.getActivePointersListByType(_.type),re=$.getById(_.id),!re||!re.captured)return;try{L.element.releasePointerCapture(_.id)}catch{}}else L.element.releaseCapture();else M=c(L,r.MouseTracker.havePointerEvents?"pointerevent":_.type),i&&s(window.top)&&r.removeEvent(window.top,M.upName,M.upHandler,!0),r.removeEvent(r.MouseTracker.captureElement,M.moveName,M.moveHandler,!0),r.removeEvent(r.MouseTracker.captureElement,M.upName,M.upHandler,!0);J(L,_,!1)}function h(L){return r.MouseTracker.havePointerEvents?L.pointerId:r.MouseTracker.mousePointerId}function f(L){return r.MouseTracker.havePointerEvents?L.pointerType||(r.Browser.vendor===r.BROWSERS.IE?"mouse":""):"mouse"}function p(L){return r.MouseTracker.havePointerEvents?L.isPrimary:!0}function g(L){return r.getMousePosition(L)}function v(L,_){return m(g(L),_)}function m(L,_){var M=r.getElementOffset(_);return L.minus(M)}function y(L,_){return new r.Point((L.x+_.x)/2,(L.y+_.y)/2)}function E(L,_){var M={originalEvent:_,eventType:"click",pointerType:"mouse",isEmulated:!1};H(L,M),M.preventDefault&&!M.defaultPrevented&&r.cancelEvent(_),M.stopPropagation&&r.stopEvent(_)}function S(L,_){var M={originalEvent:_,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};H(L,M),M.preventDefault&&!M.defaultPrevented&&r.cancelEvent(_),M.stopPropagation&&r.stopEvent(_)}function b(L,_){var M=null,$={originalEvent:_,eventType:"keydown",pointerType:"",isEmulated:!1};H(L,$),L.keyDownHandler&&!$.preventGesture&&!$.defaultPrevented&&(M={eventSource:L,keyCode:_.keyCode?_.keyCode:_.charCode,ctrl:_.ctrlKey,shift:_.shiftKey,alt:_.altKey,meta:_.metaKey,originalEvent:_,preventDefault:$.preventDefault||$.defaultPrevented,userData:L.userData},L.keyDownHandler(M)),(M&&M.preventDefault||$.preventDefault&&!$.defaultPrevented)&&r.cancelEvent(_),$.stopPropagation&&r.stopEvent(_)}function w(L,_){var M=null,$={originalEvent:_,eventType:"keyup",pointerType:"",isEmulated:!1};H(L,$),L.keyUpHandler&&!$.preventGesture&&!$.defaultPrevented&&(M={eventSource:L,keyCode:_.keyCode?_.keyCode:_.charCode,ctrl:_.ctrlKey,shift:_.shiftKey,alt:_.altKey,meta:_.metaKey,originalEvent:_,preventDefault:$.preventDefault||$.defaultPrevented,userData:L.userData},L.keyUpHandler(M)),(M&&M.preventDefault||$.preventDefault&&!$.defaultPrevented)&&r.cancelEvent(_),$.stopPropagation&&r.stopEvent(_)}function x(L,_){var M=null,$={originalEvent:_,eventType:"keypress",pointerType:"",isEmulated:!1};H(L,$),L.keyHandler&&!$.preventGesture&&!$.defaultPrevented&&(M={eventSource:L,keyCode:_.keyCode?_.keyCode:_.charCode,ctrl:_.ctrlKey,shift:_.shiftKey,alt:_.altKey,meta:_.metaKey,originalEvent:_,preventDefault:$.preventDefault||$.defaultPrevented,userData:L.userData},L.keyHandler(M)),(M&&M.preventDefault||$.preventDefault&&!$.defaultPrevented)&&r.cancelEvent(_),$.stopPropagation&&r.stopEvent(_)}function D(L,_){var M={originalEvent:_,eventType:"focus",pointerType:"",isEmulated:!1};H(L,M),L.focusHandler&&!M.preventGesture&&L.focusHandler({eventSource:L,originalEvent:_,userData:L.userData})}function N(L,_){var M={originalEvent:_,eventType:"blur",pointerType:"",isEmulated:!1};H(L,M),L.blurHandler&&!M.preventGesture&&L.blurHandler({eventSource:L,originalEvent:_,userData:L.userData})}function C(L,_){var M=null,$={originalEvent:_,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};H(L,$),L.contextMenuHandler&&!$.preventGesture&&!$.defaultPrevented&&(M={eventSource:L,position:m(g(_),L.element),originalEvent:$.originalEvent,preventDefault:$.preventDefault||$.defaultPrevented,userData:L.userData},L.contextMenuHandler(M)),(M&&M.preventDefault||$.preventDefault&&!$.defaultPrevented)&&r.cancelEvent(_),$.stopPropagation&&r.stopEvent(_)}function P(L,_){G(L,_,_)}function U(L,_){var M={target:_.target||_.srcElement,type:"wheel",shiftKey:_.shiftKey||!1,clientX:_.clientX,clientY:_.clientY,pageX:_.pageX?_.pageX:_.clientX,pageY:_.pageY?_.pageY:_.clientY,deltaMode:_.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};r.MouseTracker.wheelEventName==="mousewheel"?M.deltaY=-_.wheelDelta/r.DEFAULT_SETTINGS.pixelsPerWheelLine:M.deltaY=_.detail,G(L,M,_)}function G(L,_,M){var $=0,re,he=null;$=_.deltaY<0?1:-1,re={originalEvent:_,eventType:"wheel",pointerType:"mouse",isEmulated:_!==M},H(L,re),L.scrollHandler&&!re.preventGesture&&!re.defaultPrevented&&(he={eventSource:L,pointerType:"mouse",position:v(_,L.element),scroll:$,shift:_.shiftKey,isTouchEvent:!1,originalEvent:M,preventDefault:re.preventDefault||re.defaultPrevented,userData:L.userData},L.scrollHandler(he)),re.stopPropagation&&r.stopEvent(M),(he&&he.preventDefault||re.preventDefault&&!re.defaultPrevented)&&r.cancelEvent(M)}function K(L,_){var M={id:r.MouseTracker.mousePointerId,type:"mouse"},$={originalEvent:_,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};H(L,$),_.target===L.element&&J(L,M,!1),$.stopPropagation&&r.stopEvent(_)}function B(L,_){var M,$,re=_.changedTouches.length,he,Me=L.getActivePointersListByType("touch");M=r.now(),Me.getLength()>_.touches.length-re&&r.console.warn("Tracked touch contact count doesn't match event.touches.length");var je={originalEvent:_,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(H(L,je),$=0;$<re;$++)he={id:_.changedTouches[$].identifier,type:"touch",isPrimary:Me.getLength()===0,currentPos:g(_.changedTouches[$]),currentTime:M},me(L,je,he),ot(L,je,he,0),J(L,he,!0);je.preventDefault&&!je.defaultPrevented&&r.cancelEvent(_),je.stopPropagation&&r.stopEvent(_)}function V(L,_){var M,$,re=_.changedTouches.length,he;M=r.now();var Me={originalEvent:_,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(H(L,Me),$=0;$<re;$++)he={id:_.changedTouches[$].identifier,type:"touch",currentPos:g(_.changedTouches[$]),currentTime:M},ht(L,Me,he,0),J(L,he,!1),ue(L,Me,he);Me.preventDefault&&!Me.defaultPrevented&&r.cancelEvent(_),Me.stopPropagation&&r.stopEvent(_)}function W(L,_){var M,$,re=_.changedTouches.length,he;M=r.now();var Me={originalEvent:_,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(H(L,Me),$=0;$<re;$++)he={id:_.changedTouches[$].identifier,type:"touch",currentPos:g(_.changedTouches[$]),currentTime:M},ee(L,Me,he);Me.preventDefault&&!Me.defaultPrevented&&r.cancelEvent(_),Me.stopPropagation&&r.stopEvent(_)}function X(L,_){var M=_.changedTouches.length,$,re,he={originalEvent:_,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(H(L,he),$=0;$<M;$++)re={id:_.changedTouches[$].identifier,type:"touch"},se(L,he,re);he.stopPropagation&&r.stopEvent(_)}function Y(L,_){return r.eventIsCanceled(_)||_.preventDefault(),!1}function O(L,_){return r.eventIsCanceled(_)||_.preventDefault(),!1}function ie(L,_){var M={originalEvent:_,eventType:"gotpointercapture",pointerType:f(_),isEmulated:!1};H(L,M),_.target===L.element&&J(L,{id:_.pointerId,type:f(_)},!0),M.stopPropagation&&r.stopEvent(_)}function le(L,_){var M={originalEvent:_,eventType:"lostpointercapture",pointerType:f(_),isEmulated:!1};H(L,M),_.target===L.element&&J(L,{id:_.pointerId,type:f(_)},!1),M.stopPropagation&&r.stopEvent(_)}function F(L,_){var M={id:h(_),type:f(_),isPrimary:p(_),currentPos:g(_),currentTime:r.now()},$={originalEvent:_,eventType:"pointerenter",pointerType:M.type,isEmulated:!1};H(L,$),me(L,$,M)}function te(L,_){var M={id:h(_),type:f(_),isPrimary:p(_),currentPos:g(_),currentTime:r.now()},$={originalEvent:_,eventType:"pointerleave",pointerType:M.type,isEmulated:!1};H(L,$),ue(L,$,M)}function ge(L,_){var M={id:h(_),type:f(_),isPrimary:p(_),currentPos:g(_),currentTime:r.now()},$={originalEvent:_,eventType:"pointerover",pointerType:M.type,isEmulated:!1};H(L,$),Be(L,$,M),$.preventDefault&&!$.defaultPrevented&&r.cancelEvent(_),$.stopPropagation&&r.stopEvent(_)}function Ce(L,_){var M={id:h(_),type:f(_),isPrimary:p(_),currentPos:g(_),currentTime:r.now()},$={originalEvent:_,eventType:"pointerout",pointerType:M.type,isEmulated:!1};H(L,$),Ae(L,$,M),$.preventDefault&&!$.defaultPrevented&&r.cancelEvent(_),$.stopPropagation&&r.stopEvent(_)}function de(L,_){var M={id:h(_),type:f(_),isPrimary:p(_),currentPos:g(_),currentTime:r.now()},$=r.MouseTracker.havePointerEvents&&M.type==="touch"&&r.Browser.vendor!==r.BROWSERS.IE,re={originalEvent:_,eventType:"pointerdown",pointerType:M.type,isEmulated:!1};H(L,re),ot(L,re,M,_.button),re.preventDefault&&!re.defaultPrevented&&r.cancelEvent(_),re.stopPropagation&&r.stopEvent(_),re.shouldCapture&&($?J(L,M,!0):u(L,M))}function we(L,_){Pe(L,_)}function Le(L,_){var M=L.getActivePointersListByType(f(_));M.getById(_.pointerId)&&Pe(L,_),r.stopEvent(_)}function Pe(L,_){var M;M={id:h(_),type:f(_),isPrimary:p(_),currentPos:g(_),currentTime:r.now()};var $={originalEvent:_,eventType:"pointerup",pointerType:M.type,isEmulated:!1};H(L,$),ht(L,$,M,_.button),$.preventDefault&&!$.defaultPrevented&&r.cancelEvent(_),$.stopPropagation&&r.stopEvent(_),$.shouldReleaseCapture&&(_.target===L.element?d(L,M):J(L,M,!1))}function Se(L,_){Ve(L,_)}function Ue(L,_){var M=L.getActivePointersListByType(f(_));M.getById(_.pointerId)&&Ve(L,_),r.stopEvent(_)}function Ve(L,_){var M={id:h(_),type:f(_),isPrimary:p(_),currentPos:g(_),currentTime:r.now()},$={originalEvent:_,eventType:"pointermove",pointerType:M.type,isEmulated:!1};H(L,$),ee(L,$,M),$.preventDefault&&!$.defaultPrevented&&r.cancelEvent(_),$.stopPropagation&&r.stopEvent(_)}function _t(L,_){var M={id:_.pointerId,type:f(_)},$={originalEvent:_,eventType:"pointercancel",pointerType:M.type,isEmulated:!1};H(L,$),se(L,$,M),$.stopPropagation&&r.stopEvent(_)}function Ct(L,_){return _.speed=0,_.direction=0,_.contactPos=_.currentPos,_.contactTime=_.currentTime,_.lastPos=_.currentPos,_.lastTime=_.currentTime,L.add(_)}function Gt(L,_,M){var $,re=_.getById(M.id);return re?(re.captured&&(r.console.warn("stopTrackingPointer() called on captured pointer"),d(L,re)),_.removeContact(),$=_.removeById(M.id)):$=_.getLength(),$}function A(L,_){switch(_.eventType){case"pointermove":_.isStoppable=!0,_.isCancelable=!0,_.preventDefault=!1,_.preventGesture=!L.hasGestureHandlers,_.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":_.isStoppable=!0,_.isCancelable=!0,_.preventDefault=!1,_.preventGesture=!1,_.stopPropagation=!1;break;case"pointerdown":_.isStoppable=!0,_.isCancelable=!0,_.preventDefault=!1,_.preventGesture=!L.hasGestureHandlers,_.stopPropagation=!1;break;case"pointerup":_.isStoppable=!0,_.isCancelable=!0,_.preventDefault=!1,_.preventGesture=!L.hasGestureHandlers,_.stopPropagation=!1;break;case"wheel":_.isStoppable=!0,_.isCancelable=!0,_.preventDefault=!1,_.preventGesture=!L.hasScrollHandler,_.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":_.isStoppable=!0,_.isCancelable=!1,_.preventDefault=!1,_.preventGesture=!1,_.stopPropagation=!1;break;case"click":_.isStoppable=!0,_.isCancelable=!0,_.preventDefault=!!L.clickHandler,_.preventGesture=!1,_.stopPropagation=!1;break;case"dblclick":_.isStoppable=!0,_.isCancelable=!0,_.preventDefault=!!L.dblClickHandler,_.preventGesture=!1,_.stopPropagation=!1;break;case"focus":case"blur":case"pointerenter":case"pointerleave":default:_.isStoppable=!1,_.isCancelable=!1,_.preventDefault=!1,_.preventGesture=!1,_.stopPropagation=!1;break}}function H(L,_){_.eventSource=L,_.eventPhase=_.originalEvent&&typeof _.originalEvent.eventPhase<"u"?_.originalEvent.eventPhase:0,_.defaultPrevented=r.eventIsCanceled(_.originalEvent),_.shouldCapture=!1,_.shouldReleaseCapture=!1,_.userData=L.userData,A(L,_),L.preProcessEventHandler&&L.preProcessEventHandler(_)}function J(L,_,M){var $=L.getActivePointersListByType(_.type),re=$.getById(_.id);re?M&&!re.captured?(re.captured=!0,$.captureCount++):!M&&re.captured&&(re.captured=!1,$.captureCount--,$.captureCount<0&&($.captureCount=0,r.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):r.console.warn("updatePointerCaptured() called on untracked pointer")}function me(L,_,M){var $=L.getActivePointersListByType(M.type),re;re=$.getById(M.id),re?(re.insideElement=!0,re.lastPos=re.currentPos,re.lastTime=re.currentTime,re.currentPos=M.currentPos,re.currentTime=M.currentTime,M=re):(M.captured=!1,M.insideElementPressed=!1,M.insideElement=!0,Ct($,M)),L.enterHandler&&L.enterHandler({eventSource:L,pointerType:M.type,position:m(M.currentPos,L.element),buttons:$.buttons,pointers:L.getActivePointerCount(),insideElementPressed:M.insideElementPressed,buttonDownAny:$.buttons!==0,isTouchEvent:M.type==="touch",originalEvent:_.originalEvent,userData:L.userData})}function ue(L,_,M){var $=L.getActivePointersListByType(M.type),re,he;re=$.getById(M.id),re?(re.captured?(re.insideElement=!1,re.lastPos=re.currentPos,re.lastTime=re.currentTime,re.currentPos=M.currentPos,re.currentTime=M.currentTime):Gt(L,$,re),M=re):(M.captured=!1,M.insideElementPressed=!1),(L.leaveHandler||L.exitHandler)&&(he={eventSource:L,pointerType:M.type,position:M.currentPos&&m(M.currentPos,L.element),buttons:$.buttons,pointers:L.getActivePointerCount(),insideElementPressed:M.insideElementPressed,buttonDownAny:$.buttons!==0,isTouchEvent:M.type==="touch",originalEvent:_.originalEvent,userData:L.userData},L.leaveHandler&&L.leaveHandler(he),L.exitHandler&&L.exitHandler(he))}function Be(L,_,M){var $,re;$=L.getActivePointersListByType(M.type),re=$.getById(M.id),re?M=re:(M.captured=!1,M.insideElementPressed=!1),L.overHandler&&L.overHandler({eventSource:L,pointerType:M.type,position:m(M.currentPos,L.element),buttons:$.buttons,pointers:L.getActivePointerCount(),insideElementPressed:M.insideElementPressed,buttonDownAny:$.buttons!==0,isTouchEvent:M.type==="touch",originalEvent:_.originalEvent,userData:L.userData})}function Ae(L,_,M){var $,re;$=L.getActivePointersListByType(M.type),re=$.getById(M.id),re?M=re:(M.captured=!1,M.insideElementPressed=!1),L.outHandler&&L.outHandler({eventSource:L,pointerType:M.type,position:M.currentPos&&m(M.currentPos,L.element),buttons:$.buttons,pointers:L.getActivePointerCount(),insideElementPressed:M.insideElementPressed,buttonDownAny:$.buttons!==0,isTouchEvent:M.type==="touch",originalEvent:_.originalEvent,userData:L.userData})}function ot(L,_,M,$){var re=n[L.hash],he=L.getActivePointersListByType(M.type),Me;if(typeof _.originalEvent.buttons<"u"?he.buttons=_.originalEvent.buttons:$===0?he.buttons|=1:$===1?he.buttons|=4:$===2?he.buttons|=2:$===3?he.buttons|=8:$===4?he.buttons|=16:$===5&&(he.buttons|=32),$!==0){_.shouldCapture=!1,_.shouldReleaseCapture=!1,L.nonPrimaryPressHandler&&!_.preventGesture&&!_.defaultPrevented&&(_.preventDefault=!0,L.nonPrimaryPressHandler({eventSource:L,pointerType:M.type,position:m(M.currentPos,L.element),button:$,buttons:he.buttons,isTouchEvent:M.type==="touch",originalEvent:_.originalEvent,userData:L.userData}));return}Me=he.getById(M.id),Me?(Me.insideElementPressed=!0,Me.insideElement=!0,Me.originalTarget=_.originalEvent.target,Me.contactPos=M.currentPos,Me.contactTime=M.currentTime,Me.lastPos=Me.currentPos,Me.lastTime=Me.currentTime,Me.currentPos=M.currentPos,Me.currentTime=M.currentTime,M=Me):(M.captured=!1,M.insideElementPressed=!0,M.insideElement=!0,M.originalTarget=_.originalEvent.target,Ct(he,M)),he.addContact(),!_.preventGesture&&!_.defaultPrevented?(_.shouldCapture=!0,_.shouldReleaseCapture=!1,_.preventDefault=!0,(L.dragHandler||L.dragEndHandler||L.pinchHandler)&&r.MouseTracker.gesturePointVelocityTracker.addPoint(L,M),he.contacts===1?L.pressHandler&&!_.preventGesture&&L.pressHandler({eventSource:L,pointerType:M.type,position:m(M.contactPos,L.element),buttons:he.buttons,isTouchEvent:M.type==="touch",originalEvent:_.originalEvent,userData:L.userData}):he.contacts===2&&L.pinchHandler&&M.type==="touch"&&(re.pinchGPoints=he.asArray(),re.lastPinchDist=re.currentPinchDist=re.pinchGPoints[0].currentPos.distanceTo(re.pinchGPoints[1].currentPos),re.lastPinchCenter=re.currentPinchCenter=y(re.pinchGPoints[0].currentPos,re.pinchGPoints[1].currentPos))):(_.shouldCapture=!1,_.shouldReleaseCapture=!1)}function ht(L,_,M,$){var re=n[L.hash],he=L.getActivePointersListByType(M.type),Me,je,Fe,Ot=!1,or;if(typeof _.originalEvent.buttons<"u"?he.buttons=_.originalEvent.buttons:$===0?he.buttons^=-2:$===1?he.buttons^=-5:$===2?he.buttons^=-3:$===3?he.buttons^=-9:$===4?he.buttons^=-17:$===5&&(he.buttons^=-33),_.shouldCapture=!1,$!==0){_.shouldReleaseCapture=!1,L.nonPrimaryReleaseHandler&&!_.preventGesture&&!_.defaultPrevented&&(_.preventDefault=!0,L.nonPrimaryReleaseHandler({eventSource:L,pointerType:M.type,position:m(M.currentPos,L.element),button:$,buttons:he.buttons,isTouchEvent:M.type==="touch",originalEvent:_.originalEvent,userData:L.userData}));return}Fe=he.getById(M.id),Fe?(he.removeContact(),Fe.captured&&(Ot=!0),Fe.lastPos=Fe.currentPos,Fe.lastTime=Fe.currentTime,Fe.currentPos=M.currentPos,Fe.currentTime=M.currentTime,Fe.insideElement||Gt(L,he,Fe),Me=Fe.currentPos,je=Fe.currentTime):(M.captured=!1,M.insideElementPressed=!1,M.insideElement=!0,Ct(he,M),Fe=M),!_.preventGesture&&!_.defaultPrevented&&(Ot?(_.shouldReleaseCapture=!0,_.preventDefault=!0,(L.dragHandler||L.dragEndHandler||L.pinchHandler)&&r.MouseTracker.gesturePointVelocityTracker.removePoint(L,Fe),he.contacts===0?(L.releaseHandler&&Me&&L.releaseHandler({eventSource:L,pointerType:Fe.type,position:m(Me,L.element),buttons:he.buttons,insideElementPressed:Fe.insideElementPressed,insideElementReleased:Fe.insideElement,isTouchEvent:Fe.type==="touch",originalEvent:_.originalEvent,userData:L.userData}),L.dragEndHandler&&re.sentDragEvent&&L.dragEndHandler({eventSource:L,pointerType:Fe.type,position:m(Fe.currentPos,L.element),speed:Fe.speed,direction:Fe.direction,shift:_.originalEvent.shiftKey,isTouchEvent:Fe.type==="touch",originalEvent:_.originalEvent,userData:L.userData}),re.sentDragEvent=!1,(L.clickHandler||L.dblClickHandler)&&Fe.insideElement&&(or=je-Fe.contactTime<=L.clickTimeThreshold&&Fe.contactPos.distanceTo(Me)<=L.clickDistThreshold,L.clickHandler&&L.clickHandler({eventSource:L,pointerType:Fe.type,position:m(Fe.currentPos,L.element),quick:or,shift:_.originalEvent.shiftKey,isTouchEvent:Fe.type==="touch",originalEvent:_.originalEvent,originalTarget:Fe.originalTarget,userData:L.userData}),L.dblClickHandler&&or&&(he.clicks++,he.clicks===1?(re.lastClickPos=Me,re.dblClickTimeOut=setTimeout(function(){he.clicks=0},L.dblClickTimeThreshold)):he.clicks===2&&(clearTimeout(re.dblClickTimeOut),he.clicks=0,re.lastClickPos.distanceTo(Me)<=L.dblClickDistThreshold&&L.dblClickHandler({eventSource:L,pointerType:Fe.type,position:m(Fe.currentPos,L.element),shift:_.originalEvent.shiftKey,isTouchEvent:Fe.type==="touch",originalEvent:_.originalEvent,userData:L.userData}),re.lastClickPos=null)))):he.contacts===2&&L.pinchHandler&&Fe.type==="touch"&&(re.pinchGPoints=he.asArray(),re.lastPinchDist=re.currentPinchDist=re.pinchGPoints[0].currentPos.distanceTo(re.pinchGPoints[1].currentPos),re.lastPinchCenter=re.currentPinchCenter=y(re.pinchGPoints[0].currentPos,re.pinchGPoints[1].currentPos))):(_.shouldReleaseCapture=!1,L.releaseHandler&&Me&&(L.releaseHandler({eventSource:L,pointerType:Fe.type,position:m(Me,L.element),buttons:he.buttons,insideElementPressed:Fe.insideElementPressed,insideElementReleased:Fe.insideElement,isTouchEvent:Fe.type==="touch",originalEvent:_.originalEvent,userData:L.userData}),_.preventDefault=!0)))}function ee(L,_,M){var $=n[L.hash],re=L.getActivePointersListByType(M.type),he,Me,je;if(typeof _.originalEvent.buttons<"u"&&(re.buttons=_.originalEvent.buttons),he=re.getById(M.id),he)he.lastPos=he.currentPos,he.lastTime=he.currentTime,he.currentPos=M.currentPos,he.currentTime=M.currentTime;else return;_.shouldCapture=!1,_.shouldReleaseCapture=!1,L.stopHandler&&M.type==="mouse"&&(clearTimeout(L.stopTimeOut),L.stopTimeOut=setTimeout(function(){xe(L,_.originalEvent,M.type)},L.stopDelay)),re.contacts===0?L.moveHandler&&L.moveHandler({eventSource:L,pointerType:M.type,position:m(M.currentPos,L.element),buttons:re.buttons,isTouchEvent:M.type==="touch",originalEvent:_.originalEvent,userData:L.userData}):re.contacts===1?(L.moveHandler&&(he=re.asArray()[0],L.moveHandler({eventSource:L,pointerType:he.type,position:m(he.currentPos,L.element),buttons:re.buttons,isTouchEvent:he.type==="touch",originalEvent:_.originalEvent,userData:L.userData})),L.dragHandler&&!_.preventGesture&&!_.defaultPrevented&&(he=re.asArray()[0],je=he.currentPos.minus(he.lastPos),L.dragHandler({eventSource:L,pointerType:he.type,position:m(he.currentPos,L.element),buttons:re.buttons,delta:je,speed:he.speed,direction:he.direction,shift:_.originalEvent.shiftKey,isTouchEvent:he.type==="touch",originalEvent:_.originalEvent,userData:L.userData}),_.preventDefault=!0,$.sentDragEvent=!0)):re.contacts===2&&(L.moveHandler&&(Me=re.asArray(),L.moveHandler({eventSource:L,pointerType:Me[0].type,position:m(y(Me[0].currentPos,Me[1].currentPos),L.element),buttons:re.buttons,isTouchEvent:Me[0].type==="touch",originalEvent:_.originalEvent,userData:L.userData})),L.pinchHandler&&M.type==="touch"&&!_.preventGesture&&!_.defaultPrevented&&(je=$.pinchGPoints[0].currentPos.distanceTo($.pinchGPoints[1].currentPos),je!==$.currentPinchDist&&($.lastPinchDist=$.currentPinchDist,$.currentPinchDist=je,$.lastPinchCenter=$.currentPinchCenter,$.currentPinchCenter=y($.pinchGPoints[0].currentPos,$.pinchGPoints[1].currentPos),L.pinchHandler({eventSource:L,pointerType:"touch",gesturePoints:$.pinchGPoints,lastCenter:m($.lastPinchCenter,L.element),center:m($.currentPinchCenter,L.element),lastDistance:$.lastPinchDist,distance:$.currentPinchDist,shift:_.originalEvent.shiftKey,originalEvent:_.originalEvent,userData:L.userData}),_.preventDefault=!0)))}function se(L,_,M){var $=L.getActivePointersListByType(M.type),re;re=$.getById(M.id),re&&Gt(L,$,re)}function xe(L,_,M){L.stopHandler&&L.stopHandler({eventSource:L,pointerType:M,position:v(_,L.element),buttons:L.getActivePointersListByType(M).buttons,isTouchEvent:M==="touch",originalEvent:_,userData:L.userData})}})(t),(function(r){r.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},r.Control=function(n,i,s){var o=n.parentNode;typeof i=="number"&&(r.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),i={anchor:i}),i.attachToViewer=typeof i.attachToViewer>"u"?!0:i.attachToViewer,this.autoFade=typeof i.autoFade>"u"?!0:i.autoFade,this.element=n,this.anchor=i.anchor,this.container=s,this.anchor===r.ControlAnchor.ABSOLUTE?(this.wrapper=r.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof i.top=="number"?i.top+"px":i.top,this.wrapper.style.left=typeof i.left=="number"?i.left+"px":i.left,this.wrapper.style.height=typeof i.height=="number"?i.height+"px":i.height,this.wrapper.style.width=typeof i.width=="number"?i.width+"px":i.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=r.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===r.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),i.attachToViewer?this.anchor===r.ControlAnchor.TOP_RIGHT||this.anchor===r.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):o.appendChild(this.wrapper)},r.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==r.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(n){this.wrapper.style.display=n?this.anchor===r.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(n){this.element[r.SIGNAL]&&r.Browser.vendor===r.BROWSERS.IE?r.setElementOpacity(this.element,n,!0):r.setElementOpacity(this.wrapper,n,!0)}}})(t),(function(r){r.ControlDock=function(i){var s=["topleft","topright","bottomright","bottomleft"],o,a;for(r.extend(!0,this,{id:"controldock-"+r.now()+"-"+Math.floor(Math.random()*1e6),container:r.makeNeutralElement("div"),controls:[]},i),this.container.onsubmit=function(){return!1},this.element&&(this.element=r.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),a=0;a<s.length;a++)o=s[a],this.controls[o]=r.makeNeutralElement("div"),this.controls[o].style.position="absolute",o.match("left")&&(this.controls[o].style.left="0px"),o.match("right")&&(this.controls[o].style.right="0px"),o.match("top")&&(this.controls[o].style.top="0px"),o.match("bottom")&&(this.controls[o].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},r.ControlDock.prototype={addControl:function(i,s){i=r.getElement(i);var o=null;if(!(n(this,i)>=0)){switch(s.anchor){case r.ControlAnchor.TOP_RIGHT:o=this.controls.topright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingTop="0px";break;case r.ControlAnchor.BOTTOM_RIGHT:o=this.controls.bottomright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingBottom="0px";break;case r.ControlAnchor.BOTTOM_LEFT:o=this.controls.bottomleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingBottom="0px";break;case r.ControlAnchor.TOP_LEFT:o=this.controls.topleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingTop="0px";break;case r.ControlAnchor.ABSOLUTE:o=this.container,i.style.margin="0px",i.style.padding="0px";break;default:case r.ControlAnchor.NONE:o=this.container,i.style.margin="0px",i.style.padding="0px";break}this.controls.push(new r.Control(i,s,o)),i.style.display="inline-block"}},removeControl:function(i){i=r.getElement(i);var s=n(this,i);return s>=0&&(this.controls[s].destroy(),this.controls.splice(s,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var i;for(i=this.controls.length-1;i>=0;i--)if(this.controls[i].isVisible())return!0;return!1},setControlsEnabled:function(i){var s;for(s=this.controls.length-1;s>=0;s--)this.controls[s].setVisible(i);return this}};function n(i,s){var o=i.controls,a;for(a=o.length-1;a>=0;a--)if(o[a].element===s)return a;return-1}})(t),(function(r){r.Placement=r.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})})(t),(function(r){var n={},i=1;r.Viewer=function(A){var H=arguments,J=this,me;if(r.isPlainObject(A)||(A={id:H[0],xmlPath:H.length>1?H[1]:void 0,prefixUrl:H.length>2?H[2]:void 0,controls:H.length>3?H[3]:void 0,overlays:H.length>4?H[4]:void 0}),A.config&&(r.extend(!0,A,A.config),delete A.config),r.extend(!0,this,{id:A.id,hash:A.hash||i++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},r.DEFAULT_SETTINGS,A),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof n[this.hash]<"u"&&r.console.warn("Hash "+this.hash+" has already been used."),n[this.hash]={fsBoundsDelta:new r.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=r.now(),r.EventSource.call(this),this.addHandler("open-failed",function(ue){var Be=r.getString("Errors.OpenFailed",ue.eventSource,ue.message);J._showMessage(Be)}),r.ControlDock.call(this,A),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=r.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(function(ue){ue.width="100%",ue.height="100%",ue.overflow="hidden",ue.position="absolute",ue.top="0px",ue.left="0px"})(this.canvas.style),r.setElementTouchActionNone(this.canvas),A.tabIndex!==""&&(this.canvas.tabIndex=A.tabIndex===void 0?0:A.tabIndex),this.container.className="openseadragon-container",(function(ue){ue.width="100%",ue.height="100%",ue.position="relative",ue.overflow="hidden",ue.left="0px",ue.top="0px",ue.textAlign="left"})(this.container.style),r.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new r.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:r.delegate(this,v),keyDownHandler:r.delegate(this,m),keyHandler:r.delegate(this,y),clickHandler:r.delegate(this,E),dblClickHandler:r.delegate(this,S),dragHandler:r.delegate(this,b),dragEndHandler:r.delegate(this,w),enterHandler:r.delegate(this,x),leaveHandler:r.delegate(this,D),pressHandler:r.delegate(this,N),releaseHandler:r.delegate(this,C),nonPrimaryPressHandler:r.delegate(this,P),nonPrimaryReleaseHandler:r.delegate(this,U),scrollHandler:r.delegate(this,V),pinchHandler:r.delegate(this,G),focusHandler:r.delegate(this,K),blurHandler:r.delegate(this,B)}),this.outerTracker=new r.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:r.delegate(this,W),leaveHandler:r.delegate(this,X)}),this.toolbar&&(this.toolbar=new r.ControlDock({element:this.toolbar})),this.bindStandardControls(),n[this.hash].prevContainerSize=s(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){n[J.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new r.World({viewer:this}),this.world.addHandler("add-item",function(ue){J.source=J.world.getItemAt(0).source,n[J.hash].forceRedraw=!0,J._updateRequestId||(J._updateRequestId=c(J,Y))}),this.world.addHandler("remove-item",function(ue){J.world.getItemCount()?J.source=J.world.getItemAt(0).source:J.source=null,n[J.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(ue){J.viewport&&J.viewport._setContentBounds(J.world.getHomeBounds(),J.world.getContentFactor())}),this.world.addHandler("item-index-change",function(ue){J.source=J.world.getItemAt(0).source}),this.viewport=new r.Viewport({containerSize:n[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new r.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:A.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new r.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new r.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=r.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(me=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(me,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(me=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(me,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new r.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),me=0;me<this.customControls.length;me++)this.addControl(this.customControls[me].id,{anchor:this.customControls[me].anchor});r.requestAnimationFrame(function(){d(J)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),r._viewers.set(this.element,this)},r.extend(r.Viewer.prototype,r.EventSource.prototype,r.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(A){return r.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(A)},openTileSource:function(A){return r.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(A)},get buttons(){return r.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(A,H){var J=this;if(this.close(),!A)return this;if(this.sequenceMode&&r.isArray(A))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof H<"u"&&!isNaN(H)&&(this.initialPage=H),this.tileSources=A,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(r.isArray(A)||(A=[A]),!A.length)return this;this._opening=!0;for(var me=A.length,ue=0,Be=0,Ae,ot=function(){if(ue+Be===me)if(ue){(J._firstOpen||!J.preserveViewport)&&(J.viewport.goHome(!0),J.viewport.update()),J._firstOpen=!1;var se=A[0];if(se.tileSource&&(se=se.tileSource),J.overlays&&!J.preserveOverlays)for(var xe=0;xe<J.overlays.length;xe++)J.currentOverlays[xe]=a(J,J.overlays[xe]);J._drawOverlays(),J._opening=!1,J.raiseEvent("open",{source:se})}else J._opening=!1,J.raiseEvent("open-failed",Ae)},ht=function(se){(!r.isPlainObject(se)||!se.tileSource)&&(se={tileSource:se}),se.index!==void 0&&(r.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete se.index),se.collectionImmediately===void 0&&(se.collectionImmediately=!0);var xe=se.success;se.success=function(_){if(ue++,se.tileSource.overlays)for(var M=0;M<se.tileSource.overlays.length;M++)J.addOverlay(se.tileSource.overlays[M]);xe&&xe(_),ot()};var L=se.error;se.error=function(_){Be++,Ae||(Ae=_),L&&L(_),ot()},J.addTiledImage(se)},ee=0;ee<A.length;ee++)ht(A[ee]);return this},close:function(){return n[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),n[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(n[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(r.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),n[this.navigator.hash]=null,delete n[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),n[this.hash]=null,delete n[this.hash],this.canvas=null,this.container=null,r._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(A){return this.innerTracker.setTracking(A),this.outerTracker.setTracking(A),this.raiseEvent("mouse-enabled",{enabled:A}),this},areControlsEnabled:function(){var A=this.controls.length,H;for(H=0;H<this.controls.length;H++)A=A&&this.controls[H].isVisible();return A},setControlsEnabled:function(A){return A?f(this):d(this),this.raiseEvent("controls-enabled",{enabled:A}),this},setDebugMode:function(A){for(var H=0;H<this.world.getItemCount();H++)this.world.getItemAt(H).debugMode=A;this.debugMode=A,this.forceRedraw()},setAjaxHeaders:function(A,H){if(A===null&&(A={}),!r.isPlainObject(A)){console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}if(H===void 0&&(H=!0),this.ajaxHeaders=A,H){for(var J=0;J<this.world.getItemCount();J++)this.world.getItemAt(J)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var me in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[me].setAjaxHeaders(this.ajaxHeaders,!0)}},addButton:function(A){this.buttonGroup.addButton(A)},isFullPage:function(){return n[this.hash].fullPage},setFullPage:function(A){var H=document.body,J=H.style,me=document.documentElement.style,ue=this,Be,Ae;if(A===this.isFullPage())return this;var ot={fullPage:A,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",ot),ot.preventDefaultAction)return this;if(A){for(this.elementSize=r.getElementSize(this.element),this.pageScroll=r.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=J.margin,this.docMargin=me.margin,J.margin="0",me.margin="0",this.bodyPadding=J.padding,this.docPadding=me.padding,J.padding="0",me.padding="0",this.bodyWidth=J.width,this.docWidth=me.width,J.width="100%",me.width="100%",this.bodyHeight=J.height,this.docHeight=me.height,J.height="100%",me.height="100%",this.bodyDisplay=J.display,J.display="block",this.previousBody=[],n[this.hash].prevElementParent=this.element.parentNode,n[this.hash].prevNextSibling=this.element.nextSibling,n[this.hash].prevElementWidth=this.element.style.width,n[this.hash].prevElementHeight=this.element.style.height,Be=H.childNodes.length,Ae=0;Ae<Be;Ae++)this.previousBody.push(H.childNodes[0]),H.removeChild(H.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,H.appendChild(this.toolbar.element),r.addClass(this.toolbar.element,"fullpage")),r.addClass(this.element,"fullpage"),H.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=r.getElementSize(this.element).y-r.getElementSize(this.toolbar.element).y+"px"),n[this.hash].fullPage=!0,r.delegate(this,W)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,J.margin=this.bodyMargin,me.margin=this.docMargin,J.padding=this.bodyPadding,me.padding=this.docPadding,J.width=this.bodyWidth,me.width=this.docWidth,J.height=this.bodyHeight,me.height=this.docHeight,J.display=this.bodyDisplay,H.removeChild(this.element),Be=this.previousBody.length,Ae=0;Ae<Be;Ae++)H.appendChild(this.previousBody.shift());r.removeClass(this.element,"fullpage"),n[this.hash].prevElementParent.insertBefore(this.element,n[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(H.removeChild(this.toolbar.element),r.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=n[this.hash].prevElementWidth,this.element.style.height=n[this.hash].prevElementHeight;var ht=0,ee=function(){r.setPageScroll(ue.pageScroll);var se=r.getPageScroll();ht++,ht<10&&(se.x!==ue.pageScroll.x||se.y!==ue.pageScroll.y)&&r.requestAnimationFrame(ee)};r.requestAnimationFrame(ee),n[this.hash].fullPage=!1,r.delegate(this,X)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:A}),this},setFullScreen:function(A){var H=this;if(!r.supportsFullScreen)return this.setFullPage(A);if(r.isFullScreen()===A)return this;var J={fullScreen:A,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",J),J.preventDefaultAction)return this;if(A){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var me=function(){var ue=r.isFullScreen();ue||(r.removeEvent(document,r.fullScreenEventName,me),r.removeEvent(document,r.fullScreenErrorEventName,me),H.setFullPage(!1),H.isFullPage()&&(H.element.style.width=H.fullPageStyleWidth,H.element.style.height=H.fullPageStyleHeight)),H.navigator&&H.viewport&&setTimeout(function(){H.navigator.update(H.viewport)}),H.raiseEvent("full-screen",{fullScreen:ue})};r.addEvent(document,r.fullScreenEventName,me),r.addEvent(document,r.fullScreenErrorEventName,me),r.requestFullScreen(document.body)}else r.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},isFullScreen:function(){return r.isFullScreen()&&this.isFullPage()},setVisible:function(A){return this.container.style.visibility=A?"":"hidden",this.raiseEvent("visible",{visible:A}),this},addTiledImage:function(A){r.console.assert(A,"[Viewer.addTiledImage] options is required"),r.console.assert(A.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),r.console.assert(!A.replace||A.index>-1&&A.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var H=this;A.replace&&(A.replaceItem=H.world.getItemAt(A.index)),this._hideMessage(),A.placeholderFillStyle===void 0&&(A.placeholderFillStyle=this.placeholderFillStyle),A.opacity===void 0&&(A.opacity=this.opacity),A.preload===void 0&&(A.preload=this.preload),A.compositeOperation===void 0&&(A.compositeOperation=this.compositeOperation),A.crossOriginPolicy===void 0&&(A.crossOriginPolicy=A.tileSource.crossOriginPolicy!==void 0?A.tileSource.crossOriginPolicy:this.crossOriginPolicy),A.ajaxWithCredentials===void 0&&(A.ajaxWithCredentials=this.ajaxWithCredentials),A.loadTilesWithAjax===void 0&&(A.loadTilesWithAjax=this.loadTilesWithAjax),r.isPlainObject(A.ajaxHeaders)||(A.ajaxHeaders={});var J={options:A};function me(Ae){for(var ot=0;ot<H._loadQueue.length;ot++)if(H._loadQueue[ot]===J){H._loadQueue.splice(ot,1);break}H._loadQueue.length===0&&ue(J),H.raiseEvent("add-item-failed",Ae),A.error&&A.error(Ae)}function ue(Ae){H.collectionMode&&(H.world.arrange({immediately:Ae.options.collectionImmediately,rows:H.collectionRows,columns:H.collectionColumns,layout:H.collectionLayout,tileSize:H.collectionTileSize,tileMargin:H.collectionTileMargin}),H.world.setAutoRefigureSizes(!0))}if(r.isArray(A.tileSource)){setTimeout(function(){me({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:A.tileSource,options:A})});return}this._loadQueue.push(J);function Be(){for(var Ae,ot,ht;H._loadQueue.length&&(Ae=H._loadQueue[0],!!Ae.tileSource);){if(H._loadQueue.splice(0,1),Ae.options.replace){var ee=H.world.getIndexOfItem(Ae.options.replaceItem);ee!==-1&&(Ae.options.index=ee),H.world.removeItem(Ae.options.replaceItem)}ot=new r.TiledImage({viewer:H,source:Ae.tileSource,viewport:H.viewport,drawer:H.drawer,tileCache:H.tileCache,imageLoader:H.imageLoader,x:Ae.options.x,y:Ae.options.y,width:Ae.options.width,height:Ae.options.height,fitBounds:Ae.options.fitBounds,fitBoundsPlacement:Ae.options.fitBoundsPlacement,clip:Ae.options.clip,placeholderFillStyle:Ae.options.placeholderFillStyle,opacity:Ae.options.opacity,preload:Ae.options.preload,degrees:Ae.options.degrees,flipped:Ae.options.flipped,compositeOperation:Ae.options.compositeOperation,springStiffness:H.springStiffness,animationTime:H.animationTime,minZoomImageRatio:H.minZoomImageRatio,wrapHorizontal:H.wrapHorizontal,wrapVertical:H.wrapVertical,immediateRender:H.immediateRender,blendTime:H.blendTime,alwaysBlend:H.alwaysBlend,minPixelRatio:H.minPixelRatio,smoothTileEdgesMinZoom:H.smoothTileEdgesMinZoom,iOSDevice:H.iOSDevice,crossOriginPolicy:Ae.options.crossOriginPolicy,ajaxWithCredentials:Ae.options.ajaxWithCredentials,loadTilesWithAjax:Ae.options.loadTilesWithAjax,ajaxHeaders:Ae.options.ajaxHeaders,debugMode:H.debugMode,subPixelRoundingForTransparency:H.subPixelRoundingForTransparency}),H.collectionMode&&H.world.setAutoRefigureSizes(!1),H.navigator&&(ht=r.extend({},Ae.options,{replace:!1,originalTiledImage:ot,tileSource:Ae.tileSource}),H.navigator.addTiledImage(ht)),H.world.addItem(ot,{index:Ae.options.index}),H._loadQueue.length===0&&ue(Ae),H.world.getItemCount()===1&&!H.preserveViewport&&H.viewport.goHome(!0),Ae.options.success&&Ae.options.success({item:ot})}}o(this,A.tileSource,A,function(Ae){J.tileSource=Ae,Be()},function(Ae){Ae.options=A,me(Ae),Be()})},addSimpleImage:function(A){r.console.assert(A,"[Viewer.addSimpleImage] options is required"),r.console.assert(A.url,"[Viewer.addSimpleImage] options.url is required");var H=r.extend({},A,{tileSource:{type:"image",url:A.url}});delete H.url,this.addTiledImage(H)},addLayer:function(A){var H=this;r.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var J=r.extend({},A,{success:function(me){H.raiseEvent("add-layer",{options:A,drawer:me.item})},error:function(me){H.raiseEvent("add-layer-failed",me)}});return this.addTiledImage(J),this},getLayerAtLevel:function(A){return r.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(A)},getLevelOfLayer:function(A){return r.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(A)},getLayersCount:function(){return r.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(A,H){return r.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(A,H)},removeLayer:function(A){return r.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(A)},forceRedraw:function(){return n[this.hash].forceRedraw=!0,this},forceResize:function(){n[this.hash].needsResize=!0,n[this.hash].forceResize=!0},bindSequenceControls:function(){var A=r.delegate(this,p),H=r.delegate(this,g),J=r.delegate(this,this.goToNextPage),me=r.delegate(this,this.goToPreviousPage),ue=this.navImages,Be=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(Be=!1),this.previousButton=new r.Button({element:this.previousButton?r.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.PreviousPage"),srcRest:F(this.prefixUrl,ue.previous.REST),srcGroup:F(this.prefixUrl,ue.previous.GROUP),srcHover:F(this.prefixUrl,ue.previous.HOVER),srcDown:F(this.prefixUrl,ue.previous.DOWN),onRelease:me,onFocus:A,onBlur:H}),this.nextButton=new r.Button({element:this.nextButton?r.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.NextPage"),srcRest:F(this.prefixUrl,ue.next.REST),srcGroup:F(this.prefixUrl,ue.next.GROUP),srcHover:F(this.prefixUrl,ue.next.HOVER),srcDown:F(this.prefixUrl,ue.next.DOWN),onRelease:J,onFocus:A,onBlur:H}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),Be&&(this.paging=new r.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:r.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||r.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var A=r.delegate(this,te),H=r.delegate(this,Ce),J=r.delegate(this,Le),me=r.delegate(this,ge),ue=r.delegate(this,Pe),Be=r.delegate(this,Ue),Ae=r.delegate(this,Ve),ot=r.delegate(this,_t),ht=r.delegate(this,Ct),ee=r.delegate(this,Gt),se=r.delegate(this,p),xe=r.delegate(this,g),L=this.navImages,_=[],M=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(M=!1),this.showZoomControl&&(_.push(this.zoomInButton=new r.Button({element:this.zoomInButton?r.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.ZoomIn"),srcRest:F(this.prefixUrl,L.zoomIn.REST),srcGroup:F(this.prefixUrl,L.zoomIn.GROUP),srcHover:F(this.prefixUrl,L.zoomIn.HOVER),srcDown:F(this.prefixUrl,L.zoomIn.DOWN),onPress:A,onRelease:H,onClick:J,onEnter:A,onExit:H,onFocus:se,onBlur:xe})),_.push(this.zoomOutButton=new r.Button({element:this.zoomOutButton?r.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.ZoomOut"),srcRest:F(this.prefixUrl,L.zoomOut.REST),srcGroup:F(this.prefixUrl,L.zoomOut.GROUP),srcHover:F(this.prefixUrl,L.zoomOut.HOVER),srcDown:F(this.prefixUrl,L.zoomOut.DOWN),onPress:me,onRelease:H,onClick:ue,onEnter:me,onExit:H,onFocus:se,onBlur:xe}))),this.showHomeControl&&_.push(this.homeButton=new r.Button({element:this.homeButton?r.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.Home"),srcRest:F(this.prefixUrl,L.home.REST),srcGroup:F(this.prefixUrl,L.home.GROUP),srcHover:F(this.prefixUrl,L.home.HOVER),srcDown:F(this.prefixUrl,L.home.DOWN),onRelease:Be,onFocus:se,onBlur:xe})),this.showFullPageControl&&_.push(this.fullPageButton=new r.Button({element:this.fullPageButton?r.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.FullPage"),srcRest:F(this.prefixUrl,L.fullpage.REST),srcGroup:F(this.prefixUrl,L.fullpage.GROUP),srcHover:F(this.prefixUrl,L.fullpage.HOVER),srcDown:F(this.prefixUrl,L.fullpage.DOWN),onRelease:Ae,onFocus:se,onBlur:xe})),this.showRotationControl&&(_.push(this.rotateLeftButton=new r.Button({element:this.rotateLeftButton?r.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.RotateLeft"),srcRest:F(this.prefixUrl,L.rotateleft.REST),srcGroup:F(this.prefixUrl,L.rotateleft.GROUP),srcHover:F(this.prefixUrl,L.rotateleft.HOVER),srcDown:F(this.prefixUrl,L.rotateleft.DOWN),onRelease:ot,onFocus:se,onBlur:xe})),_.push(this.rotateRightButton=new r.Button({element:this.rotateRightButton?r.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.RotateRight"),srcRest:F(this.prefixUrl,L.rotateright.REST),srcGroup:F(this.prefixUrl,L.rotateright.GROUP),srcHover:F(this.prefixUrl,L.rotateright.HOVER),srcDown:F(this.prefixUrl,L.rotateright.DOWN),onRelease:ht,onFocus:se,onBlur:xe}))),this.showFlipControl&&_.push(this.flipButton=new r.Button({element:this.flipButton?r.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:r.getString("Tooltips.Flip"),srcRest:F(this.prefixUrl,L.flip.REST),srcGroup:F(this.prefixUrl,L.flip.GROUP),srcHover:F(this.prefixUrl,L.flip.HOVER),srcDown:F(this.prefixUrl,L.flip.DOWN),onRelease:ee,onFocus:se,onBlur:xe})),M?(this.buttonGroup=new r.ButtonGroup({buttons:_,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",r.delegate(this,Se)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||r.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||r.ControlAnchor.TOP_LEFT})):this.customButtons=_),this},currentPage:function(){return this._sequenceIndex},goToPage:function(A){return this.tileSources&&A>=0&&A<this.tileSources.length&&(this._sequenceIndex=A,this._updateSequenceButtons(A),this.open(this.tileSources[A]),this.referenceStrip&&this.referenceStrip.setFocus(A),this.raiseEvent("page",{page:A})),this},addOverlay:function(A,H,J,me){var ue;if(r.isPlainObject(A)?ue=A:ue={element:A,location:H,placement:J,onDraw:me},A=r.getElement(ue.element),l(this.currentOverlays,A)>=0)return this;var Be=a(this,ue);return this.currentOverlays.push(Be),Be.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:A,location:ue.location,placement:ue.placement}),this},updateOverlay:function(A,H,J){var me;return A=r.getElement(A),me=l(this.currentOverlays,A),me>=0&&(this.currentOverlays[me].update(H,J),n[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:A,location:H,placement:J})),this},removeOverlay:function(A){var H;return A=r.getElement(A),H=l(this.currentOverlays,A),H>=0&&(this.currentOverlays[H].destroy(),this.currentOverlays.splice(H,1),n[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:A})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return n[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(A){var H;return A=r.getElement(A),H=l(this.currentOverlays,A),H>=0?this.currentOverlays[H]:null},_updateSequenceButtons:function(A){this.nextButton&&(!this.tileSources||this.tileSources.length-1===A?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(A>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(A){this._hideMessage();var H=r.makeNeutralElement("div");H.appendChild(document.createTextNode(A)),this.messageDiv=r.makeCenteredNode(H),r.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var A=this.messageDiv;A&&(A.parentNode.removeChild(A),delete this.messageDiv)},gestureSettingsByDeviceType:function(A){switch(A){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var A,H=this.currentOverlays.length;for(A=0;A<H;A++)this.currentOverlays[A].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new r.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else r.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),r.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){r.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var A=r.pixelDensityRatio,H=r.getCurrentPixelDensityRatio();A!==H&&(r.pixelDensityRatio=H,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var A=this._sequenceIndex-1;this.navPrevNextWrap&&A<0&&(A+=this.tileSources.length),this.goToPage(A)},goToNextPage:function(){var A=this._sequenceIndex+1;this.navPrevNextWrap&&A>=this.tileSources.length&&(A=0),this.goToPage(A)},isAnimating:function(){return n[this.hash].animating}});function s(A){return A=r.getElement(A),new r.Point(A.clientWidth===0?1:A.clientWidth,A.clientHeight===0?1:A.clientHeight)}function o(A,H,J,me,ue){var Be=A;if(r.type(H)==="string"){if(H.match(/^\s*<.*>\s*$/))H=r.parseXml(H);else if(H.match(/^\s*[{[].*[}\]]\s*$/))try{var Ae=r.parseJSON(H);H=Ae}catch{}}function ot(ht,ee){ht.ready?me(ht):(ht.addHandler("ready",function(){me(ht)}),ht.addHandler("open-failed",function(se){ue({message:se.message,source:ee})}))}setTimeout(function(){if(r.type(H)==="string")H=new r.TileSource({url:H,crossOriginPolicy:J.crossOriginPolicy!==void 0?J.crossOriginPolicy:A.crossOriginPolicy,ajaxWithCredentials:A.ajaxWithCredentials,ajaxHeaders:J.ajaxHeaders?J.ajaxHeaders:A.ajaxHeaders,splitHashDataForPost:A.splitHashDataForPost,useCanvas:A.useCanvas,success:function(xe){me(xe.tileSource)}}),H.addHandler("open-failed",function(xe){ue(xe)});else if(r.isPlainObject(H)||H.nodeType)if(H.crossOriginPolicy===void 0&&(J.crossOriginPolicy!==void 0||A.crossOriginPolicy!==void 0)&&(H.crossOriginPolicy=J.crossOriginPolicy!==void 0?J.crossOriginPolicy:A.crossOriginPolicy),H.ajaxWithCredentials===void 0&&(H.ajaxWithCredentials=A.ajaxWithCredentials),H.useCanvas===void 0&&(H.useCanvas=A.useCanvas),r.isFunction(H.getTileUrl)){var ht=new r.TileSource(H);ht.getTileUrl=H.getTileUrl,me(ht)}else{var ee=r.TileSource.determineType(Be,H);if(!ee){ue({message:"Unable to load TileSource",source:H});return}var se=ee.prototype.configure.apply(Be,[H]);ot(new ee(se),H)}else ot(H,H)})}function a(A,H){if(H instanceof r.Overlay)return H;var J=null;if(H.element)J=r.getElement(H.element);else{var me=H.id?H.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);J=r.getElement(H.id),J||(J=document.createElement("a"),J.href="#/overlay/"+me),J.id=me,r.addClass(J,H.className?H.className:"openseadragon-overlay")}var ue=H.location,Be=H.width,Ae=H.height;if(!ue){var ot=H.x,ht=H.y;if(H.px!==void 0){var ee=A.viewport.imageToViewportRectangle(new r.Rect(H.px,H.py,Be||0,Ae||0));ot=ee.x,ht=ee.y,Be=Be!==void 0?ee.width:void 0,Ae=Ae!==void 0?ee.height:void 0}ue=new r.Point(ot,ht)}var se=H.placement;return se&&r.type(se)==="string"&&(se=r.Placement[H.placement.toUpperCase()]),new r.Overlay({element:J,location:ue,placement:se,onDraw:H.onDraw,checkResize:H.checkResize,width:Be,height:Ae,rotationMode:H.rotationMode})}function l(A,H){var J;for(J=A.length-1;J>=0;J--)if(A[J].element===H)return J;return-1}function c(A,H){return r.requestAnimationFrame(function(){H(A)})}function u(A){r.requestAnimationFrame(function(){h(A)})}function d(A){A.autoHideControls&&(A.controlsShouldFade=!0,A.controlsFadeBeginTime=r.now()+A.controlsFadeDelay,window.setTimeout(function(){u(A)},A.controlsFadeDelay))}function h(A){var H,J,me,ue;if(A.controlsShouldFade){for(H=r.now(),J=H-A.controlsFadeBeginTime,me=1-J/A.controlsFadeLength,me=Math.min(1,me),me=Math.max(0,me),ue=A.controls.length-1;ue>=0;ue--)A.controls[ue].autoFade&&A.controls[ue].setOpacity(me);me>0&&u(A)}}function f(A){var H;for(A.controlsShouldFade=!1,H=A.controls.length-1;H>=0;H--)A.controls[H].setOpacity(1)}function p(){f(this)}function g(){d(this)}function v(A){var H={tracker:A.eventSource,position:A.position,originalEvent:A.originalEvent,preventDefault:A.preventDefault};this.raiseEvent("canvas-contextmenu",H),A.preventDefault=H.preventDefault}function m(A){var H={originalEvent:A.originalEvent,preventDefaultAction:!1,preventVerticalPan:A.preventVerticalPan||!this.panVertical,preventHorizontalPan:A.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",H),!H.preventDefaultAction&&!A.ctrl&&!A.alt&&!A.meta)switch(A.keyCode){case 38:H.preventVerticalPan||(A.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),A.preventDefault=!0;break;case 40:H.preventVerticalPan||(A.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),A.preventDefault=!0;break;case 37:H.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),A.preventDefault=!0;break;case 39:H.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),A.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),A.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),A.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),A.preventDefault=!0;break;case 87:H.preventVerticalPan||(A.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(0,-40))),this.viewport.applyConstraints()),A.preventDefault=!0;break;case 83:H.preventVerticalPan||(A.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(0,40))),this.viewport.applyConstraints()),A.preventDefault=!0;break;case 65:H.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(-40,0))),this.viewport.applyConstraints()),A.preventDefault=!0;break;case 68:H.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new r.Point(40,0))),this.viewport.applyConstraints()),A.preventDefault=!0;break;case 82:A.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),A.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),A.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:A.preventDefault=!1;break}else A.preventDefault=!1}function y(A){var H={originalEvent:A.originalEvent};this.raiseEvent("canvas-key-press",H)}function E(A){var H,J=document.activeElement===this.canvas;J||this.canvas.focus(),this.viewport.flipped&&(A.position.x=this.viewport.getContainerSize().x-A.position.x);var me={tracker:A.eventSource,position:A.position,quick:A.quick,shift:A.shift,originalEvent:A.originalEvent,originalTarget:A.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",me),!me.preventDefaultAction&&this.viewport&&A.quick&&(H=this.gestureSettingsByDeviceType(A.pointerType),H.clickToZoom===!0&&(this.viewport.zoomBy(A.shift?1/this.zoomPerClick:this.zoomPerClick,H.zoomToRefPoint?this.viewport.pointFromPixel(A.position,!0):null),this.viewport.applyConstraints()),H.dblClickDragToZoom&&(n[this.hash].draggingToZoom===!0?(n[this.hash].lastClickTime=null,n[this.hash].draggingToZoom=!1):n[this.hash].lastClickTime=r.now()))}function S(A){var H,J={tracker:A.eventSource,position:A.position,shift:A.shift,originalEvent:A.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",J),!J.preventDefaultAction&&this.viewport&&(H=this.gestureSettingsByDeviceType(A.pointerType),H.dblClickToZoom&&(this.viewport.zoomBy(A.shift?1/this.zoomPerClick:this.zoomPerClick,H.zoomToRefPoint?this.viewport.pointFromPixel(A.position,!0):null),this.viewport.applyConstraints()))}function b(A){var H,J={tracker:A.eventSource,pointerType:A.pointerType,position:A.position,delta:A.delta,speed:A.speed,direction:A.direction,shift:A.shift,originalEvent:A.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",J),H=this.gestureSettingsByDeviceType(A.pointerType),!J.preventDefaultAction&&this.viewport){if(H.dblClickDragToZoom&&n[this.hash].draggingToZoom){var me=Math.pow(this.zoomPerDblClickDrag,A.delta.y/50);this.viewport.zoomBy(me)}else if(H.dragToPan&&!n[this.hash].draggingToZoom){if(this.panHorizontal||(A.delta.x=0),this.panVertical||(A.delta.y=0),this.viewport.flipped&&(A.delta.x=-A.delta.x),this.constrainDuringPan){var ue=this.viewport.deltaPointsFromPixels(A.delta.negate());this.viewport.centerSpringX.target.value+=ue.x,this.viewport.centerSpringY.target.value+=ue.y;var Be=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=ue.x,this.viewport.centerSpringY.target.value-=ue.y,Be.xConstrained&&(A.delta.x=0),Be.yConstrained&&(A.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(A.delta.negate()),H.flickEnabled&&!this.constrainDuringPan)}}}function w(A){var H,J={tracker:A.eventSource,pointerType:A.pointerType,position:A.position,speed:A.speed,direction:A.direction,shift:A.shift,originalEvent:A.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",J),H=this.gestureSettingsByDeviceType(A.pointerType),!J.preventDefaultAction&&this.viewport){if(!n[this.hash].draggingToZoom&&H.flickEnabled&&A.speed>=H.flickMinSpeed){var me=0;this.panHorizontal&&(me=H.flickMomentum*A.speed*Math.cos(A.direction));var ue=0;this.panVertical&&(ue=H.flickMomentum*A.speed*Math.sin(A.direction));var Be=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),Ae=this.viewport.pointFromPixel(new r.Point(Be.x-me,Be.y-ue));this.viewport.panTo(Ae,!1)}this.viewport.applyConstraints()}H.dblClickDragToZoom&&n[this.hash].draggingToZoom===!0&&(n[this.hash].draggingToZoom=!1)}function x(A){this.raiseEvent("canvas-enter",{tracker:A.eventSource,pointerType:A.pointerType,position:A.position,buttons:A.buttons,pointers:A.pointers,insideElementPressed:A.insideElementPressed,buttonDownAny:A.buttonDownAny,originalEvent:A.originalEvent})}function D(A){this.raiseEvent("canvas-exit",{tracker:A.eventSource,pointerType:A.pointerType,position:A.position,buttons:A.buttons,pointers:A.pointers,insideElementPressed:A.insideElementPressed,buttonDownAny:A.buttonDownAny,originalEvent:A.originalEvent})}function N(A){var H;if(this.raiseEvent("canvas-press",{tracker:A.eventSource,pointerType:A.pointerType,position:A.position,insideElementPressed:A.insideElementPressed,insideElementReleased:A.insideElementReleased,originalEvent:A.originalEvent}),H=this.gestureSettingsByDeviceType(A.pointerType),H.dblClickDragToZoom){var J=n[this.hash].lastClickTime,me=r.now();if(J===null)return;me-J<this.dblClickTimeThreshold&&(n[this.hash].draggingToZoom=!0),n[this.hash].lastClickTime=null}}function C(A){this.raiseEvent("canvas-release",{tracker:A.eventSource,pointerType:A.pointerType,position:A.position,insideElementPressed:A.insideElementPressed,insideElementReleased:A.insideElementReleased,originalEvent:A.originalEvent})}function P(A){this.raiseEvent("canvas-nonprimary-press",{tracker:A.eventSource,position:A.position,pointerType:A.pointerType,button:A.button,buttons:A.buttons,originalEvent:A.originalEvent})}function U(A){this.raiseEvent("canvas-nonprimary-release",{tracker:A.eventSource,position:A.position,pointerType:A.pointerType,button:A.button,buttons:A.buttons,originalEvent:A.originalEvent})}function G(A){var H,J,me,ue,Be={tracker:A.eventSource,pointerType:A.pointerType,gesturePoints:A.gesturePoints,lastCenter:A.lastCenter,center:A.center,lastDistance:A.lastDistance,distance:A.distance,shift:A.shift,originalEvent:A.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",Be),this.viewport&&(H=this.gestureSettingsByDeviceType(A.pointerType),H.pinchToZoom&&(!Be.preventDefaultPanAction||!Be.preventDefaultZoomAction)&&(J=this.viewport.pointFromPixel(A.center,!0),H.zoomToRefPoint&&!Be.preventDefaultPanAction&&(me=this.viewport.pointFromPixel(A.lastCenter,!0),ue=me.minus(J),this.panHorizontal||(ue.x=0),this.panVertical||(ue.y=0),this.viewport.panBy(ue,!0)),Be.preventDefaultZoomAction||this.viewport.zoomBy(A.distance/A.lastDistance,J,!0),this.viewport.applyConstraints()),H.pinchRotate&&!Be.preventDefaultRotateAction)){var Ae=Math.atan2(A.gesturePoints[0].currentPos.y-A.gesturePoints[1].currentPos.y,A.gesturePoints[0].currentPos.x-A.gesturePoints[1].currentPos.x),ot=Math.atan2(A.gesturePoints[0].lastPos.y-A.gesturePoints[1].lastPos.y,A.gesturePoints[0].lastPos.x-A.gesturePoints[1].lastPos.x);J=this.viewport.pointFromPixel(A.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(Ae-ot)*(180/Math.PI),J,!0)}}function K(A){this.raiseEvent("canvas-focus",{tracker:A.eventSource,originalEvent:A.originalEvent})}function B(A){this.raiseEvent("canvas-blur",{tracker:A.eventSource,originalEvent:A.originalEvent})}function V(A){var H,J,me,ue,Be;ue=r.now(),Be=ue-this._lastScrollTime,Be>this.minScrollDeltaTime?(this._lastScrollTime=ue,H={tracker:A.eventSource,position:A.position,scroll:A.scroll,shift:A.shift,originalEvent:A.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",H),!H.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(A.position.x=this.viewport.getContainerSize().x-A.position.x),J=this.gestureSettingsByDeviceType(A.pointerType),J.scrollToZoom&&(me=Math.pow(this.zoomPerScroll,A.scroll),this.viewport.zoomBy(me,J.zoomToRefPoint?this.viewport.pointFromPixel(A.position,!0):null),this.viewport.applyConstraints())),A.preventDefault=H.preventDefault):A.preventDefault=!0}function W(A){n[this.hash].mouseInside=!0,f(this),this.raiseEvent("container-enter",{tracker:A.eventSource,pointerType:A.pointerType,position:A.position,buttons:A.buttons,pointers:A.pointers,insideElementPressed:A.insideElementPressed,buttonDownAny:A.buttonDownAny,originalEvent:A.originalEvent})}function X(A){A.pointers<1&&(n[this.hash].mouseInside=!1,n[this.hash].animating||d(this)),this.raiseEvent("container-exit",{tracker:A.eventSource,pointerType:A.pointerType,position:A.position,buttons:A.buttons,pointers:A.pointers,insideElementPressed:A.insideElementPressed,buttonDownAny:A.buttonDownAny,originalEvent:A.originalEvent})}function Y(A){ie(A),A.isOpen()?A._updateRequestId=c(A,Y):A._updateRequestId=!1}function O(A,H){var J=A.viewport,me=J.getZoom(),ue=J.getCenter();J.resize(H,A.preserveImageSizeOnResize),J.panTo(ue,!0);var Be;if(A.preserveImageSizeOnResize)Be=n[A.hash].prevContainerSize.x/H.x;else{var Ae=new r.Point(0,0),ot=new r.Point(n[A.hash].prevContainerSize.x,n[A.hash].prevContainerSize.y).distanceTo(Ae),ht=new r.Point(H.x,H.y).distanceTo(Ae);Be=ht/ot*n[A.hash].prevContainerSize.x/H.x}J.zoomTo(me*Be,null,!0),n[A.hash].prevContainerSize=H,n[A.hash].forceRedraw=!0,n[A.hash].needsResize=!1,n[A.hash].forceResize=!1}function ie(A){if(!(A._opening||!n[A.hash])){if(A.autoResize||n[A.hash].forceResize){var H;if(A._autoResizePolling){H=s(A.container);var J=n[A.hash].prevContainerSize;H.equals(J)||(n[A.hash].needsResize=!0)}n[A.hash].needsResize&&O(A,H||s(A.container))}var me=A.viewport.update(),ue=A.world.update()||me;me&&A.raiseEvent("viewport-change"),A.referenceStrip&&(ue=A.referenceStrip.update(A.viewport)||ue);var Be=n[A.hash].animating;!Be&&ue&&(A.raiseEvent("animation-start"),f(A));var Ae=Be&&!ue;Ae&&(n[A.hash].animating=!1),(ue||Ae||n[A.hash].forceRedraw||A.world.needsDraw())&&(le(A),A._drawOverlays(),A.navigator&&A.navigator.update(A.viewport),n[A.hash].forceRedraw=!1,ue&&A.raiseEvent("animation")),Ae&&(A.raiseEvent("animation-finish"),n[A.hash].mouseInside||d(A)),n[A.hash].animating=ue}}function le(A){A.imageLoader.clear(),A.drawer.clear(),A.world.draw(),A.raiseEvent("update-viewport",{})}function F(A,H){return A?A+H:H}function te(){n[this.hash].lastZoomTime=r.now(),n[this.hash].zoomFactor=this.zoomPerSecond,n[this.hash].zooming=!0,de(this)}function ge(){n[this.hash].lastZoomTime=r.now(),n[this.hash].zoomFactor=1/this.zoomPerSecond,n[this.hash].zooming=!0,de(this)}function Ce(){n[this.hash].zooming=!1}function de(A){r.requestAnimationFrame(r.delegate(A,we))}function we(){var A,H,J;n[this.hash].zooming&&this.viewport&&(A=r.now(),H=A-n[this.hash].lastZoomTime,J=Math.pow(n[this.hash].zoomFactor,H/1e3),this.viewport.zoomBy(J),this.viewport.applyConstraints(),n[this.hash].lastZoomTime=A,de(this))}function Le(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Pe(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Se(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function Ue(){this.viewport&&this.viewport.goHome()}function Ve(){this.isFullPage()&&!r.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function _t(){if(this.viewport){var A=this.viewport.getRotation();this.viewport.flipped?A+=this.rotationIncrement:A-=this.rotationIncrement,this.viewport.setRotation(A)}}function Ct(){if(this.viewport){var A=this.viewport.getRotation();this.viewport.flipped?A-=this.rotationIncrement:A+=this.rotationIncrement,this.viewport.setRotation(A)}}function Gt(){this.viewport.toggleFlip()}})(t),(function(r){r.Navigator=function(c){var u=c.viewer,d=this,h,f;c.element||c.id?(c.element?(c.id&&r.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),c.element.id?c.id=c.element.id:c.id="navigator-"+r.now(),this.element=c.element):this.element=document.getElementById(c.id),c.controlOptions={anchor:r.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(c.id="navigator-"+r.now(),this.element=r.makeNeutralElement("div"),c.controlOptions={anchor:r.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:c.autoFade},c.position&&(c.position==="BOTTOM_RIGHT"?c.controlOptions.anchor=r.ControlAnchor.BOTTOM_RIGHT:c.position==="BOTTOM_LEFT"?c.controlOptions.anchor=r.ControlAnchor.BOTTOM_LEFT:c.position==="TOP_RIGHT"?c.controlOptions.anchor=r.ControlAnchor.TOP_RIGHT:c.position==="TOP_LEFT"?c.controlOptions.anchor=r.ControlAnchor.TOP_LEFT:c.position==="ABSOLUTE"&&(c.controlOptions.anchor=r.ControlAnchor.ABSOLUTE,c.controlOptions.top=c.top,c.controlOptions.left=c.left,c.controlOptions.height=c.height,c.controlOptions.width=c.width))),this.element.id=c.id,this.element.className+=" navigator",c=r.extend(!0,{sizeRatio:r.DEFAULT_SETTINGS.navigatorSizeRatio},c,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:c.animationTime,autoResize:!1,minZoomImageRatio:1,background:c.background,opacity:c.opacity,borderColor:c.borderColor,displayRegionColor:c.displayRegionColor}),c.minPixelRatio=this.minPixelRatio=u.minPixelRatio,r.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new r.Point(1,1),this.totalBorderWidths=new r.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),c.controlOptions.anchor!==r.ControlAnchor.NONE&&(function(v,m){v.margin="0px",v.border=m+"px solid "+c.borderColor,v.padding="0px",v.background=c.background,v.opacity=c.opacity,v.overflow="hidden"})(this.element.style,this.borderWidth),this.displayRegion=r.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",(function(v,m){v.position="relative",v.top="0px",v.left="0px",v.fontSize="0px",v.overflow="hidden",v.border=m+"px solid "+c.displayRegionColor,v.margin="0px",v.padding="0px",v.background="transparent",v.float="left",v.cssFloat="left",v.styleFloat="left",v.zIndex=999999999,v.cursor="default",v.boxSizing="content-box"})(this.displayRegion.style,this.borderWidth),r.setElementPointerEventsNone(this.displayRegion),r.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=r.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",r.setElementPointerEventsNone(this.displayRegionContainer),r.setElementTouchActionNone(this.displayRegionContainer),u.addControl(this.element,c.controlOptions),this._resizeWithViewer=c.controlOptions.anchor!==r.ControlAnchor.ABSOLUTE&&c.controlOptions.anchor!==r.ControlAnchor.NONE,c.width&&c.height?(this.setWidth(c.width),this.setHeight(c.height)):this._resizeWithViewer&&(h=r.getElementSize(u.element),this.element.style.height=Math.round(h.y*c.sizeRatio)+"px",this.element.style.width=Math.round(h.x*c.sizeRatio)+"px",this.oldViewerSize=h,f=r.getElementSize(this.element),this.elementArea=f.x*f.y),this.oldContainerSize=new r.Point(0,0),r.Viewer.apply(this,[c]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function p(v,m){a(d.displayRegionContainer,v),a(d.displayRegion,-v),d.viewport.setRotation(v,m)}if(c.navigatorRotate){var g=c.viewer.viewport?c.viewer.viewport.getRotation():c.viewer.degrees||0;p(g,!0),c.viewer.addHandler("rotate",function(v){p(v.degrees,v.immediately)})}this.innerTracker.destroy(),this.innerTracker=new r.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:r.delegate(this,i),clickHandler:r.delegate(this,n),releaseHandler:r.delegate(this,s),scrollHandler:r.delegate(this,o),preProcessEventHandler:function(v){v.eventType==="wheel"&&(v.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",r.setElementPointerEventsNone(this.canvas),r.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){d.viewport&&d.viewport.goHome(!0)}),u.world.addHandler("item-index-change",function(v){window.setTimeout(function(){var m=d.world.getItemAt(v.previousIndex);d.world.setItemIndex(m,v.newIndex)},1)}),u.world.addHandler("remove-item",function(v){var m=v.item,y=d._getMatchingItem(m);y&&d.world.removeItem(y)}),this.update(u.viewport)},r.extend(r.Navigator.prototype,r.EventSource.prototype,r.Viewer.prototype,{updateSize:function(){if(this.viewport){var c=new r.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);c.equals(this.oldContainerSize)||(this.viewport.resize(c,!0),this.viewport.goHome(!0),this.oldContainerSize=c,this.drawer.clear(),this.world.draw())}},setWidth:function(c){this.width=c,this.element.style.width=typeof c=="number"?c+"px":c,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(c){this.height=c,this.element.style.height=typeof c=="number"?c+"px":c,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(c){return this.viewport.setFlip(c),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(c){l(this.displayRegion,c),l(this.canvas,c),l(this.element,c)},update:function(c){var u,d,h,f,p,g;if(u=r.getElementSize(this.viewer.element),this._resizeWithViewer&&u.x&&u.y&&!u.equals(this.oldViewerSize)&&(this.oldViewerSize=u,this.maintainSizeRatio||!this.elementArea?(d=u.x*this.sizeRatio,h=u.y*this.sizeRatio):(d=Math.sqrt(this.elementArea*(u.x/u.y)),h=this.elementArea/d),this.element.style.width=Math.round(d)+"px",this.element.style.height=Math.round(h)+"px",this.elementArea||(this.elementArea=d*h),this.updateSize()),c&&this.viewport){if(f=c.getBoundsNoRotate(!0),p=this.viewport.pixelFromPointNoRotate(f.getTopLeft(),!1),g=this.viewport.pixelFromPointNoRotate(f.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var v=c.getRotation(!0);a(this.displayRegion,-v)}var m=this.displayRegion.style;m.display=this.world.getItemCount()?"block":"none",m.top=p.y.toFixed(2)+"px",m.left=p.x.toFixed(2)+"px";var y=g.x-p.x,E=g.y-p.y;m.width=Math.round(Math.max(y,0))+"px",m.height=Math.round(Math.max(E,0))+"px"}},addTiledImage:function(c){var u=this,d=c.originalTiledImage;delete c.original;var h=r.extend({},c,{success:function(f){var p=f.item;p._originalForNavigator=d,u._matchBounds(p,d,!0),u._matchOpacity(p,d),u._matchCompositeOperation(p,d);function g(){u._matchBounds(p,d)}function v(){u._matchOpacity(p,d)}function m(){u._matchCompositeOperation(p,d)}d.addHandler("bounds-change",g),d.addHandler("clip-change",g),d.addHandler("opacity-change",v),d.addHandler("composite-operation-change",m)}});return r.Viewer.prototype.addTiledImage.apply(this,[h])},destroy:function(){return r.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(c){for(var u=this.world.getItemCount(),d,h=0;h<u;h++)if(d=this.world.getItemAt(h),d._originalForNavigator===c)return d;return null},_matchBounds:function(c,u,d){var h=u.getBoundsNoRotate();c.setPosition(h.getTopLeft(),d),c.setWidth(h.width,d),c.setRotation(u.getRotation(),d),c.setClip(u.getClip()),c.setFlip(u.getFlip())},_matchOpacity:function(c,u){c.setOpacity(u.opacity)},_matchCompositeOperation:function(c,u){c.setCompositeOperation(u.compositeOperation)}});function n(c){var u={tracker:c.eventSource,position:c.position,quick:c.quick,shift:c.shift,originalEvent:c.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",u),!u.preventDefaultAction&&c.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(c.position.x=this.viewport.getContainerSize().x-c.position.x);var d=this.viewport.pointFromPixel(c.position);this.panVertical?this.panHorizontal||(d.x=this.viewer.viewport.getCenter(!0).x):d.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(d),this.viewer.viewport.applyConstraints()}}function i(c){var u={tracker:c.eventSource,position:c.position,delta:c.delta,speed:c.speed,direction:c.direction,shift:c.shift,originalEvent:c.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",u),!u.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(c.delta.x=0),this.panVertical||(c.delta.y=0),this.viewer.viewport.flipped&&(c.delta.x=-c.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(c.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function s(c){c.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function o(c){var u={tracker:c.eventSource,position:c.position,scroll:c.scroll,shift:c.shift,originalEvent:c.originalEvent,preventDefault:c.preventDefault};this.viewer.raiseEvent("navigator-scroll",u),c.preventDefault=u.preventDefault}function a(c,u){l(c,"rotate("+u+"deg)")}function l(c,u){c.style.webkitTransform=u,c.style.mozTransform=u,c.style.msTransform=u,c.style.oTransform=u,c.style.transform=u}})(t),(function(r){var n={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};r.extend(r,{getString:function(i){var s=i.split("."),o=null,a=arguments,l=n,c;for(c=0;c<s.length-1;c++)l=l[s[c]]||{};return o=l[s[c]],typeof o!="string"&&(r.console.error("Untranslated source string:",i),o=""),o.replace(/\{\d+\}/g,function(u){var d=parseInt(u.match(/\d+/),10)+1;return d<a.length?a[d]:""})},setString:function(i,s){var o=i.split("."),a=n,l;for(l=0;l<o.length-1;l++)a[o[l]]||(a[o[l]]={}),a=a[o[l]];a[o[l]]=s}})})(t),(function(r){r.Point=function(n,i){this.x=typeof n=="number"?n:0,this.y=typeof i=="number"?i:0},r.Point.prototype={clone:function(){return new r.Point(this.x,this.y)},plus:function(n){return new r.Point(this.x+n.x,this.y+n.y)},minus:function(n){return new r.Point(this.x-n.x,this.y-n.y)},times:function(n){return new r.Point(this.x*n,this.y*n)},divide:function(n){return new r.Point(this.x/n,this.y/n)},negate:function(){return new r.Point(-this.x,-this.y)},distanceTo:function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))},squaredDistanceTo:function(n){return Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2)},apply:function(n){return new r.Point(n(this.x),n(this.y))},equals:function(n){return n instanceof r.Point&&this.x===n.x&&this.y===n.y},rotate:function(n,i){i=i||new r.Point(0,0);var s,o;if(n%90===0){var a=r.positiveModulo(n,360);switch(a){case 0:s=1,o=0;break;case 90:s=0,o=1;break;case 180:s=-1,o=0;break;case 270:s=0,o=-1;break}}else{var l=n*Math.PI/180;s=Math.cos(l),o=Math.sin(l)}var c=s*(this.x-i.x)-o*(this.y-i.y)+i.x,u=o*(this.x-i.x)+s*(this.y-i.y)+i.y;return new r.Point(c,u)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}})(t),(function(r){r.TileSource=function(i,s,o,a,l,c){var u=this,d=arguments,h,f;if(r.isPlainObject(i)?h=i:h={width:d[0],height:d[1],tileSize:d[2],tileOverlap:d[3],minLevel:d[4],maxLevel:d[5]},r.EventSource.call(this),r.extend(!0,this,h),!this.success){for(f=0;f<arguments.length;f++)if(r.isFunction(arguments[f])){this.success=arguments[f];break}}this.success&&this.addHandler("ready",function(p){u.success(p)}),r.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new r.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=h.width&&h.height?h.width/h.height:1,this.dimensions=new r.Point(h.width,h.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=h.tileOverlap?h.tileOverlap:0,this.minLevel=h.minLevel?h.minLevel:0,this.maxLevel=h.maxLevel!==void 0&&h.maxLevel!==null?h.maxLevel:h.width&&h.height?Math.ceil(Math.log(Math.max(h.width,h.height))/Math.log(2)):0,this.success&&r.isFunction(this.success)&&this.success(this))},r.TileSource.prototype={getTileSize:function(i){return r.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(i){return this._tileWidth?this._tileWidth:this.getTileSize(i)},getTileHeight:function(i){return this._tileHeight?this._tileHeight:this.getTileSize(i)},setMaxLevel:function(i){this.maxLevel=i,this._memoizeLevelScale()},getLevelScale:function(i){return this._memoizeLevelScale(),this.getLevelScale(i)},_memoizeLevelScale:function(){var i={},s;for(s=0;s<=this.maxLevel;s++)i[s]=1/Math.pow(2,this.maxLevel-s);this.getLevelScale=function(o){return i[o]}},getNumTiles:function(i){var s=this.getLevelScale(i),o=Math.ceil(s*this.dimensions.x/this.getTileWidth(i)),a=Math.ceil(s*this.dimensions.y/this.getTileHeight(i));return new r.Point(o,a)},getPixelRatio:function(i){var s=this.dimensions.times(this.getLevelScale(i)),o=1/s.x*r.pixelDensityRatio,a=1/s.y*r.pixelDensityRatio;return new r.Point(o,a)},getClosestLevel:function(){var i,s;for(i=this.minLevel+1;i<=this.maxLevel&&(s=this.getNumTiles(i),!(s.x>1||s.y>1));i++);return i-1},getTileAtPoint:function(i,s){var o=s.x>=0&&s.x<=1&&s.y>=0&&s.y<=1/this.aspectRatio;r.console.assert(o,"[TileSource.getTileAtPoint] must be called with a valid point.");var a=this.dimensions.x*this.getLevelScale(i),l=s.x*a,c=s.y*a,u=Math.floor(l/this.getTileWidth(i)),d=Math.floor(c/this.getTileHeight(i));s.x>=1&&(u=this.getNumTiles(i).x-1);var h=1e-15;return s.y>=1/this.aspectRatio-h&&(d=this.getNumTiles(i).y-1),new r.Point(u,d)},getTileBounds:function(i,s,o,a){var l=this.dimensions.times(this.getLevelScale(i)),c=this.getTileWidth(i),u=this.getTileHeight(i),d=s===0?0:c*s-this.tileOverlap,h=o===0?0:u*o-this.tileOverlap,f=c+(s===0?1:2)*this.tileOverlap,p=u+(o===0?1:2)*this.tileOverlap,g=1/l.x;return f=Math.min(f,l.x-d),p=Math.min(p,l.y-h),a?new r.Rect(0,0,f,p):new r.Rect(d*g,h*g,f*g,p*g)},getImageInfo:function(i){var s=this,o,a,l,c,u,d,h;i&&(u=i.split("/"),d=u[u.length-1],h=d.lastIndexOf("."),h>-1&&(u[u.length-1]=d.slice(0,h)));var f=null;if(this.splitHashDataForPost){var p=i.indexOf("#");p!==-1&&(f=i.substring(p+1),i=i.substr(0,p))}a=function(g){typeof g=="string"&&(g=r.parseXml(g));var v=r.TileSource.determineType(s,g,i);if(!v){s.raiseEvent("open-failed",{message:"Unable to load TileSource",source:i});return}c=v.prototype.configure.apply(s,[g,i,f]),c.ajaxWithCredentials===void 0&&(c.ajaxWithCredentials=s.ajaxWithCredentials),l=new v(c),s.ready=!0,s.raiseEvent("ready",{tileSource:l})},i.match(/\.js$/)?(o=i.split("/").pop().replace(".js",""),r.jsonp({url:i,async:!1,callbackName:o,callback:a})):r.makeAjaxRequest({url:i,postData:f,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(g){var v=n(g);a(v)},error:function(g,v){var m;try{m="HTTP "+g.status+" attempting to load TileSource: "+i}catch{var y;typeof v>"u"||!v.toString?y="Unknown error":y=v.toString(),m=y+" attempting to load TileSource: "+i}r.console.error(m),s.raiseEvent("open-failed",{message:m,source:i,postData:f})}})},supports:function(i,s){return!1},configure:function(i,s,o){throw new Error("Method not implemented.")},getTileUrl:function(i,s,o){throw new Error("Method not implemented.")},getTilePostData:function(i,s,o){return null},getTileAjaxHeaders:function(i,s,o){return{}},getTileHashKey:function(i,s,o,a,l,c){function u(d){return l?d+"+"+JSON.stringify(l):d}return u(typeof a!="string"?i+"/"+s+"_"+o:a)},tileExists:function(i,s,o){var a=this.getNumTiles(i);return i>=this.minLevel&&i<=this.maxLevel&&s>=0&&o>=0&&s<a.x&&o<a.y},hasTransparency:function(i,s,o,a){return!!i||s.match(".png")},downloadTileStart:function(i){var s=i.userData,o=new Image;s.image=o,s.request=null;var a=function(l){if(!o){i.finish(null,s.request,"Image load failed: undefined Image instance.");return}o.onload=o.onerror=o.onabort=null,i.finish(l?null:o,s.request,l)};o.onload=function(){a()},o.onabort=o.onerror=function(){a("Image load aborted.")},i.loadWithAjax?s.request=r.makeAjaxRequest({url:i.src,withCredentials:i.ajaxWithCredentials,headers:i.ajaxHeaders,responseType:"arraybuffer",postData:i.postData,success:function(l){var c;try{c=new window.Blob([l.response])}catch(h){var u=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(h.name==="TypeError"&&u){var d=new u;d.append(l.response),c=d.getBlob()}}c.size===0?a("Empty image response."):o.src=(window.URL||window.webkitURL).createObjectURL(c)},error:function(l){a("Image load aborted - XHR error")}}):(i.crossOriginPolicy!==!1&&(o.crossOrigin=i.crossOriginPolicy),o.src=i.src)},downloadTileAbort:function(i){i.userData.request&&i.userData.request.abort();var s=i.userData.image;i.userData.image&&(s.onload=s.onerror=s.onabort=null)},createTileCache:function(i,s,o){i._data=s},destroyTileCache:function(i){i._data=null,i._renderedContext=null},getTileCacheData:function(i){return i._data},getTileCacheDataAsImage:function(i){return i._data},getTileCacheDataAsContext2D:function(i){if(!i._renderedContext){var s=document.createElement("canvas");s.width=i._data.width,s.height=i._data.height,i._renderedContext=s.getContext("2d"),i._renderedContext.drawImage(i._data,0,0),i._data=null}return i._renderedContext}},r.extend(!0,r.TileSource.prototype,r.EventSource.prototype);function n(i){var s=i.responseText,o=i.status,a,l;if(i){if(i.status!==200&&i.status!==0)throw o=i.status,a=o===404?"Not Found":i.statusText,new Error(r.getString("Errors.Status",o,a))}else throw new Error(r.getString("Errors.Security"));if(s.match(/^\s*<.*/))try{l=i.responseXML&&i.responseXML.documentElement?i.responseXML:r.parseXml(s)}catch{l=i.responseText}else if(s.match(/\s*[{[].*/))try{l=r.parseJSON(s)}catch{l=s}else l=s;return l}r.TileSource.determineType=function(i,s,o){var a;for(a in t)if(a.match(/.+TileSource$/)&&r.isFunction(t[a])&&r.isFunction(t[a].prototype.supports)&&t[a].prototype.supports.call(i,s,o))return t[a];return r.console.error("No TileSource was able to open %s %s",o,s),null}})(t),(function(r){r.DziTileSource=function(s,o,a,l,c,u,d,h,f){var p,g,v,m;if(r.isPlainObject(s)?m=s:m={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=m.tilesUrl,this.fileFormat=m.fileFormat,this.displayRects=m.displayRects,this.displayRects)for(p=this.displayRects.length-1;p>=0;p--)for(g=this.displayRects[p],v=g.minLevel;v<=g.maxLevel;v++)this._levelRects[v]||(this._levelRects[v]=[]),this._levelRects[v].push(g);r.TileSource.apply(this,[m])},r.extend(r.DziTileSource.prototype,r.TileSource.prototype,{supports:function(s,o){var a;return s.Image?a=s.Image.xmlns:s.documentElement&&(s.documentElement.localName==="Image"||s.documentElement.tagName==="Image")&&(a=s.documentElement.namespaceURI),a=(a||"").toLowerCase(),a.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||a.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(s,o,a){var l;return r.isPlainObject(s)?l=i(this,s):l=n(this,s),o&&!l.tilesUrl&&(l.tilesUrl=o.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),o.search(/\.(dzi|xml|js)\?/)!==-1?l.queryParams=o.match(/\?.*/):l.queryParams=""),l},getTileUrl:function(s,o,a){return[this.tilesUrl,s,"/",o,"_",a,".",this.fileFormat,this.queryParams].join("")},tileExists:function(s,o,a){var l=this._levelRects[s],c,u,d,h,f,p,g;if(this.minLevel&&s<this.minLevel||this.maxLevel&&s>this.maxLevel)return!1;if(!l||!l.length)return!0;for(g=l.length-1;g>=0;g--)if(c=l[g],!(s<c.minLevel||s>c.maxLevel)&&(u=this.getLevelScale(s),d=c.x*u,h=c.y*u,f=d+c.width*u,p=h+c.height*u,d=Math.floor(d/this._tileWidth),h=Math.floor(h/this._tileWidth),f=Math.ceil(f/this._tileWidth),p=Math.ceil(p/this._tileWidth),d<=o&&o<f&&h<=a&&a<p))return!0;return!1}});function n(s,o){if(!o||!o.documentElement)throw new Error(r.getString("Errors.Xml"));var a=o.documentElement,l=a.localName||a.tagName,c=o.documentElement.namespaceURI,u=null,d=[],h,f,p,g,v;if(l==="Image")try{if(g=a.getElementsByTagName("Size")[0],g===void 0&&(g=a.getElementsByTagNameNS(c,"Size")[0]),u={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:a.getAttribute("Url"),Format:a.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(a.getAttribute("Overlap"),10),TileSize:parseInt(a.getAttribute("TileSize"),10),Size:{Height:parseInt(g.getAttribute("Height"),10),Width:parseInt(g.getAttribute("Width"),10)}}},!r.imageFormatSupported(u.Image.Format))throw new Error(r.getString("Errors.ImageFormat",u.Image.Format.toUpperCase()));for(h=a.getElementsByTagName("DisplayRect"),h===void 0&&(h=a.getElementsByTagNameNS(c,"DisplayRect")[0]),v=0;v<h.length;v++)f=h[v],p=f.getElementsByTagName("Rect")[0],p===void 0&&(p=f.getElementsByTagNameNS(c,"Rect")[0]),d.push({Rect:{X:parseInt(p.getAttribute("X"),10),Y:parseInt(p.getAttribute("Y"),10),Width:parseInt(p.getAttribute("Width"),10),Height:parseInt(p.getAttribute("Height"),10),MinLevel:parseInt(f.getAttribute("MinLevel"),10),MaxLevel:parseInt(f.getAttribute("MaxLevel"),10)}});return d.length&&(u.Image.DisplayRect=d),i(s,u)}catch(E){throw E instanceof Error?E:new Error(r.getString("Errors.Dzi"))}else{if(l==="Collection")throw new Error(r.getString("Errors.Dzc"));if(l==="Error"){var m=a.getElementsByTagName("Message")[0],y=m.firstChild.nodeValue;throw new Error(y)}}throw new Error(r.getString("Errors.Dzi"))}function i(s,o){var a=o.Image,l=a.Url,c=a.Format,u=a.Size,d=a.DisplayRect||[],h=parseInt(u.Width,10),f=parseInt(u.Height,10),p=parseInt(a.TileSize,10),g=parseInt(a.Overlap,10),v=[],m,y;for(y=0;y<d.length;y++)m=d[y].Rect,v.push(new r.DisplayRect(parseInt(m.X,10),parseInt(m.Y,10),parseInt(m.Width,10),parseInt(m.Height,10),parseInt(m.MinLevel,10),parseInt(m.MaxLevel,10)));return r.extend(!0,{width:h,height:f,tileSize:p,tileOverlap:g,minLevel:null,maxLevel:null,tilesUrl:l,fileFormat:c,displayRects:v},o)}})(t),(function(r){r.IIIFTileSource=function(a){if(r.extend(!0,this,a),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(a.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=a.version,this.tile_width&&this.tile_height)a.tileWidth=this.tile_width,a.tileHeight=this.tile_height;else if(this.tile_width)a.tileSize=this.tile_width;else if(this.tile_height)a.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)a.tileWidth=this.tiles[0].width,a.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var l=0;l<this.tiles.length;l++)for(var c=0;c<this.tiles[l].scaleFactors.length;c++){var u=this.tiles[l].scaleFactors[c];this.scale_factors.push(u),a.tileSizePerScaleFactor[u]={width:this.tiles[l].width,height:this.tiles[l].height||this.tiles[l].width}}}else if(n(a)){for(var d=Math.min(this.height,this.width),h=[256,512,1024],f=[],p=0;p<h.length;p++)h[p]<=d&&f.push(h[p]);f.length>0?a.tileSize=Math.max.apply(null,f):a.tileSize=d}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,a.levels=i(this),r.extend(!0,a,{width:a.levels[a.levels.length-1].width,height:a.levels[a.levels.length-1].height,tileSize:Math.max(a.height,a.width),tileOverlap:0,minLevel:0,maxLevel:a.levels.length-1}),this.levels=a.levels):r.console.error("Nothing in the info.json to construct image pyramids from");if(!a.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)a.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));else{var g=Math.max.apply(null,this.scale_factors);a.maxLevel=Math.round(Math.log(g)*Math.LOG2E)}if(this.sizes){var v=this.sizes.length;(v===a.maxLevel||v===a.maxLevel+1)&&(this.levelSizes=this.sizes.slice().sort(function(m,y){return m.width-y.width}),v===a.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}r.TileSource.apply(this,[a])},r.extend(r.IIIFTileSource.prototype,r.TileSource.prototype,{supports:function(a,l){return a.protocol&&a.protocol==="http://iiif.io/api/image"||a["@context"]&&(a["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||a["@context"]==="http://iiif.io/api/image/1/context.json")||a.profile&&a.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||a.identifier&&a.width&&a.height?!0:!!(a.documentElement&&a.documentElement.tagName==="info"&&a.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(a,l,c){if(r.isPlainObject(a)){if(!a["@context"])a["@context"]="http://iiif.io/api/image/1.0/context.json",a["@id"]=l.replace("/info.json",""),a.version=1;else{var u=a["@context"];if(Array.isArray(u)){for(var d=0;d<u.length;d++)if(typeof u[d]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(u[d])||u[d]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){u=u[d];break}}switch(u){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":a.version=1;break;case"http://iiif.io/api/image/2/context.json":a.version=2;break;case"http://iiif.io/api/image/3/context.json":a.version=3;break;default:r.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(a.preferredFormats){for(var h=0;h<a.preferredFormats.length;h++)if(t.imageFormatSupported(a.preferredFormats[h])){a.tileFormat=a.preferredFormats[h];break}}return a}else{var f=s(a);return f["@context"]="http://iiif.io/api/image/1.0/context.json",f["@id"]=l.replace("/info.xml",""),f.version=1,f}},getTileWidth:function(a){if(this.emulateLegacyImagePyramid)return r.TileSource.prototype.getTileWidth.call(this,a);var l=Math.pow(2,this.maxLevel-a);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[l]?this.tileSizePerScaleFactor[l].width:this._tileWidth},getTileHeight:function(a){if(this.emulateLegacyImagePyramid)return r.TileSource.prototype.getTileHeight.call(this,a);var l=Math.pow(2,this.maxLevel-a);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[l]?this.tileSizePerScaleFactor[l].height:this._tileHeight},getLevelScale:function(a){if(this.emulateLegacyImagePyramid){var l=NaN;return this.levels.length>0&&a>=this.minLevel&&a<=this.maxLevel&&(l=this.levels[a].width/this.levels[this.maxLevel].width),l}return r.TileSource.prototype.getLevelScale.call(this,a)},getNumTiles:function(a){if(this.emulateLegacyImagePyramid){var l=this.getLevelScale(a);return l?new r.Point(1,1):new r.Point(0,0)}if(this.levelSizes){var c=this.levelSizes[a],u=Math.ceil(c.width/this.getTileWidth(a)),d=Math.ceil(c.height/this.getTileHeight(a));return new r.Point(u,d)}else return r.TileSource.prototype.getNumTiles.call(this,a)},getTileAtPoint:function(a,l){if(this.emulateLegacyImagePyramid)return new r.Point(0,0);if(this.levelSizes){var c=l.x>=0&&l.x<=1&&l.y>=0&&l.y<=1/this.aspectRatio;r.console.assert(c,"[TileSource.getTileAtPoint] must be called with a valid point.");var u=this.levelSizes[a].width,d=l.x*u,h=l.y*u,f=Math.floor(d/this.getTileWidth(a)),p=Math.floor(h/this.getTileHeight(a));l.x>=1&&(f=this.getNumTiles(a).x-1);var g=1e-15;return l.y>=1/this.aspectRatio-g&&(p=this.getNumTiles(a).y-1),new r.Point(f,p)}return r.TileSource.prototype.getTileAtPoint.call(this,a,l)},getTileUrl:function(a,l,c){if(this.emulateLegacyImagePyramid){var u=null;return this.levels.length>0&&a>=this.minLevel&&a<=this.maxLevel&&(u=this.levels[a].url),u}var d="0",h=Math.pow(.5,this.maxLevel-a),f,p,g,v,m,y,E,S,b,w,x,D,N,C,P,U;return this.levelSizes?(f=this.levelSizes[a].width,p=this.levelSizes[a].height):(f=Math.ceil(this.width*h),p=Math.ceil(this.height*h)),g=this.getTileWidth(a),v=this.getTileHeight(a),m=Math.round(g/h),y=Math.round(v/h),this.version===1?P="native."+this.tileFormat:P="default."+this.tileFormat,f<g&&p<v?(this.version===2&&f===this.width?D="full":this.version===3&&f===this.width&&p===this.height?D="max":this.version===3?D=f+","+p:D=f+",",E="full"):(S=l*m,b=c*y,w=Math.min(m,this.width-S),x=Math.min(y,this.height-b),l===0&&c===0&&w===this.width&&x===this.height?E="full":E=[S,b,w,x].join(","),N=Math.min(g,f-l*g),C=Math.min(v,p-c*v),this.version===2&&N===this.width?D="full":this.version===3&&N===this.width&&C===this.height?D="max":this.version===3?D=N+","+C:D=N+","),U=[this._id,E,D,d,P].join("/"),U},__testonly__:{canBeTiled:n,constructLevels:i}});function n(a){var l=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],c=Array.isArray(a.profile)?a.profile[0]:a.profile,u=l.indexOf(c)!==-1,d=!1;return a.version===2&&a.profile.length>1&&a.profile[1].supports&&(d=a.profile[1].supports.indexOf("sizeByW")!==-1),a.version===3&&a.extraFeatures&&(d=a.extraFeatures.indexOf("sizeByWh")!==-1),!u||d}function i(a){for(var l=[],c=0;c<a.sizes.length;c++)l.push({url:a._id+"/full/"+a.sizes[c].width+","+(a.version===3?a.sizes[c].height:"")+"/0/default."+a.tileFormat,width:a.sizes[c].width,height:a.sizes[c].height});return l.sort(function(u,d){return u.width-d.width})}function s(a){if(!a||!a.documentElement)throw new Error(r.getString("Errors.Xml"));var l=a.documentElement,c=l.tagName,u=null;if(c==="info")try{return u={},o(l,u),u}catch(d){throw d instanceof Error?d:new Error(r.getString("Errors.IIIF"))}throw new Error(r.getString("Errors.IIIF"))}function o(a,l,c){var u,d;if(a.nodeType===3&&c)d=a.nodeValue.trim(),d.match(/^\d*$/)&&(d=Number(d)),l[c]?(r.isArray(l[c])||(l[c]=[l[c]]),l[c].push(d)):l[c]=d;else if(a.nodeType===1)for(u=0;u<a.childNodes.length;u++)o(a.childNodes[u],l,a.nodeName)}})(t),(function(r){r.OsmTileSource=function(n,i,s,o,a){var l;r.isPlainObject(n)?l=n:l={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!l.width||!l.height)&&(l.width=65572864,l.height=65572864),l.tileSize||(l.tileSize=256,l.tileOverlap=0),l.tilesUrl||(l.tilesUrl="http://tile.openstreetmap.org/"),l.minLevel=8,r.TileSource.apply(this,[l])},r.extend(r.OsmTileSource.prototype,r.TileSource.prototype,{supports:function(n,i){return n.type&&n.type==="openstreetmaps"},configure:function(n,i,s){return n},getTileUrl:function(n,i,s){return this.tilesUrl+(n-8)+"/"+i+"/"+s+".png"}})})(t),(function(r){r.TmsTileSource=function(n,i,s,o,a){var l;r.isPlainObject(n)?l=n:l={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var c=Math.ceil(l.width/256)*256,u=Math.ceil(l.height/256)*256,d;c>u?d=c/256:d=u/256,l.maxLevel=Math.ceil(Math.log(d)/Math.log(2))-1,l.tileSize=256,l.width=c,l.height=u,r.TileSource.apply(this,[l])},r.extend(r.TmsTileSource.prototype,r.TileSource.prototype,{supports:function(n,i){return n.type&&n.type==="tiledmapservice"},configure:function(n,i,s){return n},getTileUrl:function(n,i,s){var o=this.getNumTiles(n).y-1;return this.tilesUrl+n+"/"+i+"/"+(o-s)+".png"}})})(t),(function(r){r.ZoomifyTileSource=function(n){typeof n.tileSize>"u"&&(n.tileSize=256),typeof n.fileFormat>"u"&&(n.fileFormat="jpg",this.fileFormat=n.fileFormat);var i={x:n.width,y:n.height};for(n.imageSizes=[{x:n.width,y:n.height}],n.gridSize=[this._getGridSize(n.width,n.height,n.tileSize)];parseInt(i.x,10)>n.tileSize||parseInt(i.y,10)>n.tileSize;)i.x=Math.floor(i.x/2),i.y=Math.floor(i.y/2),n.imageSizes.push({x:i.x,y:i.y}),n.gridSize.push(this._getGridSize(i.x,i.y,n.tileSize));n.imageSizes.reverse(),n.gridSize.reverse(),n.minLevel=0,n.maxLevel=n.gridSize.length-1,t.TileSource.apply(this,[n])},r.extend(r.ZoomifyTileSource.prototype,r.TileSource.prototype,{_getGridSize:function(n,i,s){return{x:Math.ceil(n/s),y:Math.ceil(i/s)}},_calculateAbsoluteTileNumber:function(n,i,s){for(var o=0,a={},l=0;l<n;l++)a=this.gridSize[l],o+=a.x*a.y;return a=this.gridSize[n],o+=a.x*s+i,o},supports:function(n,i){return n.type&&n.type==="zoomifytileservice"},configure:function(n,i,s){return n},getTileUrl:function(n,i,s){var o=0,a=this._calculateAbsoluteTileNumber(n,i,s);return o=Math.floor(a/256),this.tilesUrl+"TileGroup"+o+"/"+n+"-"+i+"-"+s+"."+this.fileFormat}})})(t),(function(r){r.LegacyTileSource=function(o){var a,l,c;r.isArray(o)&&(a={type:"legacy-image-pyramid",levels:o}),a.levels=n(a.levels),a.levels.length>0?(l=a.levels[a.levels.length-1].width,c=a.levels[a.levels.length-1].height):(l=0,c=0,r.console.error("No supported image formats found")),r.extend(!0,a,{width:l,height:c,tileSize:Math.max(c,l),tileOverlap:0,minLevel:0,maxLevel:a.levels.length>0?a.levels.length-1:0}),r.TileSource.apply(this,[a]),this.levels=a.levels},r.extend(r.LegacyTileSource.prototype,r.TileSource.prototype,{supports:function(o,a){return o.type&&o.type==="legacy-image-pyramid"||o.documentElement&&o.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(o,a,l){var c;return r.isPlainObject(o)?c=s(this,o):c=i(this,o),c},getLevelScale:function(o){var a=NaN;return this.levels.length>0&&o>=this.minLevel&&o<=this.maxLevel&&(a=this.levels[o].width/this.levels[this.maxLevel].width),a},getNumTiles:function(o){var a=this.getLevelScale(o);return a?new r.Point(1,1):new r.Point(0,0)},getTileUrl:function(o,a,l){var c=null;return this.levels.length>0&&o>=this.minLevel&&o<=this.maxLevel&&(c=this.levels[o].url),c}});function n(o){var a=[],l,c;for(c=0;c<o.length;c++)l=o[c],l.height&&l.width&&l.url?a.push({url:l.url,width:Number(l.width),height:Number(l.height)}):r.console.error("Unsupported image format: %s",l.url?l.url:"<no URL>");return a.sort(function(u,d){return u.height-d.height})}function i(o,a){if(!a||!a.documentElement)throw new Error(r.getString("Errors.Xml"));var l=a.documentElement,c=l.tagName,u=null,d=[],h,f;if(c==="image")try{for(u={type:l.getAttribute("type"),levels:[]},d=l.getElementsByTagName("level"),f=0;f<d.length;f++)h=d[f],u.levels.push({url:h.getAttribute("url"),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10)});return s(o,u)}catch(p){throw p instanceof Error?p:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(c==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(c==="error")throw new Error("Error: "+a)}throw new Error("Unknown element "+c)}function s(o,a){return a.levels}})(t),(function(r){r.ImageTileSource=function(n){n=r.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},n),r.TileSource.apply(this,[n])},r.extend(r.ImageTileSource.prototype,r.TileSource.prototype,{supports:function(n,i){return n.type&&n.type==="image"},configure:function(n,i,s){return n},getImageInfo:function(n){var i=this._image=new Image,s=this;this.crossOriginPolicy&&(i.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(i.useCredentials=this.ajaxWithCredentials),r.addEvent(i,"load",function(){s.width=i.naturalWidth,s.height=i.naturalHeight,s.aspectRatio=s.width/s.height,s.dimensions=new r.Point(s.width,s.height),s._tileWidth=s.width,s._tileHeight=s.height,s.tileOverlap=0,s.minLevel=0,s.levels=s._buildLevels(),s.maxLevel=s.levels.length-1,s.ready=!0,s.raiseEvent("ready",{tileSource:s})}),r.addEvent(i,"error",function(){s.raiseEvent("open-failed",{message:"Error loading image at "+n,source:n})}),i.src=n},getLevelScale:function(n){var i=NaN;return n>=this.minLevel&&n<=this.maxLevel&&(i=this.levels[n].width/this.levels[this.maxLevel].width),i},getNumTiles:function(n){var i=this.getLevelScale(n);return i?new r.Point(1,1):new r.Point(0,0)},getTileUrl:function(n,i,s){var o=null;return n>=this.minLevel&&n<=this.maxLevel&&(o=this.levels[n].url),o},getContext2D:function(n,i,s){var o=null;return n>=this.minLevel&&n<=this.maxLevel&&(o=this.levels[n].context2D),o},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var n=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!r.supportsCanvas||!this.useCanvas)return delete this._image,n;var i=this._image.naturalWidth,s=this._image.naturalHeight,o=document.createElement("canvas"),a=o.getContext("2d");if(o.width=i,o.height=s,a.drawImage(this._image,0,0,i,s),n[0].context2D=a,delete this._image,r.isCanvasTainted(o))return n;for(;i>=2&&s>=2;){i=Math.floor(i/2),s=Math.floor(s/2);var l=document.createElement("canvas"),c=l.getContext("2d");l.width=i,l.height=s,c.drawImage(o,0,0,i,s),n.splice(0,0,{context2D:c,width:i,height:s}),o=l,a=c}return n},_freeupCanvasMemory:function(){for(var n=0;n<this.levels.length;n++)this.levels[n].context2D&&(this.levels[n].context2D.canvas.height=0,this.levels[n].context2D.canvas.width=0)}})})(t),(function(r){r.TileSourceCollection=function(n,i,s,o){r.console.error("TileSourceCollection is deprecated; use World instead")}})(t),(function(r){r.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},r.Button=function(c){var u=this;r.EventSource.call(this),r.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:r.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:r.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},c),this.element=c.element||r.makeNeutralElement("div"),c.element||(this.imgRest=r.makeTransparentImage(this.srcRest),this.imgGroup=r.makeTransparentImage(this.srcGroup),this.imgHover=r.makeTransparentImage(this.srcHover),this.imgDown=r.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,r.setElementPointerEventsNone(this.imgRest),r.setElementPointerEventsNone(this.imgGroup),r.setElementPointerEventsNone(this.imgHover),r.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",r.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",r.Browser.vendor===r.BROWSERS.FIREFOX&&r.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=r.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new r.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(d){d.insideElementPressed?(a(u,r.ButtonState.DOWN),u.raiseEvent("enter",{originalEvent:d.originalEvent})):d.buttonDownAny||a(u,r.ButtonState.HOVER)},focusHandler:function(d){u.tracker.enterHandler(d),u.raiseEvent("focus",{originalEvent:d.originalEvent})},leaveHandler:function(d){l(u,r.ButtonState.GROUP),d.insideElementPressed&&u.raiseEvent("exit",{originalEvent:d.originalEvent})},blurHandler:function(d){u.tracker.leaveHandler(d),u.raiseEvent("blur",{originalEvent:d.originalEvent})},pressHandler:function(d){a(u,r.ButtonState.DOWN),u.raiseEvent("press",{originalEvent:d.originalEvent})},releaseHandler:function(d){d.insideElementPressed&&d.insideElementReleased?(l(u,r.ButtonState.HOVER),u.raiseEvent("release",{originalEvent:d.originalEvent})):d.insideElementPressed?l(u,r.ButtonState.GROUP):a(u,r.ButtonState.HOVER)},clickHandler:function(d){d.quick&&u.raiseEvent("click",{originalEvent:d.originalEvent})},keyHandler:function(d){d.keyCode===13?(u.raiseEvent("click",{originalEvent:d.originalEvent}),u.raiseEvent("release",{originalEvent:d.originalEvent}),d.preventDefault=!0):d.preventDefault=!1}}),l(this,r.ButtonState.REST)},r.extend(r.Button.prototype,r.EventSource.prototype,{notifyGroupEnter:function(){a(this,r.ButtonState.GROUP)},notifyGroupExit:function(){l(this,r.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),r.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),r.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function n(c){r.requestAnimationFrame(function(){i(c)})}function i(c){var u,d,h;c.shouldFade&&(u=r.now(),d=u-c.fadeBeginTime,h=1-d/c.fadeLength,h=Math.min(1,h),h=Math.max(0,h),c.imgGroup&&r.setElementOpacity(c.imgGroup,h,!0),h>0&&n(c))}function s(c){c.shouldFade=!0,c.fadeBeginTime=r.now()+c.fadeDelay,window.setTimeout(function(){n(c)},c.fadeDelay)}function o(c){c.shouldFade=!1,c.imgGroup&&r.setElementOpacity(c.imgGroup,1,!0)}function a(c,u){c.element.disabled||(u>=r.ButtonState.GROUP&&c.currentState===r.ButtonState.REST&&(o(c),c.currentState=r.ButtonState.GROUP),u>=r.ButtonState.HOVER&&c.currentState===r.ButtonState.GROUP&&(c.imgHover&&(c.imgHover.style.visibility=""),c.currentState=r.ButtonState.HOVER),u>=r.ButtonState.DOWN&&c.currentState===r.ButtonState.HOVER&&(c.imgDown&&(c.imgDown.style.visibility=""),c.currentState=r.ButtonState.DOWN))}function l(c,u){c.element.disabled||(u<=r.ButtonState.HOVER&&c.currentState===r.ButtonState.DOWN&&(c.imgDown&&(c.imgDown.style.visibility="hidden"),c.currentState=r.ButtonState.HOVER),u<=r.ButtonState.GROUP&&c.currentState===r.ButtonState.HOVER&&(c.imgHover&&(c.imgHover.style.visibility="hidden"),c.currentState=r.ButtonState.GROUP),u<=r.ButtonState.REST&&c.currentState===r.ButtonState.GROUP&&(s(c),c.currentState=r.ButtonState.REST))}})(t),(function(r){r.ButtonGroup=function(n){r.extend(!0,this,{buttons:[],clickTimeThreshold:r.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:r.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},n);var i=this.buttons.concat([]),s=this,o;if(this.element=n.element||r.makeNeutralElement("div"),!n.group)for(this.element.style.display="inline-block",o=0;o<i.length;o++)this.element.appendChild(i[o].element);r.setElementTouchActionNone(this.element),this.tracker=new r.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(a){var l;for(l=0;l<s.buttons.length;l++)s.buttons[l].notifyGroupEnter()},leaveHandler:function(a){var l;if(!a.insideElementPressed)for(l=0;l<s.buttons.length;l++)s.buttons[l].notifyGroupExit()}})},r.ButtonGroup.prototype={addButton:function(n){this.buttons.push(n),this.element.appendChild(n.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var n=this.buttons.pop();this.element.removeChild(n.element),n.destroy()}this.tracker.destroy(),this.element=null}}})(t),(function(r){r.Rect=function(n,i,s,o,a){this.x=typeof n=="number"?n:0,this.y=typeof i=="number"?i:0,this.width=typeof s=="number"?s:0,this.height=typeof o=="number"?o:0,this.degrees=typeof a=="number"?a:0,this.degrees=r.positiveModulo(this.degrees,360);var l,c;this.degrees>=270?(l=this.getTopRight(),this.x=l.x,this.y=l.y,c=this.height,this.height=this.width,this.width=c,this.degrees-=270):this.degrees>=180?(l=this.getBottomRight(),this.x=l.x,this.y=l.y,this.degrees-=180):this.degrees>=90&&(l=this.getBottomLeft(),this.x=l.x,this.y=l.y,c=this.height,this.height=this.width,this.width=c,this.degrees-=90)},r.Rect.fromSummits=function(n,i,s){var o=n.distanceTo(i),a=n.distanceTo(s),l=i.minus(n),c=Math.atan(l.y/l.x);return l.x<0?c+=Math.PI:l.y<0&&(c+=2*Math.PI),new r.Rect(n.x,n.y,o,a,c/Math.PI*180)},r.Rect.prototype={clone:function(){return new r.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new r.Point(this.x,this.y)},getBottomRight:function(){return new r.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new r.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new r.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new r.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new r.Point(this.width,this.height)},equals:function(n){return n instanceof r.Rect&&this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height&&this.degrees===n.degrees},times:function(n){return new r.Rect(this.x*n,this.y*n,this.width*n,this.height*n,this.degrees)},translate:function(n){return new r.Rect(this.x+n.x,this.y+n.y,this.width,this.height,this.degrees)},union:function(n){var i=this.getBoundingBox(),s=n.getBoundingBox(),o=Math.min(i.x,s.x),a=Math.min(i.y,s.y),l=Math.max(i.x+i.width,s.x+s.width),c=Math.max(i.y+i.height,s.y+s.height);return new r.Rect(o,a,l-o,c-a)},intersection:function(n){var i=1e-10,s=[],o=this.getTopLeft();n.containsPoint(o,i)&&s.push(o);var a=this.getTopRight();n.containsPoint(a,i)&&s.push(a);var l=this.getBottomLeft();n.containsPoint(l,i)&&s.push(l);var c=this.getBottomRight();n.containsPoint(c,i)&&s.push(c);var u=n.getTopLeft();this.containsPoint(u,i)&&s.push(u);var d=n.getTopRight();this.containsPoint(d,i)&&s.push(d);var h=n.getBottomLeft();this.containsPoint(h,i)&&s.push(h);var f=n.getBottomRight();this.containsPoint(f,i)&&s.push(f);for(var p=this._getSegments(),g=n._getSegments(),v=0;v<p.length;v++)for(var m=p[v],y=0;y<g.length;y++){var E=g[y],S=b(m[0],m[1],E[0],E[1]);S&&s.push(S)}function b(U,G,K,B){var V=G.minus(U),W=B.minus(K),X=-W.x*V.y+V.x*W.y;if(X===0)return null;var Y=(V.x*(U.y-K.y)-V.y*(U.x-K.x))/X,O=(W.x*(U.y-K.y)-W.y*(U.x-K.x))/X;return-i<=Y&&Y<=1-i&&-i<=O&&O<=1-i?new r.Point(U.x+O*V.x,U.y+O*V.y):null}if(s.length===0)return null;for(var w=s[0].x,x=s[0].x,D=s[0].y,N=s[0].y,C=1;C<s.length;C++){var P=s[C];P.x<w&&(w=P.x),P.x>x&&(x=P.x),P.y<D&&(D=P.y),P.y>N&&(N=P.y)}return new r.Rect(w,D,x-w,N-D)},_getSegments:function(){var n=this.getTopLeft(),i=this.getTopRight(),s=this.getBottomLeft(),o=this.getBottomRight();return[[n,i],[i,o],[o,s],[s,n]]},rotate:function(n,i){if(n=r.positiveModulo(n,360),n===0)return this.clone();i=i||this.getCenter();var s=this.getTopLeft().rotate(n,i),o=this.getTopRight().rotate(n,i),a=o.minus(s);a=a.apply(function(c){var u=1e-15;return Math.abs(c)<u?0:c});var l=Math.atan(a.y/a.x);return a.x<0?l+=Math.PI:a.y<0&&(l+=2*Math.PI),new r.Rect(s.x,s.y,this.width,this.height,l/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var n=this.getTopLeft(),i=this.getTopRight(),s=this.getBottomLeft(),o=this.getBottomRight(),a=Math.min(n.x,i.x,s.x,o.x),l=Math.max(n.x,i.x,s.x,o.x),c=Math.min(n.y,i.y,s.y,o.y),u=Math.max(n.y,i.y,s.y,o.y);return new r.Rect(a,c,l-a,u-c)},getIntegerBoundingBox:function(){var n=this.getBoundingBox(),i=Math.floor(n.x),s=Math.floor(n.y),o=Math.ceil(n.width+n.x-i),a=Math.ceil(n.height+n.y-s);return new r.Rect(i,s,o,a)},containsPoint:function(n,i){i=i||0;var s=this.getTopLeft(),o=this.getTopRight(),a=this.getBottomLeft(),l=o.minus(s),c=a.minus(s);return(n.x-s.x)*l.x+(n.y-s.y)*l.y>=-i&&(n.x-o.x)*l.x+(n.y-o.y)*l.y<=i&&(n.x-s.x)*c.x+(n.y-s.y)*c.y>=-i&&(n.x-a.x)*c.x+(n.y-a.y)*c.y<=i},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}})(t),(function(r){var n={};r.ReferenceStrip=function(h){var f=this,p=h.viewer,g=r.getElementSize(p.element),v,m,y;for(h.id||(h.id="referencestrip-"+r.now(),this.element=r.makeNeutralElement("div"),this.element.id=h.id,this.element.className="referencestrip"),h=r.extend(!0,{sizeRatio:r.DEFAULT_SETTINGS.referenceStripSizeRatio,position:r.DEFAULT_SETTINGS.referenceStripPosition,scroll:r.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:r.DEFAULT_SETTINGS.clickTimeThreshold},h,{element:this.element}),r.extend(this,h),n[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,m=this.element.style,m.marginTop="0px",m.marginRight="0px",m.marginBottom="0px",m.marginLeft="0px",m.left="0px",m.bottom="0px",m.border="0px",m.background="#000",m.position="relative",r.setElementTouchActionNone(this.element),r.setElementOpacity(this.element,.8),this.viewer=p,this.tracker=new r.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:r.delegate(this,i),dragHandler:r.delegate(this,s),scrollHandler:r.delegate(this,o),enterHandler:r.delegate(this,l),leaveHandler:r.delegate(this,c),keyDownHandler:r.delegate(this,u),keyHandler:r.delegate(this,d),preProcessEventHandler:function(E){E.eventType==="wheel"&&(E.preventDefault=!0)}}),h.width&&h.height?(this.element.style.width=h.width+"px",this.element.style.height=h.height+"px",p.addControl(this.element,{anchor:r.ControlAnchor.BOTTOM_LEFT})):h.scroll==="horizontal"?(this.element.style.width=g.x*h.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.height=g.y*h.sizeRatio+"px",p.addControl(this.element,{anchor:r.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=g.y*h.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.width=g.x*h.sizeRatio+"px",p.addControl(this.element,{anchor:r.ControlAnchor.TOP_LEFT})),this.panelWidth=g.x*this.sizeRatio+8,this.panelHeight=g.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},y=0;y<p.tileSources.length;y++)v=r.makeNeutralElement("div"),v.id=this.element.id+"-"+y,v.style.width=f.panelWidth+"px",v.style.height=f.panelHeight+"px",v.style.display="inline",v.style.float="left",v.style.cssFloat="left",v.style.styleFloat="left",v.style.padding="2px",r.setElementTouchActionNone(v),r.setElementPointerEventsNone(v),this.element.appendChild(v),v.activePanel=!1,this.panels.push(v);a(this,this.scroll==="vertical"?g.y:g.x,0),this.setFocus(0)},r.ReferenceStrip.prototype={setFocus:function(h){var f=this.element.querySelector("#"+this.element.id+"-"+h),p=r.getElementSize(this.viewer.canvas),g=Number(this.element.style.width.replace("px","")),v=Number(this.element.style.height.replace("px","")),m=-Number(this.element.style.marginLeft.replace("px","")),y=-Number(this.element.style.marginTop.replace("px","")),E;this.currentSelected!==f&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=f,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(E=Number(h)*(this.panelWidth+3),E>m+p.x-this.panelWidth?(E=Math.min(E,g-p.x),this.element.style.marginLeft=-E+"px",a(this,p.x,-E)):E<m&&(E=Math.max(0,E-p.x/2),this.element.style.marginLeft=-E+"px",a(this,p.x,-E))):(E=Number(h)*(this.panelHeight+3),E>y+p.y-this.panelHeight?(E=Math.min(E,v-p.y),this.element.style.marginTop=-E+"px",a(this,p.y,-E)):E<y&&(E=Math.max(0,E-p.y/2),this.element.style.marginTop=-E+"px",a(this,p.y,-E))),this.currentPage=h,l.call(this,{eventSource:this.tracker}))},update:function(){return!!n[this.id].animating},destroy:function(){if(this.miniViewers)for(var h in this.miniViewers)this.miniViewers[h].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function i(h){if(h.quick){var f;this.scroll==="horizontal"?f=Math.floor(h.position.x/(this.panelWidth+4)):f=Math.floor(h.position.y/this.panelHeight),this.viewer.goToPage(f)}this.element.focus()}function s(h){if(this.dragging=!0,this.element){var f=Number(this.element.style.marginLeft.replace("px","")),p=Number(this.element.style.marginTop.replace("px","")),g=Number(this.element.style.width.replace("px","")),v=Number(this.element.style.height.replace("px","")),m=r.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-h.delta.x>0?f>-(g-m.x)&&(this.element.style.marginLeft=f+h.delta.x*2+"px",a(this,m.x,f+h.delta.x*2)):-h.delta.x<0&&f<0&&(this.element.style.marginLeft=f+h.delta.x*2+"px",a(this,m.x,f+h.delta.x*2)):-h.delta.y>0?p>-(v-m.y)&&(this.element.style.marginTop=p+h.delta.y*2+"px",a(this,m.y,p+h.delta.y*2)):-h.delta.y<0&&p<0&&(this.element.style.marginTop=p+h.delta.y*2+"px",a(this,m.y,p+h.delta.y*2))}}function o(h){if(this.element){var f=Number(this.element.style.marginLeft.replace("px","")),p=Number(this.element.style.marginTop.replace("px","")),g=Number(this.element.style.width.replace("px","")),v=Number(this.element.style.height.replace("px","")),m=r.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?h.scroll>0?f>-(g-m.x)&&(this.element.style.marginLeft=f-h.scroll*60+"px",a(this,m.x,f-h.scroll*60)):h.scroll<0&&f<0&&(this.element.style.marginLeft=f-h.scroll*60+"px",a(this,m.x,f-h.scroll*60)):h.scroll<0?p>m.y-v&&(this.element.style.marginTop=p+h.scroll*60+"px",a(this,m.y,p+h.scroll*60)):h.scroll>0&&p<0&&(this.element.style.marginTop=p+h.scroll*60+"px",a(this,m.y,p+h.scroll*60)),h.preventDefault=!0}}function a(h,f,p){var g,v,m,y,E,S;for(h.scroll==="horizontal"?g=h.panelWidth:g=h.panelHeight,v=Math.ceil(f/g)+5,m=Math.ceil((Math.abs(p)+f)/g)+1,v=m-v,v=v<0?0:v,E=v;E<m&&E<h.panels.length;E++)if(S=h.panels[E],!S.activePanel){var b,w=h.viewer.tileSources[E];w.referenceStripThumbnailUrl?b={type:"image",url:w.referenceStripThumbnailUrl}:b=w,y=new r.Viewer({id:S.id,tileSources:[b],element:S,navigatorSizeRatio:h.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:h.viewer.loadTilesWithAjax,ajaxHeaders:h.viewer.ajaxHeaders,useCanvas:h.useCanvas}),r.setElementPointerEventsNone(y.canvas),r.setElementPointerEventsNone(y.container),y.innerTracker.setTracking(!1),y.outerTracker.setTracking(!1),h.miniViewers[S.id]=y,S.activePanel=!0}}function l(h){var f=h.eventSource.element;this.scroll==="horizontal"?f.style.marginBottom="0px":f.style.marginLeft="0px"}function c(h){var f=h.eventSource.element;this.scroll==="horizontal"?f.style.marginBottom="-"+r.getElementSize(f).y/2+"px":f.style.marginLeft="-"+r.getElementSize(f).x/2+"px"}function u(h){if(!h.ctrl&&!h.alt&&!h.meta)switch(h.keyCode){case 38:o.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),h.preventDefault=!0;break;case 40:o.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),h.preventDefault=!0;break;case 37:o.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),h.preventDefault=!0;break;case 39:o.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),h.preventDefault=!0;break;default:h.preventDefault=!1;break}else h.preventDefault=!1}function d(h){if(!h.ctrl&&!h.alt&&!h.meta)switch(h.keyCode){case 61:o.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),h.preventDefault=!0;break;case 45:o.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),h.preventDefault=!0;break;case 48:case 119:case 87:o.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),h.preventDefault=!0;break;case 115:case 83:o.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),h.preventDefault=!0;break;case 97:o.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),h.preventDefault=!0;break;case 100:o.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),h.preventDefault=!0;break;default:h.preventDefault=!1;break}else h.preventDefault=!1}})(t),(function(r){r.DisplayRect=function(n,i,s,o,a,l){r.Rect.apply(this,[n,i,s,o]),this.minLevel=a,this.maxLevel=l},r.extend(r.DisplayRect.prototype,r.Rect.prototype)})(t),(function(r){r.Spring=function(i){var s=arguments;typeof i!="object"&&(i={initial:s.length&&typeof s[0]=="number"?s[0]:void 0,springStiffness:s.length>1?s[1].springStiffness:5,animationTime:s.length>1?s[1].animationTime:1.5}),r.console.assert(typeof i.springStiffness=="number"&&i.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),r.console.assert(typeof i.animationTime=="number"&&i.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),i.exponential&&(this._exponential=!0,delete i.exponential),r.extend(!0,this,i),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:r.now()},r.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},r.Spring.prototype={resetTo:function(i){r.console.assert(!this._exponential||i!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=i,this.start.time=this.target.time=this.current.time=r.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(i){r.console.assert(!this._exponential||i!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=i,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(i){this.start.value+=i,this.target.value+=i,this._exponential&&(r.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(i){this._exponential=i,this._exponential&&(r.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=r.now();var i,s;this._exponential?(i=this.start._logValue,s=this.target._logValue):(i=this.start.value,s=this.target.value);var o=this.current.time>=this.target.time?s:i+(s-i)*n(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),a=this.current.value;return this._exponential?this.current.value=Math.exp(o):this.current.value=o,a!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function n(i,s){return(1-Math.exp(i*-s))/(1-Math.exp(-i))}})(t),(function(r){r.ImageJob=function(i){r.extend(!0,this,{timeout:r.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},i),this.data=null,this.userData={},this.errorMsg=null},r.ImageJob.prototype={start:function(){this.tries++;var i=this,s=this.abort;this.jobId=window.setTimeout(function(){i.finish(null,null,"Image load exceeded timeout ("+i.timeout+" ms)")},this.timeout),this.abort=function(){i.source.downloadTileAbort(i),typeof s=="function"&&s()},this.source.downloadTileStart(this)},finish:function(i,s,o){this.data=i,this.request=s,this.errorMsg=o,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},r.ImageLoader=function(i){r.extend(!0,this,{jobLimit:r.DEFAULT_SETTINGS.imageLoaderLimit,timeout:r.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},i)},r.ImageLoader.prototype={addJob:function(i){if(!i.source){r.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var s=r.TileSource.prototype;i.source={downloadTileStart:s.downloadTileStart,downloadTileAbort:s.downloadTileAbort}}var o=this,a=function(u){n(o,u,i.callback)},l={src:i.src,tile:i.tile||{},source:i.source,loadWithAjax:i.loadWithAjax,ajaxHeaders:i.loadWithAjax?i.ajaxHeaders:null,crossOriginPolicy:i.crossOriginPolicy,ajaxWithCredentials:i.ajaxWithCredentials,postData:i.postData,callback:a,abort:i.abort,timeout:this.timeout},c=new r.ImageJob(l);!this.jobLimit||this.jobsInProgress<this.jobLimit?(c.start(),this.jobsInProgress++):this.jobQueue.push(c)},clear:function(){for(var i=0;i<this.jobQueue.length;i++){var s=this.jobQueue[i];typeof s.abort=="function"&&s.abort()}this.jobQueue=[]}};function n(i,s,o){s.errorMsg!==""&&(s.data===null||s.data===void 0)&&s.tries<1+i.tileRetryMax&&i.failedTiles.push(s);var a;i.jobsInProgress--,(!i.jobLimit||i.jobsInProgress<i.jobLimit)&&i.jobQueue.length>0&&(a=i.jobQueue.shift(),a.start(),i.jobsInProgress++),i.tileRetryMax>0&&i.jobQueue.length===0&&(!i.jobLimit||i.jobsInProgress<i.jobLimit)&&i.failedTiles.length>0&&(a=i.failedTiles.shift(),setTimeout(function(){a.start()},i.tileRetryDelay),i.jobsInProgress++),o(s.data,s.errorMsg,s.request)}})(t),(function(r){r.Tile=function(n,i,s,o,a,l,c,u,d,h,f,p){this.level=n,this.x=i,this.y=s,this.bounds=o,this.sourceBounds=h,this.exists=a,this._url=l,this.postData=f,this.context2D=c,this.loadWithAjax=u,this.ajaxHeaders=d,p===void 0&&(r.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),p=r.TileSource.prototype.getTileHashKey(n,i,s,l,d,f)),this.cacheKey=p,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},r.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},drawHTML:function(n){if(!this.cacheImageRecord){r.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){r.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}if(!this.element){var i=this.getImage();if(!i)return;this.element=r.makeNeutralElement("div"),this.imgElement=i.cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"}this.element.parentNode!==n&&n.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),r.setElementOpacity(this.element,this.opacity)},get image(){return r.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return r.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return typeof this._url=="function"?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord.getRenderedContext()},drawCanvas:function(n,i,s,o,a,l){var c=this.position.times(r.pixelDensityRatio),u=this.size.times(r.pixelDensityRatio),d;if(!this.context2D&&!this.cacheImageRecord){r.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(d=this.getCanvasContext(),!this.loaded||!d){r.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}n.save(),n.globalAlpha=this.opacity,typeof s=="number"&&s!==1&&(c=c.times(s),u=u.times(s)),o instanceof r.Point&&(c=c.plus(o)),n.globalAlpha===1&&this.hasTransparency&&(a&&(c.x=Math.round(c.x),c.y=Math.round(c.y),u.x=Math.round(u.x),u.y=Math.round(u.y)),n.clearRect(c.x,c.y,u.x,u.y)),i({context:n,tile:this,rendered:d});var h,f;this.sourceBounds?(h=Math.min(this.sourceBounds.width,d.canvas.width),f=Math.min(this.sourceBounds.height,d.canvas.height)):(h=d.canvas.width,f=d.canvas.height),n.translate(c.x+u.x/2,0),this.flipped&&n.scale(-1,1),n.drawImage(d.canvas,0,0,h,f,-u.x/2,c.y,u.x,u.y),n.restore()},getScaleForEdgeSmoothing:function(){var n;if(this.cacheImageRecord)n=this.cacheImageRecord.getRenderedContext();else if(this.context2D)n=this.context2D;else return r.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return n.canvas.width/(this.size.x*r.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(n,i,s){var o=Math.max(1,Math.ceil((s.x-i.x)/2)),a=Math.max(1,Math.ceil((s.y-i.y)/2));return new r.Point(o,a).minus(this.position.times(r.pixelDensityRatio).times(n||1).apply(function(l){return l%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}})(t),(function(r){r.OverlayPlacement=r.Placement,r.OverlayRotationMode=r.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),r.Overlay=function(n,i,s){var o;r.isPlainObject(n)?o=n:o={element:n,location:i,placement:s},this.element=o.element,this.style=o.element.style,this._init(o)},r.Overlay.prototype={_init:function(n){this.location=n.location,this.placement=n.placement===void 0?r.Placement.TOP_LEFT:n.placement,this.onDraw=n.onDraw,this.checkResize=n.checkResize===void 0?!0:n.checkResize,this.width=n.width===void 0?null:n.width,this.height=n.height===void 0?null:n.height,this.rotationMode=n.rotationMode||r.OverlayRotationMode.EXACT,this.location instanceof r.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=r.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new r.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(n,i){var s=r.Placement.properties[this.placement];s&&(s.isHorizontallyCentered?n.x-=i.x/2:s.isRight&&(n.x-=i.x),s.isVerticallyCentered?n.y-=i.y/2:s.isBottom&&(n.y-=i.y))},destroy:function(){var n=this.element,i=this.style;n.parentNode&&(n.parentNode.removeChild(n),n.prevElementParent&&(i.display="none",document.body.appendChild(n))),this.onDraw=null,i.top="",i.left="",i.position="",this.width!==null&&(i.width=""),this.height!==null&&(i.height="");var s=r.getCssPropertyWithVendorPrefix("transformOrigin"),o=r.getCssPropertyWithVendorPrefix("transform");s&&o&&(i[s]="",i[o]="")},drawHTML:function(n,i){var s=this.element;s.parentNode!==n&&(s.prevElementParent=s.parentNode,s.prevNextSibling=s.nextSibling,n.appendChild(s),this.style.position="absolute",this.size=r.getElementSize(s));var o=this._getOverlayPositionAndSize(i),a=o.position,l=this.size=o.size,c=o.rotate;if(this.onDraw)this.onDraw(a,l,this.element);else{var u=this.style;u.left=a.x+"px",u.top=a.y+"px",this.width!==null&&(u.width=l.x+"px"),this.height!==null&&(u.height=l.y+"px");var d=r.getCssPropertyWithVendorPrefix("transformOrigin"),h=r.getCssPropertyWithVendorPrefix("transform");d&&h&&(c?(u[d]=this._getTransformOrigin(),u[h]="rotate("+c+"deg)"):(u[d]="",u[h]="")),u.display="block"}},_getOverlayPositionAndSize:function(n){var i=n.pixelFromPoint(this.location,!0),s=this._getSizeInPixels(n);this.adjust(i,s);var o=0;if(n.getRotation(!0)&&this.rotationMode!==r.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===r.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var a=new r.Rect(i.x,i.y,s.x,s.y),l=this._getBoundingBox(a,n.getRotation(!0));i=l.getTopLeft(),s=l.getSize()}else o=n.getRotation(!0);return{position:i,size:s,rotate:o}},_getSizeInPixels:function(n){var i=this.size.x,s=this.size.y;if(this.width!==null||this.height!==null){var o=n.deltaPixelsFromPointsNoRotate(new r.Point(this.width||0,this.height||0),!0);this.width!==null&&(i=o.x),this.height!==null&&(s=o.y)}if(this.checkResize&&(this.width===null||this.height===null)){var a=this.size=r.getElementSize(this.element);this.width===null&&(i=a.x),this.height===null&&(s=a.y)}return new r.Point(i,s)},_getBoundingBox:function(n,i){var s=this._getPlacementPoint(n);return n.rotate(i,s).getBoundingBox()},_getPlacementPoint:function(n){var i=new r.Point(n.x,n.y),s=r.Placement.properties[this.placement];return s&&(s.isHorizontallyCentered?i.x+=n.width/2:s.isRight&&(i.x+=n.width),s.isVerticallyCentered?i.y+=n.height/2:s.isBottom&&(i.y+=n.height)),i},_getTransformOrigin:function(){var n="",i=r.Placement.properties[this.placement];return i&&(i.isLeft?n="left":i.isRight&&(n="right"),i.isTop?n+=" top":i.isBottom&&(n+=" bottom")),n},update:function(n,i){var s=r.isPlainObject(n)?n:{location:n,placement:i};this._init({location:s.location||this.location,placement:s.placement!==void 0?s.placement:this.placement,onDraw:s.onDraw||this.onDraw,checkResize:s.checkResize||this.checkResize,width:s.width!==void 0?s.width:this.width,height:s.height!==void 0?s.height:this.height,rotationMode:s.rotationMode||this.rotationMode})},getBounds:function(n){r.console.assert(n,"A viewport must now be passed to Overlay.getBounds.");var i=this.width,s=this.height;if(i===null||s===null){var o=n.deltaPointsFromPixelsNoRotate(this.size,!0);i===null&&(i=o.x),s===null&&(s=o.y)}var a=this.location.clone();return this.adjust(a,new r.Point(i,s)),this._adjustBoundsForRotation(n,new r.Rect(a.x,a.y,i,s))},_adjustBoundsForRotation:function(n,i){if(!n||n.getRotation(!0)===0||this.rotationMode===r.OverlayRotationMode.EXACT)return i;if(this.rotationMode===r.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return i;var s=this._getOverlayPositionAndSize(n);return n.viewerElementToViewportRectangle(new r.Rect(s.position.x,s.position.y,s.size.x,s.size.y))}return i.rotate(-n.getRotation(!0),this._getPlacementPoint(i))}}})(t),(function(r){r.Drawer=function(n){r.console.assert(n.viewer,"[Drawer] options.viewer is required");var i=arguments;if(r.isPlainObject(n)||(n={source:i[0],viewport:i[1],element:i[2]}),r.console.assert(n.viewport,"[Drawer] options.viewport is required"),r.console.assert(n.element,"[Drawer] options.element is required"),n.source&&r.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=n.viewer,this.viewport=n.viewport,this.debugGridColor=typeof n.debugGridColor=="string"?[n.debugGridColor]:n.debugGridColor||r.DEFAULT_SETTINGS.debugGridColor,n.opacity&&r.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=r.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=r.getElement(n.element),this.canvas=r.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var s=this._calculateCanvasSize();this.canvas.width=s.x,this.canvas.height=s.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",r.setElementOpacity(this.canvas,this.opacity,!0),r.setElementPointerEventsNone(this.canvas),r.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},r.Drawer.prototype={addOverlay:function(n,i,s,o){return r.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(n,i,s,o),this},updateOverlay:function(n,i,s){return r.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(n,i,s),this},removeOverlay:function(n){return r.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(n),this},clearOverlays:function(){return r.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(n){var i=this.viewport.pixelFromPointNoRotate(n,!0);return new r.Point(i.x*r.pixelDensityRatio,i.y*r.pixelDensityRatio)},clipWithPolygons:function(n,i){if(this.useCanvas){var s=this._getContext(i);s.beginPath(),n.forEach(function(o){o.forEach(function(a,l){s[l===0?"moveTo":"lineTo"](a.x,a.y)})}),s.clip()}},setOpacity:function(n){r.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var i=this.viewer.world,s=0;s<i.getItemCount();s++)i.getItemAt(s).setOpacity(n);return this},getOpacity:function(){r.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var n=this.viewer.world,i=0,s=0;s<n.getItemCount();s++){var o=n.getItemAt(s).getOpacity();o>i&&(i=o)}return i},needsUpdate:function(){return r.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return r.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return r.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return r.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var n=this._calculateCanvasSize();if((this.canvas.width!==n.x||this.canvas.height!==n.y)&&(this.canvas.width=n.x,this.canvas.height=n.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var i=this._calculateSketchCanvasSize();this.sketchCanvas.width=i.x,this.sketchCanvas.height=i.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(n,i){if(this.useCanvas){var s=this._getContext(n);if(i)s.clearRect(i.x,i.y,i.width,i.height);else{var o=s.canvas;s.clearRect(0,0,o.width,o.height)}}},viewportToDrawerRectangle:function(n){var i=this.viewport.pixelFromPointNoRotate(n.getTopLeft(),!0),s=this.viewport.deltaPixelsFromPointsNoRotate(n.getSize(),!0);return new r.Rect(i.x*r.pixelDensityRatio,i.y*r.pixelDensityRatio,s.x*r.pixelDensityRatio,s.y*r.pixelDensityRatio)},drawTile:function(n,i,s,o,a,l,c){if(r.console.assert(n,"[Drawer.drawTile] tile is required"),r.console.assert(i,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var u=this._getContext(s);o=o||1,n.drawCanvas(u,i,o,a,l,c)}else n.drawHTML(this.canvas)},_getContext:function(n){var i=this.context;if(n){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var s=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=s.x,this.sketchCanvas.height=s.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var o=this;this.viewer.addHandler("rotate",function a(){if(o.viewport.getRotation()!==0){o.viewer.removeHandler("rotate",a);var l=o._calculateSketchCanvasSize();o.sketchCanvas.width=l.x,o.sketchCanvas.height=l.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}i=this.sketchContext}return i},saveContext:function(n){this.useCanvas&&this._getContext(n).save()},restoreContext:function(n){this.useCanvas&&this._getContext(n).restore()},setClip:function(n,i){if(this.useCanvas){var s=this._getContext(i);s.beginPath(),s.rect(n.x,n.y,n.width,n.height),s.clip()}},drawRectangle:function(n,i,s){if(this.useCanvas){var o=this._getContext(s);o.save(),o.fillStyle=i,o.fillRect(n.x,n.y,n.width,n.height),o.restore()}},blendSketch:function(n,i,s,o){var a=n;if(r.isPlainObject(a)||(a={opacity:n,scale:i,translate:s,compositeOperation:o}),!(!this.useCanvas||!this.sketchCanvas)){n=a.opacity,o=a.compositeOperation;var l=a.bounds;if(this.context.save(),this.context.globalAlpha=n,o&&(this.context.globalCompositeOperation=o),l)l.x<0&&(l.width+=l.x,l.x=0),l.x+l.width>this.canvas.width&&(l.width=this.canvas.width-l.x),l.y<0&&(l.height+=l.y,l.y=0),l.y+l.height>this.canvas.height&&(l.height=this.canvas.height-l.y),this.context.drawImage(this.sketchCanvas,l.x,l.y,l.width,l.height,l.x,l.y,l.width,l.height);else{i=a.scale||1,s=a.translate;var c=s instanceof r.Point?s:new r.Point(0,0),u=0,d=0;if(s){var h=this.sketchCanvas.width-this.canvas.width,f=this.sketchCanvas.height-this.canvas.height;u=Math.round(h/2),d=Math.round(f/2)}this.context.drawImage(this.sketchCanvas,c.x-u*i,c.y-d*i,(this.canvas.width+2*u)*i,(this.canvas.height+2*d)*i,-u,-d,this.canvas.width+2*u,this.canvas.height+2*d)}this.context.restore()}},drawDebugInfo:function(n,i,s,o){if(this.useCanvas){var a=this.viewer.world.getIndexOfItem(o)%this.debugGridColor.length,l=this.context;l.save(),l.lineWidth=2*r.pixelDensityRatio,l.font="small-caps bold "+13*r.pixelDensityRatio+"px arial",l.strokeStyle=this.debugGridColor[a],l.fillStyle=this.debugGridColor[a],this.viewport.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:this.viewport.getRotation(!0)}),o.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:o.getRotation(!0),point:o.viewport.pixelFromPointNoRotate(o._getRotationPoint(!0),!0)}),o.viewport.getRotation(!0)%360===0&&o.getRotation(!0)%360===0&&o._drawer.viewer.viewport.getFlip()&&o._drawer._flip(),l.strokeRect(n.position.x*r.pixelDensityRatio,n.position.y*r.pixelDensityRatio,n.size.x*r.pixelDensityRatio,n.size.y*r.pixelDensityRatio);var c=(n.position.x+n.size.x/2)*r.pixelDensityRatio,u=(n.position.y+n.size.y/2)*r.pixelDensityRatio;l.translate(c,u),l.rotate(Math.PI/180*-this.viewport.getRotation(!0)),l.translate(-c,-u),n.x===0&&n.y===0&&(l.fillText("Zoom: "+this.viewport.getZoom(),n.position.x*r.pixelDensityRatio,(n.position.y-30)*r.pixelDensityRatio),l.fillText("Pan: "+this.viewport.getBounds().toString(),n.position.x*r.pixelDensityRatio,(n.position.y-20)*r.pixelDensityRatio)),l.fillText("Level: "+n.level,(n.position.x+10)*r.pixelDensityRatio,(n.position.y+20)*r.pixelDensityRatio),l.fillText("Column: "+n.x,(n.position.x+10)*r.pixelDensityRatio,(n.position.y+30)*r.pixelDensityRatio),l.fillText("Row: "+n.y,(n.position.x+10)*r.pixelDensityRatio,(n.position.y+40)*r.pixelDensityRatio),l.fillText("Order: "+s+" of "+i,(n.position.x+10)*r.pixelDensityRatio,(n.position.y+50)*r.pixelDensityRatio),l.fillText("Size: "+n.size.toString(),(n.position.x+10)*r.pixelDensityRatio,(n.position.y+60)*r.pixelDensityRatio),l.fillText("Position: "+n.position.toString(),(n.position.x+10)*r.pixelDensityRatio,(n.position.y+70)*r.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),o.getRotation(!0)%360!==0&&this._restoreRotationChanges(),o.viewport.getRotation(!0)%360===0&&o.getRotation(!0)%360===0&&o._drawer.viewer.viewport.getFlip()&&o._drawer._flip(),l.restore()}},debugRect:function(n){if(this.useCanvas){var i=this.context;i.save(),i.lineWidth=2*r.pixelDensityRatio,i.strokeStyle=this.debugGridColor[0],i.fillStyle=this.debugGridColor[0],i.strokeRect(n.x*r.pixelDensityRatio,n.y*r.pixelDensityRatio,n.width*r.pixelDensityRatio,n.height*r.pixelDensityRatio),i.restore()}},setImageSmoothingEnabled:function(n){this.useCanvas&&(this._imageSmoothingEnabled=n,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(n){n.msImageSmoothingEnabled=this._imageSmoothingEnabled,n.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(n){var i=this._getContext(n).canvas;return new r.Point(i.width,i.height)},getCanvasCenter:function(){return new r.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(n){var i=n.point?n.point.times(r.pixelDensityRatio):this.getCanvasCenter(),s=this._getContext(n.useSketch);s.save(),s.translate(i.x,i.y),this.viewer.viewport.flipped?(s.rotate(Math.PI/180*-n.degrees),s.scale(-1,1)):s.rotate(Math.PI/180*n.degrees),s.translate(-i.x,-i.y)},_flip:function(n){n=n||{};var i=n.point?n.point.times(r.pixelDensityRatio):this.getCanvasCenter(),s=this._getContext(n.useSketch);s.translate(i.x,0),s.scale(-1,1),s.translate(-i.x,0)},_restoreRotationChanges:function(n){var i=this._getContext(n);i.restore()},_calculateCanvasSize:function(){var n=r.pixelDensityRatio,i=this.viewport.getContainerSize();return{x:Math.round(i.x*n),y:Math.round(i.y*n)}},_calculateSketchCanvasSize:function(){var n=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return n;var i=Math.ceil(Math.sqrt(n.x*n.x+n.y*n.y));return{x:i,y:i}}}})(t),(function(r){r.Viewport=function(n){var i=arguments;i.length&&i[0]instanceof r.Point&&(n={containerSize:i[0],contentSize:i[1],config:i[2]}),n.config&&(r.extend(!0,n,n.config),delete n.config),this._margins=r.extend({left:0,top:0,right:0,bottom:0},n.margins||{}),delete n.margins,n.initialDegrees=n.degrees,delete n.degrees,r.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:r.DEFAULT_SETTINGS.springStiffness,animationTime:r.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:r.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:r.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:r.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:r.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:r.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:r.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:r.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:r.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:r.DEFAULT_SETTINGS.degrees,flipped:r.DEFAULT_SETTINGS.flipped,homeFillsViewer:r.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:r.DEFAULT_SETTINGS.silenceMultiImageWarnings},n),this._updateContainerInnerSize(),this.centerSpringX=new r.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new r.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new r.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new r.Spring({initial:n.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new r.Rect(0,0,1,1),1),this.goHome(!0),this.update()},r.Viewport.prototype={get degrees(){return r.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(n){r.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(n)},resetContentSize:function(n){return r.console.assert(n,"[Viewport.resetContentSize] contentSize is required"),r.console.assert(n instanceof r.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),r.console.assert(n.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),r.console.assert(n.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new r.Rect(0,0,1,n.y/n.x),n.x),this},setHomeBounds:function(n,i){r.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(n,i)},_setContentBounds:function(n,i){r.console.assert(n,"[Viewport._setContentBounds] bounds is required"),r.console.assert(n instanceof r.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),r.console.assert(n.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),r.console.assert(n.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=n.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(i),this._contentBounds=n.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(i),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:i,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var n=this._contentAspectRatio/this.getAspectRatio(),i;return this.homeFillsViewer?i=n>=1?n:1:i=n>=1?1:n,i/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var n=this._contentBounds.getCenter(),i=1/this.getHomeZoom(),s=i/this.getAspectRatio();return new r.Rect(n.x-i/2,n.y-s/2,i,s)},goHome:function(n){return this.viewer&&this.viewer.raiseEvent("home",{immediately:n}),this.fitBounds(this.getHomeBounds(),n)},getMinZoom:function(){var n=this.getHomeZoom(),i=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*n;return i},getMaxZoom:function(){var n=this.maxZoomLevel;return n||(n=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,n/=this._contentBounds.width),Math.max(n,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new r.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return r.extend({},this._margins)},setMargins:function(n){r.console.assert(r.type(n)==="object","[Viewport.setMargins] margins must be an object"),this._margins=r.extend({left:0,top:0,right:0,bottom:0},n),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(n){return this.getBoundsNoRotate(n).rotate(-this.getRotation(n))},getBoundsNoRotate:function(n){var i=this.getCenter(n),s=1/this.getZoom(n),o=s/this.getAspectRatio();return new r.Rect(i.x-s/2,i.y-o/2,s,o)},getBoundsWithMargins:function(n){return this.getBoundsNoRotateWithMargins(n).rotate(-this.getRotation(n),this.getCenter(n))},getBoundsNoRotateWithMargins:function(n){var i=this.getBoundsNoRotate(n),s=this._containerInnerSize.x*this.getZoom(n);return i.x-=this._margins.left/s,i.y-=this._margins.top/s,i.width+=(this._margins.left+this._margins.right)/s,i.height+=(this._margins.top+this._margins.bottom)/s,i},getCenter:function(n){var i=new r.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),s=new r.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),o,a,l,c,u,d,h,f;return n?i:this.zoomPoint?(o=this.pixelFromPoint(this.zoomPoint,!0),a=this.getZoom(),l=1/a,c=l/this.getAspectRatio(),u=new r.Rect(i.x-l/2,i.y-c/2,l,c),d=this._pixelFromPoint(this.zoomPoint,u),h=d.minus(o).rotate(-this.getRotation(!0)),f=h.divide(this._containerInnerSize.x*a),s.plus(f)):s},getZoom:function(n){return n?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(n){return Math.max(Math.min(n,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(n){var i=this.viewportToViewerElementRectangle(n).getBoundingBox(),s=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),o=!1,a=!1;if(!this.wrapHorizontal){var l=i.x+i.width,c=s.x+s.width,u,d,h;i.width>s.width?u=this.visibilityRatio*s.width:u=this.visibilityRatio*i.width,d=s.x-l+u,h=c-i.x-u,u>s.width?(i.x+=(d+h)/2,o=!0):h<0?(i.x+=h,o=!0):d>0&&(i.x+=d,o=!0)}if(!this.wrapVertical){var f=i.y+i.height,p=s.y+s.height,g,v,m;i.height>s.height?g=this.visibilityRatio*s.height:g=this.visibilityRatio*i.height,v=s.y-f+g,m=p-i.y-g,g>s.height?(i.y+=(v+m)/2,a=!0):m<0?(i.y+=m,a=!0):v>0&&(i.y+=v,a=!0)}var y=o||a,E=y?this.viewerElementToViewportRectangle(i):n.clone();return E.xConstrained=o,E.yConstrained=a,E.constraintApplied=y,E},_raiseConstraintsEvent:function(n){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:n})},applyConstraints:function(n){var i=this.getZoom(),s=this._applyZoomConstraints(i);i!==s&&this.zoomTo(s,this.zoomPoint,n);var o=this.getConstrainedBounds(!1);return o.constraintApplied&&(this.fitBounds(o,n),this._raiseConstraintsEvent(n)),this},ensureVisible:function(n){return this.applyConstraints(n)},_fitBounds:function(n,i){i=i||{};var s=i.immediately||!1,o=i.constraints||!1,a=this.getAspectRatio(),l=n.getCenter(),c=new r.Rect(n.x,n.y,n.width,n.height,n.degrees+this.getRotation()).getBoundingBox();c.getAspectRatio()>=a?c.height=c.width/a:c.width=c.height*a,c.x=l.x-c.width/2,c.y=l.y-c.height/2;var u=1/c.width;if(s)return this.panTo(l,!0),this.zoomTo(u,null,!0),o&&this.applyConstraints(!0),this;var d=this.getCenter(!0),h=this.getZoom(!0);this.panTo(d,!0),this.zoomTo(h,null,!0);var f=this.getBounds(),p=this.getZoom();if(p===0||Math.abs(u/p-1)<1e-8)return this.zoomTo(u,null,!0),this.panTo(l,s),o&&this.applyConstraints(!1),this;if(o){this.panTo(l,!1),u=this._applyZoomConstraints(u),this.zoomTo(u,null,!1);var g=this.getConstrainedBounds();this.panTo(d,!0),this.zoomTo(h,null,!0),this.fitBounds(g)}else{var v=c.rotate(-this.getRotation()),m=v.getTopLeft().times(u).minus(f.getTopLeft().times(p)).divide(u-p);this.zoomTo(u,m,s)}return this},fitBounds:function(n,i){return this._fitBounds(n,{immediately:i,constraints:!1})},fitBoundsWithConstraints:function(n,i){return this._fitBounds(n,{immediately:i,constraints:!0})},fitVertically:function(n){var i=new r.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(i,n)},fitHorizontally:function(n){var i=new r.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(i,n)},getConstrainedBounds:function(n){var i,s;return i=this.getBounds(n),s=this._applyBoundaryConstraints(i),s},panBy:function(n,i){var s=new r.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(s.plus(n),i)},panTo:function(n,i){return i?(this.centerSpringX.resetTo(n.x),this.centerSpringY.resetTo(n.y)):(this.centerSpringX.springTo(n.x),this.centerSpringY.springTo(n.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:n,immediately:i}),this},zoomBy:function(n,i,s){return this.zoomTo(this.zoomSpring.target.value*n,i,s)},zoomTo:function(n,i,s){var o=this;return this.zoomPoint=i instanceof r.Point&&!isNaN(i.x)&&!isNaN(i.y)?i:null,s?this._adjustCenterSpringsForZoomPoint(function(){o.zoomSpring.resetTo(n)}):this.zoomSpring.springTo(n),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:n,refPoint:i,immediately:s}),this},setRotation:function(n,i){return this.rotateTo(n,null,i)},getRotation:function(n){return n?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(n,i,s){return this.rotateTo(n,i,s)},rotateTo:function(n,i,s){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===n&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=i instanceof r.Point&&!isNaN(i.x)&&!isNaN(i.y)?i:null,s)if(this.rotationPivot){var o=n-this._oldDegrees;if(!o)return this.rotationPivot=null,this;this._rotateAboutPivot(n)}else this.degreesSpring.resetTo(n);else{var a=r.positiveModulo(this.degreesSpring.current.value,360),l=r.positiveModulo(n,360),c=l-a;c>180?l-=360:c<-180&&(l+=360);var u=a-l;this.degreesSpring.resetTo(n+u),this.degreesSpring.springTo(n)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:n,immediately:!!s,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(n,i,s){return this.rotateTo(this.degreesSpring.target.value+n,i,s)},resize:function(n,i){var s=this.getBoundsNoRotate(),o=s,a;this.containerSize.x=n.x,this.containerSize.y=n.y,this._updateContainerInnerSize(),i&&(a=n.x/this.containerSize.x,o.width=s.width*a,o.height=o.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:n,maintain:i});var l=this.fitBounds(o,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:n,maintain:i}),l},_updateContainerInnerSize:function(){this._containerInnerSize=new r.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var n=this;this._adjustCenterSpringsForZoomPoint(function(){n.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var i=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,i},_rotateAboutPivot:function(n){var i=n===!0,s=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(s.x),this.centerSpringY.shiftBy(s.y),i?this.degreesSpring.update():this.degreesSpring.resetTo(n);var o=this.degreesSpring.current.value-this._oldDegrees,a=s.rotate(o*-1).times(-1);this.centerSpringX.shiftBy(a.x),this.centerSpringY.shiftBy(a.y)},_adjustCenterSpringsForZoomPoint:function(n){if(this.zoomPoint){var i=this.pixelFromPoint(this.zoomPoint,!0);n();var s=this.pixelFromPoint(this.zoomPoint,!0),o=s.minus(i),a=this.deltaPointsFromPixels(o,!0);this.centerSpringX.shiftBy(a.x),this.centerSpringY.shiftBy(a.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else n()},deltaPixelsFromPointsNoRotate:function(n,i){return n.times(this._containerInnerSize.x*this.getZoom(i))},deltaPixelsFromPoints:function(n,i){return this.deltaPixelsFromPointsNoRotate(n.rotate(this.getRotation(i)),i)},deltaPointsFromPixelsNoRotate:function(n,i){return n.divide(this._containerInnerSize.x*this.getZoom(i))},deltaPointsFromPixels:function(n,i){return this.deltaPointsFromPixelsNoRotate(n,i).rotate(-this.getRotation(i))},pixelFromPointNoRotate:function(n,i){return this._pixelFromPointNoRotate(n,this.getBoundsNoRotate(i))},pixelFromPoint:function(n,i){return this._pixelFromPoint(n,this.getBoundsNoRotate(i))},_pixelFromPointNoRotate:function(n,i){return n.minus(i.getTopLeft()).times(this._containerInnerSize.x/i.width).plus(new r.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(n,i){return this._pixelFromPointNoRotate(n.rotate(this.getRotation(!0),this.getCenter(!0)),i)},pointFromPixelNoRotate:function(n,i){var s=this.getBoundsNoRotate(i);return n.minus(new r.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/s.width).plus(s.getTopLeft())},pointFromPixel:function(n,i){return this.pointFromPixelNoRotate(n,i).rotate(-this.getRotation(i),this.getCenter(i))},_viewportToImageDelta:function(n,i){var s=this._contentBoundsNoRotate.width;return new r.Point(n*this._contentSizeNoRotate.x/s,i*this._contentSizeNoRotate.x/s)},viewportToImageCoordinates:function(n,i){if(n instanceof r.Point)return this.viewportToImageCoordinates(n.x,n.y);if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||r.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(s===1){var o=this.viewer.world.getItemAt(0);return o.viewportToImageCoordinates(n,i,!0)}}return this._viewportToImageDelta(n-this._contentBoundsNoRotate.x,i-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(n,i){var s=this._contentBoundsNoRotate.width;return new r.Point(n/this._contentSizeNoRotate.x*s,i/this._contentSizeNoRotate.x*s)},imageToViewportCoordinates:function(n,i){if(n instanceof r.Point)return this.imageToViewportCoordinates(n.x,n.y);if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||r.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(s===1){var o=this.viewer.world.getItemAt(0);return o.imageToViewportCoordinates(n,i,!0)}}var a=this._imageToViewportDelta(n,i);return a.x+=this._contentBoundsNoRotate.x,a.y+=this._contentBoundsNoRotate.y,a},imageToViewportRectangle:function(n,i,s,o){var a=n;if(a instanceof r.Rect||(a=new r.Rect(n,i,s,o)),this.viewer){var l=this.viewer.world.getItemCount();if(l>1)this.silenceMultiImageWarnings||r.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(l===1){var c=this.viewer.world.getItemAt(0);return c.imageToViewportRectangle(n,i,s,o,!0)}}var u=this.imageToViewportCoordinates(a.x,a.y),d=this._imageToViewportDelta(a.width,a.height);return new r.Rect(u.x,u.y,d.x,d.y,a.degrees)},viewportToImageRectangle:function(n,i,s,o){var a=n;if(a instanceof r.Rect||(a=new r.Rect(n,i,s,o)),this.viewer){var l=this.viewer.world.getItemCount();if(l>1)this.silenceMultiImageWarnings||r.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(l===1){var c=this.viewer.world.getItemAt(0);return c.viewportToImageRectangle(n,i,s,o,!0)}}var u=this.viewportToImageCoordinates(a.x,a.y),d=this._viewportToImageDelta(a.width,a.height);return new r.Rect(u.x,u.y,d.x,d.y,a.degrees)},viewerElementToImageCoordinates:function(n){var i=this.pointFromPixel(n,!0);return this.viewportToImageCoordinates(i)},imageToViewerElementCoordinates:function(n){var i=this.imageToViewportCoordinates(n);return this.pixelFromPoint(i,!0)},windowToImageCoordinates:function(n){r.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var i=n.minus(r.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(i)},imageToWindowCoordinates:function(n){r.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var i=this.imageToViewerElementCoordinates(n);return i.plus(r.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(n){return this.pointFromPixel(n,!0)},viewportToViewerElementCoordinates:function(n){return this.pixelFromPoint(n,!0)},viewerElementToViewportRectangle:function(n){return r.Rect.fromSummits(this.pointFromPixel(n.getTopLeft(),!0),this.pointFromPixel(n.getTopRight(),!0),this.pointFromPixel(n.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(n){return r.Rect.fromSummits(this.pixelFromPoint(n.getTopLeft(),!0),this.pixelFromPoint(n.getTopRight(),!0),this.pixelFromPoint(n.getBottomLeft(),!0))},windowToViewportCoordinates:function(n){r.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var i=n.minus(r.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(i)},viewportToWindowCoordinates:function(n){r.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var i=this.viewportToViewerElementCoordinates(n);return i.plus(r.getElementPosition(this.viewer.element))},viewportToImageZoom:function(n){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||r.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(i===1){var s=this.viewer.world.getItemAt(0);return s.viewportToImageZoom(n)}}var o=this._contentSizeNoRotate.x,a=this._containerInnerSize.x,l=this._contentBoundsNoRotate.width,c=a/o*l;return n*c},imageToViewportZoom:function(n){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)this.silenceMultiImageWarnings||r.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(i===1){var s=this.viewer.world.getItemAt(0);return s.imageToViewportZoom(n)}}var o=this._contentSizeNoRotate.x,a=this._containerInnerSize.x,l=this._contentBoundsNoRotate.width,c=o/a/l;return n*c},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(n){return this.flipped===n?this:(this.flipped=n,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:n}),this)}}})(t),(function(r){r.TiledImage=function(a){var l=this;r.console.assert(a.tileCache,"[TiledImage] options.tileCache is required"),r.console.assert(a.drawer,"[TiledImage] options.drawer is required"),r.console.assert(a.viewer,"[TiledImage] options.viewer is required"),r.console.assert(a.imageLoader,"[TiledImage] options.imageLoader is required"),r.console.assert(a.source,"[TiledImage] options.source is required"),r.console.assert(!a.clip||a.clip instanceof r.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),r.EventSource.call(this),this._tileCache=a.tileCache,delete a.tileCache,this._drawer=a.drawer,delete a.drawer,this._imageLoader=a.imageLoader,delete a.imageLoader,a.clip instanceof r.Rect&&(this._clip=a.clip.clone()),delete a.clip;var c=a.x||0;delete a.x;var u=a.y||0;delete a.y,this.normHeight=a.source.dimensions.y/a.source.dimensions.x,this.contentAspectX=a.source.dimensions.x/a.source.dimensions.y;var d=1;a.width?(d=a.width,delete a.width,a.height&&(r.console.error("specifying both width and height to a tiledImage is not supported"),delete a.height)):a.height&&(d=a.height/this.normHeight,delete a.height);var h=a.fitBounds;delete a.fitBounds;var f=a.fitBoundsPlacement||t.Placement.CENTER;delete a.fitBoundsPlacement;var p=a.degrees||0;delete a.degrees;var g=a.ajaxHeaders;delete a.ajaxHeaders,r.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:r.DEFAULT_SETTINGS.springStiffness,animationTime:r.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:r.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:r.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:r.DEFAULT_SETTINGS.wrapVertical,immediateRender:r.DEFAULT_SETTINGS.immediateRender,blendTime:r.DEFAULT_SETTINGS.blendTime,alwaysBlend:r.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:r.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:r.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:r.DEFAULT_SETTINGS.iOSDevice,debugMode:r.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:r.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:r.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:r.DEFAULT_SETTINGS.placeholderFillStyle,opacity:r.DEFAULT_SETTINGS.opacity,preload:r.DEFAULT_SETTINGS.preload,compositeOperation:r.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:r.DEFAULT_SETTINGS.subPixelRoundingForTransparency},a),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new r.Spring({initial:c,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new r.Spring({initial:u,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new r.Spring({initial:d,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new r.Spring({initial:p,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),h&&this.fitBounds(h,f,!0),this._drawingHandler=function(v){l.viewer.raiseEvent("tile-drawing",r.extend({tiledImage:l},v))},this._ownAjaxHeaders={},this.setAjaxHeaders(g,!1)},r.extend(r.TiledImage.prototype,r.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(a){a!==this._fullyLoaded&&(this._fullyLoaded=a,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=r.now(),this._needsDraw=!0},update:function(){var a=this._xSpring.update(),l=this._ySpring.update(),c=this._scaleSpring.update(),u=this._degreesSpring.update();return a||l||c||u?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(a){return this.getBoundsNoRotate(a).rotate(this.getRotation(a),this._getRotationPoint(a))},getBoundsNoRotate:function(a){return a?new r.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new r.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return r.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(a){var l=this.getBoundsNoRotate(a);if(this._clip){var c=a?this._worldWidthCurrent:this._worldWidthTarget,u=c/this.source.dimensions.x,d=this._clip.times(u);l=new r.Rect(l.x+d.x,l.y+d.y,d.width,d.height)}return l.rotate(this.getRotation(a),this._getRotationPoint(a))},getTileBounds:function(a,l,c){var u=this.source.getNumTiles(a),d=(u.x+l%u.x)%u.x,h=(u.y+c%u.y)%u.y,f=this.source.getTileBounds(a,d,h);return this.getFlip()&&(f.x=1-f.x-f.width),f.x+=(l-d)/u.x,f.y+=this._worldHeightCurrent/this._worldWidthCurrent*((c-h)/u.y),f},getContentSize:function(){return new r.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var a=this.imageToWindowCoordinates(new r.Point(0,0)),l=this.imageToWindowCoordinates(this.getContentSize());return new r.Point(l.x-a.x,l.y-a.y)},_viewportToImageDelta:function(a,l,c){var u=c?this._scaleSpring.current.value:this._scaleSpring.target.value;return new r.Point(a*(this.source.dimensions.x/u),l*(this.source.dimensions.y*this.contentAspectX/u))},viewportToImageCoordinates:function(a,l,c){var u;return a instanceof r.Point?(c=l,u=a):u=new r.Point(a,l),u=u.rotate(-this.getRotation(c),this._getRotationPoint(c)),c?this._viewportToImageDelta(u.x-this._xSpring.current.value,u.y-this._ySpring.current.value):this._viewportToImageDelta(u.x-this._xSpring.target.value,u.y-this._ySpring.target.value)},_imageToViewportDelta:function(a,l,c){var u=c?this._scaleSpring.current.value:this._scaleSpring.target.value;return new r.Point(a/this.source.dimensions.x*u,l/this.source.dimensions.y/this.contentAspectX*u)},imageToViewportCoordinates:function(a,l,c){a instanceof r.Point&&(c=l,l=a.y,a=a.x);var u=this._imageToViewportDelta(a,l);return c?(u.x+=this._xSpring.current.value,u.y+=this._ySpring.current.value):(u.x+=this._xSpring.target.value,u.y+=this._ySpring.target.value),u.rotate(this.getRotation(c),this._getRotationPoint(c))},imageToViewportRectangle:function(a,l,c,u,d){var h=a;h instanceof r.Rect?d=l:h=new r.Rect(a,l,c,u);var f=this.imageToViewportCoordinates(h.getTopLeft(),d),p=this._imageToViewportDelta(h.width,h.height,d);return new r.Rect(f.x,f.y,p.x,p.y,h.degrees+this.getRotation(d))},viewportToImageRectangle:function(a,l,c,u,d){var h=a;a instanceof r.Rect?d=l:h=new r.Rect(a,l,c,u);var f=this.viewportToImageCoordinates(h.getTopLeft(),d),p=this._viewportToImageDelta(h.width,h.height,d);return new r.Rect(f.x,f.y,p.x,p.y,h.degrees-this.getRotation(d))},viewerElementToImageCoordinates:function(a){var l=this.viewport.pointFromPixel(a,!0);return this.viewportToImageCoordinates(l)},imageToViewerElementCoordinates:function(a){var l=this.imageToViewportCoordinates(a);return this.viewport.pixelFromPoint(l,!0)},windowToImageCoordinates:function(a){var l=a.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(l)},imageToWindowCoordinates:function(a){var l=this.imageToViewerElementCoordinates(a);return l.plus(t.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(a){var l=this._scaleSpring.current.value;return a=a.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new r.Rect((a.x-this._xSpring.current.value)/l,(a.y-this._ySpring.current.value)/l,a.width/l,a.height/l,a.degrees)},viewportToImageZoom:function(a){var l=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return l*a},imageToViewportZoom:function(a){var l=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return a/l},setPosition:function(a,l){var c=this._xSpring.target.value===a.x&&this._ySpring.target.value===a.y;if(l){if(c&&this._xSpring.current.value===a.x&&this._ySpring.current.value===a.y)return;this._xSpring.resetTo(a.x),this._ySpring.resetTo(a.y),this._needsDraw=!0}else{if(c)return;this._xSpring.springTo(a.x),this._ySpring.springTo(a.y),this._needsDraw=!0}c||this._raiseBoundsChange()},setWidth:function(a,l){this._setScale(a,l)},setHeight:function(a,l){this._setScale(a/this.normHeight,l)},setCroppingPolygons:function(a){var l=function(u){return u instanceof r.Point||typeof u.x=="number"&&typeof u.y=="number"},c=function(u){return u.map(function(d){try{if(l(d))return{x:d.x,y:d.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!r.isArray(a))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=a.map(function(u){return c(u)})}catch(u){r.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),r.console.error(u),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(a,l,c){l=l||r.Placement.CENTER;var u=r.Placement.properties[l],d=this.contentAspectX,h=0,f=0,p=1,g=1;if(this._clip&&(d=this._clip.getAspectRatio(),p=this._clip.width/this.source.dimensions.x,g=this._clip.height/this.source.dimensions.y,a.getAspectRatio()>d?(h=this._clip.x/this._clip.height*a.height,f=this._clip.y/this._clip.height*a.height):(h=this._clip.x/this._clip.width*a.width,f=this._clip.y/this._clip.width*a.width)),a.getAspectRatio()>d){var v=a.height/g,m=0;u.isHorizontallyCentered?m=(a.width-a.height*d)/2:u.isRight&&(m=a.width-a.height*d),this.setPosition(new r.Point(a.x-h+m,a.y-f),c),this.setHeight(v,c)}else{var y=a.width/p,E=0;u.isVerticallyCentered?E=(a.height-a.width/d)/2:u.isBottom&&(E=a.height-a.width/d),this.setPosition(new r.Point(a.x-h,a.y-f+E),c),this.setWidth(y,c)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(a){r.console.assert(!a||a instanceof r.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),a instanceof r.Rect?this._clip=a.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(a){this.flipped=!!a,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(a){a!==this.opacity&&(this.opacity=a,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(a){this._preload=!!a,this._needsDraw=!0},getRotation:function(a){return a?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(a,l){this._degreesSpring.target.value===a&&this._degreesSpring.isAtTargetValue()||(l?this._degreesSpring.resetTo(a):this._degreesSpring.springTo(a),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(a){return this.getBoundsNoRotate(a).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(a){a!==this.compositeOperation&&(this.compositeOperation=a,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},setAjaxHeaders:function(a,l){if(a===null&&(a={}),!r.isPlainObject(a)){console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}this._ownAjaxHeaders=a,this._updateAjaxHeaders(l)},_updateAjaxHeaders:function(a){if(a===void 0&&(a=!0),r.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=r.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,a){var l,c,u,d;for(var h in this.tilesMatrix){l=this.source.getNumTiles(h);for(var f in this.tilesMatrix[h]){c=(l.x+f%l.x)%l.x;for(var p in this.tilesMatrix[h][f])if(u=(l.y+p%l.y)%l.y,d=this.tilesMatrix[h][f][p],d.loadWithAjax=this.loadTilesWithAjax,d.loadWithAjax){var g=this.source.getTileAjaxHeaders(h,c,u);d.ajaxHeaders=r.extend({},this.ajaxHeaders,g)}else d.ajaxHeaders=null}}for(var v=0;v<this._imageLoader.jobQueue.length;v++){var m=this._imageLoader.jobQueue[v];m.loadWithAjax=m.tile.loadWithAjax,m.ajaxHeaders=m.tile.loadWithAjax?m.tile.ajaxHeaders:null}}},_setScale:function(a,l){var c=this._scaleSpring.target.value===a;if(l){if(c&&this._scaleSpring.current.value===a)return;this._scaleSpring.resetTo(a),this._updateForScale(),this._needsDraw=!0}else{if(c)return;this._scaleSpring.springTo(a),this._updateForScale(),this._needsDraw=!0}c||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var a=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),l=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,c=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(l/this.minPixelRatio)/Math.log(2))));return c=Math.max(c,this.source.minLevel||0),a=Math.min(a,c),{lowestLevel:a,highestLevel:c}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var a=this.lastDrawn.pop();a.beingDrawn=!1}var l=this.viewport,c=this._viewportToTiledImageRectangle(l.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var u=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(c=c.intersection(u),c===null)return}for(var d=this._getLevelsInterval(),h=d.lowestLevel,f=d.highestLevel,p=null,g=!1,v=r.now(),m=f;m>=h;m--){var y=!1,E=l.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(m),!0).x*this._scaleSpring.current.value;if(m===h||!g&&E>=this.minPixelRatio)y=!0,g=!0;else if(!g)continue;var S=l.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(m),!1).x*this._scaleSpring.current.value,b=l.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,w=this.immediateRender?1:b,x=Math.min(1,(E-.5)/.5),D=w/Math.abs(w-S);if(p=this._updateLevel(g,y,m,x,D,c,v,p),this._providesCoverage(this.coverage,m))break}this._drawTiles(this.lastDrawn),p&&!p.context2D?(this._loadTile(p,v),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(a,l,c){var u,d;this.wrapHorizontal?(u=r.positiveModulo(l.x,1),d=r.positiveModulo(c.x,1)):(u=Math.max(0,l.x),d=Math.min(1,c.x));var h,f,p=1/this.source.aspectRatio;this.wrapVertical?(h=r.positiveModulo(l.y,p),f=r.positiveModulo(c.y,p)):(h=Math.max(0,l.y),f=Math.min(p,c.y));var g=this.source.getTileAtPoint(a,new r.Point(u,h)),v=this.source.getTileAtPoint(a,new r.Point(d,f)),m=this.source.getNumTiles(a);return this.wrapHorizontal&&(g.x+=m.x*Math.floor(l.x),v.x+=m.x*Math.floor(c.x)),this.wrapVertical&&(g.y+=m.y*Math.floor(l.y/p),v.y+=m.y*Math.floor(c.y/p)),{topLeft:g,bottomRight:v}},_updateLevel:function(a,l,c,u,d,h,f,p){var g=h.getBoundingBox().getTopLeft(),v=h.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:a,level:c,opacity:u,visibility:d,drawArea:h,topleft:g,bottomright:v,currenttime:f,best:p}),this._resetCoverage(this.coverage,c),this._resetCoverage(this.loadingCoverage,c);var m=this._getCornerTiles(c,g,v),y=m.topLeft,E=m.bottomRight,S=this.source.getNumTiles(c),b=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(E.x+=1,this.wrapHorizontal||(E.x=Math.min(E.x,S.x-1)));for(var w=y.x;w<=E.x;w++)for(var x=y.y;x<=E.y;x++){var D;if(this.getFlip()){var N=(S.x+w%S.x)%S.x;D=w+S.x-N-N-1}else D=w;h.intersection(this.getTileBounds(c,D,x))!==null&&(p=this._updateTile(l,a,D,x,c,u,d,b,S,f,p))}return p},_updateTile:function(a,l,c,u,d,h,f,p,g,v,m){var y=this._getTile(c,u,d,v,g,this._worldWidthCurrent,this._worldHeightCurrent),E=l;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:y}),this._setCoverage(this.coverage,d,c,u,!1);var S=y.loaded||y.loading||this._isCovered(this.loadingCoverage,d,c,u);if(this._setCoverage(this.loadingCoverage,d,c,u,S),!y.exists||(a&&!E&&(this._isCovered(this.coverage,d,c,u)?this._setCoverage(this.coverage,d,c,u,!0):E=!0),!E))return m;if(this._positionTile(y,this.source.tileOverlap,this.viewport,p,f),!y.loaded)if(y.context2D)this._setTileLoaded(y);else{var b=this._tileCache.getImageRecord(y.cacheKey);b&&this._setTileLoaded(y,b.getData())}if(y.loaded){var w=this._blendTile(y,c,u,d,h,v);w&&(this._needsDraw=!0)}else y.loading?this._tilesLoading++:S||(m=this._compareTiles(m,y));return m},_getTile:function(a,l,c,u,d,h,f){var p,g,v,m,y,E,S,b,w,x,D=this.tilesMatrix,N=this.source;return D[c]||(D[c]={}),D[c][a]||(D[c][a]={}),(!D[c][a][l]||!D[c][a][l].flipped!=!this.flipped)&&(p=(d.x+a%d.x)%d.x,g=(d.y+l%d.y)%d.y,v=this.getTileBounds(c,a,l),m=N.getTileBounds(c,p,g,!0),y=N.tileExists(c,p,g),E=N.getTileUrl(c,p,g),S=N.getTilePostData(c,p,g),this.loadTilesWithAjax?(b=N.getTileAjaxHeaders(c,p,g),r.isPlainObject(this.ajaxHeaders)&&(b=r.extend({},this.ajaxHeaders,b))):b=null,w=N.getContext2D?N.getContext2D(c,p,g):void 0,x=new r.Tile(c,a,l,v,y,E,w,this.loadTilesWithAjax,b,m,S,N.getTileHashKey(c,p,g,E,b,S)),this.getFlip()?p===0&&(x.isRightMost=!0):p===d.x-1&&(x.isRightMost=!0),g===d.y-1&&(x.isBottomMost=!0),x.flipped=this.flipped,D[c][a][l]=x),x=D[c][a][l],x.lastTouchTime=u,x},_loadTile:function(a,l){var c=this;a.loading=!0,this._imageLoader.addJob({src:a.getUrl(),tile:a,source:this.source,postData:a.postData,loadWithAjax:a.loadWithAjax,ajaxHeaders:a.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(u,d,h){c._onTileLoad(a,l,u,d,h)},abort:function(){a.loading=!1}})},_onTileLoad:function(a,l,c,u,d){if(c)a.exists=!0;else{r.console.error("Tile %s failed to load: %s - error: %s",a,a.getUrl(),u),this.viewer.raiseEvent("tile-load-failed",{tile:a,tiledImage:this,time:l,message:u,tileRequest:d}),a.loading=!1,a.exists=!1;return}if(l<this.lastResetTime){r.console.warn("Ignoring tile %s loaded before reset: %s",a,a.getUrl()),a.loading=!1;return}var h=this,f=function(){var p=h.source,g=p.getClosestLevel();h._setTileLoaded(a,c,g,d)};this._midDraw?window.setTimeout(f,1):f()},_setTileLoaded:function(a,l,c,u){var d=0,h=!1,f=this;function p(){return h&&r.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),d++,g}function g(){d--,d===0&&(a.loading=!1,a.loaded=!0,a.hasTransparency=f.source.hasTransparency(a.context2D,a.getUrl(),a.ajaxHeaders,a.postData),a.context2D||f._tileCache.cacheTile({data:l,tile:a,cutoff:c,tiledImage:f}),f._needsDraw=!0)}var v=p();this.viewer.raiseEvent("tile-loaded",{tile:a,tiledImage:this,tileRequest:u,get image(){return r.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),l},data:l,getCompletionCallback:p}),h=!0,v()},_positionTile:function(a,l,c,u,d){var h=a.bounds.getTopLeft();h.x*=this._scaleSpring.current.value,h.y*=this._scaleSpring.current.value,h.x+=this._xSpring.current.value,h.y+=this._ySpring.current.value;var f=a.bounds.getSize();f.x*=this._scaleSpring.current.value,f.y*=this._scaleSpring.current.value;var p=c.pixelFromPointNoRotate(h,!0),g=c.pixelFromPointNoRotate(h,!1),v=c.deltaPixelsFromPointsNoRotate(f,!0),m=c.deltaPixelsFromPointsNoRotate(f,!1),y=g.plus(m.divide(2)),E=u.squaredDistanceTo(y);l||(v=v.plus(new r.Point(1,1))),a.isRightMost&&this.wrapHorizontal&&(v.x+=.75),a.isBottomMost&&this.wrapVertical&&(v.y+=.75),a.position=p,a.size=v,a.squaredDistance=E,a.visibility=d},_blendTile:function(a,l,c,u,d,h){var f=1e3*this.blendTime,p,g;if(a.blendStart||(a.blendStart=h),p=h-a.blendStart,g=f?Math.min(1,p/f):1,this.alwaysBlend&&(g*=d),a.opacity=g,this.lastDrawn.push(a),g===1)this._setCoverage(this.coverage,u,l,c,!0),this._hasOpaqueTile=!0;else if(p<f)return!0;return!1},_compareTiles:function(a,l){return!a||l.visibility>a.visibility||l.visibility===a.visibility&&l.squaredDistance<a.squaredDistance?l:a},_drawTiles:function(a){if(!(this.opacity===0||a.length===0&&!this.placeholderFillStyle)){var l=a[0],c;l&&(c=this.opacity<1||this.compositeOperation&&this.compositeOperation!=="source-over"||!this._isBottomItem()&&this.source.hasTransparency(l.context2D,l.getUrl(),l.ajaxHeaders,l.postData));var u,d,h=this.viewport.getZoom(!0),f=this.viewportToImageZoom(h);a.length>1&&f>this.smoothTileEdgesMinZoom&&!this.iOSDevice&&this.getRotation(!0)%360===0&&r.supportsCanvas&&this.viewer.useCanvas&&(c=!0,u=l.getScaleForEdgeSmoothing(),d=l.getTranslationForEdgeSmoothing(u,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0)));var p;c&&(u||(p=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox(),this._drawer.viewer.viewport.getFlip()&&(this.viewport.getRotation(!0)%360!==0||this.getRotation(!0)%360!==0)&&(p.x=this._drawer.viewer.container.clientWidth-(p.x+p.width)),p=p.times(r.pixelDensityRatio)),this._drawer._clear(!0,p)),u||(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:c}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:c}),this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip());var g=!1;if(this._clip){this._drawer.saveContext(c);var v=this.imageToViewportRectangle(this._clip,!0);v=v.rotate(-this.getRotation(!0),this._getRotationPoint(!0));var m=this._drawer.viewportToDrawerRectangle(v);u&&(m=m.times(u)),d&&(m=m.translate(d)),this._drawer.setClip(m,c),g=!0}if(this._croppingPolygons){var y=this;this._drawer.saveContext(c);try{var E=this._croppingPolygons.map(function(C){return C.map(function(P){var U=y.imageToViewportCoordinates(P.x,P.y,!0).rotate(-y.getRotation(!0),y._getRotationPoint(!0)),G=y._drawer.viewportCoordToDrawerCoord(U);return u&&(G=G.times(u)),d&&(G=G.plus(d)),G})});this._drawer.clipWithPolygons(E,c)}catch(C){r.console.error(C)}g=!0}if(this.placeholderFillStyle&&this._hasOpaqueTile===!1){var S=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));u&&(S=S.times(u)),d&&(S=S.translate(d));var b=null;typeof this.placeholderFillStyle=="function"?b=this.placeholderFillStyle(this,this._drawer.context):b=this.placeholderFillStyle,this._drawer.drawRectangle(S,b,c)}var w=o(this.subPixelRoundingForTransparency),x=!1;if(w===r.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS)x=!0;else if(w===r.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST){var D=this.viewer&&this.viewer.isAnimating();x=!D}for(var N=a.length-1;N>=0;N--)l=a[N],this._drawer.drawTile(l,this._drawingHandler,c,u,d,x,this.source),l.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:l});g&&this._drawer.restoreContext(c),u||(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(c),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(c)),c&&(u&&(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:!1}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:!1})),this._drawer.blendSketch({opacity:this.opacity,scale:u,translate:d,compositeOperation:this.compositeOperation,bounds:p}),u&&(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1))),u||this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip(),this._drawDebugInfo(a)}},_drawDebugInfo:function(a){if(this.debugMode)for(var l=a.length-1;l>=0;l--){var c=a[l];try{this._drawer.drawDebugInfo(c,a.length,l,this)}catch(u){r.console.error(u)}}},_providesCoverage:function(a,l,c,u){var d,h,f,p;if(!a[l])return!1;if(c===void 0||u===void 0){d=a[l];for(f in d)if(Object.prototype.hasOwnProperty.call(d,f)){h=d[f];for(p in h)if(Object.prototype.hasOwnProperty.call(h,p)&&!h[p])return!1}return!0}return a[l][c]===void 0||a[l][c][u]===void 0||a[l][c][u]===!0},_isCovered:function(a,l,c,u){return c===void 0||u===void 0?this._providesCoverage(a,l+1):this._providesCoverage(a,l+1,2*c,2*u)&&this._providesCoverage(a,l+1,2*c,2*u+1)&&this._providesCoverage(a,l+1,2*c+1,2*u)&&this._providesCoverage(a,l+1,2*c+1,2*u+1)},_setCoverage:function(a,l,c,u,d){if(!a[l]){r.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",l);return}a[l][c]||(a[l][c]={}),a[l][c][u]=d},_resetCoverage:function(a,l){a[l]={}}});var n=r.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function i(a){return a!==r.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&a!==r.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&a!==r.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function s(a){return i(a)?n:a}function o(a){if(typeof a=="number")return s(a);if(!a||!r.Browser)return n;var l=a[r.Browser.vendor];return i(l)&&(l=a["*"]),s(l)}})(t),(function(r){var n=function(s){r.console.assert(s,"[TileCache.cacheTile] options is required"),r.console.assert(s.tile,"[TileCache.cacheTile] options.tile is required"),r.console.assert(s.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=s.tile,this.tiledImage=s.tiledImage},i=function(s){r.console.assert(s,"[ImageRecord] options is required"),r.console.assert(s.data,"[ImageRecord] options.data is required"),this._tiles=[],s.create.apply(null,[this,s.data,s.ownerTile]),this._destroyImplementation=s.destroy.bind(null,this),this.getImage=s.getImage.bind(null,this),this.getData=s.getData.bind(null,this),this.getRenderedContext=s.getRenderedContext.bind(null,this)};i.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(s){r.console.assert(s,"[ImageRecord.addTile] tile is required"),this._tiles.push(s)},removeTile:function(s){for(var o=0;o<this._tiles.length;o++)if(this._tiles[o]===s){this._tiles.splice(o,1);return}r.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",s)},getTileCount:function(){return this._tiles.length}},r.TileCache=function(s){s=s||{},this._maxImageCacheCount=s.maxImageCacheCount||r.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},r.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(s){r.console.assert(s,"[TileCache.cacheTile] options is required"),r.console.assert(s.tile,"[TileCache.cacheTile] options.tile is required"),r.console.assert(s.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),r.console.assert(s.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var o=s.cutoff||0,a=this._tilesLoaded.length,l=this._imagesLoaded[s.tile.cacheKey];if(l||(s.data||(r.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),s.data=s.image),r.console.assert(s.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),l=this._imagesLoaded[s.tile.cacheKey]=new i({data:s.data,ownerTile:s.tile,create:s.tiledImage.source.createTileCache,destroy:s.tiledImage.source.destroyTileCache,getImage:s.tiledImage.source.getTileCacheDataAsImage,getData:s.tiledImage.source.getTileCacheData,getRenderedContext:s.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),l.addTile(s.tile),s.tile.cacheImageRecord=l,this._imagesLoadedCount>this._maxImageCacheCount){for(var c=null,u=-1,d=null,h,f,p,g,v,m,y=this._tilesLoaded.length-1;y>=0;y--)if(m=this._tilesLoaded[y],h=m.tile,!(h.level<=o||h.beingDrawn)){if(!c){c=h,u=y,d=m;continue}g=h.lastTouchTime,f=c.lastTouchTime,v=h.level,p=c.level,(g<f||g===f&&v>p)&&(c=h,u=y,d=m)}c&&u>=0&&(this._unloadTile(d),a=u)}this._tilesLoaded[a]=new n({tile:s.tile,tiledImage:s.tiledImage})},clearTilesFor:function(s){r.console.assert(s,"[TileCache.clearTilesFor] tiledImage is required");for(var o,a=0;a<this._tilesLoaded.length;++a)o=this._tilesLoaded[a],o.tiledImage===s&&(this._unloadTile(o),this._tilesLoaded.splice(a,1),a--)},getImageRecord:function(s){return r.console.assert(s,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[s]},_unloadTile:function(s){r.console.assert(s,"[TileCache._unloadTile] tileRecord is required");var o=s.tile,a=s.tiledImage;o.unload(),o.cacheImageRecord=null;var l=this._imagesLoaded[o.cacheKey];l.removeTile(o),l.getTileCount()||(l.destroy(),delete this._imagesLoaded[o.cacheKey],this._imagesLoadedCount--),a.viewer.raiseEvent("tile-unloaded",{tile:o,tiledImage:a})}}})(t),(function(r){r.World=function(n){var i=this;r.console.assert(n.viewer,"[World] options.viewer is required"),r.EventSource.call(this),this.viewer=n.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(s){i._autoRefigureSizes?i._figureSizes():i._needsSizesFigured=!0},this._figureSizes()},r.extend(r.World.prototype,r.EventSource.prototype,{addItem:function(n,i){if(r.console.assert(n,"[World.addItem] item is required"),r.console.assert(n instanceof r.TiledImage,"[World.addItem] only TiledImages supported at this time"),i=i||{},i.index!==void 0){var s=Math.max(0,Math.min(this._items.length,i.index));this._items.splice(s,0,n)}else this._items.push(n);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,n.addHandler("bounds-change",this._delegatedFigureSizes),n.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:n})},getItemAt:function(n){return r.console.assert(n!==void 0,"[World.getItemAt] index is required"),this._items[n]},getIndexOfItem:function(n){return r.console.assert(n,"[World.getIndexOfItem] item is required"),r.indexOf(this._items,n)},getItemCount:function(){return this._items.length},setItemIndex:function(n,i){r.console.assert(n,"[World.setItemIndex] item is required"),r.console.assert(i!==void 0,"[World.setItemIndex] index is required");var s=this.getIndexOfItem(n);if(i>=this._items.length)throw new Error("Index bigger than number of layers.");i===s||s===-1||(this._items.splice(s,1),this._items.splice(i,0,n),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:n,previousIndex:s,newIndex:i}))},removeItem:function(n){r.console.assert(n,"[World.removeItem] item is required");var i=r.indexOf(this._items,n);i!==-1&&(n.removeHandler("bounds-change",this._delegatedFigureSizes),n.removeHandler("clip-change",this._delegatedFigureSizes),n.destroy(),this._items.splice(i,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(n))},removeAll:function(){this.viewer._cancelPendingImages();var n,i;for(i=0;i<this._items.length;i++)n=this._items[i],n.removeHandler("bounds-change",this._delegatedFigureSizes),n.removeHandler("clip-change",this._delegatedFigureSizes),n.destroy();var s=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,i=0;i<s.length;i++)n=s[i],this._raiseRemoveItem(n)},resetItems:function(){for(var n=0;n<this._items.length;n++)this._items[n].reset()},update:function(){for(var n=!1,i=0;i<this._items.length;i++)n=this._items[i].update()||n;return n},draw:function(){for(var n=0;n<this._items.length;n++)this._items[n].draw();this._needsDraw=!1},needsDraw:function(){for(var n=0;n<this._items.length;n++)if(this._items[n].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(n){this._autoRefigureSizes=n,n&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(n){n=n||{};var i=n.immediately||!1,s=n.layout||r.DEFAULT_SETTINGS.collectionLayout,o=n.rows||r.DEFAULT_SETTINGS.collectionRows,a=n.columns||r.DEFAULT_SETTINGS.collectionColumns,l=n.tileSize||r.DEFAULT_SETTINGS.collectionTileSize,c=n.tileMargin||r.DEFAULT_SETTINGS.collectionTileMargin,u=l+c,d;!n.rows&&a?d=a:d=Math.ceil(this._items.length/o);var h=0,f=0,p,g,v,m,y;this.setAutoRefigureSizes(!1);for(var E=0;E<this._items.length;E++)E&&E%d===0&&(s==="horizontal"?(f+=u,h=0):(h+=u,f=0)),p=this._items[E],g=p.getBounds(),g.width>g.height?v=l:v=l*(g.width/g.height),m=v*(g.height/g.width),y=new r.Point(h+(l-v)/2,f+(l-m)/2),p.setPosition(y,i),p.setWidth(v,i),s==="horizontal"?h+=u:f+=u;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var n=this._homeBounds?this._homeBounds.clone():null,i=this._contentSize?this._contentSize.clone():null,s=this._contentFactor||0;if(!this._items.length)this._homeBounds=new r.Rect(0,0,1,1),this._contentSize=new r.Point(1,1),this._contentFactor=1;else{var o=this._items[0],a=o.getBounds();this._contentFactor=o.getContentSize().x/a.width;for(var l=o.getClippedBounds().getBoundingBox(),c=l.x,u=l.y,d=l.x+l.width,h=l.y+l.height,f=1;f<this._items.length;f++)o=this._items[f],a=o.getBounds(),this._contentFactor=Math.max(this._contentFactor,o.getContentSize().x/a.width),l=o.getClippedBounds().getBoundingBox(),c=Math.min(c,l.x),u=Math.min(u,l.y),d=Math.max(d,l.x+l.width),h=Math.max(h,l.y+l.height);this._homeBounds=new r.Rect(c,u,d-c,h-u),this._contentSize=new r.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==s||!this._homeBounds.equals(n)||!this._contentSize.equals(i))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(n){this.raiseEvent("remove-item",{item:n})}})})(t)})(kH);var Pge=kH.exports,uu=e1(Pge),Vo=window.OpenSeadragon;if(!Vo&&(Vo=uu,!Vo))throw new Error("OpenSeadragon is missing.");var SL="http://www.w3.org/2000/svg";Vo.Viewer&&(Vo.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo?this._svgOverlayInfo:(this._svgOverlayInfo=new CH(this),this._svgOverlayInfo)});var CH=function(e){let t=this;this._viewer=e,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(SL,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(SL,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){t.resize()}),this._viewer.addHandler("open",function(){t.resize()}),this._viewer.addHandler("rotate",function(){t.resize()}),this._viewer.addHandler("flip",function(){t.resize()}),this._viewer.addHandler("resize",function(){t.resize()}),this.resize()};CH.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let e=this._viewer.viewport.pixelFromPoint(new Vo.Point(0,0),!0),t=this._viewer.viewport.getZoom(!0),r=this._viewer.viewport.getRotation(),n=this._viewer.viewport.getFlip(),i=this._viewer.viewport._containerInnerSize.x,s=i*t,o=s;n&&(s=-s,e.x=-e.x+i),this._node.setAttribute("transform","translate("+e.x+","+e.y+") scale("+s+","+o+") rotate("+r+")")},onClick:function(e,t){new Vo.MouseTracker({element:e,clickHandler:t}).setTracking(!0)}};var Dge=e=>(Array.isArray(e["@context"])?e["@context"]:[e["@context"]]).map(t=>t?.replace("http://","https://")),Oge=e=>fetch(`${e.replace(/\/$/,"")}/info.json`).then(t=>t.json()).then(t=>t).catch(t=>{console.error(`The IIIF tilesource ${e.replace(/\/$/,"")}/info.json failed to load: ${t}`)}),Nge=e=>{let t,r;if(Array.isArray(e)&&(t=e[0],t)){let n;"@id"in t?n=t["@id"]:n=t.id,r=n}return r},xH=e=>{var t,r,n,i,s,o,a,l,c,u,d,h,f,p,g;let v,m={};switch(e?.type){case"SpecificResource":v=(n=(r=(t=e?.target)==null?void 0:t.partOf)==null?void 0:r[0])==null?void 0:n.id,m={manifest:v,canvas:(i=e?.target)==null?void 0:i.id},e!=null&&e.selector&&(m.selector=e.selector);break;case"Range":case"Annotation":let y=((s=e?.target)==null?void 0:s.source)||e?.target,E=(o=e?.target)==null?void 0:o.selector;m={manifest:(l=(a=y?.partOf)==null?void 0:a[0])==null?void 0:l.id,canvas:y?.id},(((c=e?.target)==null?void 0:c.type)==="SpecificResource"||(u=e?.target)!=null&&u.selector)&&(m.selector=E);break;case"Canvas":if(v=(h=(d=e?.partOf)==null?void 0:d[0])==null?void 0:h.id,m={manifest:v,canvas:e?.id},(f=e?.id)!=null&&f.includes("#xywh=")){let[S,b]=e.id.split("#xywh=");m.canvas=S,m.selector={type:"FragmentSelector",value:`xywh=${b}`}}break;case"Manifest":v=e?.id,m={collection:(g=(p=e?.partOf)==null?void 0:p[0])==null?void 0:g.id,manifest:e?.id};break;case"Collection":v=e?.id,m={collection:v};break}return{resourceId:v,active:m}},Mge=e=>{let t=["https://iiif.io/api/presentation/2/context.json","https://iiif.io/api/presentation/3/context.json"],r=new TypeError(`The IIIF content may not be a valid IIIF resource: ${t.join(", ")}`);e["@context"]||console.warn(r);let n=Dge(e);try{if(n.includes(t[0])){let i=bP(e);if(!i||!i.id||!i.type)throw r;return i}else{if(n.includes(t[1]))return e;throw r}}catch(i){console.warn(i)}},Fge=e=>{if(typeof e=="string"&&zge(e))return{resourceId:e};if(typeof e=="object"){let t=Mge(e);return{resourceId:t?.id,resourceObject:t}}else{let t=JSON.parse(bj(e)),{active:r}=xH(t);return{active:r,resourceId:t?.resourceId,resourceObject:t}}},Bge=e=>{let{resourceId:t,resourceObject:r}=Fge(e);return r||t},Uge=e=>e.items.map(t=>t.id)[0],Hge=e=>{let t=e.items.filter(r=>r.type==="Manifest").map(r=>r.id);return t.length==0?null:t[0]},zge=e=>{try{new URL(e)}catch{return!1}return!0},In=(e=>(e.TiledImage="tiledImage",e.SimpleImage="simpleImage",e))(In||{}),$ge=e=>{let t=Array.isArray(e?.service)&&e?.service.length>0,r=t?Nge(e?.service):e?.id,n=t?In.TiledImage:In.SimpleImage;return{uri:r,imageType:n}},Gge=(e,t)=>{let r=t?In.TiledImage:In.SimpleImage;return{uri:e,imageType:r}},JS=be("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),jge=be("div",{position:"relative",width:"100%",height:"100%",zIndex:"0",".clover-iiif-image-openseadragon-annotation":{position:"relative",backgroundColor:"transparent",border:"2px solid #0003",boxSizing:"content-box",borderRadius:"3px",boxShadow:"0 0 38vw 38vw transparent",transition:"box-shadow 100ms ease-in-out",zIndex:"0",label:{opacity:0,position:"absolute",lineHeight:"1.47rem",pointerEvents:"none",textAlign:"center",minWidth:"300px",maxWidth:"20vw",padding:"0.5rem",borderRadius:"3px",top:"calc(100% + 0.5rem)",left:"50%",transform:"translate(-50%, 0)",backgroundColor:"$primary",color:"$secondary",transition:"opacity 100ms ease-in-out"},"&[data-active=true]":{border:"2px solid $accent !important",boxShadow:"0 0 38vw 38vw #0003",zIndex:"99999999",label:{opacity:1}}}}),Vge=be("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${JS}`]:{display:"block"}},false:{[`${JS}`]:{display:"none"}}}}}),il=({className:e,id:t,label:r,children:n})=>{let i=r.toLowerCase().replace(/\s/g,"-");return I.createElement(VU,{id:t,className:e,"data-testid":"openseadragon-button","data-button":i},I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${t}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},I.createElement("title",{id:`${t}-svg-title`},r),n))},Wge=be("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),qge=()=>I.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),Kge=()=>I.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),Yge=()=>I.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),Xge=()=>I.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),bL=()=>I.createElement(I.Fragment,null,I.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),I.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),Qge=({_cloverViewerHasPlaceholder:e,config:t})=>{let{t:r}=Ai(),n=It(),{activeCanvas:i,plugins:s,vault:o,openSeadragonViewer:a}=n,l=o.get({id:i,type:"Canvas"});function c(){return s.filter(u=>{var d;return(d=u.imageViewer)==null?void 0:d.controls}).map((u,d)=>{var h,f,p,g;let v=(f=(h=u.imageViewer)==null?void 0:h.controls)==null?void 0:f.component;return I.createElement(v,{key:d,...(g=(p=u?.imageViewer)==null?void 0:p.controls)==null?void 0:g.componentProps,canvas:l,useViewerDispatch:Zr,useViewerState:It})})}return(0,k.useEffect)(()=>{if(!a)return;let u=a.viewport.getRotation();a.addHandler("home",()=>{a.viewport.setRotation(u)})},[a]),I.createElement(Wge,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:e},t.showZoomControl&&I.createElement(I.Fragment,null,I.createElement(il,{id:t.zoomInButton,label:r("imageZoomIn")},I.createElement(qge,null)),I.createElement(il,{id:t.zoomOutButton,label:r("imageZoomOut")},I.createElement(Kge,null))),t.showFullPageControl&&I.createElement(il,{id:t.fullPageButton,label:r("imageFullScreen")},I.createElement(Yge,null)),t.showRotationControl&&I.createElement(I.Fragment,null,I.createElement(il,{id:t.rotateRightButton,label:r("imageRotateRight")},I.createElement(bL,null)),I.createElement(il,{id:t.rotateLeftButton,label:r("imageRotateLeft")},I.createElement(bL,null))),t.showHomeControl&&I.createElement(il,{id:t.homeButton,label:r("imageResetZoom")},I.createElement(Xge,null)),c())};async function RH(e,t=3,r=500){try{return await e()}catch(n){if(t<=0)throw n;return await new Promise(i=>setTimeout(i,r)),RH(e,t-1,r)}}var Zge=e=>new Promise(t=>setTimeout(t,e)),wL=async(e,t,r=3,n=300)=>{for(let i=0;i<r;i++){let s=t?t-1:0,o=e.getItemAt(s);if(o)return o;await Zge(n)}throw new Error("No base item found at index 0 after retries")},Jge=({annotations:e,ariaLabel:t,config:r,uri:n,_cloverViewerHasPlaceholder:i,imageType:s,openSeadragonCallback:o})=>{let[a,l]=(0,k.useState)([]),[c,u]=(0,k.useState)([]),[d,h]=(0,k.useState)(),[f,p]=(0,k.useState)([]),g=Zr(),v=(0,k.useRef)(!1),m="clover-iiif-image-openseadragon-annotation",y=r.gestureSettingsMouse.scrollToZoom===!1;(0,k.useEffect)(()=>(v.current||(v.current=!0,d||h(uu(r))),()=>d?.destroy()),[]),(0,k.useEffect)(()=>{E()},[d,o]),(0,k.useEffect)(()=>{d&&JSON.stringify(n)!==JSON.stringify(c)&&(d.forceRedraw(),y&&d.addHandler("canvas-scroll",function(S){S.preventDefault=!1}),u(n))},[y,d,c,n]),(0,k.useEffect)(()=>{!c.length||!d||(d.close(),(async()=>{switch(s){case"simpleImage":let S=1,b=0;for(let w=0;w<c.length;w++){let x=c[w];if(e){let D=new Image;D.src=x,await D.decode(),p(N=>[...N,{width:D?.width,height:D?.height}])}try{if(w!==0){let D=(await wL(d.world,w)).getBounds();b=D.x+D.width,S=D.height}d.addSimpleImage({url:x,x:b,y:0,height:S,success:()=>{l(D=>[...D,x]),typeof g=="function"&&g({type:"updateOSDImageLoaded",OSDImageLoaded:!0})}})}catch(D){console.error(`Failed to load image at ${x}:`,D)}}break;case"tiledImage":{let w=1,x=0;for(let D=0;D<c.length;D++){let N=c[D];try{let C=await RH(()=>Oge(N),3,1e3);if(!C)throw new Error(`No tile source for ${N}`);if(D!==0){let P=(await wL(d.world,D)).getBounds();x=P.x+P.width,w=P.height}d.addTiledImage({tileSource:C,x,y:0,height:w,success:()=>{l(P=>[...P,N]),typeof g=="function"&&g({type:"updateOSDImageLoaded",OSDImageLoaded:!0})}})}catch(C){console.error(`Failed to load tile at ${N}:`,C)}}break}default:console.warn(`Unsupported imageType: "${s}"`);break}})().catch(S=>console.error("Error drawing tiles",S)))},[c,s,d]),(0,k.useEffect)(()=>{if(a){let S=0,b=()=>{if(S<3){let w=d?.world.getHomeBounds();w&&d?.viewport.fitBounds(w,!0),S++,setTimeout(b,50)}};b(),d?.addHandler("canvas-click",w=>{let x=d?.getOverlayById(w.originalTarget.id);if(x){let D=x?.getBounds(d.viewport);return D.x-=.1,D.y-=.1,D.width+=.2,D.height+=.2,d?.viewport.fitBounds(D,!1),w.preventDefaultAction=!0}})}},[a]),(0,k.useEffect)(()=>{function S(b,w,x){let D=b*x;if(w===0)return D;for(;w>0;){let N=d?.world.getItemAt(w-1);if(N){let C=N.getBounds().width;D+=C,w--}else break}return D}e&&(d?.clearOverlays(),e.forEach(b=>{var w,x,D,N;let{annotation:C,targetIndex:P}=b,U=((x=(w=d?.viewport)==null?void 0:w.getBounds())==null?void 0:x.width)||1,G=d?.world.getItemAt(P),K=G?G?.getBounds().width/G?.getContentSize().x:((D=f[P])==null?void 0:D.width)/U,B=Gre(C?.target),V=C!=null&&C.body?(N=C?.body[0])==null?void 0:N.value:void 0;if(B!=null&&B.rect){let{x:W,y:X,w:Y,h:O}=B?.rect,ie=S(W,P,K),le=new uu.Rect(ie,X*K,Y*K,O*K),F=document.createElement("button");if(F.classList.add(m),F.id=C.id,F.setAttribute("tabindex","0"),F.setAttribute("role","button"),F.setAttribute("data-active","true"),F.setAttribute("tabindex","0"),F.setAttribute("role","button"),F.setAttribute("data-active","false"),V){F.setAttribute("aria-label",V);let te=document.createElement("label");te.innerHTML=V,F.appendChild(te)}F.addEventListener("mousedown",te=>{te.stopPropagation(),te.preventDefault()}),F.addEventListener("touchstart",te=>{te.stopPropagation(),te.preventDefault()}),F.addEventListener("click",te=>{te.stopPropagation(),te.preventDefault()}),F.addEventListener("keydown",te=>{if(te.key==="Enter"){te.stopPropagation(),te.preventDefault();let ge=new uu.Rect(le.x-.1,le.y-.1,le.width+.2,le.height+.2);d?.viewport.fitBounds(ge,!1)}}),F.addEventListener("focus",()=>{F.setAttribute("data-active","true")}),F.addEventListener("mouseover",()=>{F.setAttribute("data-active","true")}),F.addEventListener("mouseout",()=>{F.removeAttribute("data-active")}),F.addEventListener("blur",()=>{F.removeAttribute("data-active")}),d?.addOverlay(F,le,uu.Placement.CENTER)}}),E())},[a,e]);function E(){d&&o?.(d)}return I.createElement(Vge,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":r.id,hasNavigator:r.showNavigator},I.createElement(Qge,{_cloverViewerHasPlaceholder:i,config:r}),r.showNavigator&&I.createElement(JS,{id:r.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),I.createElement(jge,{id:r.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...t&&{"aria-label":t}}))};function eme(e){return{id:`openseadragon-${e}`,navigatorId:`openseadragon-navigator-${e}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${e}`,homeButton:`reset-${e}`,rotateLeftButton:`rotateLeft-${e}`,rotateRightButton:`rotateRight-${e}`,zoomInButton:`zoomIn-${e}`,zoomOutButton:`zoomOut-${e}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1}}}var tme=({_cloverViewerHasPlaceholder:e=!1,annotations:t,body:r,instanceId:n,isTiledImage:i=!1,label:s,src:o="",openSeadragonCallback:a,openSeadragonConfig:l={}})=>{let c=n??_u(),u=typeof s=="string"?s:Tn(s),d={...eme(c),...l},h=Array.isArray(r)?r:r?[r]:[],f=Array.isArray(o)?o:o?[o]:[],p=[],g=In.SimpleImage;if(h.length){let m=h.map($ge);p=m.map(y=>y.uri).filter(Boolean),g=m.some(y=>y.imageType===In.TiledImage)?In.TiledImage:In.SimpleImage}else if(f.length){let m=f.map(y=>Gge(y,i));p=m.map(y=>y.uri).filter(Boolean),g=m.some(y=>y.imageType===In.TiledImage)?In.TiledImage:In.SimpleImage}if(!p.length)return null;let v=m=>{a?.(m)};return I.createElement(Pu,{FallbackComponent:u1},I.createElement(Jge,{_cloverViewerHasPlaceholder:e,annotations:t,ariaLabel:u,config:d,imageType:g,key:c,uri:p,openSeadragonCallback:v}))},rme=({isActive:e,isMedia:t,items:r,setIsInteractive:n})=>{let{vault:i}=It(),[s,o]=(0,k.useState)([]),a=s.length>1;if((0,k.useEffect)(()=>{o([]);let u=r.map(d=>{let h=Ws(i,d.id);if(!h)return null;let{id:f,width:p,height:g}=h[0];return f?{src:f,width:p||640,height:g||640,alt:d.label?l1(d.label):"placeholder image"}:null}).filter(d=>d!==null);u.length&&o(u)},[r,a]),!e||!s.length)return null;let l=s.map(u=>u.width/u.height*1),c=l.reduce((u,d)=>u+d,0);return I.createElement(jU,{onClick:()=>n(!0),isMedia:t,className:"clover-viewer-placeholder","data-active":e,"data-paged":a},s.map((u,d)=>{let h=l[d]/c*100;return I.createElement("img",{...u,key:d,alt:u.alt,style:{width:`${h}%`}})}))},nme=be("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),ime=I.forwardRef((e,t)=>{let r=I.useRef(null),n=(0,k.useCallback)(()=>{var s,o;if((s=t.current)!=null&&s.currentTime&&((o=t.current)==null?void 0:o.currentTime)>0)return;let a=t.current;if(!a)return;let l=new AudioContext,c=l.createMediaElementSource(a),u=l.createAnalyser(),d=r.current;if(!d)return;d.width=a.offsetWidth,d.height=a.offsetHeight;let h=d.getContext("2d");c.connect(u),u.connect(l.destination),u.fftSize=256;let f=u.frequencyBinCount,p=new Uint8Array(f);setInterval(function(){i(u,h,f,p,d.width,d.height)},20)},[t]);I.useEffect(()=>{!t||!t.current||(t.current.onplay=n)},[n,t]);function i(s,o,a,l,c,u){let d=c/a*2.6,h,f=0;s.getByteFrequencyData(l),o.fillStyle="#000000",o.fillRect(0,0,c,u);for(let p=0;p<a;p++)h=l[p]*2,o.fillStyle="rgba(78, 42, 132, 1)",o.fillRect(f,u-h,d,h),f+=d+6}return I.createElement(nme,{ref:r,role:"presentation"})}),sme=be("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",height:"100%",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),ome=({resource:e,ignoreCaptionLabels:t})=>{let r=l1(e.label,"en");return Array.isArray(r)&&r.some(n=>t.includes(n))?null:I.createElement("track",{key:e.id,src:e.id,label:Array.isArray(r)?r[0]:r,srcLang:"en","data-testid":"player-track"})},ame=["application/vnd.apple.mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],lme=({allSources:e,annotationResources:t,painting:r})=>{let[n,i]=I.useState(0),[s,o]=I.useState(),a=I.useRef(null),l=r?.type==="Sound",c=Zr(),u=It(),{activeCanvas:d,configOptions:h,contentStateAnnotation:f,vault:p}=u;return(0,k.useEffect)(()=>{if(!r.id||!a.current)return;if(a!=null&&a.current){let m=a.current;c({type:"updateActivePlayer",player:m}),m.src=r.id,m.load()}if(r.id.split(".").pop()!=="m3u8"&&r.format&&!ame.includes(r.format))return;let g={xhrSetup:function(m,y){m.withCredentials=!!h.withCredentials}},v=new vn(g);return v.attachMedia(a.current),v.on(vn.Events.MEDIA_ATTACHED,function(){v.loadSource(r.id)}),v.on(vn.Events.ERROR,function(m,y){if(y.fatal)switch(y.type){case vn.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${m} network error encountered, try to recover`),v.startLoad();break;case vn.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${m} media error encountered, try to recover`),v.recoverMediaError();break;default:v.destroy();break}}),()=>{if(v&&a.current){let m=a.current;v.detachMedia(),v.destroy(),m.currentTime=0}}},[h.withCredentials,r.id,r.format,c]),(0,k.useEffect)(()=>{var g,v,m,y;let E=p.get(d),S=(g=E.accompanyingCanvas)!=null&&g.id?Ws(p,(v=E.accompanyingCanvas)==null?void 0:v.id):null,b=(m=E.placeholderCanvas)!=null&&m.id?Ws(p,(y=E.placeholderCanvas)==null?void 0:y.id):null;S&&b?o(n===0?b[0].id:S[0].id):(S&&o(S[0].id),b&&o(b[0].id))},[d,n,p]),(0,k.useEffect)(()=>{let g=a?.current;if(!g)return;let v=null,m=!1,y=()=>{m||(m=!0,v=setInterval(()=>{g&&!g.paused&&!g.ended&&(i(g.currentTime),c({type:"updateActiveSelector",selector:{type:"PointSelector",t:Math.round(g.currentTime)}}))},500)),g&&g.paused&&(i(g.currentTime),c({type:"updateActiveSelector",selector:{type:"PointSelector",t:Math.round(g.currentTime)}}))};return g.addEventListener("timeupdate",y),()=>{g?.removeEventListener("timeupdate",y),v&&clearInterval(v)}},[r.id,d]),(0,k.useEffect)(()=>{var g,v;if(f){let m=a?.current;if(!m)return;let y=(g=f?.target)==null?void 0:g.selector,{type:E,t:S,value:b}=y||{};if((((v=f?.target)==null?void 0:v.source)||f?.target).id!==d)return;if(S&&E==="PointSelector"&&(i(S),m.currentTime=S),E==="FragmentSelector"&&b){let w=b.split("=")[1];if(!w)return;let x=w.split(",")[0];i(x),m.currentTime=x}}},[a,f]),I.createElement(sme,{css:{backgroundColor:h.canvasBackgroundColor,maxHeight:h.canvasHeight,position:"relative"},"data-testid":"player-wrapper",className:"clover-viewer-player-wrapper"},I.createElement("video",{id:"clover-iiif-video",key:r.id,ref:a,"data-src":r.id,controls:!0,height:r.height,width:r.width,crossOrigin:h.crossOrigin,poster:s,style:{maxHeight:h.canvasHeight,position:"relative",zIndex:"1"}},e.map(g=>I.createElement("source",{src:g.id,type:g.format,key:g.id})),t?.length>0&&t.map(g=>{let v=[];return g.items.forEach(m=>{p.get(m.id).body.forEach(y=>{let E=p.get(y.id);v.push(E)})}),v.map(m=>I.createElement(ome,{resource:m,ignoreCaptionLabels:h.ignoreCaptionLabels||[],key:m.id}))}),"Sorry, your browser doesn't support embedded videos."),l&&I.createElement(ime,{ref:a}))},cme=({label:e})=>I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},I.createElement("title",{id:"close-svg-title"},e),I.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),ume=({isMedia:e,label:t})=>I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},I.createElement("title",{id:"open-svg-title"},t),e?I.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):I.createElement(I.Fragment,null,I.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),I.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),dme=({handleToggle:e,isInteractive:t,isMedia:r})=>{let{t:n}=Ai();return I.createElement(WU,{onClick:e,isInteractive:t,isMedia:r,"data-testid":"placeholder-toggle"},t?I.createElement(cme,{label:n("commonClose")}):I.createElement(ume,{isMedia:r,label:n("commonOpen")}))},hme=({activeCanvas:e,annotationResources:t,contentSearchResource:r,isMedia:n,painting:i})=>{var s,o,a,l;let[c,u]=I.useState(0),[d,h]=I.useState(!1),[f,p]=I.useState([]),[g,v]=I.useState([]),[m,y]=I.useState(0),{configOptions:E,customDisplays:S,contentStateAnnotation:b,informationPanelResource:w,openSeadragonViewer:x,vault:D,viewerId:N,visibleCanvases:C}=It(),[P,U]=I.useState([]),G=!!b&&e===((o=(s=b?.target)==null?void 0:s.source)==null?void 0:o.id),K=Zr(),B=D.get(e),V=g.length&&!d&&!n,W=i?.length>1,X=`${N}-${nD(e+c+JSON.stringify(C)+m)}`,Y=()=>{h(!d),y(te=>te+1)},O=te=>{let ge=i.findIndex(Ce=>Ce.id===te);u(ge)},ie=S.find(te=>{var ge;let Ce=!1,{canvasId:de,paintingFormat:we}=te.target;if(Array.isArray(de)&&de.length>0&&(Ce=de.includes(e)),Array.isArray(we)&&we.length>0){let Le=((ge=i[c])==null?void 0:ge.format)||"";Ce=!!(Le&&we.includes(Le))}return Ce});(0,k.useEffect)(()=>{G&&V&&m===0&&Y()},[G,V]),(0,k.useEffect)(()=>{V&&(K({type:"updateOpenSeadragonViewer",openSeadragonViewer:void 0}),K({type:"updateActiveSelector",selector:void 0}))},[V]),(0,k.useEffect)(()=>{var te,ge,Ce;let de=[];if(w==="manifest-annotations"&&(t?.forEach((we,Le)=>{var Pe;(Pe=we?.items)==null||Pe.forEach(Se=>{let Ue=D.get(Se.id);Ue&&de.push({annotation:{...Ue,body:Ue.body.map(Ve=>D.get(Ve.id)||Ve)},targetIndex:Le})})}),b)){let we=((te=b?.target)==null?void 0:te.source)||b?.target;de.push({annotation:{...b,body:(ge=b?.body)==null?void 0:ge.map(Le=>D.get(Le.id)||Le)},targetIndex:C.findIndex(Le=>Le.id===we.id)})}w==="manifest-content-search"&&((Ce=r?.items)==null||Ce.forEach(we=>{let Le=D.get(we.id);if(Le){let Pe=C.findIndex(Se=>Se.id===Le.target.source.id);typeof Pe=="number"&&de.push({annotation:{...Le,body:Le.body.map(Se=>D.get(Se.id)||Se)},targetIndex:Pe})}})),U(de)},[t,r,b,w,C]),(0,k.useEffect)(()=>{if(!n){let te=C.map(Ce=>{let de=Ce.id,we=Ws(D,de);return we?we[c]:void 0}).filter(Boolean),ge=C.map(Ce=>{var de;let we=Ce.id,Le=D.get(we),Pe=(de=Le?.placeholderCanvas)==null?void 0:de.id;return!Pe||!Pe?null:{id:Pe,label:Le?.label}}).filter(Ce=>Ce!==null);p(te),v(ge)}},[c,e,C,n,B]),(0,k.useEffect)(()=>{u(0)},[C]);let le=te=>{te&&!V&&x?.id!==`openseadragon-${X}`&&K({type:"updateOpenSeadragonViewer",openSeadragonViewer:te})},F=(a=ie?.display)==null?void 0:a.component;return I.createElement(Qpe,{className:"clover-viewer-painting"},I.createElement(Zpe,{style:{backgroundColor:E.canvasBackgroundColor,height:E.canvasHeight==="auto"?"100%":E.canvasHeight}},!!g.length&&!n&&I.createElement(dme,{handleToggle:Y,isInteractive:d,isMedia:n}),!!(g!=null&&g.length)&&!n&&I.createElement(rme,{isActive:!!V,isMedia:n,items:g,setIsInteractive:h}),!V&&!ie&&(n?I.createElement(lme,{allSources:i,painting:i[c],annotationResources:t}):i&&I.createElement(tme,{_cloverViewerHasPlaceholder:!!(g!=null&&g.length),annotations:P,body:f,instanceId:X,key:X,openSeadragonCallback:le,openSeadragonConfig:E.openSeadragon})),!V&&F&&I.createElement(F,{id:e,annotationBody:i[c],hooks:{useViewerDispatch:Zr,useViewerState:It},...ie?.display.componentProps})),W&&I.createElement(wH,{value:(l=i[c])==null?void 0:l.id,onValueChange:O,maxHeight:"200px"},i?.map(te=>I.createElement(AH,{value:te?.id,key:te?.id,label:te?.label}))))},fme=({activeCanvas:e,annotationResources:t,searchServiceUrl:r,setContentSearchResource:n,contentSearchResource:i,isAudioVideo:s,items:o,painting:a})=>{var l,c;let{contentStateAnnotation:u,isInformationOpen:d,configOptions:h,sequence:f,visibleCanvases:p}=It(),{informationPanel:g}=h,v=p.map(S=>S.id),m=(t.length>0||v.includes((c=(l=u?.target)==null?void 0:l.source)==null?void 0:c.id))&&g?.renderAnnotation&&g?.renderToggle===!1&&d,y=g?.renderAbout&&d||m,E=g?.renderToggle;return I.createElement(wD,{className:"clover-viewer-content","data-testid":"clover-viewer-content"},I.createElement(AD,{"data-aside-active":y,"data-aside-toggle":E},I.createElement(hme,{activeCanvas:e,annotationResources:t,contentSearchResource:i,isMedia:s,painting:a}),f[1].length>1&&I.createElement(IV,{className:"clover-viewer-media-wrapper"},I.createElement(Xpe,{items:o,activeItem:0}))),y&&I.createElement(_V,{"data-aside-active":y,"data-aside-toggle":E},I.createElement(Ude,{activeCanvas:e,annotationResources:t,searchServiceUrl:r,setContentSearchResource:n,contentSearchResource:i})))},pme=be(ua.Trigger,{width:"30px",padding:"5px"}),IH=be(ua.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),gme=be("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),mme=be("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${bH}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),vme=be("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),yme=()=>{var e;let t=Zr(),r=It(),{activeManifest:n,collection:i,configOptions:s,vault:o}=r,a=s?.canvasHeight,l=c=>{t({type:"updateActiveCanvas",canvasId:void 0}),t({type:"updateActiveManifest",manifestId:c}),t({type:"updateViewerId",viewerId:_u()})};return I.createElement("div",{style:{margin:"0.75rem"}},I.createElement(wH,{label:i.label,maxHeight:a,value:n,onValueChange:l},(e=i?.items)==null?void 0:e.map(c=>I.createElement(AH,{value:c.id,key:c.id,thumbnail:c!=null&&c.thumbnail?o.get(c?.thumbnail):void 0,label:c.label}))))},Eme=(e,t=2500)=>{let{t:r}=Ai(),[n,i]=(0,k.useState)(""),s=(0,k.useCallback)(()=>{navigator.clipboard.writeText(e).then(()=>i(r("copySuccess")),()=>i(r("copyFailure")))},[e]);return(0,k.useEffect)(()=>{if(!n)return;let o=setTimeout(()=>i(""),t);return()=>clearTimeout(o)},[n]),[n,s]},Tme=be("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",lineHeight:"1em"}),Sme=({status:e})=>e?I.createElement(Tme,{"data-copy-status":e},e):null,AL=({textPrompt:e,textToCopy:t})=>{let[r,n]=Eme(t);return I.createElement("button",{onClick:n},e," ",I.createElement(Sme,{status:r}))},bme=({title:e})=>{let t="#ed1d33",r="#2873ab";return I.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},I.createElement("title",null,e),I.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},I.createElement("g",{transform:"scale(0.1)"},I.createElement("path",{style:{fill:r},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),I.createElement("path",{style:{fill:r},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),I.createElement("path",{style:{fill:t},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),I.createElement("path",{style:{fill:t},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),I.createElement("path",{style:{fill:r},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),I.createElement("path",{style:{fill:r},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),I.createElement("path",{style:{fill:t},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},am="Switch",[wme]=Ci(am),[Ame,kme]=wme(am),_H=k.forwardRef((e,t)=>{let{__scopeSwitch:r,name:n,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=e,[h,f]=k.useState(null),p=yt(t,E=>f(E)),g=k.useRef(!1),v=h?u||!!h.closest("form"):!0,[m,y]=Vs({prop:i,defaultProp:s??!1,onChange:c,caller:am});return(0,oe.jsxs)(Ame,{scope:r,checked:m,disabled:a,children:[(0,oe.jsx)(rt.button,{type:"button",role:"switch","aria-checked":m,"aria-required":o,"data-state":OH(m),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onClick:Je(e.onClick,E=>{y(S=>!S),v&&(g.current=E.isPropagationStopped(),g.current||E.stopPropagation())})}),v&&(0,oe.jsx)(DH,{control:h,bubbles:!g.current,name:n,value:l,checked:m,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});_H.displayName=am;var LH="SwitchThumb",PH=k.forwardRef((e,t)=>{let{__scopeSwitch:r,...n}=e,i=kme(LH,r);return(0,oe.jsx)(rt.span,{"data-state":OH(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});PH.displayName=LH;var Cme="SwitchBubbleInput",DH=k.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...i},s)=>{let o=k.useRef(null),a=yt(o,s),l=$1(r),c=z1(t);return k.useEffect(()=>{let u=o.current;if(!u)return;let d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==r&&h){let f=new Event("click",{bubbles:n});h.call(u,r),u.dispatchEvent(f)}},[l,r,n]),(0,oe.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:a,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});DH.displayName=Cme;function OH(e){return e?"checked":"unchecked"}var xme=_H,Rme=PH,Ime=be(xme,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),_me=be(Rme,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",span:{fontFamily:"monospace",fontSize:"0.8333rem",fontWeight:"700",display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center",color:"$primary",opacity:"0.382",userSelect:"none",pointerEvents:"none"},'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))",span:{opacity:"1",color:"$accent"}}});be("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"});var Lme=be("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),Pme=()=>{let{isInformationOpen:e}=It(),t=Zr(),{t:r}=Ai(),n=i=>{t({type:"updateInformationOpen",isInformationOpen:i})};return I.createElement(Lme,null,I.createElement(Ime,{checked:e,onCheckedChange:n,id:"information-toggle","aria-label":r("informationPanelToggle"),name:"toggled?"},I.createElement(_me,null,I.createElement("span",null,"i"))))},Dme=I.memo(Pme),Ome=be(ua.Trigger,{width:"30px",padding:"5px",marginBottom:"auto"}),Nme=be(IH,{h3:{color:"$primaryAlt",fontSize:"$2",fontWeight:"700",margin:"$2 0"},button:{},"& ul li":{marginBottom:"$1"}});function Mme(e){let{vault:t}=It();try{let r=e&&t.get(e);if(!r)throw new Error(`Vault entity ${e} not found.`);return r?.["@id"]||r?.id}catch(r){return console.error(r),e}}function kL(e,t){let r=[];if(!e)return r;for(let n of e)if(n.id){let i=t.get(n.id);i&&r.push(i)}return r}function Fme(){let{activeCanvas:e,activeManifest:t,vault:r}=It(),[n,i]=(0,k.useState)({root:[],canvas:[]});return(0,k.useEffect)(()=>{let s=r.get(t),o=r.get(e),a=s?.rendering,l=o?.rendering,c=kL(a,r),u=kL(l,r);i({root:c,canvas:u})},[e,t,r]),{...n}}function CL(e,t){return e.map(({format:r,id:n,label:i})=>{let s=Mme(n);return{format:r,id:s,label:Tn(i)||t}})}function Bme(){let e=Fme(),t=CL(e?.root||[],"Root Rendering Label"),r=CL(e?.canvas||[],"Canvas Rendering Label");return{allPages:t,individualPages:r}}var Ume=()=>{let{allPages:e,individualPages:t}=Bme(),r=e.length>0||t.length>0,n=i=>{window.open(i,"_blank")};return r?I.createElement(ua,null,I.createElement(Ome,{"data-testid":"download-button"},I.createElement(Ar,null,I.createElement(Ar.Download,null))),I.createElement(Nme,{"data-testid":"download-content"},t.length>0&&I.createElement(I.Fragment,null,I.createElement("h3",null,"Individual Pages"),I.createElement("ul",null,t.map(({format:i,id:s,label:o})=>I.createElement("li",{key:o},I.createElement("button",{onClick:()=>n(s)},o," (",i,")"))))),e.length>0&&I.createElement(I.Fragment,null,I.createElement("h3",null,"All Pages"),I.createElement("ul",null,e.map(({format:i,id:s,label:o})=>I.createElement("li",{key:o},I.createElement("button",{onClick:()=>n(s)},o," (",i,")"))))))):null},Hme=({manifestId:e,manifestLabel:t})=>{let r=It(),{collection:n,configOptions:i}=r,{informationPanel:s,showDownload:o,showIIIFBadge:a,showTitle:l}=i,c=o||a||s?.renderToggle,{t:u}=Ai();return I.createElement(mme,{className:"clover-viewer-header"},n!=null&&n.items?I.createElement(yme,null):I.createElement(gme,{className:l?"":"visually-hidden"},l&&I.createElement(cs,{label:t,className:"label"})),c&&I.createElement(vme,null,o&&I.createElement(Ume,null),a&&I.createElement(ua,null,I.createElement(pme,null,I.createElement(bme,{title:u("commonShare")})),I.createElement(IH,null,n?.items&&I.createElement("button",{onClick:d=>{d.preventDefault(),window.open(n.id,"_blank")}},u("shareCollectionJson")),I.createElement("button",{onClick:d=>{d.preventDefault(),window.open(e,"_blank")}},u("shareManifestJson"))," ",n?.items&&I.createElement(AL,{textPrompt:u("shareCollectionCopy"),textToCopy:n.id}),I.createElement(AL,{textPrompt:u("shareManifestCopy"),textToCopy:e}))),s?.renderToggle&&I.createElement(Dme,null)))},zme=e=>{let t=()=>window.matchMedia?window.matchMedia(e).matches:!1,[r,n]=(0,k.useState)(t);return(0,k.useEffect)(()=>{let i=()=>n(t);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)}),r},$me=({manifest:e,theme:t,iiifContentSearchQuery:r})=>{var n;let i=It(),s=Zr(),{activeCanvas:o,isInformationOpen:a,vault:l,configOptions:c,visibleCanvases:u}=i,d=["100%","auto"],h=c?.canvasHeight&&d.includes(c?.canvasHeight),[f,p]=(0,k.useState)(!1),[g,v]=(0,k.useState)([]),[m,y]=(0,k.useState)([]),[E,S]=(0,k.useState)(),b=zme(SD.sm),[w,x]=(0,k.useState)(),D=(0,k.useCallback)(C=>{s({type:"updateInformationOpen",isInformationOpen:C})},[s]);(0,k.useEffect)(()=>{var C;(C=c?.informationPanel)!=null&&C.open&&D(!b)},[b,(n=c?.informationPanel)==null?void 0:n.open]),(0,k.useEffect)(()=>{},[b]),(0,k.useEffect)(()=>{let C=Ws(l,o);C&&(p(["Sound","Video"].indexOf(C[0].type)>-1),v(C));let P=Aj(l,e,o);s({type:"updateVisibleCanvases",visibleCanvases:P})},[o,b,e,l,s]),(0,k.useEffect)(()=>{(async()=>{let C=await Promise.all(u.map(P=>qj(l,P.id)));y(C.flat())})()},[u]);let N=e.service.some(C=>["SearchService1","SearchService2"].includes(C.type||C["@type"]));return(0,k.useEffect)(()=>{if(N){let C=e.service.find(P=>["SearchService1","SearchService2"].includes(P.type||P["@type"]));C&&x(C.id||C["@id"])}},[e,N]),(0,k.useEffect)(()=>{var C;w&&((C=c.informationPanel)==null?void 0:C.renderContentSearch)!==!1&&vD(l,w,r).then(P=>S(P))},[w]),I.createElement(Pu,{FallbackComponent:u1},I.createElement(LV,{className:`${t} clover-viewer`,css:{background:c?.background},"data-absolute-position":h,"data-information-panel-open":a},I.createElement(Wj,{open:a,onOpenChange:D},I.createElement(Hme,{manifestLabel:e.label,manifestId:e.id}),I.createElement(fme,{activeCanvas:o,painting:g,annotationResources:m,searchServiceUrl:w,setContentSearchResource:S,contentSearchResource:E,items:e.items,isAudioVideo:f}))))},xL={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function Gme(e){return{ok:e.status>=200&&e.status<300,status:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),data:e.responseText,json:()=>JSON.parse(e.responseText)}}function RL(e,t=null){return{ok:!1,status:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),data:t||e.statusText,json:()=>JSON.parse(t||e.statusText)}}function jme(e,t=xL){let r=t.headers||xL.headers;return new Promise((n,i)=>{let s=new XMLHttpRequest;s.open("get",e),s.withCredentials=t.withCredentials,r&&Object.keys(r).forEach(o=>s.setRequestHeader(o,r[o])),s.onload=()=>{n(Gme(s))},s.onerror=()=>{i(RL(s,"Failed to make request."))},s.ontimeout=()=>{i(RL(s,"Request took longer than expected."))},s.send()})}var IL={"@context":"http://iiif.io/api/presentation/3/context.json",id:"https://example.org/iiif/content-state/specific-resource",type:"Annotation",motivation:["contentState"],target:{type:"SpecificResource",source:{id:"https://example.org/iiif/manifest/canvas/0",type:"Canvas",partOf:[{id:"https://example.org/iiif/manifest",type:"Manifest"}]}},body:[]},NH=({canvasIdCallback:e,contentStateCallback:t,customDisplays:r=[],plugins:n=[],customTheme:i,iiifContent:s,id:o,manifestId:a,options:l,iiifContentSearchQuery:c})=>{var u,d,h;let f=s;o&&(f=o),a&&(f=a);let p=oD((d=(u=l?.informationPanel)==null?void 0:u.vtt)==null?void 0:d.autoScroll);return I.createElement(q8,{initialState:{...yg,customDisplays:r,plugins:n,isAutoScrollEnabled:p.enabled,isInformationOpen:!!((h=l?.informationPanel)!=null&&h.open),vault:new eD({customFetcher:g=>jme(g,{withCredentials:l?.withCredentials,headers:l?.requestHeaders}).then(v=>JSON.parse(v.data))})}},I.createElement(Vme,{iiifContent:f,canvasIdCallback:e,contentStateCallback:t,customTheme:i,options:l,iiifContentSearchQuery:c}))},Vme=({canvasIdCallback:e,contentStateCallback:t,customTheme:r,iiifContent:n,options:i,iiifContentSearchQuery:s})=>{let o=Zr(),a=It(),{activeCanvas:l,activeManifest:c,activeSelector:u,isLoaded:d,vault:h,visibleCanvases:f}=a,[p,g]=(0,k.useState)(),[v,m]=(0,k.useState)(),y={};if(r&&(y=AV("custom",r)),(0,k.useEffect)(()=>{o({type:"updateActiveSelector",selector:void 0})},[l,c]),(0,k.useEffect)(()=>{var E;if(e&&e(l),t&&c&&l){let S=((E=f[0])==null?void 0:E.id)||l,b=`${c}/state/${nD(S+JSON.stringify(u))}`,w={...IL,id:b,target:{type:"SpecificResource",source:{id:S,type:"Canvas",partOf:[{id:c,type:"Manifest"}]},selector:u}};t({json:w,encoded:Sj(JSON.stringify(w))})}},[l,c,u,e,t,f]),(0,k.useEffect)(()=>{c&&h.load(c).then(E=>{if(!E)return;m(E);let S=fD(h,E),b=l||Uge(E);o({type:"updateActiveCanvas",canvasId:b}),o({type:"updateManifestSequence",sequence:S})}).catch(E=>{console.error(`Manifest failed to load: ${E}`)}).finally(()=>{o({type:"updateIsLoaded",isLoaded:!0})})},[n,c,o,h]),(0,k.useEffect)(()=>{o({type:"updateConfigOptions",configOptions:i}),(async()=>{var E;if(!n)return;let S=Bge(n);try{let b=typeof S=="object"&&S!=null&&S.id?await h.loadSync(S?.id,S):await h.load(S);g(b)}catch(b){if((!S||!S.id)&&console.error(`Failed to load resource: ${b}`),S!=null&&S.id&&S?.type==="Annotation"&&(E=S?.motivation)!=null&&E.includes("contentState")){let w=await h.loadSync(S.id,S);w&&g(w)}else S!=null&&S.id&&["Canvas","Manifest"].includes(S?.type)&&await h.loadSync(S.id,S)&&g({...IL,target:S})}})()},[o,n,i,h]),(0,k.useEffect)(()=>{if(p)switch(p.type){case"Annotation":if(p!=null&&p.motivation&&(Array.isArray(p?.motivation)?p!=null&&p.motivation.includes("contentState"):p?.motivation==="content-state")){let{active:S}=xH(p);o({type:"updateActiveManifest",manifestId:S.manifest}),o({type:"updateActiveCanvas",canvasId:S.canvas}),o({type:"updateContentStateAnnotation",contentStateAnnotation:p})}break;case"Collection":let E=Hge(p);o({type:"updateCollection",collection:p}),E&&o({type:"updateActiveManifest",manifestId:E});break;case"Manifest":o({type:"updateActiveManifest",manifestId:p.id});break}},[o,n,p]),!d)if(i!=null&&i.customLoadingComponent){let E=i.customLoadingComponent;return I.createElement(E,null)}else return I.createElement(I.Fragment,null,"Loading");return!v||!v.items?(console.log(`The IIIF manifest ${n} failed to load.`),I.createElement(I.Fragment,null)):v.items.length===0?(console.log(`The IIIF manifest ${n} does not contain canvases.`),I.createElement(I.Fragment,null)):I.createElement($me,{manifest:v,theme:y,key:v.id,iiifContentSearchQuery:s})};var Wme=()=>{let e=window.CLOVER_MANIFEST_URL;return jb.default.createElement(NH,{iiifContent:e,options:{credentials:"omit",canvasHeight:"50vh",language:{enabled:!0,defaultLanguages:["sv","no","en"]},informationPanel:{open:!1},showDownload:!0,showTitle:!1,openSeadragon:{gestureSettingsMouse:{scrollToZoom:!0}}}})};document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("clover-root");if(!e||!window.CLOVER_MANIFEST_URL)return;(0,MH.createRoot)(e).render(jb.default.createElement(Wme,null))});})();
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@samvera/clover-iiif/dist/viewer/index.mjs:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
  (*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)
  (*! openseadragon 4.1.1 *)
  (*! Built on 2024-04-01 *)
  (*! Git commit: v4.1.1-0-f90d9814 *)
  (*! http://openseadragon.github.io *)
  (*! License: http://openseadragon.github.io/license/ *)
*/
