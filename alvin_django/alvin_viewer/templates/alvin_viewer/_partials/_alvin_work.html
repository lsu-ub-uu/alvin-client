{% load i18n static metadata_wrangler %}

{% block jshead %}
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
    crossorigin="">
  </script>
{% endblock %}

<!-- Metadata -->
 <div class="flex flex-col w-full">
    <div data-xshow="activeTab === 'overview' || activeTab === 'all_metadata'" data-xcloak>
        {% for title in metadata.variant_titles %}
            {% include "./_metadata_row.html" with label=title.label value=title|alvin_work_name attribute=title.type %}
        {% endfor %}
    </div>
    <div>
        {% for agent in metadata.agents %}
            {% url 'alvin_viewer' agent.type agent.id as agent_url %}
            {% include "./_metadata_row.html" with label=agent.label url=agent_url value=agent.name.names|agent_name attribute=agent.role|role_join %}
        {% endfor %}
    </div>
    <div data-xshow="activeTab === 'overview' || activeTab === 'all_metadata'" data-xcloak>
        {% include "./_metadata_row.html" with label=metadata.origin_date.label value=metadata.origin_date.dates|dates_join %}
        {% include "./_metadata_row.html" with label=metadata.display_date.label value=metadata.display_date %}
    </div>
    <div>
        {% for place in metadata.origin_places %}
            {% url 'alvin_viewer' 'alvin-place' place.id as place_url %}
            {% include "./_metadata_row.html" with label=place.label url=place_url value=place.name|alvin_place_name extra_value=place|origin_countries %}
        {% endfor %}
    </div>
    <div data-xshow="activeTab === 'all_metadata'" data-xcloak>
        {% for date in metadata.date_other %}
            {% include "./_metadata_row.html" with label=date.dates.label value=date.dates|dates_join  %}
        {% endfor %}
        {% if metadata.longitude and metadata.latitude %}
            {% include "./_metadata_row.html" with label=metadata.longitude.label value=metadata.longitude.text %}
            {% include "./_metadata_row.html" with label=metadata.latitude.label value=metadata.latitude.text %}
        {% endif %}
        {% include "./_metadata_row.html" with label=metadata.incipit.label value=metadata.incipit.text|linebreaksbr %}
        {% include "./_metadata_row.html" with label=metadata.music_key.label value=metadata.music_key.items|join:"<br>" %}
        {% include "./_metadata_row.html" with label=metadata.music_key_other.label value=metadata.music_key_other.text %}
        {% include "./_metadata_row.html" with label=metadata.music_medium.label value=metadata.music_medium.items|join:"<br>" %}
        {% include "./_metadata_row.html" with label=metadata.music_medium_other.label value=metadata.music_medium_other.text %}
        {% include "./_metadata_row.html" with label=metadata.music_notation.label value=metadata.music_notation.items|join:"<br>" %}
        {% include "./_metadata_row.html" with label=metadata.note.label value=metadata.note.text|linebreaksbr %}
        {% include "./_metadata_row.html" with label=metadata.literature.label value=metadata.literature.text|linebreaksbr %}
        {% include "./_metadata_row.html" with label=metadata.created.label value=metadata.created.text %}
        {% include "./_metadata_row.html" with label=metadata.last_updated.label value=metadata.last_updated.text %}
    </div>
</div>

